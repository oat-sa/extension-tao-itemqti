{"version":3,"file":"routes.js","sources":["routes.js","../qtiCreator/model/helper/event.js","../qtiItem/helper/util.js","../qtiItem/helper/rendererConfig.js","../qtiItem/core/Element.js","../qtiCreator/helper/panel.js","../qtiItem/core/qtiClasses.js","../qtiItem/core/Loader.js","../qtiCreator/model/helper/invalidator.js","../qtiCreator/model/mixin/editable.js","../qtiCreator/model/qtiClasses.js","../qtiCreator/model/helper/container.js","../qtiCreator/model/mixin/editableContainer.js","../qtiItem/core/IdentifiedElement.js","../qtiItem/mixin/Mixin.js","../qtiItem/core/Container.js","../qtiItem/mixin/Container.js","../qtiItem/mixin/ContainerItemBody.js","../qtiItem/core/Item.js","../qtiItem/core/Stylesheet.js","../qtiCreator/model/Stylesheet.js","../qtiItem/core/ResponseProcessing.js","../qtiCreator/model/ResponseProcessing.js","../qtiItem/core/variables/VariableDeclaration.js","../qtiItem/core/variables/OutcomeDeclaration.js","../qtiCreator/model/variables/OutcomeDeclaration.js","../qtiItem/core/feedbacks/ModalFeedback.js","../qtiCreator/model/feedbacks/ModalFeedback.js","../qtiCreator/model/Item.js","../qtiCreator/helper/itemLoader.js","../qtiItem/helper/interactionHelper.js","../qtiRunner/core/Renderer.js","../qtiDefaultRenderer/renderers/config.js","../qtiCommonRenderer/renderers/config.js","../qtiCreator/renderers/config.js","../qtiCreator/renderers/Renderer.js","../qtiCreator/helper/creatorRenderer.js","../../taoQtiItemCss/qti!css","../qtiCommonRenderer/renderers/Renderer.js","../qtiCommonRenderer/tpl/instruction!tpl","../qtiCommonRenderer/helpers/Instruction.js","../qtiCommonRenderer/tpl/notification!tpl","../qtiCommonRenderer/helpers/Helper.js","../qtiCreator/helper/commonRenderer.js","../qtiCreator/helper/qtiElements.js","json!taoItems/preview/resources/device-list.json","../../taoItems/preview/tpl/preview!tpl","../../taoItems/preview/preview.js","../qtiCreator/editor/preparePrint.js","json!taoQtiItem/qtiCreator/editor/resources/font-stacks.json","../qtiCreator/tpl/toolbars/cssToggler!tpl","../qtiCreator/editor/styleEditor/styleEditor.js","../qtiCreator/editor/styleEditor/fontSelector.js","../qtiCreator/helper/popup.js","../qtiCreator/editor/styleEditor/farbtastic/farbtastic.js","../qtiCreator/editor/styleEditor/colorSelector.js","../qtiCreator/editor/styleEditor/fontSizeChanger.js","../qtiCreator/editor/styleEditor/itemResizer.js","../qtiCreator/tpl/notifications/genericFeedbackPopup!tpl","../qtiCreator/editor/styleEditor/styleSheetToggler.js","../qtiCreator/helper/itemSerializer.js","../qtiCreator/editor/editor.js","../qtiCreator/editor/customElementRegistryFactory.js","../qtiCreator/editor/customInteractionRegistry.js","../qtiCreator/tpl/toolbars/insertInteractionButton!tpl","../qtiCreator/tpl/toolbars/insertInteractionGroup!tpl","../qtiCreator/tpl/toolbars/tooltip!tpl","../qtiCreator/editor/interactionsToolbar.js","../qtiCreator/editor/infoControlRegistry.js","creator/main.js","../qtiCreator/editor/MathEditor.js","../qtiCreator/editor/ckEditor/dtdHandler.js","../qtiCreator/editor/ckEditor/ckConfigurator.js","../qtiCreator/editor/ckEditor/ckProtector.js","../qtiCreator/editor/gridEditor/config.js","../qtiCreator/editor/gridEditor/helper.js","../qtiCreator/editor/gridEditor/resizable.js","../qtiCreator/editor/gridEditor/content.js","../qtiCreator/widgets/helpers/content.js","../qtiCreator/tpl/notifications/deletingInfoBox!tpl","../qtiCreator/widgets/helpers/deletingState.js","../qtiCreator/editor/ckEditor/htmlEditor.js","../qtiCreator/editor/colorPicker/tpl/popup!tpl","../qtiCreator/editor/colorPicker/colorPicker.js","../qtiCreator/model/Container.js","../qtiXmlRenderer/renderers/config.js","../qtiXmlRenderer/renderers/Renderer.js","../qtiCreator/helper/xmlRenderer.js","../qtiCreator/helper/simpleParser.js","../qtiCreator/tpl/toolbars/htmlEditorTrigger!tpl","../qtiCreator/editor/containerEditor.js","../qtiCreator/editor/gridEditor/arrow.js","../qtiCreator/helper/gridUnits.js","../qtiCreator/editor/targetFinder.js","../qtiCreator/editor/gridEditor/droppable.js","../qtiCreator/editor/gridEditor/draggable.js","../qtiCreator/editor/jquery.gridEditor.js","../qtiCreator/editor/simpleContentEditableElement.js","../qtiCreator/editor/widgetToolbar.js","../qtiCreator/helper/adaptSize.js","../qtiCreator/helper/devTools.js","../qtiCreator/helper/dummyElement.js","../qtiCreator/helper/uploadMime.js","../qtiItem/core/Img.js","../qtiCreator/model/Img.js","../qtiItem/core/Math.js","../qtiCreator/model/Math.js","../qtiItem/core/Object.js","../qtiCreator/model/Object.js","../qtiCreator/model/helper/portableElement.js","../qtiItem/mixin/CustomElement.js","../qtiItem/core/PortableInfoControl.js","../qtiCreator/model/PortableInfoControl.js","../qtiItem/core/RubricBlock.js","../qtiCreator/model/RubricBlock.js","../qtiItem/core/choices/Choice.js","../qtiItem/core/choices/Hotspot.js","../qtiItem/core/choices/AssociableHotspot.js","../qtiCreator/model/choices/AssociableHotspot.js","../qtiItem/core/choices/Gap.js","../qtiCreator/model/choices/Gap.js","../qtiItem/core/choices/GapImg.js","../qtiCreator/model/choices/GapImg.js","../qtiItem/core/choices/TextVariableChoice.js","../qtiItem/core/choices/GapText.js","../qtiCreator/model/choices/GapText.js","../qtiItem/core/choices/HotspotChoice.js","../qtiCreator/model/choices/HotspotChoice.js","../qtiItem/mixin/ContainerInline.js","../qtiItem/core/choices/Hottext.js","../qtiCreator/model/choices/Hottext.js","../qtiItem/core/choices/InlineChoice.js","../qtiCreator/model/choices/InlineChoice.js","../qtiItem/core/choices/ContainerChoice.js","../qtiItem/core/choices/SimpleAssociableChoice.js","../qtiCreator/model/choices/SimpleAssociableChoice.js","../qtiItem/core/choices/SimpleChoice.js","../qtiCreator/model/choices/SimpleChoice.js","../qtiCreator/model/helper/response.js","../qtiItem/core/variables/ResponseDeclaration.js","../qtiItem/core/response/SimpleFeedbackRule.js","../qtiItem/helper/response.js","../qtiCreator/model/variables/ResponseDeclaration.js","../qtiCreator/model/mixin/editableInteraction.js","../qtiItem/core/interactions/Interaction.js","../qtiItem/core/interactions/Prompt.js","../qtiItem/core/interactions/BlockInteraction.js","../qtiItem/core/interactions/AssociateInteraction.js","../qtiCreator/model/interactions/AssociateInteraction.js","../qtiItem/core/interactions/ChoiceInteraction.js","../qtiCreator/model/interactions/ChoiceInteraction.js","../qtiItem/core/interactions/ExtendedTextInteraction.js","../qtiCreator/model/interactions/ExtendedTextInteraction.js","../qtiItem/core/interactions/ContainerInteraction.js","../qtiItem/core/interactions/GapMatchInteraction.js","../qtiCreator/model/interactions/GapMatchInteraction.js","../qtiItem/core/interactions/ObjectInteraction.js","../qtiItem/core/interactions/GraphicInteraction.js","../qtiItem/core/interactions/GraphicAssociateInteraction.js","../qtiCreator/model/interactions/GraphicAssociateInteraction.js","../qtiItem/core/interactions/GraphicGapMatchInteraction.js","../qtiCreator/model/interactions/GraphicGapMatchInteraction.js","../qtiItem/core/interactions/GraphicOrderInteraction.js","../qtiCreator/model/interactions/GraphicOrderInteraction.js","../qtiItem/core/interactions/HotspotInteraction.js","../qtiCreator/model/interactions/HotspotInteraction.js","../qtiItem/core/interactions/HottextInteraction.js","../qtiCreator/model/interactions/HottextInteraction.js","../qtiItem/core/interactions/InlineInteraction.js","../qtiItem/core/interactions/InlineChoiceInteraction.js","../qtiCreator/model/interactions/InlineChoiceInteraction.js","../qtiItem/core/interactions/MatchInteraction.js","../qtiCreator/model/interactions/MatchInteraction.js","../qtiItem/core/interactions/MediaInteraction.js","../qtiCreator/model/interactions/MediaInteraction.js","../qtiItem/core/interactions/OrderInteraction.js","../qtiCreator/model/interactions/OrderInteraction.js","../qtiItem/core/interactions/CustomInteraction.js","../qtiCreator/model/interactions/PortableCustomInteraction.js","../qtiItem/core/interactions/SelectPointInteraction.js","../qtiCreator/model/interactions/SelectPointInteraction.js","../qtiItem/core/interactions/SliderInteraction.js","../qtiCreator/model/interactions/SliderInteraction.js","../qtiItem/core/interactions/TextEntryInteraction.js","../qtiCreator/model/interactions/TextEntryInteraction.js","../qtiItem/core/interactions/UploadInteraction.js","../qtiCreator/model/interactions/UploadInteraction.js","../qtiCreator/model/pciCreatorContext.js","../qtiCreator/tpl/container!tpl","../qtiCreator/renderers/Container.js","../qtiCommonRenderer/tpl/img!tpl","../qtiCommonRenderer/renderers/Img.js","../qtiCreator/widgets/Widget.js","../qtiCreator/widgets/static/Widget.js","../qtiCreator/widgets/states/factory.js","../qtiCreator/widgets/states/Sleep.js","../qtiCreator/widgets/static/states/Sleep.js","../qtiCreator/widgets/states/Active.js","../qtiCreator/widgets/static/states/Active.js","../qtiCreator/widgets/states/Inactive.js","../qtiCreator/widgets/states/Deleting.js","../qtiCreator/widgets/static/states/states.js","../qtiCreator/widgets/static/img/states/Sleep.js","../qtiCreator/tpl/forms/static/img!tpl","../qtiCreator/widgets/helpers/validators.js","../../lib/polyfill/placeholders.js","../qtiCreator/widgets/helpers/formElement.js","../qtiCreator/widgets/static/helpers/inline.js","../qtiCreator/widgets/static/img/states/Active.js","../qtiCreator/widgets/static/img/states/states.js","../qtiCreator/widgets/static/helpers/widget.js","../qtiCreator/tpl/toolbars/media!tpl","../qtiCreator/widgets/static/img/Widget.js","../qtiCreator/renderers/Img.js","../qtiCommonRenderer/tpl/item!tpl","../qtiCommonRenderer/helpers/itemStylesheetHandler.js","../qtiCommonRenderer/renderers/Item.js","../qtiCreator/tpl/forms/item!tpl","../qtiCreator/widgets/item/states/Active.js","../qtiCreator/widgets/item/states/states.js","../qtiCreator/widgets/static/text/states/Sleep.js","../qtiCreator/tpl/forms/static/text!tpl","../qtiCreator/widgets/static/text/states/Active.js","../qtiCreator/widgets/static/text/states/states.js","../qtiCreator/tpl/toolbars/textBlock!tpl","../qtiCreator/widgets/static/text/Widget.js","../qtiCreator/widgets/item/Widget.js","../qtiCreator/tpl/item!tpl","../qtiCreator/renderers/Item.js","../qtiCommonRenderer/tpl/math!tpl","../qtiCommonRenderer/renderers/Math.js","../qtiCreator/widgets/static/math/states/Sleep.js","../qtiCreator/tpl/forms/static/math!tpl","../qtiCreator/widgets/static/math/states/Active.js","../qtiCreator/widgets/static/math/states/states.js","../qtiCreator/widgets/static/math/Widget.js","../qtiCreator/renderers/Math.js","../qtiCommonRenderer/tpl/modalFeedback!tpl","../qtiCommonRenderer/helpers/sizeFinder.js","../qtiCommonRenderer/renderers/ModalFeedback.js","../qtiCreator/widgets/static/modalFeedback/states/Sleep.js","../qtiCreator/tpl/forms/static/modalFeedback!tpl","../qtiCreator/widgets/static/modalFeedback/states/Active.js","../qtiCreator/widgets/static/modalFeedback/states/states.js","../qtiCreator/tpl/toolbars/okButton!tpl","../qtiCreator/widgets/static/modalFeedback/Widget.js","../qtiCreator/renderers/ModalFeedback.js","../qtiCommonRenderer/tpl/object!tpl","../qtiDefaultRenderer/widgets/Object.js","../qtiCommonRenderer/renderers/Object.js","../qtiCreator/widgets/static/object/states/Sleep.js","../qtiCreator/tpl/forms/static/object!tpl","../qtiCreator/widgets/static/object/states/Active.js","../qtiCreator/widgets/static/object/states/states.js","../qtiCreator/tpl/notifications/widgetOverlay!tpl","../qtiCreator/widgets/static/object/Widget.js","../qtiCreator/renderers/Object.js","../qtiCommonRenderer/tpl/infoControl!tpl","../qtiCommonRenderer/helpers/PortableElement.js","../runtime/qtiInfoControlContext.js","../qtiCommonRenderer/renderers/PortableInfoControl.js","../qtiCreator/renderers/PortableInfoControl.js","../qtiCommonRenderer/tpl/rubricBlock!tpl","../qtiCommonRenderer/renderers/RubricBlock.js","../qtiCreator/widgets/static/rubricBlock/states/Sleep.js","../qtiCreator/tpl/forms/static/rubricBlock!tpl","../qtiCreator/widgets/static/rubricBlock/states/Active.js","../qtiCreator/widgets/static/rubricBlock/states/states.js","../qtiCreator/widgets/static/rubricBlock/Widget.js","../qtiCreator/renderers/RubricBlock.js","../qtiCommonRenderer/tpl/choices/gap!tpl","../qtiCommonRenderer/renderers/choices/Gap.js","../qtiCreator/widgets/choices/Widget.js","../qtiCreator/widgets/states/Answer.js","../qtiCreator/widgets/states/Choice.js","../qtiCreator/widgets/states/Correct.js","../qtiCreator/widgets/states/Map.js","../qtiCreator/widgets/states/Question.js","../qtiCreator/tpl/notifications/invalidInfoBox!tpl","../qtiCreator/widgets/states/Invalid.js","../qtiCreator/widgets/states/states.js","../qtiCreator/widgets/choices/states/Sleep.js","../qtiCreator/widgets/choices/states/Active.js","../qtiCreator/tpl/toolbars/simpleChoice.content!tpl","../qtiCreator/widgets/choices/helpers/formElement.js","../qtiCreator/widgets/choices/states/Question.js","../qtiCreator/widgets/choices/states/Answer.js","../qtiCreator/widgets/choices/states/states.js","../qtiCreator/widgets/choices/states/Choice.js","../qtiCreator/tpl/forms/choices/gap!tpl","../qtiCreator/widgets/helpers/identifier.js","../qtiCreator/widgets/choices/gap/states/Choice.js","../qtiCreator/tpl/toolbars/gap!tpl","../qtiCreator/widgets/choices/gap/states/Question.js","../qtiCreator/widgets/choices/gap/states/states.js","../qtiCreator/widgets/choices/gap/Widget.js","../qtiCreator/renderers/choices/Gap.js","../qtiCommonRenderer/tpl/choices/choice!tpl","../qtiCommonRenderer/renderers/choices/GapText.js","../qtiCreator/tpl/forms/choices/simpleAssociableChoice!tpl","../qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice.js","../qtiCreator/widgets/choices/gapText/states/Choice.js","../qtiCreator/widgets/choices/gapText/states/states.js","../qtiCreator/widgets/choices/gapText/Widget.js","../qtiCreator/renderers/choices/GapText.js","../qtiCommonRenderer/tpl/choices/hottext!tpl","../qtiCommonRenderer/renderers/choices/Hottext.js","../qtiCreator/tpl/forms/choices/choice!tpl","../qtiCreator/widgets/choices/simpleChoice/states/Choice.js","../qtiCreator/widgets/choices/hottext/states/Choice.js","../qtiCreator/tpl/toolbars/hottext!tpl","../qtiCreator/widgets/choices/hottext/states/Question.js","../qtiCreator/widgets/choices/hottext/states/states.js","../qtiCreator/widgets/choices/hottext/Widget.js","../qtiCreator/renderers/choices/Hottext.js","../qtiCreator/renderers/choices/InlineChoice.js","../qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction.js","../qtiCreator/widgets/choices/simpleAssociableChoice/states/Question.js","../qtiCreator/widgets/choices/simpleAssociableChoice/states/states.js","../qtiCreator/widgets/choices/simpleAssociableChoice/Widget.js","../qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction.js","../qtiCommonRenderer/tpl/choices/simpleAssociableChoice.matchInteraction!tpl","../qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction.js","../qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction.js","../qtiCommonRenderer/tpl/choices/simpleChoice.choiceInteraction!tpl","../qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction.js","../qtiCreator/widgets/choices/simpleChoice/states/states.js","../qtiCreator/widgets/choices/simpleChoice/Widget.js","../qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction.js","../qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction.js","../qtiCreator/renderers/choices/SimpleChoice.OrderInteraction.js","../qtiCommonRenderer/tpl/interactions/associateInteraction!tpl","../qtiCommonRenderer/tpl/interactions/associateInteraction.pair!tpl","../qtiCommonRenderer/helpers/PciPrettyPrint.js","../qtiCommonRenderer/helpers/PciResponse.js","../qtiCommonRenderer/renderers/interactions/AssociateInteraction.js","../qtiCreator/tpl/toolbars/grip!tpl","../qtiCreator/widgets/helpers/movable.js","../qtiCreator/tpl/toolbars/interaction!tpl","../qtiCreator/widgets/interactions/Widget.js","../qtiCreator/widgets/interactions/states/Sleep.js","../qtiCreator/widgets/interactions/states/Active.js","../qtiCreator/tpl/toolbars/addChoice!tpl","../qtiCreator/widgets/interactions/states/Question.js","../qtiCreator/widgets/interactions/states/Choice.js","../qtiCreator/tpl/forms/response/responseForm!tpl","../qtiCreator/widgets/interactions/helpers/formElement.js","../qtiCreator/tpl/modalFeedback/rule!tpl","../qtiCreator/tpl/modalFeedback/panel!tpl","../qtiCreator/widgets/helpers/modalFeedbackRule.js","../qtiCreator/widgets/interactions/helpers/answerState.js","../qtiCreator/widgets/interactions/states/Answer.js","../qtiCreator/widgets/interactions/states/Correct.js","../qtiCreator/widgets/interactions/states/Map.js","../qtiCreator/widgets/states/Custom.js","../qtiCreator/widgets/interactions/states/Custom.js","../qtiCreator/widgets/interactions/states/states.js","../qtiCreator/widgets/interactions/blockInteraction/states/Question.js","../qtiCreator/widgets/interactions/blockInteraction/states/states.js","../qtiCreator/tpl/forms/interactions/associate!tpl","../qtiCreator/widgets/interactions/associateInteraction/helper.js","../qtiCreator/widgets/interactions/associateInteraction/states/Question.js","../qtiCreator/widgets/interactions/associateInteraction/states/Choice.js","../qtiCreator/widgets/interactions/associateInteraction/states/Answer.js","../qtiCreator/widgets/interactions/associateInteraction/ResponseWidget.js","../qtiCreator/widgets/interactions/associateInteraction/states/Correct.js","../qtiCreator/tpl/toolbars/associableChoice.answer!tpl","../qtiCreator/widgets/interactions/associateInteraction/states/Map.js","../qtiCreator/widgets/interactions/associateInteraction/states/states.js","../qtiCreator/widgets/interactions/associateInteraction/Widget.js","../qtiCreator/renderers/interactions/AssociateInteraction.js","../qtiCommonRenderer/tpl/interactions/choiceInteraction!tpl","../qtiCommonRenderer/renderers/interactions/ChoiceInteraction.js","../qtiCreator/tpl/forms/interactions/choice!tpl","../qtiCreator/widgets/interactions/choiceInteraction/states/Question.js","../qtiCreator/widgets/interactions/choiceInteraction/states/Answer.js","../qtiCreator/tpl/toolbars/simpleChoice.score!tpl","../qtiCreator/tpl/toolbars/simpleChoice.label!tpl","../qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget.js","../qtiCreator/widgets/interactions/choiceInteraction/states/Correct.js","../qtiCreator/widgets/interactions/choiceInteraction/states/Map.js","../qtiCreator/widgets/interactions/choiceInteraction/states/states.js","../qtiCreator/widgets/interactions/choiceInteraction/Widget.js","../qtiCreator/renderers/interactions/ChoiceInteraction.js","../qtiCommonRenderer/tpl/interactions/extendedTextInteraction!tpl","../qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction.js","../qtiCreator/tpl/forms/interactions/extendedText!tpl","../qtiCreator/widgets/interactions/extendedTextInteraction/states/Question.js","../qtiCreator/widgets/interactions/extendedTextInteraction/states/Answer.js","../qtiCreator/widgets/interactions/extendedTextInteraction/states/Correct.js","../qtiCreator/widgets/interactions/extendedTextInteraction/states/states.js","../qtiCreator/widgets/interactions/extendedTextInteraction/Widget.js","../qtiCreator/renderers/interactions/ExtendedTextInteraction.js","../qtiCommonRenderer/tpl/interactions/gapMatchInteraction!tpl","../qtiCommonRenderer/renderers/interactions/GapMatchInteraction.js","../qtiCreator/widgets/helpers/textWrapper.js","../qtiCreator/widgets/interactions/containerInteraction/states/Question.js","../qtiCreator/widgets/interactions/containerInteraction/states/states.js","../qtiCreator/tpl/forms/interactions/gapMatch!tpl","tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap-create","../qtiCreator/widgets/interactions/gapMatchInteraction/states/Question.js","../qtiCreator/widgets/interactions/gapMatchInteraction/states/Answer.js","../qtiCreator/widgets/interactions/gapMatchInteraction/states/Correct.js","../qtiCreator/tpl/forms/response/pairScoreMappingForm!tpl","../qtiCreator/tpl/forms/response/pairScoreForm!tpl","../qtiCreator/widgets/interactions/helpers/pairScoringForm.js","../qtiCreator/widgets/interactions/gapMatchInteraction/states/Map.js","../qtiCreator/widgets/interactions/gapMatchInteraction/states/states.js","../qtiCreator/widgets/interactions/gapMatchInteraction/Widget.js","../qtiCreator/renderers/interactions/GapMatchInteraction.js","../qtiCommonRenderer/tpl/interactions/graphicAssociateInteraction!tpl","json!taoQtiItem/qtiCommonRenderer/renderers/graphic-style.json","../qtiCommonRenderer/helpers/Graphic.js","../qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction.js","../qtiCreator/widgets/interactions/graphicInteraction/Widget.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Sleep.js","../qtiCreator/tpl/graphicInteraction/sidebar!tpl","../qtiCreator/widgets/interactions/helpers/shapeSideBar.js","../qtiCreator/widgets/interactions/helpers/shapeHandlers.js","../qtiCreator/widgets/interactions/helpers/shapeResizer.js","../qtiCreator/widgets/interactions/helpers/shapeMover.js","../qtiCreator/widgets/interactions/helpers/pathBuilder.js","../qtiCreator/widgets/interactions/helpers/shapeFactory.js","../qtiCreator/widgets/interactions/helpers/shapeEditor.js","../qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor.js","../qtiCreator/widgets/interactions/helpers/imageSelector.js","../qtiCreator/tpl/forms/interactions/graphicAssociate!tpl","../qtiCreator/tpl/forms/choices/associableHotspot!tpl","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Question.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Answer.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Correct.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Map.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/states/states.js","../qtiCreator/widgets/interactions/graphicAssociateInteraction/Widget.js","../qtiCreator/renderers/interactions/GraphicAssociateInteraction.js","../qtiCommonRenderer/tpl/interactions/graphicGapMatchInteraction!tpl","../qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction.js","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Sleep.js","../qtiCreator/tpl/forms/interactions/graphicGapMatch!tpl","../qtiCreator/tpl/forms/choices/gapImg!tpl","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Question.js","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Answer.js","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Correct.js","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map.js","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/states.js","../qtiCommonRenderer/tpl/choices/gapImg!tpl","../qtiCreator/widgets/interactions/graphicGapMatchInteraction/Widget.js","../qtiCreator/renderers/interactions/GraphicGapMatchInteraction.js","../qtiCommonRenderer/tpl/interactions/graphicOrderInteraction!tpl","../qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction.js","../qtiCreator/widgets/interactions/graphicOrderInteraction/states/Sleep.js","../qtiCreator/tpl/forms/interactions/graphicOrder!tpl","../qtiCreator/tpl/forms/choices/hotspot!tpl","../qtiCreator/widgets/interactions/graphicOrderInteraction/states/Question.js","../qtiCreator/widgets/interactions/graphicOrderInteraction/states/Answer.js","../qtiCreator/widgets/interactions/graphicOrderInteraction/states/Correct.js","../qtiCreator/widgets/interactions/graphicOrderInteraction/states/states.js","../qtiCreator/widgets/interactions/graphicOrderInteraction/Widget.js","../qtiCreator/renderers/interactions/GraphicOrderInteraction.js","../qtiCommonRenderer/tpl/interactions/hotspotInteraction!tpl","../qtiCommonRenderer/renderers/interactions/HotspotInteraction.js","../qtiCreator/widgets/interactions/hotspotInteraction/states/Sleep.js","../qtiCreator/tpl/forms/interactions/hotspot!tpl","../qtiCreator/widgets/interactions/hotspotInteraction/states/Question.js","../qtiCreator/widgets/interactions/hotspotInteraction/states/Answer.js","../qtiCreator/widgets/interactions/hotspotInteraction/states/Correct.js","../qtiCreator/widgets/interactions/helpers/graphicScorePopup.js","../qtiCreator/tpl/forms/response/graphicScoreMappingForm!tpl","../qtiCreator/widgets/interactions/hotspotInteraction/states/Map.js","../qtiCreator/widgets/interactions/hotspotInteraction/states/states.js","../qtiCreator/widgets/interactions/hotspotInteraction/Widget.js","../qtiCreator/renderers/interactions/HotspotInteraction.js","../qtiCommonRenderer/tpl/interactions/hottextInteraction!tpl","../qtiCommonRenderer/renderers/interactions/HottextInteraction.js","../qtiCreator/tpl/forms/interactions/hottext!tpl","tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext-create","../qtiCreator/widgets/interactions/hottextInteraction/states/Question.js","../qtiCreator/widgets/interactions/hottextInteraction/states/Answer.js","../qtiCreator/widgets/interactions/hottextInteraction/states/Correct.js","../qtiCreator/widgets/interactions/hottextInteraction/states/Map.js","../qtiCreator/widgets/interactions/hottextInteraction/states/states.js","../qtiCreator/widgets/interactions/hottextInteraction/Widget.js","../qtiCreator/renderers/interactions/HottextInteraction.js","../qtiCommonRenderer/tpl/interactions/inlineChoiceInteraction!tpl","../qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction.js","../qtiCreator/widgets/interactions/inlineInteraction/Widget.js","../qtiCreator/widgets/choices/inlineChoice/states/Question.js","../qtiCreator/widgets/choices/inlineChoice/states/Choice.js","../qtiCreator/widgets/choices/inlineChoice/states/states.js","../qtiCreator/widgets/choices/inlineChoice/Widget.js","../qtiCreator/widgets/interactions/inlineInteraction/states/Sleep.js","../qtiCreator/widgets/interactions/inlineInteraction/states/Active.js","../qtiCreator/widgets/interactions/inlineInteraction/states/states.js","../qtiCreator/tpl/forms/interactions/inlineChoice!tpl","../qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Question.js","../qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Answer.js","../qtiCreator/widgets/interactions/inlineChoiceInteraction/ResponseWidget.js","../qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Correct.js","../qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Map.js","../qtiCreator/widgets/interactions/inlineChoiceInteraction/states/states.js","../qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction!tpl","../qtiCreator/tpl/inlineInteraction/inlineChoice!tpl","../qtiCreator/widgets/interactions/inlineChoiceInteraction/Widget.js","../qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction.placeholder!tpl","../qtiCreator/renderers/interactions/InlineChoiceInteraction.js","../qtiCommonRenderer/tpl/interactions/matchInteraction!tpl","../../lib/jquery.color.js","../qtiCommonRenderer/renderers/interactions/MatchInteraction.js","../qtiCreator/tpl/toolbars/matchInteraction.adder!tpl","../qtiCreator/tpl/interactions/matchInteraction.row!tpl","../qtiCreator/tpl/interactions/matchInteraction.cell!tpl","../qtiCreator/widgets/interactions/matchInteraction/states/Question.js","../qtiCreator/widgets/interactions/matchInteraction/states/Answer.js","../qtiCreator/tpl/toolbars/matchInteraction.score!tpl","../qtiCreator/widgets/interactions/matchInteraction/ResponseWidget.js","../qtiCreator/widgets/interactions/matchInteraction/states/Correct.js","../qtiCreator/widgets/interactions/matchInteraction/states/Map.js","../qtiCreator/widgets/interactions/matchInteraction/states/states.js","../qtiCreator/widgets/interactions/matchInteraction/Widget.js","../qtiCreator/renderers/interactions/MatchInteraction.js","../qtiCommonRenderer/tpl/interactions/mediaInteraction!tpl","../qtiCommonRenderer/renderers/interactions/MediaInteraction.js","../qtiCreator/tpl/forms/interactions/media!tpl","../qtiCreator/widgets/interactions/mediaInteraction/states/Question.js","../qtiCreator/widgets/interactions/mediaInteraction/states/Sleep.js","../qtiCreator/widgets/interactions/mediaInteraction/states/states.js","../qtiCreator/widgets/interactions/mediaInteraction/Widget.js","../qtiCreator/tpl/interactions/mediaInteraction!tpl","../qtiCreator/renderers/interactions/MediaInteraction.js","../qtiCommonRenderer/tpl/interactions/orderInteraction!tpl","../qtiCommonRenderer/renderers/interactions/OrderInteraction.js","../qtiCreator/widgets/interactions/orderInteraction/states/Question.js","../qtiCreator/widgets/interactions/orderInteraction/states/Answer.js","../qtiCreator/widgets/interactions/orderInteraction/states/Correct.js","../qtiCreator/widgets/interactions/orderInteraction/states/states.js","../qtiCreator/widgets/interactions/orderInteraction/Widget.js","../qtiCreator/renderers/interactions/OrderInteraction.js","../qtiCommonRenderer/tpl/interactions/customInteraction!tpl","../runtime/qtiCustomInteractionContext.js","../qtiCommonRenderer/renderers/interactions/PortableCustomInteraction.js","../qtiCreator/renderers/interactions/PortableCustomInteraction.js","../qtiCommonRenderer/tpl/interactions/selectPointInteraction!tpl","../qtiCommonRenderer/renderers/interactions/SelectPointInteraction.js","../qtiCreator/widgets/interactions/selectPointInteraction/states/Sleep.js","../qtiCreator/tpl/forms/interactions/selectPoint!tpl","../qtiCreator/widgets/interactions/selectPointInteraction/states/Question.js","../qtiCreator/widgets/interactions/selectPointInteraction/states/Answer.js","../qtiCreator/widgets/interactions/selectPointInteraction/states/Map.js","../qtiCreator/widgets/interactions/selectPointInteraction/states/states.js","../qtiCreator/widgets/interactions/selectPointInteraction/Widget.js","../qtiCreator/renderers/interactions/SelectPointInteraction.js","../qtiCommonRenderer/tpl/interactions/sliderInteraction!tpl","../qtiCommonRenderer/renderers/interactions/SliderInteraction.js","../qtiCreator/tpl/forms/interactions/slider!tpl","../qtiCreator/widgets/interactions/sliderInteraction/states/Question.js","../qtiCreator/widgets/interactions/sliderInteraction/states/Answer.js","../qtiCreator/widgets/interactions/sliderInteraction/states/Correct.js","../qtiCreator/widgets/interactions/sliderInteraction/states/states.js","../qtiCreator/widgets/interactions/sliderInteraction/Widget.js","../qtiCreator/renderers/interactions/SliderInteraction.js","../qtiCommonRenderer/tpl/interactions/textEntryInteraction!tpl","../qtiCommonRenderer/renderers/interactions/TextEntryInteraction.js","../qtiCreator/tpl/forms/interactions/textEntry!tpl","../qtiCreator/widgets/interactions/textEntryInteraction/states/Question.js","../qtiCreator/widgets/interactions/textEntryInteraction/states/Answer.js","../qtiCreator/widgets/interactions/textEntryInteraction/states/Correct.js","../qtiCreator/tpl/inlineInteraction/textEntry!tpl","../qtiCreator/widgets/interactions/textEntryInteraction/states/Map.js","../qtiCreator/widgets/interactions/textEntryInteraction/states/states.js","../qtiCreator/tpl/inlineInteraction/textEntryInteraction!tpl","../qtiCreator/widgets/interactions/textEntryInteraction/Widget.js","../qtiCreator/tpl/inlineInteraction/textEntryInteraction.placeholder!tpl","../qtiCreator/renderers/interactions/TextEntryInteraction.js","../qtiCommonRenderer/tpl/interactions/uploadInteraction!tpl","../qtiCommonRenderer/renderers/interactions/UploadInteraction.js","../qtiCreator/tpl/forms/interactions/upload!tpl","../qtiCreator/widgets/interactions/uploadInteraction/states/Question.js","../qtiCreator/widgets/interactions/uploadInteraction/states/states.js","../qtiCreator/widgets/interactions/uploadInteraction/Widget.js","../qtiCreator/tpl/interactions/uploadInteraction!tpl","../qtiCreator/renderers/interactions/UploadInteraction.js","../qtiCreator/widgets/interactions/customInteraction/Widget.js","../qtiCreator/widgets/interactions/customInteraction/states/Question.js","../qtiCreator/widgets/interactions/customInteraction/states/Sleep.js","../qtiCreator/widgets/interactions/customInteraction/states/states.js","../qtiCreator/widgets/interactions/mediaInteraction/states/Answer.js","../qtiCreator/widgets/static/portableInfoControl/Widget.js","../qtiCreator/widgets/static/portableInfoControl/states/Sleep.js","../qtiCreator/widgets/static/portableInfoControl/states/states.js","../qtiXmlRenderer/tpl/container!tpl","../qtiXmlRenderer/renderers/Container.js","../qtiXmlRenderer/tpl/element!tpl","../qtiXmlRenderer/renderers/Img.js","../qtiXmlRenderer/tpl/item!tpl","../qtiXmlRenderer/renderers/Item.js","../qtiXmlRenderer/renderers/Math.js","../qtiXmlRenderer/renderers/Object.js","../qtiXmlRenderer/tpl/outcomeDeclaration!tpl","../qtiXmlRenderer/renderers/OutcomeDeclaration.js","../qtiXmlRenderer/tpl/portableInfoControl!tpl","../qtiXmlRenderer/tpl/interactions/portableCustomInteraction/properties!tpl","../qtiXmlRenderer/helper/portableElementTpl.js","../qtiXmlRenderer/renderers/PortableInfoControl.js","../qtiXmlRenderer/tpl/responseDeclaration!tpl","../qtiXmlRenderer/renderers/ResponseDeclaration.js","../qtiXmlRenderer/tpl/responseProcessing!tpl","../qtiXmlRenderer/tpl/responses/match_correct!tpl","../qtiXmlRenderer/tpl/responses/map_response!tpl","../qtiXmlRenderer/tpl/responses/map_response_point!tpl","../qtiXmlRenderer/renderers/ResponseProcessing.js","../qtiXmlRenderer/renderers/RubricBlock.js","../qtiXmlRenderer/renderers/Stylesheet.js","../qtiXmlRenderer/renderers/choices/AssociableHotspot.js","../qtiXmlRenderer/renderers/choices/Gap.js","../qtiXmlRenderer/tpl/choices/gapImg!tpl","../qtiXmlRenderer/renderers/choices/GapImg.js","../qtiXmlRenderer/renderers/choices/GapText.js","../qtiXmlRenderer/renderers/choices/HotspotChoice.js","../qtiXmlRenderer/renderers/choices/Hottext.js","../qtiXmlRenderer/renderers/choices/InlineChoice.js","../qtiXmlRenderer/renderers/choices/SimpleAssociableChoice.js","../qtiXmlRenderer/renderers/choices/SimpleChoice.js","../qtiXmlRenderer/renderers/feedbacks/ModalFeedback.js","../qtiXmlRenderer/tpl/interactions/blockInteraction!tpl","../qtiXmlRenderer/renderers/interactions/AssociateInteraction.js","../qtiXmlRenderer/renderers/interactions/ChoiceInteraction.js","../qtiXmlRenderer/renderers/interactions/EndAttemptInteraction.js","../qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction.js","../qtiXmlRenderer/renderers/interactions/GapMatchInteraction.js","../qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction.js","../qtiXmlRenderer/tpl/interactions/graphicGapMatchInteraction!tpl","../qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction.js","../qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction.js","../qtiXmlRenderer/renderers/interactions/HotspotInteraction.js","../qtiXmlRenderer/tpl/interactions/hottextInteraction!tpl","../qtiXmlRenderer/renderers/interactions/HottextInteraction.js","../qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction.js","../qtiXmlRenderer/tpl/interactions/matchInteraction!tpl","../qtiXmlRenderer/renderers/interactions/MatchInteraction.js","../qtiXmlRenderer/tpl/interactions/mediaInteraction!tpl","../qtiXmlRenderer/renderers/interactions/MediaInteraction.js","../qtiXmlRenderer/renderers/interactions/OrderInteraction.js","../qtiXmlRenderer/tpl/interactions/portableCustomInteraction/main!tpl","../qtiXmlRenderer/renderers/interactions/PortableCustomInteraction.js","../qtiXmlRenderer/renderers/interactions/Prompt.js","../qtiXmlRenderer/renderers/interactions/SelectPointInteraction.js","../qtiXmlRenderer/renderers/interactions/SliderInteraction.js","../qtiXmlRenderer/renderers/interactions/TextEntryInteraction.js","../qtiXmlRenderer/renderers/interactions/UploadInteraction.js","../qtiXmlRenderer/tpl/responses/rule!tpl","../qtiXmlRenderer/tpl/responses/rule_condition!tpl","../qtiXmlRenderer/tpl/responses/rule_correct!tpl","../qtiXmlRenderer/tpl/responses/rule_incorrect!tpl","../qtiXmlRenderer/renderers/responses/SimpleFeedbackRule.js"],"names":["define","QtiPreview","actions","index","QtiCreator","$","_","_ns","_ns_model","eventList","event","choiceCreated","choice","interaction","document","trigger","deleted","element","parent","isset","unset","off","getSerial","getList","addedNamespace","events","clone","map","e","initElementToWidgetListeners","ns","on","join","data","container","$container","type","getNs","getNsModel","util","buildSerial","prefix","id","chars","i","charAt","Math","floor","random","length","fullpath","src","baseUrl","replace","match","findInCollection","collectionNames","searchedSerial","found","isString","isArray","Error","each","collectionName","collection","split","nameToken","elt","isFunction","find","addMarkupNamespace","markup","removeMarkupNamespaces","getMarkupUsedNamespaces","namespaces","original","slash","node","push","uniq","rendererConfigHelper","getOptionsFromArguments","args","options","placeholder","subclass","renderer","arg","isRenderer","isPlainObject","console","log","Class","rendererConfig","_instances","Element","extend","qtiClass","serial","relatedItem","init","attributes","this","metaData","setAttributes","initContainer","arguments","initObject","is","getUsedIdentifiers","usedIds","elts","getComposingElements","attr","name","value","undefined","prop","key","removeData","removeAttr","removeAttributes","getAttributes","attrNames","getBody","object","getObject","v","isA","getUsedClasses","ret","composingElts","location","item","getRelatedItem","setRelatedItem","recursive","setRenderer","getRenderer","render","tplData","defaultData","tag","body","getAbsoluteUrl","merge","getData","rendering","renderTpl","replaceWith","postRender","altClassName","getContainer","$scope","toArray","arr","isEmpty","addClass","className","clazz","_containClass","hasClass","removeClass","regex","RegExp","issetElement","unsetElement","allClassStr","test","qtiElement","getElementBySerial","composingElements","_getItemContainer","showPanel","$panel","$fold","show","openSections","children","closeSections","initFormVisibilityListener","$itemContainer","_staticElements","img","rubricBlock","math","$formInteractionPanel","$formChoicePanel","$formResponsePanel","$formItemPanel","$formBodyElementPanel","$formTextBlockPanel","$formModalFeedbackPanel","$formStylePanel","$appearanceToggler","$menuLabel","$itemIcon","$styleIcon","_toggleAppearanceEditor","active","hide","text","delay","state","label","html","enableSubGroup","toggleInlineInteractionGroup","disableSubGroup","heading","section","panel","closed","initSidebarAccordion","$sidebar","$sections","$allTriggers","$heading","$section","parents","$closer","class","$opener","action","append","fn","classFn","preserveOthers","close","open","forceState","_toggleSections","sections","_toggleSubGroup","subGroup","_container","assessmentItem","responseProcessing","_simpleFeedbackRule","stylesheet","outcomeDeclaration","responseDeclaration","associableHotspot","gap","gapImg","gapText","hotspotChoice","hottext","inlineChoice","simpleAssociableChoice","simpleChoice","associateInteraction","choiceInteraction","endAttemptInteraction","extendedTextInteraction","gapMatchInteraction","graphicAssociateInteraction","graphicGapMatchInteraction","graphicOrderInteraction","hotspotInteraction","hottextInteraction","inlineChoiceInteraction","matchInteraction","mediaInteraction","orderInteraction","prompt","selectPointInteraction","sliderInteraction","textEntryInteraction","uploadInteraction","feedbackBlock","feedbackInline","modalFeedback","customInteraction","infoControl","qtiClasses","loadPortableCustomElementData","portableElement","typeIdentifier","entryPoint","properties","libraries","Loader","classesLocation","qti","setClassesLocation","getRequiredClasses","union","loadRequiredClasses","callback","reload","requiredClasses","required","requiredClass","_this","require","QtiClass","prototype","call","getLoadedClasses","keys","loadItemData","Qti","loadContainer","outcomes","outcome","buildOutcome","addOutcomeDeclaration","feedbacks","feedback","buildElement","addModalFeedback","stylesheets","addStylesheet","responses","response","buildResponse","addResponseDeclaration","feedbackRules","forIn","fbData","buildSimpleFeedbackRule","setResponseProcessing","buildResponseProcessing","setNamespaces","loadElement","loadElements","allElements","elementData","loadElementData","template","howMatch","defaultValue","correctResponse","correctResponses","mapEntries","size","mapping","areaMapping","mappingAttributes","feedbackRule","condition","comparedValue","comparedOutcome","feedbackOutcome","feedbackThen","modalFeedbacks","feedbackElse","rp","processingType","xml","bodyObject","bodyData","elements","eltData","setElement","bdy","loadObjectData","loadInteractionData","loadChoiceData","loadMathData","loadPicData","buildInteractionChoices","loadPciData","choices","set","matchSet","addChoice","gapImgs","addGapImg","val","_alt","setMathML","mathML","annotations","pci","pic","invalidator","completelyValid","invalidElements","valid","invalid","message","stateName","isValid","_removeSelf","removed","related","removeGapImg","removeChoice","beforeRemove","removeElement","_removeElement","containerPropName","eltToBeRemoved","targetElt","targetSerial","methods","getDefaultAttributes","_super","remove","defaults","graphicInteraction","createElements","values","newElts","newBody","subClass","setElements","$doc","buildIdentifier","afterCreate","containerHelper","IdentifiedElement","useSuffix","suffix","exists","augment","targetClass","methodName","Object","hasOwnProperty","_parent","apply","Container","returnValue","indexOf","getElements","getElement","elementsData","tpl","renderDirect","contentModel","Mixin","Item","getInteractions","interactions","getResponseDeclaration","identifier","elementCollection","getResponses","addNamespace","uri","getNamespaces","removeStyleSheet","stylesheetExists","href","trim","$dummy","$children","Stylesheet","editable","title","media","ResponseProcessing","setProcessingType","r","setTemplate","VariableDeclaration","OutcomeDeclaration","ModalFeedback","showHide","editableContainer","adaptive","timeDependent","createResponseProcessing","createStyleSheet","createOutcomeDeclaration","createModalFeedback","deleteResponseDeclaration","helpers","_generateIdentifier","pos","lastIndexOf","substr","creatorLoader","loadItem","config","ajax","url","_url","dataType","done","itemData","loader","cardinality","baseType","convertChoices","outputType","c","findChoices","inputType","getChoice","getChoiceByIdentifier","shuffleChoices","f","j","n","k","tmp","serialToIdentifier","choiceSerial","Handlebars","interactionHelper","getDocumentBaseUrl","window","protocol","host","pathname","_isValidRenderer","classCorrect","_renderableClasses","slice","_renderableSubclasses","_dependencies","Renderer","shuffledChoices","_locations","_renderers","_getClassRenderer","setOption","setOptions","opts","getOption","qtiSubclass","tplFound","compile","setResponse","qtiInteraction","getResponse","resetResponse","getLoadedRenderers","register","renderersLocations","load","intersection","reqClass","deps","requiredSubClasses","setShuffledChoices","identificationType","getShuffledChoices","reshuffle","returnedType","getChoices","getRenderers","getLocations","relUrl","absUrl","runtimeLocations","runtimeLocation","build","defaultOptions","NewRenderer","locations","defaultRenderConfig","simpleChoice.choiceInteraction","simpleChoice.orderInteraction","simpleAssociableChoice.matchInteraction","simpleAssociableChoice.associateInteraction","commonRenderConfig","dom","_creatorRenderer","get","reset","$bodyEltForm","mediaSources","contains","lang","itemOptionForm","interactionOptionForm","choiceOptionForm","responseOptionForm","bodyElementOptionForm","textOptionForm","modalFeedbackOptionForm","mediaManager","appendContainer","browseUrl","uploadUrl","deleteUrl","downloadUrl","fileExistsUrl","hb","depth0","partials","compilerInfo","stack1","helper","buffer","functionType","escapeExpression","hash","instructionTpl","_notificationLevels","Instruction","defaultMessage","currentMessage","level","$dom","isValidLevel","setState","checkState","getId","create","update","timeout","start","stop","timer","setTimeout","setLevel","parseInt","getLevel","setMessage","validate","helperMissing","__","notifTpl","_containers","_instructions","_$containerContext","_getSelector","selector","setContext","validateInstructions","instruction","appendInstruction","validateCallback","removeInstructions","empty","resetInstructions","minMaxChoiceInstructions","msg","self","min","max","onError","noop","choiceCount","minInstructionSet","appendNotification","prepend","$notif","_remove","fadeOut","removeNotifications","triggerResponseChangeEvent","extraData","targetBlank","preventDefault","commonHelper","_$previousContext","_renderer","commonRenderer","$context","restoreContext","QtiElements","classes","itemBody","abstract","atomicBlock","atomicInline","simpleBlock","simpleInline","flowStatic","blockStatic","inlineStatic","flow","tableCell","caption","xhtml","col","colgroup","div","dl","dt","dd","hr","li","ol","ul","param","table","tbody","tfoot","thead","td","th","tr","a","abbr","acronym","b","big","cite","code","dfn","em","kbd","q","samp","small","span","strong","sub","sup","tt","var","blockquote","address","h1","h2","h3","h4","h5","h6","p","pre","br","textRun","blockInteraction","inlineInteraction","printedVariable","templateElement","templateBlock","templateInline","drawingInteraction","cache","containable","getAllowedContainersElements","getAllowedContainers","jqSelector","substring","filter","getParentClasses","aClass","model","intersect","getChildClasses","getAllowedContents","checked","contain","child","isAllowedClass","qtiContainerClass","qtiContentClass","allowedClasses","cacheType","isBlock","isInline","topClass","getAvailableAuthoringElements","description","icon","short","tags","tablets","193986c3715c81838870f908fa98d69a","width","height","4e8eafab11aad1486992d7ee2c8c16ca","5aac2932d9ad00d6d8a1604b8f9e4e8d","9805d9753ad08c7630a9ee5418aa6c6c","d4a431cedf4705d6bf2cba6d5788378b","phones","1b89338531ef0155c8d6abc2ac02c81a","scaleFactor","dpWidth","dpHeight","3f89da99d84214cde7df87ebe0699a6f","0d36971a5b98b367f54ced708c9af849","026beffcc051af995660ebdede986ace","fd2dd53e667d6d49e4fa73356fa941dd","707584c1ae17d9b5b2cbe8603c91c147","91823264de952e7f2347e07db5c4058b","cd69817a6e147e8a4677389e56fcf568","75994faa6a38e31e99b53fcd75534a33","0cab4dfccdfc880687cb608cfe4159db","c4ff41fcba24d74fc21dc3490ca1edc9","fa969a5e0dd2de53700eeee4ba4ba142","33c4f9364e295ec03531f3a3425819cf","bc47f5275f0efd56fee52d43a8082981","0732887e6e324fd10777b735520a34cf","2e38a78364f09d0da0e9e1a3a68e7fb0","bd4b78dddc7c9625a4141a1b1ddabb87","3bf1edf21cfa81006183d2b02974c84e","ab5a352e0e016b97dac986f06c394f55","4826fb7d7257aeaac992ce699df41b3c","0a691ab20add7c432200f8fa6527b488","9c23ee31be29960fbac9e9bbfc2fc7b0","92177c0508c1d73905a58e2338f2a81f","5222b8866dc4cc606725e16ffcc0a783","37c1541e2bd55cfd0f4073b0ccdf68b3","2f7f64b7dda0144907ff300e83eed465","9c24f9057744dad56043702a9703127f","0a8b2732a016a9395c3af5f12dd9c0da","5a153d7f53d82dcb0801f041574a6a43","screens","9e523ae15b61dc766f5c818726881ecf","07769cd8d0a7d09818b2f0b018042fb7","72d5478a24194f98b9378e8e0fd65737","b7a6dd5900cc72e61f0d3479c7e314ec","43193b0ff671a37d8232ab664190a125","c29e48814af5443ff5688d9e967ce917","program1","selected","inverse","program","program2","program4","dataValue","previewType","previewTypes","desktopDevices","mobileDevices","strPad","deviceList","previewTpl","overlay","typeDependant","$feedbackBox","$console","previewContainerMaxWidth","itemUri","orientation","desktop","mobile","standard","$window","$body","screenSize","innerWidth","innerHeight","maxDeviceSize","_getDeviceSelectorData","devices","forEach","_setupTypeDependantElements","add","_setPreviewType","newType","re","_setOrientation","newOrientation","previewFrame","_scale","$scaleContainer","_scaleFactor","containerScaledWidth","left","css","-webkit-transform","-ms-transform","transform","-webkit-transform-origin","-ms-transform-origin","transform-origin","_positionPreview","paddingTop","outerHeight","_computeScaleFactor","scaleValues","x","y","requiredSize","_setupDeviceSelectors","previewDeviceSelectors","sizeSettings","elem","option","nodeName","toLowerCase","selectedIndex","parseFloat","_adaptFrameSize","select2","minimumResultsForSearch","_setupOrientationSelectors","_setupClosers","$feedbackCloser","$hideForever","$iframe","keyup","keyCode","cookie","expires","path","_getPreviewTypes","_previewLabel","_previewType","_setupViewSelector","$previewContainer","_iframe","contentHeight","contents","containerHeight","_updateStandardPreviewSize","$selector","toString","valueStr","_initConsole","$listing","Date","logTime","getHours","getMinutes","getSeconds","msgStr","scrollTop","slideDown","slideUp","style","display","_itemUri","TypeError","preparePrint","initHideOnPrint","siblings","print","sans-serif","serif","monospace","editLabelTxt","deleteTxt","downloadTxt","UrlParser","cssTpl","itemConfig","_getUri","_basename","styleEditor","doc","currentItem","$styleElem","styleElem","common","preparingMessageHtml","failMessageHtml","isInValidLocalTxt","customStylesheet","dontAppend","key1","key2","mSelector","mProp","erase","property","save","verifyInit","post","cssJson","JSON","stringify","stylesheetUri","download","fileDownload","successCallback","httpMethod","fileName","link","listEntry","parser","loadStylesheet","isLocal","isInvalidLocal","before","_link","_href","_sep","getTime","checkCORS","when","then","addItemStylesheets","currentStylesheet","removeOrphanedStylesheets","getItem","resizerTarget","getJSON","_style","getStyle","fontStacks","fontSelector","generic","optGroup","l","target","$target","normalize","font","clean","resetButton","toLabel","$1","toUpperCase","format","originalOption","fontFamily","formatResult","formatSelection","dataAttrHandler","reorderZindex","$trigger","top","right","assign","$popup","$actionBar","baseOffsetTop","offset","maxHeight","isNull","$titleArea","$title","popup","_trigger","getTarget","$dragger","not","draggable","handle","jQuery","farbtastic","_farbtastic","fb","colorObj","wheelObj","overlayObj","hMarkerObj","slMarkerObj","wheel","radius","square","linkTo","unbind","updateValue","color","bind","setColor","unpack","rgb","hsl","RGBToHSL","updateDisplay","setHSL","HSLToRGB","pack","widgetCoords","el","srcElement","reference","offsetX","offsetY","mouseX","mouseY","offsetLeft","offsetTop","offsetParent","absolutePosition","pageX","clientX","scrollLeft","pageY","clientY","mousedown","dragging","mousemove","mouseup","circleDrag","abs","hue","atan2","sat","lum","angle","round","sin","cos","backgroundColor","g","m1","m2","h","s","hueToRGB","delta","rgbToHex","toHexPair","inp","rgbArr","exec","colorSelector","widgetObj","colorPicker","widget","widgetBox","titleElement","input","resetButtons","colorTriggers","colorTriggerLabels","currentProperty","setTitle","setTriggerColor","$tmpTrigger","has","$this","$colorTrigger","fontSizeChanger","headSelector","bodySelector","headFontSize","bodyFontSize","headBodyDiff","resizeFont","blur","itemResizer","targetWidth","itemWidthPrompt","sliderBox","slider","sliderSettings","range","resizeItem","noUiSlider","genericFeedbackPopup","styleSheetToggler","cssToggler","uploader","customCssToggler","getContext","closest","stylesheetObj","labelBox","prev","isCustomCss","isDisabled","cssUri","resourcemgr","root","params","filters","pathParam","select","files","file","deleteStylesheet","context","cssLinks","_createInfoBox","initLabelEditor","downloadStylesheet","saveLabel","handleAvailability","attrTo","attrFrom","toggleClass","$messageBox","closeTrigger","itemSerializer","serialize","serialized","error","preview","serializeTimeOut","lastItemData","askForSave","serializeItem","initStyleEditor","_confirmPreview","confirmBox","cancel","modal","initPreview","previewContainer","previewUrl","clearTimeout","currentItemData","encodeURIComponent","initGui","updateHeight","throttle","$itemPanel","$label","$actionGroups","footerTop","contentWrapperTop","remainingHeight","$itemEditorPanel","$itemSidebars","$contentPanel","$footer","minHeight","isValidHook","hook","hooks","paths","_registeredHooks","onRegister","_requirejs","loadAll","creators","creator","getTypeIdentifier","loadOne","getCreator","isDev","dev","getBaseUrl","getManifest","manifest","addRequiredResources","registryClass","registry","_urls","_defaults","qtiElements","factory","getAuthoringData","program3","program5","program7","program9","program11","disabled","iconFont","ciRegistry","insertInteractionTpl","insertSectionTpl","tooltipTpl","tooltip","getGroupId","groupLabel","getGroupSectionId","addGroup","groupId","interactionAuthoringData","buildSubGroups","_events","interactiontoolbarready","getGroup","isReady","interactionClass","subGroupId","$group","_customInteractionTag","_subgroups","$interaction","$subGroupPanel","$subGroupList","$cover","$element","addInlineInteractionTooltip","$inlineInteractionsPanel","$tooltip","position","zIndex","tooltipster","inline-interactions","getCustomInteractionTag","module","async","loadingBar","creatorRenderer","editor","interactionsToolbar","icRegistry","_initializeInteractionsToolbar","$toolbar","interactionModels","toolbarInteractions","interactionModel","_initializeHooks","uiHooks","configProperties","$editorScope","$propertySidebar","getEditorScope","getMenuLeft","getMenuRight","getInteractionToolbar","getItemPanel","getItemPropertyPanel","getModalContainer","History","back","parallel","infoControls","err","res","interactionHooks","hiddenSection","MathJax","MathEditor","tex","processing","$buffer","mathMLstr","_stripMathTags","setTex","texStr","_processArguments","mathEditor","renderFromMathML","jaxQueue","Hub","queue","mathStr","_wrapMathTags","Push","renderFromTex","texJax","_getJaxByElement","texToMathML","$script","elementJax","displayBlock","toMathML","restart","Callback","After","dtdHandler","dtdMode","dtds","setMode","mode","html5Only","getParentsOf","_normalizeElement","getChildrenOf","isChildOf","of","isParentOf","getDtd","getMode","isObject","X","Y","source","substracted","cloneDeep","P","F","PF","area","audio","bdi","bdo","button","canvas","command","datalist","del","embed","iframe","ins","keygen","mark","meter","noscript","output","progress","ruby","script","textarea","time","u","video","wbr","FO","article","aside","details","fieldset","figure","footer","form","header","hgroup","menu","nav","M","meta","E","T","#","DP","applet","basefont","isindex","strike","DFO","center","dir","noframes","dtd","track","base","summary","legend","figcaption","head","optgroup","rt","dialog","$block","$blockLimit","$cdata","$editable","$empty","$inline","$list","$listItem","$nonBodyContent","$nonEditable","$object","$removeEmpty","$tabIndex","$tableContent","$transparent","$intermediate","listCnt","actCnt","actLnt","overrides","qtiDtd","h5Len","concat","ckeditor","mathJax","originalConfig","CKEDITOR","ckConfigurator","positionedPlugins","TaoMediaManager","insertAfter","qtiPositionedPlugins","TaoQtiImage","TaoQtiMaths","toolbarPresets","inline","items","block","extendedText","ckConfig","disableAutoInline","entities","entities_processNumerical","autoParagraph","extraPlugins","floatSpaceDockedOffsetY","forcePasteAsPlainText","skin","language","removePlugins","linkShowAdvancedTab","justifyClasses","linkShowTargetTab","specialChars","_updatePlugins","itCnt","itLen","method","plugin","separator","idxItem","numToReplace","stringVal","tbCnt","toolbar","stringVals","positionedPluginArr","extraPluginArr","compact","pluginProps","splice","getConfig","toolbarType","toolbars","allowedContent","wanted","linkTypes","definition","getContents","ckeProtector","observeContentChanges","contextDomNode","MutationObserver","WebKitMutationObserver","MozMutationObserver","observer","mutations","observe","subtree","characterData","addEventListener","getSelector","protect","selectorParam","wrapper","iWidth","outerWidth","iHeight","cover","getProtectedWidgetBySerial","positionCover","iOffset","innerHTML","wrap","unprotect","unwrap","resize","getColUnits","$elt","cssClasses","colMatch","pop","setUnitsFromClass","$el","units","_syncHandleHeight","$row","_createResizables","marginWidth","activeWidth","$col","$nextCol","next","nextMin","unitWidth","activeHeight","$activeZone","$handle","_syncOutlineHeight","containment","axis","cursor","$overlay","border-right-width","drag","nextUnits","_setColUnits","_deleteResizables","newUnits","oldUnits","$parentRow","totalUnits","destroy","preserveGlobalEvents","syncHandleHeight","resizable","contentHelper","getContent","inner","destroyGridWidgets","serializeElements","getChangeCallback","$pseudoContainer","getChangeCallbackForBlockStatic","nodeType","nodeValue","wrapInner","existingElements","$qtiElementWidget","inClone","gridContentHelper","$widget","$placeholder","$original","changeInnerWidgetState","outerWidget","innerWidget","changeState","count","equal","deletingInfoTpl","_timeout","_bindEvents","_confirmDeletion","fadeDelay","deletingHelper","createInfoBox","widgets","margin-left","w","CKEditor","shieldInnerContent","passthroughInnerContent","_buildEditor","$editableContainer","taoQtiItem","insert","_htmlEncode","createdWidget","_activateInnerWidget","floatSpace","debug","initialHide","centerElement","ready","floatSpaceApi","nose","oldParent","newParent","changeMode","oldYMode","newYMode","$nose","xModeIsReady","domElem","dfd","Deferred","counter","check","setInterval","getAttribute","resolve","clearInterval","promise","instanceReady","changed","_detectWidgetDeletion","change","markupChanged","markupChange","btn","click","_rebuildWidgets","restoreState","_shieldInnerContent","_passthroughInnerContent","_focus","focus","configLoaded","afterPaste","_find","dataAttribute","$collection","currentState","getCurrentState","rebuild","_findWidgetContainer","undoManager","undo","containerWidget","$shield","stopPropagation","listenToWidgetCreation","one","targetWidget","encodedStr","createRange","moveToElementEditablePosition","getSelection","selectRanges","editorFactory","hasEditor","buildEditor","editorOptions","destroyEditor","focusManager","popupTpl","$input","$content","$titleField","$colorPicker","$colorPickerInput","userRelativeUrl","XmlRenderer","_xmlRenderer","_render","_getElementSelector","getQtiClassFromXmlDom","$node","_qtiClassNames","specified","buildMath","$annotation","encoding","parseContainer","_defaultOptions","_parsableElements","$qtiElement","_placeholder","rubricblock","loaded","parse","xmlStr","xmlRenderer","simpleParser","content","htmlEditor","toolbarTpl","mathNs","markupSelector","htmls","extractHtmlFromMarkup","buildContainer","createToolbar","data-html-editable","$tlb","cleanup","createFakeWidget","markupStr","$found","_eventName","_buildArrows","insertZoneWidth","$insertRight","_removeArrows","$insertLeft","_arrowFall","$insert","interval","relY","$arrow","t","pow","distributeUnits","cols","_cols","minimized","decimals","avg","refactoredTotalUnits","refactoredUnits","decimal","middleUnitValue","lastUnitValue","last","middle","redistributeUnits","totalRefactoredUnits","negative","positive","rounded","sortBy","eachRight","distribute","redistribute","_qtiHtmlEditableTypes","targetFinder","dh","inheritedFunctions","fns","Function","getTargetsFor","$qtiContainers","$targets","parentSelector","$qtiContainer","$closest","gridUnits","arrow","droppableGridEditor","createDroppableBlocks","minUnits","$colInitial","initialPosition","namespace","_getNewRow","_getNewCol","$cols","after","_appendPlaceholder","_resetPlaceholder","_insertBetween","_restoreTmpCol","distributedUnits","$newCol","newUnit","cumulatedUnits","_appendToNextRow","_resetColsHeight","andSelf","$prev","prevAll","first","$next","nextAll","$previousCol","$newRow","$selectedCol","dropped","_destroyDroppableBlocks","_pulseTimer","_pulse","intervalDuration","animate","opacity","createDroppableInlines","createTextNode","data-inline","detach","_showPlaceholder","parentOffset","relX","_destroyDroppableInlines","destroyDroppables","_toBeRemoved","data-units","originalClasses","droppable","_insertableDefaultsOptions","createInsertable","$to","createDraggable","distance","appendTo","scroll","cursorAt","bottom","ui","createMovable","$parent","initial-position","initial-class","_destroyDraggables","isCreated","gridEditor","Array","elementClass","addInsertables","$elts","$grid","createMovables","setContent","_init","which","defaultConfig","status","responseButton","answerEditors","questionEditors","contentButton","closer","fadeIn","structure","bar","group","isTextButton","handleConfig","extendDefaultConfig","buildToolbar","tlbWrapper","tlb","box","ic","attach","buttonConfig","barConfig","defaultBarConfig","ucfirst","str","adaptSize","_resize","both","dimensions","dimension","tools","listenStateChange","getStates","states","liveXmlPreview","$destination","rawXml","_printXml","_formatXml","vkbeautify","$code","Prism","highlightElement","dummyElement","types","maths","image","$icon","finalOptions","uploadMime","getMimeTypes","mime","Img","alt","nsName","_stripNamespace","defaultNsName","defaultNsUri","getNamespace","setNamespace","setAnnotation","getAnnotation","removeAnnotation","getMathML","raw","_isEmptyMathML","hasContent","$math","QtiObject","getMediaType","mimetype","_addNsDir","addNamespaceDirectory","$typeIdentifier","$file","$f","getDefaultMethods","getDefaultProperties","typeId","success","resources","getMarkupTemplate","createResponse","renderMarkup","markupTpl","markupData","getDefaultMarkupTemplateData","getMarkupData","updateMarkup","removeProp","propNames","propName","getMarkupNamespace","markupNs","defaultMarkupNsName","defaultMarkupNsUri","setMarkupNamespace","CustomElement","PortableInfoControl","RubricBlock","view","use","Choice","getInteraction","QtiChoice","QtiHotspot","QtiAssociableHotspot","matchMax","matchMin","QtiGap","Gap","QtiGapImg","QtiTextVariableChoice","QtiGapText","fixed","QtiHotspotChoice","Hottext","QtiInlineChoice","ContainerChoice","QtiContainerChoice","QtiSimpleAssociableChoice","QtiSimpleChoice","escapedIdentifier","entry","mapKey","ResponseDeclaration","getFeedbackRules","SimpleFeedbackRule","setCondition","setFeedbackElse","_templateNames","MATCH_CORRECT","MAP_RESPONSE","MAP_RESPONSE_POINT","isUsingTemplate","isValidTemplateName","tplName","getTemplateUriFromName","getTemplateNameFromUri","tplUri","responseHelper","templateUri","getTemplate","resetCorrect","setCorrect","getCorrect","setMappingAttribute","removeMappingAttribute","getMappingAttribute","setMapEntry","mappedValue","caseSensitive","isNaN","mapKeys","mapKeysReverse","removeMapEntry","canBeEmpty","getMapEntries","removeMapEntries","createFeedbackRule","outcomeIdentifier","rule","getFeedbackRule","deleteFeedbackRule","createFeedbackElse","deleteFeedbackElse","attrs","deleteResponse","QtiInteraction","responseId","_type","choiceShuffle","interactionData","renderedChoice","Prompt","Interaction","BlockInteraction","AssociateInteraction","editableInteraction","shuffle","maxAssociations","minAssociations","createChoice","rank","ChoiceInteraction","maxChoices","minChoices","ExtendedTextInteraction","multiple","maxStringLoop","ContainerInteraction","GapMatchInteraction","getGaps","createGap","QtiBlockInteraction","QtiObjectInteraction","QtiGraphicInteraction","backgroundImage","GraphicInteraction","GraphicAssociateInteraction","AssociableHotspot","isResponsive","GraphicGapMatchInteraction","getGapImgs","getGapImg","GapImg","createGapImg","GraphicOrderInteraction","HotspotInteraction","HottextInteraction","InlineInteraction","InlineChoiceInteraction","SimpleAssociableChoice","MatchInteraction","matchSet1","matchSet2",1,"ObjectInteraction","MediaInteraction","autostart","minPlays","maxPlays","loop","OrderInteraction","CustomInteraction","pciReadyCallbacks","getProperties","onPciReady","triggerPciReady","onPci","offPci","triggerPci","_throwMissingImplementationError","fnName","responseIdentifier","SelectPointInteraction","SliderInteraction","lowerBound","upperBound","reverse","step","stepLabel","TextEntryInteraction","placeholderText","UploadInteraction","_pciModels","pciCreatorContext","pciModel","createPciInstance","pciTypeIdentifier","Helper","_pushState","registeredStates","stateStack","_popState","exit","Widget","$form","offEvents","getRequiredOptions","opt","initCreator","superStateName","superState","exitedStates","difference","enteredStates","registerState","State","registerStates","afterStateInit","evtName","beforeStateInit","afterStateExit","beforeStateExit","postRenderOpts","refresh","qtiElementEventName","live","eventNames","$document","eventName","eventNameToken","what","why","StaticWidget","$wrap","data-serial","createOkButton","data-edit","margin","_isValidStateDefinition","_create","superStates","$editableWidgets","$parentWidget","initFn","exitFn","Clone","createBundle","stateBundle","newStates","excluded","throwMissingRequiredImplementationError","functionName","stateFactory","SleepState","StaticStateSleep","_widget","Active","gridHelper","DeletingState","updateBody","$elementToRemove","getElementToRemove","hideWidget","showMessage","$item","showWidget","$tbody","$tds","_isCol","_redistributeUnits","attrClass","usedUnits","$otherCols","deleteElement","messageBox","ImgStateSleep","validators","_qtiIdPattern","qtiValidators","ids","available","global","attachEvent","inArray","len","moveCaret","createTextRange","move","selectionStart","setSelectionRange","changeType","Placeholders","Utils","safeActiveElement","activeElement","hidePlaceholder","keydownValue","maxLength","valueChanged","isPlaceholderValue","ATTR_CURRENT_VAL","ATTR_ACTIVE","removeAttribute","classNameRegExp","ATTR_MAXLENGTH","setAttribute","ATTR_INPUT_TYPE","showPlaceholder","placeholderClassName","handleElem","handleInputsLength","handleTextareasLength","handleInputs","handleTextareas","getElementsByTagName","inputs","textareas","disablePlaceholders","enablePlaceholders","makeFocusHandler","hideOnInput","makeBlurHandler","makeKeydownHandler","keydownVal","badKeys","makeKeyupHandler","makeClickHandler","makeSubmitHandler","newElement","getElementById","ATTR_FORM_HANDLED","ATTR_EVENTS_BOUND","liveUpdates","styleRules","validTypes","placeholderStyleColor","ATTR_OPTION_FOCUS","ATTR_OPTION_LIVE","createElement","documentElement","nativeSupport","styleSheet","cssText","appendChild","insertBefore","firstChild","disable","enable","spinner","formElement","initWidget","setChangeCallbacks","validateOnInit","invalidate","_callbackCall","cb","simple","withValidation","defer","groupValidator","_validationCallback","initTitle","inplacer","getAttributeChangeCallback","allowEmpty","getMinMaxAttributeCallbacks","attributeNameMin","attributeNameMax","allowNull","updateCardinality","attrMethodNames","$max","callbacks","newOptions","incrementer","_updateResponseDeclaration","maxChoice","correct","results","_createTooltip","where","theme","_qtiClassToDummies","inlineHelper","checkFileExists","fileSrcAttrName","fileExists","togglePlaceholder","positionFloat","formTpl","itemUtil","imageUtil","ImgStateActive","initForm","_extractLabel","$img","responsive","_initAdvanced","_initMediaSizer","_initAlign","_initUpload","longdesc","align","$src","$mediaResizer","$mediaSpan","mediasizer","applyToMedium","sizeAttr","$uploadTrigger","$alt","_openResourceMgr","getSize","maxW","buildInlineContainer","float","data-qti-class","contenteditable","textNode","nextSibling","buildBlockContainer","ImgWidget","CreatorImg","itemStylesheetHandler","informLoaded","leading","$head","$link","sep","ItemStateActive","TextBlockStateSleep","TextActive","TextWidget","devTools","itemEditor","ItemWidget","initUiComponents","initTextWidgets","initGridEditor","contentType","$saveBtn","$previewBtn","$saveButton","feedbackArgs","$itemBody","data-new","$colParent","initTextWidget","$originalContainer","subContainers","isTextBlock","$clonedContainer","textBlockId","$subContainer","subContainerElements","subContainerBody","serializedItemBody","containerData","shift","containerElements","_detachElements","elementSerial","$pre","CommonRenderer","CreatorItem","_normalizeItemBody","$child","Queue","MathStateSleep","latex","mathml","mathjax","_throttle","MathActive","editMode","_toggleMode","initFormChangeListener","$fields","$modeSelector","$largeField","m","$panels","$editMode","_createWarningTooltip","$mathField","MathWidget","CreatorMath","_show","$elements","_hide","_measure","measure","sizeFinder","modalFeedbackRenderer","minWidth","maxWidth","$modal","startClosed","indices","selectors","sidebar","cke","ckeBase","ckeNose","ckeToolbar","raised","raise","baseIndex","$elem","_ckeIsReady","iteration","poll","ModalFeedbackStateActive","okButtonTpl","ModalFeedbackWidget","program6","program8","program10","program13","MediaElementPlayer","obj","playCounter","mediaType","playerOptions","pauseOtherPlayers","features","pluginPath","audioWidth","videoWidth","videoHeight","audioHeight","mediaElement","domObject","controlMaxPlays","play","playCount","pause","DefaultRendererObject","ObjectStateSleep","ObjectStateActive","_getImgSizeChangeCallback","$media","propertyName","_setAttr","debounce","_initSlider","$slider","$height","$width","ratio","$data","overlayTpl","ObjectWidget","notAvailable","CreatorObject","getSharedLibrariesPaths","requireConfig","contexts","getAbsolutelyDefinedPaths","getCommonLibraries","root_url","fixMarkupMediaSources","$markup","fullPath","alias","getLocalRequire","libs","useExtensionAlias","urlTokens","extension","shim","exports","Config","showMathMenu","showMathMenuMSIE","Startup","onload","getCachedLocalRequire","_localRequires","_picHooks","taoQtiInfoControlContext","picHook","notifyReady","instance","proto","constructor","PortableElement","qtiInfoControlContext","_getPic","_taoInfoControl","localRequire","initialize","setSerializedState","serializedState","getSerializedState","CreatorPortableInfoControl","pciCreator","getWidget","RubriBlockStateSleep","RubricBlockStateActive","RubricBlockWidget","CreatorRubricBlock","ChoiceWidget","listenToInteractionStates","invalidInfoBoxTpl","Sleep","ChoiceStateSleep","ChoiceStateActive","interactionShuffle","formElementHelper","initShufflePinToggle","$shuffleToggle","_toggleVisibility","callee","initDelete","QuestionState","contentToolbarTpl","ChoiceStateQuestion","removeToolbar","interactionSerial","Answer","ChoiceStateAnswer","ChoiceStateChoice","_updateChoiceIdentifierInResponse","oldId","newId","escapedOldId","_updateChoiceIdentifier","_get","ex","_cache","_setCache","_getCache","updateChoiceIdentifier","updateResponseIdentifier","identifierHelper","GapStateChoice","gapTpl","GapStateQuestion","GapWidget","CreatorGap","SimpleAssociableChoiceStateChoice","GapTextStateChoice","sel","selectNodeContents","collapse","removeAllRanges","addRange","moveToElementText","GapTextWidget","GapText","CreatorGapText","SimpleChoiceStateChoice","SimpleChoice","HottextStateChoice","HottextStateQuestion","HottextWidget","CreatorHottext","SimpleAssociableChoiceStateQuestion","SimpleAssociableChoiceWidget","SimpleChoiceWidget","CreatorSimpleChoice","CreatorSimpleAssociableChoice","unique","$realLabel","blockHelperMissing","_formatters","boolean","integer","string","point","pair","directedPair","duration","intOrIdentifier","_prettyPrintBase","withType","formatter","_prettyPrintList","list","printBase","printList","pciPrettyPrint","_qtiModelPciResponseCardinalities","single","ordered","record","unserialize","mappedCardinality","responseValues","prettyPrint","pairTpl","pciResponse","_choiceUsages","setChoice","$choice","_setChoice","responseMappingMode","$resultArea","$pair","thisPairSerial","$otherRepeatedPair","$otherPair","otherPairSerial","border","unsetChoice","swapping","renderEmptyPairs","_adaptSize","$choiceArea","$activeChoice","_getChoice","_resetSelection","_unsetChoice","_isInsertionMode","_isModeEditing","$bin","_setInstructions","_getRawResponse","_setPairs","pairs","addedPairs","$emptyPair","$divs","gripTpl","movable","$grip","switcher","_convertToTitle","InteractionWidget","$responseForm","listenToChoiceStates","$interactionContainer","answer","$ok","InteractionStateSleep","_containsInModalFeedbackElts","searchSerial","InteractionStateActive","inModalFeedback","Question","addChoiceTpl","InteractionStateQuestion","addNewChoiceButton","$newChoicePlaceholder","qtiChoiceClassName","InteractionStateChoice","defineCorrect","templates","editMapping","editFeedbacks","_scoreTooltipContent","syncMaxChoices","getMax","$min","_syncMaxChoices","setScore","$scoreInput","tooltipContent","score","depth1","availableConditions","programWithDepth","hideScore","addElse","selecter","ruleTpl","panelTpl","_availableConditions","_renderFeedbackRule","feedbackElseSerial","$rule","_initFeedbackEventListener","$feedbacksPanel","$feedbacks","$lastRule","$fbContainer","fbSerial","fbRule","$deleteButton","$select","$comparedValue","modalFeedbackWidget","$btn","_getModalFeedbackWidget","_widgets","$feedbacksContainer","initFeedbacksPanel","$feedbackRules","renderFeedbackRule","responseFormTpl","modalFeedbackRule","_saveCallbacks","mappingAttr","answerStateHelper","forward","corrects","initResponseForm","_getAvailableRpTemplates","_toggleCorrectWidgets","$correctWidgets","isCorrectDefined","CUSTOM","InteractionStateAnswer","Correct","InteractionStateCorrect","Map","answerState","InteractionStateMap","Custom","InteractionStateCustom","promptToolbarTpl","BlockInteractionStateQuestion","buildPromptEditor","destroyPromptEditor","$promptTlb","AssociateInteractionStateQuestion","AssociateInteractionStateChoice","AssociateInteractionStateAnswer","creatorHelper","ResponseWidget","formatResponse","getResponseSummary","sortedIdPair","sort","sortedIdPairKey","formatedRes","pairString","unformatResponse","formatedResponse","responseWidget","AssociateInteractionStateCorrect","choiceIdentifier","responseToolbarTpl","bindResponseChangeListener","_defaultMappingValue","_saveCorrect","$filled","pairIdentifier","$miniToolbar","$correct","$score","AssociateInteractionWidget","CreatorAssociateInteraction","horizontal","pseudoLabel","$box","$radios","$checkboxes","highlightInvalidInput","$li","getCustomData","choicesCount","interactionFormElement","ChoiceInteractionStateQuestion","$checkboxIcons","ChoiceInteractionStateAnswer","scoreTpl","labelTpl","_fixInputs","$checkbox","$radio","createScoreWidgets","createCorrectWidgets","$scores","$corrects","_toggleCorrectInputs","ChoiceInteractionStateCorrect","ChoiceInteractionStateMap","ChoiceInteractionWidget","CreatorChoiceInteraction","expectedLength","program12","program14","maxWords","program16","patternMask","program18","program21","program19","ckEditor","_setPattern","pattern","patt","_isMultiple","maxStrings","placeholderType","ckeOptions","minStrings","_getNumStrings","num","resize_enabled","_getFormat","expectedLines","$textarea","$charsCounter","$wordsCounter","_parsePattern","wordCount","charCount","setData","moveToPosition","POSITION_BEFORE_END","_setMultipleVal","_setVal","numericBase","_getTextareaValue","_ckEditorData","result","regexChar","regexWords","updateFormat","from","clearText","setText","formats","constraints","unless","parsePattern","initState","exitState","ExtendedTextInteractionStateQuestion","maxChars","plain","preformatted","none","attrValue","previousFormat","constraint","newValue","newPattern","ExtendedTextInteractionStateAnswer","ExtendedTextInteractionStateCorrect","_createResponseWidget","_destroyResponseWidget","ExtendedTextInteractionWidget","CreatorExtendedTextInteraction","getGap","$flowContainer","selection","containElement","commonAncestorContainer","selectedChildNodes","cloneContents","childNodes","wrapSelection","rangeCount","getRangeAt","cloneRange","startOffset","endOffset","surroundContents","unwrapSelection","textWrapper","$wrapper","wrappedText","htmlContentHelper","ContainerInteractionStateQuestion","destroyTextWrapper","$bodyTlb","initTextWrapper","gapModel","getGapModel","$gapTlb","newGapWidget","GapMatchInteractionStateQuestion","syncCardinality","preventSingleChoiceDeletion","interactionWidget","_toggleDeleteButtonVisibility","$deleteButtons","GapMatchInteractionStateAnswer","PciResponse","GapMatchInteractionStateCorrect","invoke","String","leftTitle","pairLeft","rightTitle","pairRight","defaultScore","createPopup","adder","$adder","$left","$right","$options","currentLeft","currentRight","leftId","rightId","lval","rval","pairScoringForm","addPair","deleter","removePair","preparePairs","entries","formatPair","formatLeft","formatRight","updateFormBindings","without","scoreMin","scoreMax","scoringFormFactory","initMapState","displayGaps","updateForm","exitMapState","formatedChoices","acc","GapMatchInteractionWidget","CreatorGapMatchInteraction","basic","stroke","stroke-width","stroke-dasharray","stroke-linejoin","fill","fill-opacity","hover","selectable","layer","imageset-rect-stroke","imageset-rect-no-stroke","imageset-img","order-text","font-family","font-weight","font-size","score-text-default","score-text","small-text","layer-pos-text","target-hover","target-success","assoc","stroke-linecap","assoc-layer","stroke-opacity","assoc-bullet","close-bg","touch-circle","raphael","scaleRaphael","gstyle","shapeMap","default","poly","coordsValidator","rect","ellipse","circle","qti2raphCoordsMapper","coords","paper","raph2qtiCoordsMapper","cx","cy","rx","ry","GraphicHelper","setStyle","responsivePaper","resizePaper","givenWidth","factor","diff","$editor","containerWidth","changeSize","scaleAll","resizer","imgId","shaper","shapeCoords","qtiCoords","raphaelCoords","toFront","flashing","updateElementState","touchEffect","touchstart","createTouchCircle","getBBox","createTarget","tBBox","baseSize","half","coord","mapper","bbox","tCircle","createText","fontSize","scaledFontSize","updateTitle","createShapeText","shape","shapeClick","createBorderedImage","padding","halfPad","rw","rh","ix","iy","iw","ih","shadow","glow","offsetx","offsety","animation","animateWith","removeChild","highlightError","restoredState","evt","getPoint","rwidth","rheight","wfactor","clickPoint","pw","cw","ph","ch","graphic","background","_vsets","partial","_renderChoice","_paperUnSelect","assocs","_shapesUnSelectable","_getActiveElement","_createPath","_isMatchable","_shapesSelectable","getById","destElement","onRemove","showCloser","closerBg","removeSet","hideCloser","toBack","unclick","vset","sx","sy","dest","dx","dy","srcBullet","destBullet","midPath","getPointAtLength","getTotalLength","matching","matchable","responseValue","el1","el2","toRemove","clear","GraphicInteractionWidget","createPaper","_createPlaceholder","$imageBox","$upload","createChoices","_currentChoices","initSleepState","exitSleepState","showTarget","sidebarTmpl","shapeSideBar","$imageEditor","$sideBar","$forms","activate","deactivate","Raphael","shapeHandlers","getCoords","halfWidth","halfHeight","midTop","midRight","midBot","midLeft","parsePathString","segment","topLeft","topRight","botRight","botLeft","handlerCoords","hshape","getStartPoint","startPoint","shapeResizer","resized","sqrt","boxDest","pointIndex","mover","shapeMover","graphicHelper","pathBuilder","_path","points","getPath","closeCb","onClose","shapeFactory","drawing","startDrawingPath","startPositionTarget","startWithMouse","created","builder","unmousedown","unmousemove","unmouseup","smoothResize","shapeEditor","handlers","handling","resizing","moving","quitHandling","enterHandling","startResize","handler","layerTxt","reject","stopPoint","pick","keyResize","startMove","mousePoint","moved","keyResizer","undrag","removeShape","interactionShapeEditor","editors","editShape","shapeOptions","shapeChanging","shapeChange","shapeRemoved","currents","createShape","factories","editCreatedShape","pluck","shapeCreated","unmouseover","unmouseout","$type","imageSelector","choiceFormTpl","initQuestionState","enterChoiceForm","$choiceForm","$top","leaveChoiceForm","choiceForm","_editor","newChoice","exitQuestionState","GraphicAssociateInteractionStateQuestion","getMaxPairs","inteaction","initAnswerState","exitAnswerState","initCorrectState","exitCorrectState","showChoicesId","removePaths","getPairValues","GraphicWidget","GraphicAssociateInteractionWidget","CreatorGraphicAssociateInteraction","$gapList","gapFillers","newSize","_renderGapList","_selectShape","$gapImages","trackResponse","$clone","gapFiller","shapeOffset","activeOffset","currentCount","$active","boxOffset","z-index","gapImgFormTpl","mediaTlbTpl","createGapImgPlaceholder","setUpGapImg","$gapImg","enterGapImgForm","gapImgSelectorOptions","GraphicGapMatchInteractionStateQuestion","createGapImgs","scaleGapList","removeGapFillers","gapSrcs","formated","objetLabel","objectLabel","GraphicGapMatchInteractionWidget","CreatorGraphicGapMatchInteraction","$orderList","_renderOrderList","_unselectShape","$orderers","times","$orderer","_createTexts","_showText","number","_hideText","texts","transf","renderOrderList","GraphicOrderInteractionStateQuestion","scaleOrderList","GraphicOrderInteractionWidget","CreatorGraphicOrderInteraction","rElement","HotspotInteractionStateQuestion","$shape","noCorrect","grahicScorePopup","mappingFormTpl","initResponseMapping","scoreTexts","correctDefined","scoreText","HotspotInteractionWidget","CreatorHotspotInteraction","$inupt","currentChoices","hottextTpl","HottextInteractionStateQuestion","newHottextWidget","HottextInteractionStateAnswer","createScoreForm","toggleCorrectState","stopImmediatePropagation","$hottext","HottextInteractionWidget","CreatorHottextInteraction","_emptyValue","InlineInteractionWidget","InlineChoiceStateChoice","InlineChoiceWidget","InlineInteractionStateSleep","positionWidget","itemOffset","originalOffset","InlineChoiceInteractionStateQuestion","$mainOption","$addChoice","renderChoice","buildChoice","InlineChoiceInteractionStateAnswer","$responseWidget","InlineChoiceInteractionStateCorrect","selectedChoice","inlineChoiceInteractionTpl","inlineChoiceTpl","InlineChoiceInteractionWidget","$choiceOptionForm","shuffleChoice","renderInteraction","previous","previousSibling","CreatorInlineChoiceInteraction","d","def","mod","_rgba","space","transparent","o","Color","rgba","props","red","idx","green","blue","hsla","saturation","lightness","byte","percent","degrees","support","alpha","jquery","_default","to","_space","transition","blend","toRgbaString","toHslaString","toHexString","_hsla","cssHooks","parentNode","fx","colorInit","end","borderColor","expand","names","aqua","black","fuchsia","gray","lime","maroon","navy","olive","purple","silver","teal","white","yellow","inWarning","_onCheckboxSelected","_filterResponse","eq","_inferValue","firstId","secondId","currentResponse","_countChoices","_maxMatchReached","association","overflow","_getChoiceDefinitionByIdentifier","_countAssociations","rawResponse","rawChoices","_getRawChoices","matchset","superClosure","onMaxChoicesReached","report","onMatchMaxReached","originalBackgroundColor","originalColor","responseCount","choiceGiven","inferValue","otherMatchSetCount","AssociateInteractionQuestionState","adderTpl","rowTpl","cellTpl","MatchInteractionStateQuestion","$matchArea","_postRender","MatchInteractionStateAnswer","pairId","MatchInteractionStateCorrect","MatchInteractionStateMap","MatchInteractionWidget","CreatorMatchInteraction","$meTag","mediaOptions","enablePause","playFromPauseEvent","pauseFromClick","initMediaPlayer","canBePlayed","current","defaultVideoWidth","defaultVideoHeight","startVolume","enableAutosize","alwaysShowControls","iPadUseNativeControls","iPhoneUseNativeControls","AndroidUseNativeControls","alwaysShowHours","enableKeyboard","playerDom","stillNeedToCallPlay","$meContainer","$layers","$playpauseBtn","$bigPlayBtn","$controls","controlsHeight","pluginType","pluginApi","setSrc","_buildMedia","inlineAttrs","reduce","preload","destroyInteraction","MediaInteractionStateQuestion","reRender","xmlUpdateCheat","attrName","MediaInteractionCommonRenderer","MediaInteractionWidget","controlPlaying","program15","program17","$iconAdd","$iconRemove","$iconBefore","$iconAfter","_activeControls","_resetControls","_setSelection","_freezeSize","$orderArea","instructionMax","_resetResponse","initialOrder","$choices","choice1","choice2","ChoiceInteractionQuestionState","OrderInteractionStateQuestion","OrderInteractionStateAnswer","_formatResponse","_unformatResponse","OrderInteractionWidget","CreatorOrderInteraction","_pciHooks","taoQtiCustomInteractionContext","pciHook","notifyDone","qtiCustomInteractionContext","_getPci","_taoCustomInteraction","localRequirePaths","localRequireConfig","CreatorCustomInteraction","_enableSelection","changePoint","isTouch","untouchstart","flatten","SelectPointInteractionStateQuestion","_targets","setCurrentResponses","createEditor","listenResponseAttrChange","areaId","getAreaIndex","createResponseArea","setUpScoringArea","qtiPoint","scoreElt","setElt","mapEntry","$separator","targetId","SelectPointInteractionWidget","shapeType","CreatorSelectPointInteraction","_slideTo","sliderCurrentValue","sliderValue","$sliderLabels","$sliderCurrentValue","$sliderValue","steps","sliderSize","middleStep","leftOffset","middleValue","startValue","SliderInteractionStateQuestion","sliderLength","$sliderElt","currentStep","SliderInteractionStateAnswer","SliderInteractionStateCorrect","SliderInteractionWidget","CreatorSliderInteraction","patternSupported","navigator","userAgent","TextEntryInteractionStateQuestion","TextEntryInteractionStateAnswer","TextEntryInteractionStateCorrect","optionTpl","_getRelatedTextKey","TextEntryInteractionStateMap","initMapEntries","initFormCallbacks","hideCorrectInput","$text","oldText","$tr","correctValue","$addOption","appendOption","$newOption","preventNullMapEntries","$del","interactionTpl","TextEntryInteractionWidget","CreatorTextEntryInteraction","_response","_initialInstructions","_readyInstructions","_handleSelectedFiles","filename","filetype","reader","FileReader","progressbar","base64Data","commaPosition","base64Raw","onloadstart","onprogress","percentProgress","ceil","total","readAsDataURL","_resetGui","changeListener","File","FileList","fileReader","filereader","taobase_www","resetGui","uploadHelper","UploadInteractionStateQuestion","unshift","UploadInteractionWidget","CustomInteractionWidget","CustomInteractionStateQuestion","initColorPickers","$colorTriggers","destroyColorPickers","MediaInteractionStateAnswer","InfoControlWidget","xhtmlEntities","xhtmlEncode","$0","portableElementProperties","depth2","propertiesTpl","renderPortableElementProperties","registerHelper","responseRules","custom","templateDriven","correctTpl","mapTpl","mapPointTpl","_renderInteractionRp","_renderRpTpl","rpTpl","_renderFeedbackRules","newData","renderedObject","mapResponsePoint","tplCondition","tplCorrect","tplIncorrect","ruleXml","else"],"mappings":"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","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n * \n * \n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoQtiItem/controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'QtiPreview' : {\n            'actions' : {\n                'index' : 'taoItems/controller/preview/itemRunner'\n            }\n        },\n        'QtiCreator' : {\n            'actions' : {\n                'index' : 'controller/creator/main'\n            }\n        }\n    };\n});\n\n","define('taoQtiItem/qtiCreator/model/helper/event',['jquery', 'lodash'], function($, _){\n\n    var _ns = '.qti-creator';\n    var _ns_model = '.qti-creator';\n    var eventList = [\n        'containerBodyChange',\n        'containerElementAdded',\n        'elementCreated.qti-widget',\n        'attributeChange.qti-widget',\n        'choiceCreated.qti-widget',\n        'correctResponseChange.qti-widget',\n        'mapEntryChange.qti-widget',\n        'mapEntryRemove.qti-widget',\n        'deleted.qti-widget',\n        'choiceTextChange.qti-widget',\n        'responseTemplateChange.qti-widget',\n        'mappingAttributeChange.qti-widget',\n        'feedbackRuleConditionChange.qti-widget',\n        'feedbackRuleCreated.qti-widget',\n        'feedbackRuleRemoved.qti-widget',\n        'feedbackRuleElseCreated.qti-widget',\n        'feedbackRuleElseRemoved.qti-widget'\n    ];\n\n    var event = {\n        choiceCreated : function(choice, interaction){\n            $(document).trigger('choiceCreated.qti-widget', {choice : choice, interaction : interaction});\n        },\n        deleted : function(element, parent){\n\n            if(element.isset()){\n                element.unset();\n            }\n\n            $(document).off('.' + element.getSerial());\n            $(document).trigger('deleted.qti-widget', {element : element, parent : parent});\n        },\n        getList : function(addedNamespace){\n            var events = _.clone(eventList);\n            if(addedNamespace){\n                return _.map(events, function(e){\n                    return e + '.' + addedNamespace;\n                });\n            }else{\n                return events;\n            }\n        },\n        initElementToWidgetListeners : function(){\n\n            var ns = '.widget-container';\n\n            //forward all event to the widget $container\n            $(document).off(ns).on(event.getList(ns).join(' '), function(e, data){\n                var element = data.element || data.container || null;\n                if(data && element && element.data('widget')){\n                    element.data('widget').$container.trigger(e.type + _ns + _ns_model, data);\n                }\n            });\n\n        },\n        getNs : function(){\n            return _ns;\n        },\n        getNsModel : function(){\n            return _ns_model;\n        }\n    };\n\n    return event;\n});\n","/**\n * Common basic util functions\n */\ndefine('taoQtiItem/qtiItem/helper/util',['lodash'], function(_){\n    var util = {\n        buildSerial : function buildSerial(prefix){\n            var id = prefix || '';\n            var chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n            for(var i = 0; i < 22; i++){\n                id += chars.charAt(Math.floor(Math.random() * chars.length));\n            }\n            return id;\n        },\n        fullpath : function fullpath(src, baseUrl){\n\n            src = src || '';\n            baseUrl = baseUrl || '';\n\n            if(src){\n\n                src = src.replace(/^\\//, '');\n\n                if(!src.match(/^http/i)){\n\n                    if(baseUrl && !baseUrl.match(/\\/$/)){\n                        baseUrl += '/';\n                    }\n\n                    src = baseUrl + src;\n                }\n            }\n\n            return src;\n        },\n        findInCollection : function findInCollection(element, collectionNames, searchedSerial){\n\n            var found = null;\n\n            if(_.isString(collectionNames)){\n                collectionNames = [collectionNames];\n            }\n\n            if(_.isArray(collectionNames)){\n\n                _.each(collectionNames, function(collectionName){\n\n                    //get collection to search in (resolving case like interaction.choices.0\n                    var collection = element;\n                    _.each(collectionName.split('.'), function(nameToken){\n                        collection = collection[nameToken];\n                    });\n                    var elt = collection[searchedSerial];\n\n                    if(elt){\n                        found = {'parent' : element, 'element' : elt};\n                        return false;//break the each loop\n                    }\n\n                    //search inside each elements:\n                    _.each(collection, function(elt){\n\n                        if(_.isFunction(elt.find)){\n                            found = elt.find(searchedSerial);\n                            if(found){\n                                return false;//break the each loop\n                            }\n                        }\n\n                    });\n\n                    if(found){\n                        return false;//break the each loop\n                    }\n\n                });\n\n            }else{\n\n                throw new Error('invalid argument : colllectionNames must be an array or a string');\n            }\n\n            return found;\n        },\n        addMarkupNamespace : function addMarkupNamespace(markup, ns){\n            return ns ? markup.replace(/<(\\/)?([^!\\/:>]+)(\\/)?>/g, '<$1' + ns + ':$2$3>') : markup;\n        },\n        removeMarkupNamespaces : function removeMarkupNamespace(markup){\n            return markup.replace(/<(\\/)?(\\w*):([^>]*)>/g, '<$1$3>');\n        },\n        getMarkupUsedNamespaces : function getMarkupUsedNamespaces(markup){\n            var namespaces = [];\n            markup.replace(/<(\\/)?(\\w*):([^>]*)>/g, function(original, slash, ns, node){\n                namespaces.push(ns);\n                return '<'+slash+node+'>';\n            });\n            return _.uniq(namespaces);\n        }\n    };\n\n    return util;\n});\n","define('taoQtiItem/qtiItem/helper/rendererConfig',['lodash', 'jquery'], function(_, $){\n\n    var rendererConfigHelper = {};\n\n    rendererConfigHelper.getOptionsFromArguments = function(args){\n\n        var options = {\n            data : {},\n            placeholder : null,\n            subclass : '',\n            renderer : null\n        };\n        \n        _.each(args, function(arg){\n            if(arg){\n                if(arg.isRenderer){\n                    options.renderer = arg;\n                }else if(arg instanceof $ && arg.length){\n                    options.placeholder = arg;\n                }else if(_.isString(arg)){\n                    options.subclass = arg;\n                }else if(_.isPlainObject(arg)){\n                    options.data = arg;\n                }else{\n                    console.log('invalid arg', arg, args);\n                }\n            }\n        });\n        \n        return options;\n    };\n    \n    return rendererConfigHelper;\n});\n\n","define('taoQtiItem/qtiItem/core/Element',['jquery', 'class', 'lodash', 'taoQtiItem/qtiItem/helper/util', 'taoQtiItem/qtiItem/helper/rendererConfig'], function($, Class, _, util, rendererConfig){\n\n    var _instances = {};\n\n    var Element = Class.extend({\n        qtiClass : '',\n        serial : '',\n        relatedItem : null,\n        init : function(serial, attributes){\n\n            //init own attributes\n            this.attributes = {};\n\n            //system properties, for item creator internal use only\n            this.metaData = {};\n\n            //init call in the format init(attributes)\n            if(typeof (serial) === 'object'){\n                attributes = serial;\n                serial = '';\n            }\n\n            if(!serial){\n                serial = util.buildSerial(this.qtiClass + '_');\n            }\n\n            if(serial && (typeof serial !== 'string' || !serial.match(/^[a-z_0-9]*$/i))){\n                throw 'invalid QTI serial : (' + (typeof serial) + ') ' + serial;\n            }\n\n            if(!_instances[serial]){\n                _instances[serial] = this;\n                this.serial = serial;\n                this.setAttributes(attributes || {});\n            }else{\n                throw 'a QTI Element with the same serial already exists ' + serial;\n            }\n\n            if(typeof this.initContainer === 'function'){\n                this.initContainer(arguments[2] || '');\n            }\n            if(typeof this.initObject === 'function'){\n                this.initObject();\n            }\n        },\n        is : function(qtiClass){\n            return (qtiClass === this.qtiClass);\n        },\n        placeholder : function(){\n            return '{{' + this.serial + '}}';\n        },\n        getSerial : function(){\n            return this.serial;\n        },\n        getUsedIdentifiers : function(){\n            var usedIds = {};\n            var elts = this.getComposingElements();\n            for(var i in elts){\n                var elt = elts[i];\n                var id = elt.attr('identifier');\n                if(id){\n                    //warning: simplistic implementation, allow only one unique identifier in the item no matter the element class/type\n                    usedIds[id] = elt;\n                }\n            }\n            return usedIds;\n        },\n        attr : function(name, value){\n            if(name){\n                if(value !== undefined){\n                    this.attributes[name] = value;\n                }else{\n                    if(typeof (name) === 'object'){\n                        for(var prop in name){\n                            this.attr(prop, name[prop]);\n                        }\n                    }else if(typeof (name) === 'string'){\n                        if(this.attributes[name] === undefined){\n                            return undefined;\n                        }else{\n                            return this.attributes[name];\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        data : function(name, value){\n            if(name){\n                if(value !== undefined){\n                    this.metaData[name] = value;\n                    $(document).trigger('metaChange.qti-widget', {element : this, key : name, value : value});\n                }else{\n                    if(typeof (name) === 'object'){\n                        for(var prop in name){\n                            this.data(prop, name[prop]);\n                        }\n                    }else if(typeof (name) === 'string'){\n                        if(this.metaData[name] === undefined){\n                            return undefined;\n                        }else{\n                            return this.metaData[name];\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        removeData : function(name){\n            delete this.metaData[name];\n            return this;\n        },\n        removeAttr : function(name){\n            return this.removeAttributes(name);\n        },\n        setAttributes : function(attributes){\n            this.attributes = attributes;\n            return this;\n        },\n        getAttributes : function(){\n            return _.clone(this.attributes);\n        },\n        removeAttributes : function(attrNames){\n            if(typeof (attrNames) === 'string'){\n                attrNames = [attrNames];\n            }\n            for(var i in attrNames){\n                delete this.attributes[attrNames[i]];\n            }\n            return this;\n        },\n        getComposingElements : function(){\n            var elts = {};\n            if(typeof this.initContainer === 'function'){\n                var container = this.getBody();\n                elts[container.getSerial()] = container;//pass individual object by ref, instead of the whole list(object)\n                elts = _.extend(elts, container.getComposingElements());\n            }\n            if(typeof this.initObject === 'function'){\n                var object = this.getObject();\n                elts[object.getSerial()] = object;//pass individual object by ref, instead of the whole list(object)\n                elts = _.extend(elts, object.getComposingElements());\n            }\n            _.each(this.metaData, function(v){\n                if(Element.isA(v, '_container')){\n                    elts[v.getSerial()] = v;\n                    elts = _.extend(elts, v.getComposingElements());\n                }\n            });\n            return elts;\n        },\n        getUsedClasses : function(){\n\n            var ret = [this.qtiClass],\n                composingElts = this.getComposingElements();\n\n            _.each(composingElts, function(elt){\n                ret.push(elt.qtiClass);\n            });\n\n            return _.uniq(ret);\n        },\n        find : function(serial){\n\n            var found = null;\n\n            if(typeof this.initObject === 'function'){\n                var object = this.getObject();\n                if(object.serial === serial){\n                    found = {'parent' : this, 'element' : object, 'location' : 'object'};\n                }\n            }\n\n            if(!found && typeof this.initContainer === 'function'){\n                found = this.getBody().find(serial, this);\n            }\n\n            return found;\n        },\n        parent : function(){\n            var item = this.getRelatedItem();\n            if(item){\n                var found = item.find(this.getSerial());\n                if(found){\n                    return found.parent;\n                }\n            }\n            return null;\n        },\n        setRelatedItem : function(item, recursive){\n\n            recursive = (typeof recursive === 'undefined') ? true : recursive;\n\n            if(Element.isA(item, 'assessmentItem')){\n                this.relatedItem = item;\n                var composingElts = this.getComposingElements();\n                for(var i in composingElts){\n                    composingElts[i].setRelatedItem(item, false);\n                }\n            }\n\n        },\n        getRelatedItem : function(){\n            var ret = null;\n            if(Element.isA(this.relatedItem, 'assessmentItem')){\n                ret = this.relatedItem;\n            }\n            return ret;\n        },\n        setRenderer : function(renderer){\n            if(renderer && renderer.isRenderer){\n                this.renderer = renderer;\n                var elts = this.getComposingElements();\n                for(var serial in elts){\n                    elts[serial].setRenderer(renderer);\n                }\n            }else{\n                throw 'invalid qti rendering engine';\n            }\n        },\n        getRenderer : function(){\n            return this.renderer;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments);\n            var renderer = args.renderer || this.getRenderer();\n\n            var tplData = {},\n                defaultData = {\n                    'tag' : this.qtiClass,\n                    'serial' : this.serial,\n                    'attributes' : this.getAttributes()\n                };\n\n            if(!renderer){\n                throw 'render: no renderer found for the element ' + this.qtiClass + ':' + this.serial;\n            }\n\n            if(typeof this.initContainer === 'function'){\n                defaultData.body = this.getBody().render(renderer);\n            }\n            if(typeof this.initObject === 'function'){\n                defaultData.object = {\n                    attributes : this.object.getAttributes()\n                };\n                defaultData.object.attributes.data = renderer.getAbsoluteUrl(this.object.attr('data'));\n            }\n\n            tplData = _.merge(defaultData, args.data || {});\n            tplData = renderer.getData(this, tplData, args.subclass);\n            var rendering = renderer.renderTpl(this, tplData, args.subclass);\n            if(args.placeholder){\n                args.placeholder.replaceWith(rendering);\n            }\n\n            return rendering;\n        },\n        postRender : function(data, altClassName, renderer){\n\n            renderer = renderer || this.getRenderer();\n\n            if(typeof this.initContainer === 'function'){\n                //post render body element\n                this.getBody().postRender({}, '', renderer);\n            }\n            \n            if(renderer){\n                return renderer.postRender(this, data, altClassName);\n            }else{\n                throw 'postRender: no renderer found for the element ' + this.qtiClass + ':' + this.serial;\n            }\n        },\n        getContainer : function($scope, subclass){\n            var renderer = this.getRenderer();\n            if(renderer){\n                return renderer.getContainer(this, $scope, subclass);\n            }else{\n                throw 'getContainer: no renderer found for the element ' + this.qtiClass + ':' + this.serial;\n            }\n        },\n        toArray : function(){\n            var arr = {\n                serial : this.serial,\n                type : this.qtiClass,\n                attributes : this.getAttributes()\n            };\n\n            if(typeof this.initContainer === 'function'){\n                arr.body = this.getBody().toArray();\n            }\n            if(typeof this.initObject === 'function'){\n                arr.object = this.object.toArray();\n            }\n\n            return arr;\n        },\n        isEmpty : function(){\n            //tells whether the element should be considered empty or not, from the rendering point of view\n            return false;\n        },\n        addClass : function(className){\n            var clazz = this.attr('class') || '';\n            if(!_containClass(clazz, className)){\n                this.attr('class', clazz + (clazz.length ? ' ' : '') + className);\n            }\n        },\n        hasClass : function(className){\n            return _containClass(this.attr('class'), className);\n        },\n        removeClass : function(className){\n\n            var clazz = this.attr('class') || '';\n            if(clazz){\n                var regex = new RegExp('(?:^|\\\\s)' + className + '(?:\\\\s|$)', '');\n                clazz = clazz.replace(regex, '').replace(/^\\s+/, '');\n                if(clazz){\n                    this.attr('class', clazz);\n                }else{\n                    this.removeAttr('class');\n                }\n            }\n        },\n        isset : function(){\n            return Element.issetElement(this.serial);\n        },\n        unset : function(){\n            return Element.unsetElement(this.serial);\n        }\n    });\n\n    var _containClass = function(allClassStr, className){\n        var regex = new RegExp('(?:^|\\\\s)' + className + '(?:\\\\s|$)', '');\n        return allClassStr && regex.test(allClassStr);\n    };\n\n    //helpers\n    Element.isA = function(qtiElement, qtiClass){\n        return (qtiElement instanceof Element && qtiElement.is(qtiClass));\n    };\n\n    Element.getElementBySerial = function(serial){\n        return _instances[serial];\n    };\n    \n    Element.issetElement = function(serial){\n        return !!_instances[serial];\n    };\n    \n    Element.unsetElement = function(serial){\n        \n        var element = Element.getElementBySerial(serial);\n        \n        if(element){\n            \n            var composingElements = element.getComposingElements();\n            _.each(composingElements, function(elt){\n                delete _instances[elt.serial];\n            });\n            delete _instances[element.serial];\n            \n        }else{\n            throw 'cannot unset an element that does not exist';\n        }\n        \n        return true;\n    };\n\n    return Element;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/helper/panel',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element'\n], function($, _, Element){\n\n    var _getItemContainer = function(){\n        return $('#item-editor-panel');\n    };\n\n    var showPanel = function($panel, $fold){\n\n        $panel.show();\n        openSections($panel.children('section'));\n\n        if($fold && $fold.length){\n            closeSections($fold.children('section'));\n        }\n    };\n\n    var initFormVisibilityListener = function(){\n\n        //first of all, clear all listener\n        $(document).off('.panel');\n\n        var $itemContainer = _getItemContainer();\n\n        var _staticElements = {\n            img : 'Image',\n            object : 'Media',\n            rubricBlock : 'Rubric Block',\n            math : 'Math'\n        };\n\n        // all sections on the right sidebar are invisible by default\n        var $formInteractionPanel = $('#item-editor-interaction-property-bar'),\n            $formChoicePanel = $('#item-editor-choice-property-bar'),\n            $formResponsePanel = $('#item-editor-response-property-bar'),\n            $formItemPanel = $('#item-editor-item-property-bar'),\n            $formBodyElementPanel = $('#item-editor-body-element-property-bar'),\n            $formTextBlockPanel = $('#item-editor-text-property-bar'),\n            $formModalFeedbackPanel = $('#item-editor-modal-feedback-property-bar'),\n            $formStylePanel = $('#item-style-editor-bar'),\n            $appearanceToggler = $('#appearance-trigger'),\n            $menuLabel = $appearanceToggler.find('.menu-label'),\n            $itemIcon = $appearanceToggler.find('.icon-item'),\n            $styleIcon = $appearanceToggler.find('.icon-style');\n\n        var _toggleAppearanceEditor = function(active){\n\n            if(active){\n\n                $appearanceToggler.addClass('active');\n                $formStylePanel.show();\n                $formItemPanel.hide();\n\n                //current widget sleep:\n                $itemContainer.trigger('styleedit');\n\n                /* At the time of writing this the following sections are available:\n                 *\n                 * #sidebar-left-section-text\n                 * #sidebar-left-section-block-interactions\n                 * #sidebar-left-section-inline-interactions\n                 * #sidebar-left-section-graphic-interactions\n                 * #sidebar-left-section-media\n                 * #sidebar-right-css-manager\n                 * #sidebar-right-style-editor\n                 * #sidebar-right-item-properties\n                 * #sidebar-right-body-element-properties\n                 * #sidebar-right-text-block-properties\n                 * #sidebar-right-interaction-properties\n                 * #sidebar-right-choice-properties\n                 * #sidebar-right-response-properties\n                 */\n                showPanel($formStylePanel);\n                $menuLabel.text($menuLabel.data('item'));\n                $itemIcon.show();\n                $styleIcon.hide();\n            }else{\n                $appearanceToggler.removeClass('active');\n                $formStylePanel.hide();\n                showPanel($formItemPanel);\n                $menuLabel.text($menuLabel.data('style'));\n                $itemIcon.hide();\n                $styleIcon.show();\n            }\n        };\n\n        $appearanceToggler.on('click', function(){\n\n            if($appearanceToggler.hasClass('active')){\n                _toggleAppearanceEditor(false);\n            }else{\n                _toggleAppearanceEditor(true);\n            }\n        });\n\n        //@todo : fix this timeout event\n        _.delay(function(){\n            showPanel($formItemPanel);\n        }, 200);\n\n        $(document).on('afterStateInit.qti-widget.panel', function(e, element, state){\n\n            switch(state.name){\n                case 'active':\n\n                    _toggleAppearanceEditor(false);\n                    if(!Element.isA(element, 'assessmentItem')){\n                        $formItemPanel.hide();\n                    }\n\n                    var label = _staticElements[element.qtiClass];\n                    if(label){\n                        $formBodyElementPanel.find('h2').html(label + ' Properties');\n                        showPanel($formBodyElementPanel);\n                    }else if(element.qtiClass === '_container'){\n                        showPanel($formTextBlockPanel);\n                    }\n\n                    if(element.qtiClass === 'modalFeedback'){\n                        showPanel($formModalFeedbackPanel);\n                        $formResponsePanel.hide();\n                    }\n                    break;\n\n                case 'question':\n\n                    showPanel($formInteractionPanel);\n                    break;\n\n                case 'answer':\n\n                    showPanel($formResponsePanel);\n                    break;\n\n                case 'choice':\n                    showPanel($formChoicePanel, $formInteractionPanel);\n                    break;\n\n                case 'sleep':\n\n                    if(_staticElements[element.qtiClass]){\n                        $formBodyElementPanel.hide();\n                    }else if(element.qtiClass === '_container'){\n                        $formTextBlockPanel.hide();\n                    }\n\n                    if(!Element.isA(element, 'choice')){\n                        if(!$itemContainer.find('.widget-box.edit-active').length){\n                            showPanel($formItemPanel);\n                        }\n                    }\n                    break;\n            }\n\n        }).on('afterStateExit.qti-widget.panel', function(e, element, state){\n\n            switch(state.name){\n                case 'active':\n                    if(element.qtiClass === 'modalFeedback'){\n                        showPanel($formResponsePanel);\n                        $formModalFeedbackPanel.hide();\n                    }\n                    break;\n                case 'question':\n                    if(element.is('interaction')){\n                        $formChoicePanel.hide();\n                        $formInteractionPanel.hide();\n                    }\n                    break;\n                case 'choice':\n                    $formChoicePanel.hide();\n                    showPanel($formInteractionPanel);\n                    break;\n                case 'answer':\n                    $formResponsePanel.hide();\n                    break;\n            }\n\n        }).on('elementCreated.qti-widget.panel', function(e, data){\n\n            if(data.element.qtiClass === '_container'){\n                enableSubGroup('inline-interactions');\n            }\n\n        }).on('deleted.qti-widget.panel', function(e, data){\n\n            if(data.element.qtiClass === '_container'){\n                toggleInlineInteractionGroup();\n            }\n\n        });\n    };\n\n    var toggleInlineInteractionGroup = function(){\n\n        var $itemContainer = _getItemContainer();\n        if($itemContainer.find('.widget-textBlock').length){\n            enableSubGroup('inline-interactions');\n        }else{\n            disableSubGroup('inline-interactions');\n        }\n    };\n    \n    // selectors and classes\n    var heading = 'h2',\n        section = 'section',\n        panel = 'hr, .panel',\n        closed = 'closed',\n        ns = 'accordion';\n\n    var initSidebarAccordion = function($sidebar){\n\n        var $sections = $sidebar.find(section),\n            $allPanels = $sidebar.children(panel).hide(),\n            $allTriggers = $sidebar.find(heading);\n\n        if($allTriggers.length === 0){\n            return true;\n        }\n\n        // setup events\n        $allTriggers.each(function(){\n            var $heading = $(this),\n                $section = $heading.parents(section),\n                $panel = $section.children(panel),\n                $closer = $('<span>', {'class' : 'icon-up'}),\n                $opener = $('<span>', {'class' : 'icon-down'}),\n                action = $panel.is(':visible') ? 'open' : 'close';\n\n            $heading.append($closer).append($opener).addClass(closed);\n\n            // toggle heading class arrow (actually switch arrow)\n            $panel.on('panelclose.' + ns + ' panelopen.' + ns, function(e, args){\n                var fn = e.type === 'panelclose' ? 'add' : 'remove';\n                args.heading[fn + 'Class'](closed);\n            });\n\n            $panel.trigger('panel' + action + '.' + ns, {heading : $heading});\n        });\n\n        $sections.each(function(){\n\n            // assign click action to headings\n            $(this).find(heading).on('click', function(e, args){\n\n                var $heading = $(this),\n                    $panel = $heading.parents(section).children(panel),\n                    preserveOthers = !!(args && args.preserveOthers),\n                    actions = {\n                        close : 'hide',\n                        open : 'fadeIn'\n                    },\n                action,\n                    forceState = (args && args.forceState ? args.forceState : false),\n                    classFn;\n\n                if(forceState){\n                    classFn = forceState === 'open' ? 'addClass' : 'removeClass';\n                    $heading[classFn](closed);\n                }\n\n                action = $heading.hasClass(closed) ? 'open' : 'close';\n\n                // whether or not to close other sections in the same sidebar\n                // @todo (optional): remove 'false' in the condition below\n                // to change the style to accordion, i.e. to allow for only one open section\n                if(false && !preserveOthers){\n                    $allPanels.not($panel).each(function(){\n                        var $panel = $(this),\n                            $heading = $panel.parent().find(heading),\n                            _action = 'close';\n\n                        $panel.trigger('panel' + _action + '.' + ns, {heading : $heading})[actions[_action]]();\n                    });\n                }\n\n                $panel.trigger('panel' + action + '.' + ns, {heading : $heading})[actions[action]]();\n            });\n\n        });\n    };\n\n    /**\n     * Toggle section display\n     *\n     * @param sections\n     */\n    var _toggleSections = function(sections, preserveOthers, state){\n        sections.each(function(){\n            $(this).find(heading).trigger('click', {preserveOthers : preserveOthers, forceState : state});\n        });\n    }\n\n    /**\n     * Close specific sections\n     *\n     * @param sections\n     */\n    var closeSections = function(sections, preserveOthers){\n        _toggleSections(sections, !!preserveOthers, 'close');\n    };\n\n    /**\n     * Open specific sections\n     *\n     * @param sections\n     */\n    var openSections = function(sections, preserveOthers){\n        _toggleSections(sections, !!preserveOthers, 'open');\n    };\n\n    /**\n     * toggle availability of sub group\n     * @param subGroup\n     */\n    var _toggleSubGroup = function(subGroup, state){\n        subGroup = $('.' + subGroup);\n        if(subGroup.length){\n            var fn = state === 'disable' ? 'addClass' : 'removeClass';\n            subGroup.data('cover')[fn]('blocking');\n        }\n    };\n\n    /**\n     * enable sub group\n     * @param subGroup\n     */\n    var enableSubGroup = function(subGroup){\n        _toggleSubGroup(subGroup, 'enable');\n    };\n\n    /**\n     * disable sub group\n     * @param subGroup\n     */\n    var disableSubGroup = function(subGroup){\n        _toggleSubGroup(subGroup, 'disable');\n    };\n\n    return {\n        initFormVisibilityListener : initFormVisibilityListener,\n        showPanel : showPanel,\n        toggleInlineInteractionGroup : toggleInlineInteractionGroup,\n        initSidebarAccordion : initSidebarAccordion,\n        openSections : openSections,\n        closeSections : closeSections,\n        enableSubGroup : enableSubGroup,\n        disableSubGroup : disableSubGroup\n    };\n\n});\n\n","define('taoQtiItem/qtiItem/core/qtiClasses',[], function(){\n    return {\n        '_container' : 'taoQtiItem/qtiItem/core/Container',\n        'assessmentItem' : 'taoQtiItem/qtiItem/core/Item',\n        'responseProcessing' : 'taoQtiItem/qtiItem/core/ResponseProcessing',\n        '_simpleFeedbackRule' : 'taoQtiItem/qtiItem/core/response/SimpleFeedbackRule',\n        'stylesheet' : 'taoQtiItem/qtiItem/core/Stylesheet',\n        'math' : 'taoQtiItem/qtiItem/core/Math',\n        'img' : 'taoQtiItem/qtiItem/core/Img',\n        'object' : 'taoQtiItem/qtiItem/core/Object',\n        'outcomeDeclaration' : 'taoQtiItem/qtiItem/core/variables/OutcomeDeclaration',\n        'responseDeclaration' : 'taoQtiItem/qtiItem/core/variables/ResponseDeclaration',\n        'rubricBlock' : 'taoQtiItem/qtiItem/core/RubricBlock',\n        'associableHotspot' : 'taoQtiItem/qtiItem/core/choices/AssociableHotspot',\n        'gap' : 'taoQtiItem/qtiItem/core/choices/Gap',\n        'gapImg' : 'taoQtiItem/qtiItem/core/choices/GapImg',\n        'gapText' : 'taoQtiItem/qtiItem/core/choices/GapText',\n        'hotspotChoice' : 'taoQtiItem/qtiItem/core/choices/HotspotChoice',\n        'hottext' : 'taoQtiItem/qtiItem/core/choices/Hottext',\n        'inlineChoice' : 'taoQtiItem/qtiItem/core/choices/InlineChoice',\n        'simpleAssociableChoice' : 'taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice',\n        'simpleChoice' : 'taoQtiItem/qtiItem/core/choices/SimpleChoice',\n        'associateInteraction' : 'taoQtiItem/qtiItem/core/interactions/AssociateInteraction',\n        'choiceInteraction' : 'taoQtiItem/qtiItem/core/interactions/ChoiceInteraction',\n        'endAttemptInteraction' : 'taoQtiItem/qtiItem/core/interactions/EndAttemptInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction',\n        'gapMatchInteraction' : 'taoQtiItem/qtiItem/core/interactions/GapMatchInteraction',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiItem/core/interactions/HotspotInteraction',\n        'hottextInteraction' : 'taoQtiItem/qtiItem/core/interactions/HottextInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiItem/core/interactions/MatchInteraction',\n        'mediaInteraction' : 'taoQtiItem/qtiItem/core/interactions/MediaInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiItem/core/interactions/OrderInteraction',\n        'prompt' : 'taoQtiItem/qtiItem/core/interactions/Prompt',\n        'selectPointInteraction' : 'taoQtiItem/qtiItem/core/interactions/SelectPointInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiItem/core/interactions/SliderInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiItem/core/interactions/TextEntryInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiItem/core/interactions/UploadInteraction',\n        'feedbackBlock' : 'taoQtiItem/qtiItem/core/feedbacks/FeedbackBlock',\n        'feedbackInline' : 'taoQtiItem/qtiItem/core/feedbacks/FeedbackInline',\n        'modalFeedback' : 'taoQtiItem/qtiItem/core/feedbacks/ModalFeedback',\n        'customInteraction' : 'taoQtiItem/qtiItem/core/interactions/CustomInteraction',\n        'infoControl' : 'taoQtiItem/qtiItem/core/PortableInfoControl'\n    };\n});\n","//@todo : move this to the ../helper directory\ndefine('taoQtiItem/qtiItem/core/Loader',['lodash', 'class', 'taoQtiItem/qtiItem/core/qtiClasses', 'taoQtiItem/qtiItem/core/Element'], function(_, Class, qtiClasses, Element){\n\n    var Loader = Class.extend({\n        init : function(item, classesLocation){\n\n            this.qti = {}; //loaded qti classes are store here\n            this.classesLocation = {};\n\n            this.item = item || null;//starts either from scratch or with an existing item object\n            this.setClassesLocation(classesLocation || qtiClasses);//load default location for qti classes model\n        },\n        setClassesLocation : function(qtiClasses){\n            _.extend(this.classesLocation, qtiClasses);\n            return this;\n        },\n        getRequiredClasses : function(data){\n            var ret = [];\n            for(var i in data){\n                if(i === 'qtiClass' && data[i] !== '_container' && i !== 'relatedItem'){//although a _container is a concrete class in TAO, it is not defined in QTI standard\n                    ret.push(data[i]);\n                }else if(typeof(data[i]) === 'object'){\n                    ret = _.union(ret, this.getRequiredClasses(data[i]));\n                }\n            }\n            return ret;\n        },\n        loadRequiredClasses : function(data, callback, reload){\n\n            var requiredClasses = this.getRequiredClasses(data, reload), required = [];\n\n            for(var i in requiredClasses){\n                var requiredClass = requiredClasses[i];\n                if(this.classesLocation[requiredClass]){\n                    required.push(this.classesLocation[requiredClass]);\n                }else{\n                    throw new Error('missing qti class location declaration : ' + requiredClass);\n                }\n            }\n\n            var _this = this;\n            require(required, function(){\n                _.each(arguments, function(QtiClass){\n                    _this.qti[QtiClass.prototype.qtiClass] = QtiClass;\n                });\n                callback.call(_this, _this.qti);\n            });\n        },\n        getLoadedClasses : function(){\n            return _.keys(this.qti);\n        },\n        loadItemData : function(data, callback){\n\n            var _this = this;\n            _this.loadRequiredClasses(data, function(Qti){\n\n                if(typeof(data) === 'object' && data.qtiClass === 'assessmentItem'){\n                    _this.item = new Qti.assessmentItem(data.serial, data.attributes || {});\n                    _this.loadContainer(_this.item.getBody(), data.body);\n\n                    for(var i in data.outcomes){\n                        var outcome = _this.buildOutcome(data.outcomes[i]);\n                        if(outcome){\n                            _this.item.addOutcomeDeclaration(outcome);\n                        }\n                    }\n                    for(var i in data.feedbacks){\n                        var feedback = _this.buildElement(data.feedbacks[i]);\n                        if(feedback){\n                            _this.item.addModalFeedback(feedback);\n                        }\n                    }\n                    for(var i in data.stylesheets){\n                        var stylesheet = _this.buildElement(data.stylesheets[i]);\n                        if(stylesheet){\n                            _this.item.addStylesheet(stylesheet);\n                        }\n                    }\n\n                    //important : build responses after all modal feedbacks and outcomes has been loaded, because the simple feedback rules need to reference them\n                    for(var i in data.responses){\n                        var response = _this.buildResponse(data.responses[i]);\n                        if(response){\n                            _this.item.addResponseDeclaration(response);\n\n                            var feedbackRules = data.responses[i].feedbackRules;\n                            if(feedbackRules){\n                                _.forIn(feedbackRules, function(fbData, serial){\n                                    response.feedbackRules[serial] = _this.buildSimpleFeedbackRule(fbData);\n                                });\n                            }\n                        }\n                    }\n\n                    if(data.responseProcessing){\n                        _this.item.setResponseProcessing(_this.buildResponseProcessing(data.responseProcessing));\n                    }\n                    _this.item.setNamespaces(data.namespaces);\n                }\n\n                if(typeof(callback) === 'function'){\n                    callback.call(_this, _this.item);\n                }\n            });\n        },\n        loadElement : function(data, callback){\n\n            var _this = this;\n\n            _this.loadRequiredClasses(data, function(Qti){\n\n                var element = _this.buildElement(data);\n\n                if(typeof(callback) === 'function'){\n                    callback.call(_this, element);\n                }\n            });\n        },\n        /**\n         * Load ALL given elements into existing loaded item \n         * \n         * @todo to be renamed to loadItemElements\n         * @param {object} data\n         * @param {function} callback\n         * @returns {undefined}\n         */\n        loadElements : function(data, callback){\n\n            var _this = this;\n\n            if(_this.item){\n\n                this.loadRequiredClasses(data, function(){\n\n                    var allElements = _this.item.getComposingElements();\n\n                    for(var i in data){\n                        var elementData = data[i];\n                        if(elementData && elementData.qtiClass && elementData.serial){\n                            //find and update element\n                            if(allElements[elementData.serial]){\n                                _this.loadElementData(allElements[elementData.serial], elementData);\n                            }\n                        }\n                    }\n\n                    if(typeof(callback) === 'function'){\n                        callback.call(_this, _this.item);\n                    }\n                });\n            }else{\n                throw 'QtiLoader : cannot load elements in empty item';\n            }\n\n        },\n        buildResponse : function(data){\n\n            var response = this.buildElement(data);\n\n            response.template = data.howMatch || null;\n            response.defaultValue = data.defaultValue || null;\n            response.correctResponse = data.correctResponses || null;\n\n            if(_.size(data.mapping)){\n                response.mapEntries = data.mapping;\n            }else if(_.size(data.areaMapping)){\n                response.mapEntries = data.areaMapping;\n            }else{\n                response.mapEntries = {};\n            }\n\n            response.mappingAttributes = data.mappingAttributes || {};\n\n            return response;\n        },\n        buildSimpleFeedbackRule : function(data){\n\n            var feedbackRule = this.buildElement(data);\n\n            if(data.condition){\n                feedbackRule.condition = data.condition;\n            }\n            if(data.comparedValue){\n                feedbackRule.comparedValue = data.comparedValue;\n            }\n\n            feedbackRule.comparedOutcome = this.item.responses[data.comparedOutcome] || null;\n            feedbackRule.feedbackOutcome = this.item.outcomes[data.feedbackOutcome] || null;\n            feedbackRule.feedbackThen = this.item.modalFeedbacks[data.feedbackThen] || null;\n            feedbackRule.feedbackElse = this.item.modalFeedbacks[data.feedbackElse] || null;\n\n            return feedbackRule;\n        },\n        buildOutcome : function(data){\n            var outcome = this.buildElement(data);\n            outcome.defaultValue = data.defaultValue || null;\n            return outcome;\n        },\n        buildResponseProcessing : function(data){\n            var rp = this.buildElement(data);\n            if(data && data.processingType){\n                if(data.processingType === 'custom'){\n                    rp.xml = data.data;\n                    rp.processingType = 'custom';\n                }else{\n                    rp.processingType = 'templateDriven';\n                }\n            }\n            return rp;\n        },\n        loadContainer : function(bodyObject, bodyData){\n            if(!Element.isA(bodyObject, '_container')){\n                throw 'bodyObject must be a QTI Container';\n            }\n\n            if(bodyData && typeof bodyData.body === 'string' && (typeof bodyData.elements === 'array' || typeof bodyData.elements === 'object')){\n                for(var serial in bodyData.elements){\n                    var eltData = bodyData.elements[serial];\n                    //check if class is loaded:\n                    var element = this.buildElement(eltData);\n                    if(element){\n                        bodyObject.setElement(element, bodyData.body);\n                    }\n                }\n                bodyObject.body(bodyData.body);\n            }else{\n                throw 'wrong bodydata format';\n            }\n        },\n        buildElement : function(elementData){\n            var elt = null;\n            if(elementData && elementData.qtiClass && elementData.serial){\n                var className = elementData.qtiClass;\n                if(this.qti[className]){\n                    elt = new this.qti[className](elementData.serial);\n                    this.loadElementData(elt, elementData);\n                }else{\n                    throw 'the qti element class does not exist: ' + className;\n                }\n            }else{\n                throw 'wrong elementData format';\n            }\n            return elt;\n        },\n        loadElementData : function(element, data){\n\n            element.setAttributes(_.clone(data.attributes) || {});\n\n            if(element.body && data.body){\n                if(element.bdy){\n                    this.loadContainer(element.getBody(), data.body);\n                }\n            }\n\n            if(element.object && data.object){\n                if(element.object){\n                    this.loadObjectData(element.object, data.object);\n                }\n            }\n\n            if(Element.isA(element, 'interaction')){\n                this.loadInteractionData(element, data);\n            }else if(Element.isA(element, 'choice')){\n                this.loadChoiceData(element, data);\n            }else if(Element.isA(element, 'math')){\n                this.loadMathData(element, data);\n            }else if(Element.isA(element, 'infoControl')){\n                this.loadPicData(element, data);\n            }\n\n            return element;\n        },\n        loadInteractionData : function(interaction, data){\n            if(Element.isA(interaction, 'blockInteraction')){\n                if(data.prompt){\n                    this.loadContainer(interaction.prompt.getBody(), data.prompt);\n                }\n            }\n\n            this.buildInteractionChoices(interaction, data);\n\n            if(Element.isA(interaction, 'customInteraction')){\n                this.loadPciData(interaction, data);\n            }\n        },\n        buildInteractionChoices : function(interaction, data){\n\n            //note: Qti.ContainerInteraction (Qti.GapMatchInteraction and Qti.HottextInteraction) has already been parsed by builtElement(interacionData);\n            if(data.choices){\n                if(Element.isA(interaction, 'matchInteraction')){\n                    for(var set = 0; set < 2; set++){\n                        if(!data.choices[set]){\n                            throw 'missing match set #' + set;\n                        }\n                        var matchSet = data.choices[set];\n                        for(var serial in matchSet){\n                            var choice = this.buildElement(matchSet[serial]);\n                            if(choice){\n                                interaction.addChoice(choice, set);\n                            }\n                        }\n                    }\n                }else{\n                    for(var serial in data.choices){\n                        var choice = this.buildElement(data.choices[serial]);\n                        if(choice){\n                            interaction.addChoice(choice);\n                        }\n                    }\n                }\n\n                if(Element.isA(interaction, 'graphicGapMatchInteraction')){\n                    if(data.gapImgs){\n                        for(var serial in data.gapImgs){\n                            var gapImg = this.buildElement(data.gapImgs[serial]);\n                            if(gapImg){\n                                interaction.addGapImg(gapImg);\n                            }\n                        }\n                    }\n                }\n\n            }\n\n        },\n        loadChoiceData : function(choice, data){\n            if(Element.isA(choice, 'textVariableChoice')){\n                choice.val(data.text);\n            }else if(Element.isA(choice, 'gapImg')){\n                //has already been taken care of in buildElement()\n            }else if(Element.isA(choice, 'containerChoice')){\n                //has already been taken care of in buildElement()\n            }\n        },\n        loadObjectData : function(object, data){\n            object.setAttributes(data.attributes);\n            //@todo: manage object like a container\n            if(data._alt){\n                if(data._alt.qtiClass === 'object'){\n                    object._alt = Loader.buildElement(data._alt);\n                }else{\n                    object._alt = data._alt;\n                }\n            }\n        },\n        loadMathData : function(math, data){\n            math.ns = data.ns || {};\n            math.setMathML(data.mathML || '');\n            math.annotations = data.annotations || {};\n        },\n        loadPciData : function(pci, data){\n            loadPortableCustomElementData(pci, data);\n        },\n        loadPicData : function(pic, data){\n            loadPortableCustomElementData(pic, data);\n        }\n    });\n    \n    function loadPortableCustomElementData(portableElement, data){\n        portableElement.typeIdentifier = data.typeIdentifier;\n        portableElement.markup = data.markup;\n        portableElement.entryPoint = data.entryPoint;\n        portableElement.properties = data.properties;\n        portableElement.libraries = data.libraries;\n    }\n    \n    return Loader;\n});\n","define('taoQtiItem/qtiCreator/model/helper/invalidator',['lodash'], function(_){\n\n    var invalidator = {\n        completelyValid : function(element){\n            \n            var item = element.getRelatedItem();\n            var serial, invalidElements;\n            if(item){\n                serial = element.getSerial();\n                invalidElements = item.data('invalid') || {};\n            \n                delete invalidElements[serial];\n                item.data('invalid', invalidElements);\n            }\n        },\n        valid : function(element, key){\n\n            var item = element.getRelatedItem();\n            var serial = element.getSerial();\n            var invalidElements;\n\n            if(item){\n                invalidElements = item.data('invalid') || {};\n\n                if(key){\n\n                    if(invalidElements[serial] && invalidElements[serial][key]){\n                        delete invalidElements[serial][key];\n                        if(!_.size(invalidElements[serial])){\n                            delete invalidElements[serial];\n                        }\n\n                        item.data('invalid', invalidElements);\n                    }\n\n                }else{\n                    throw new Error('missing required argument \"key\"');\n                }\n            }\n        },\n        invalid : function(element, key, message, stateName){\n\n            var item = element.getRelatedItem();\n            var serial = element.getSerial();\n            var invalidElements;\n\n            if(item){\n                invalidElements = item.data('invalid') || {};\n\n                if(key){\n\n                    if(!invalidElements[serial]){\n                        invalidElements[serial] = {};\n                    }\n\n                    invalidElements[serial][key] = {\n                        message : message || '',\n                        stateName : stateName || 'active'\n                    };\n                    item.data('invalid', invalidElements);\n\n                }else{\n                    throw new Error('missing required arguments \"key\"');\n                }\n            }\n        },\n        isValid : function(element){\n\n            var item = element.getRelatedItem();\n            var serial = element.getSerial();\n            var invalidElements;\n\n            if(item){\n                invalidElements = item.data('invalid') || {};\n                return !invalidElements[serial];\n            }\n            return true;\n        }\n    };\n\n    return invalidator;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/mixin/editable',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/helper/invalidator'\n], function(_, $, Element, event, invalidator){\n\n    var _removeSelf = function(element){\n\n        var removed = false,\n            related = element.getRelatedItem();\n\n        if(related){\n\n            var found = related.find(element.getSerial());\n\n            if(found){\n\n                var parent = found.parent;\n                if(Element.isA(parent, 'interaction')){\n\n                    if(element.qtiClass === 'gapImg'){\n                        parent.removeGapImg(element);\n                    }else if(Element.isA(element, 'choice')){\n                        parent.removeChoice(element);\n                    }\n                    removed = true;\n\n                }else if(found.location === 'body' && _.isFunction(parent.initContainer)){\n\n                    if(_.isFunction(element.beforeRemove)){\n                        element.beforeRemove();\n                    }\n\n                    parent.getBody().removeElement(element);\n                    removed = true;\n\n                }else if(Element.isA(parent, '_container')){\n\n                    if(_.isFunction(element.beforeRemove)){\n                        element.beforeRemove();\n                    }\n\n                    parent.removeElement(element);\n                    removed = true;\n                }\n\n                if(removed){\n                    //mark it instantly as removed in case its is being used somewhere else\n                    element.data('removed', true);\n                    invalidator.completelyValid(element);\n                    event.deleted(element, parent);\n                }\n            }\n        }else{\n            throw 'no related item found';\n        }\n\n        return removed;\n    };\n\n    var _removeElement = function(element, containerPropName, eltToBeRemoved){\n\n        if(element[containerPropName]){\n\n            var targetSerial = '',\n                targetElt;\n\n            if(typeof (eltToBeRemoved) === 'string'){\n                targetSerial = eltToBeRemoved;\n                targetElt = Element.getElementBySerial[targetSerial];\n            }else if(eltToBeRemoved instanceof Element){\n                targetSerial = eltToBeRemoved.getSerial();\n                targetElt = eltToBeRemoved;\n            }\n\n            if(targetSerial){\n                invalidator.completelyValid(targetElt);\n                delete element[containerPropName][targetSerial];\n                Element.unsetElement(targetSerial);\n            }\n        }\n\n        return element;\n    };\n\n    var methods = {\n        init : function(serial, attributes){\n\n            //init call in the format init(attributes)\n            if(typeof (serial) === 'object'){\n                attributes = serial;\n                serial = '';\n            }\n\n            var attr = {};\n\n            if(_.isFunction(this.getDefaultAttributes)){\n                _.extend(attr, this.getDefaultAttributes());\n            }\n            _.extend(attr, attributes);\n\n            this._super(serial, attr);\n        },\n        attr : function(key, value){\n            var ret = this._super(key, value);\n            if(key !== undefined && value !== undefined){\n                $(document).trigger('attributeChange.qti-widget', {'element' : this, 'key' : key, 'value' : value});\n            }\n            return ret;\n        },\n        removeAttr : function(key){\n            var ret = this._super(key);\n            $(document).trigger('attributeChange.qti-widget', {'element' : this, 'key' : key, 'value' : null});\n            return ret;\n        },\n        remove : function(){\n            if(arguments.length === 0){\n                return _removeSelf(this);\n            }else if(arguments.length === 2){\n                return _removeElement(this, arguments[0], arguments[1]);\n            }else{\n                throw 'invalid number of argument given';\n            }\n        }\n    };\n\n    return methods;\n});\n","/**\n * Define the location of all qti classes used in the QTI Creator\n */\ndefine('taoQtiItem/qtiCreator/model/qtiClasses',['lodash', 'taoQtiItem/qtiItem/core/qtiClasses'], function(_, qtiClasses){\n\n    //clone the qtiClasses instead of modifying it by direct extend:\n    return _.defaults({\n        'assessmentItem' : 'taoQtiItem/qtiCreator/model/Item',\n        '_container' : 'taoQtiItem/qtiCreator/model/Container',\n        'img' : 'taoQtiItem/qtiCreator/model/Img',\n        'math' : 'taoQtiItem/qtiCreator/model/Math',\n        'object' : 'taoQtiItem/qtiCreator/model/Object',\n        'rubricBlock' : 'taoQtiItem/qtiCreator/model/RubricBlock',\n        'modalFeedback' : 'taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback',\n        'choiceInteraction' : 'taoQtiItem/qtiCreator/model/interactions/ChoiceInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiCreator/model/interactions/OrderInteraction',\n        'associateInteraction' : 'taoQtiItem/qtiCreator/model/interactions/AssociateInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiCreator/model/interactions/MatchInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiCreator/model/interactions/InlineChoiceInteraction',\n        'simpleChoice' : 'taoQtiItem/qtiCreator/model/choices/SimpleChoice',\n        'simpleAssociableChoice' : 'taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice',\n        'inlineChoice' : 'taoQtiItem/qtiCreator/model/choices/InlineChoice',\n        'mediaInteraction' : 'taoQtiItem/qtiCreator/model/interactions/MediaInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiCreator/model/interactions/UploadInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiCreator/model/interactions/TextEntryInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiCreator/model/interactions/SliderInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiCreator/model/interactions/ExtendedTextInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiCreator/model/interactions/HotspotInteraction',\n        'selectPointInteraction' : 'taoQtiItem/qtiCreator/model/interactions/SelectPointInteraction',\n        'graphicInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicAssociateInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicGapMatchInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction',\n        'hotspotChoice' : 'taoQtiItem/qtiCreator/model/choices/HotspotChoice',\n        'gapImg' : 'taoQtiItem/qtiCreator/model/choices/GapImg',\n        'associableHotspot' : 'taoQtiItem/qtiCreator/model/choices/AssociableHotspot',\n        'gapMatchInteraction' : 'taoQtiItem/qtiCreator/model/interactions/GapMatchInteraction',\n        'hottextInteraction' : 'taoQtiItem/qtiCreator/model/interactions/HottextInteraction',\n        'hottext' : 'taoQtiItem/qtiCreator/model/choices/Hottext',\n        'gapText' : 'taoQtiItem/qtiCreator/model/choices/GapText',\n        'gap' : 'taoQtiItem/qtiCreator/model/choices/Gap',\n        'responseDeclaration' : 'taoQtiItem/qtiCreator/model/variables/ResponseDeclaration',\n        'responseProcessing' : 'taoQtiItem/qtiCreator/model/ResponseProcessing',\n        'customInteraction' : 'taoQtiItem/qtiCreator/model/interactions/PortableCustomInteraction',\n        'infoControl' : 'taoQtiItem/qtiCreator/model/PortableInfoControl'\n    }, qtiClasses);\n\n});\n\n","define('taoQtiItem/qtiCreator/model/helper/container',['jquery', 'lodash', 'taoQtiItem/qtiCreator/model/qtiClasses'], function($, _, qtiClasses){\n\n    var methods = {\n        createElements : function(container, body, callback){\n\n            var regex = /{{([a-z_]+)\\.?([a-z_]*):new}}/ig;\n\n            //first pass to get required qti classes, but do not replace\n            var required = {};\n            body.replace(regex,\n                function(original, qtiClass, subClass){\n                    if(qtiClasses[qtiClass]){\n                        required[qtiClass] = qtiClasses[qtiClass];\n                    }else{\n                        throw 'missing required class : ' + qtiClass;\n                    }\n                });\n\n            //second pass after requiring classes:\n            require(_.values(required), function(){\n\n                //register and name all loaded classes:\n                var Qti = {};\n                for(var i in arguments){\n                    Qti[arguments[i].prototype.qtiClass] = arguments[i];\n                }\n\n                //create new elements\n                var newElts = {};\n                var newBody = body.replace(regex,\n                    function(original, qtiClass, subClass){\n                        if(Qti[qtiClass]){\n                            //create new element\n                            var elt = new Qti[qtiClass]();\n                            if(container.getRenderer()){\n                                elt.setRenderer(container.getRenderer());\n                            }\n                            newElts[elt.getSerial()] = elt;\n\n                            //manage subclassed qtiClass\n                            if(subClass){\n                                //@todo generalize it from customInteraction\n                                elt.typeIdentifier = subClass;\n                            }\n\n                            return elt.placeholder();\n                        }else{\n                            return original;\n                        }\n                    });\n\n                //insert them:\n                container.setElements(newElts, newBody);\n\n                //operations after insertions:\n                var $doc = $(document);\n                _.each(newElts, function(elt){\n                    if(_.isFunction(elt.buildIdentifier)){\n                        elt.buildIdentifier();\n                    }\n                    if(_.isFunction(elt.afterCreate)){\n                        elt.afterCreate();\n                    }\n                    $doc.trigger('elementCreated.qti-widget', {parent : container.parent(), element : elt});\n                });\n\n                if(typeof(callback) === 'function'){\n                    callback.call(container, newElts);\n                }\n            });\n\n        }\n    };\n\n    return methods;\n});\n\n","define('taoQtiItem/qtiCreator/model/mixin/editableContainer',['taoQtiItem/qtiCreator/model/helper/container'], function(containerHelper){\n\n    var methods = {\n        createElements : function(body, callback){\n            \n            var _this = this;\n            containerHelper.createElements(_this.getBody(), body, function(newElts){\n                callback.call(_this, newElts);\n            });\n\n        }\n    };\n\n    return methods;\n});\n","define('taoQtiItem/qtiItem/core/IdentifiedElement',['taoQtiItem/qtiItem/core/Element'], function(Element){\n    var IdentifiedElement = Element.extend({\n        buildIdentifier : function(prefix, useSuffix){\n            if(useSuffix === undefined){\n                useSuffix = true;\n            }\n            var item = this.getRelatedItem();\n            if(item){\n                var suffix = '', i = 1, usedIds = item.getUsedIdentifiers();\n                if(prefix){\n                    prefix = prefix.replace(/_[0-9]+$/ig, '_'); //detect incremental id of type choice_12, response_3, etc.\n                    prefix = prefix.replace(/[^a-zA-Z0-9_]/ig, '_');\n                    prefix = prefix.replace(/(_)+/ig, '_');\n                    if(useSuffix){\n                        suffix = '_' + i;\n                    }\n                }else{\n                    prefix = this.qtiClass;\n                    suffix = '_' + i;\n                }\n\n                do{\n                    var exists = false;\n                    var id = prefix + suffix;\n                    if(usedIds[id]){\n                        exists = true;\n                        suffix = '_' + i;\n                        i++;\n                    }\n                }while(exists);\n\n                this.attr('identifier', id);\n            }else{\n                throw 'cannot build identifier of an element that is not attached to an assessment item';\n            }\n            return this;\n        },\n        id : function(value){\n            if(!value && !this.attr('identifier')){\n                this.buildIdentifier(value);\n            }\n            return this.attr('identifier', value);\n        }\n    });\n\n    return IdentifiedElement;\n});\n\n\n","define('taoQtiItem/qtiItem/mixin/Mixin',[],function(){\n    \n    //@todo : need refactoring of qti item mixin with lodash.mixin()\n    return {\n        augment : function(targetClass, methods, options){\n            if(typeof(targetClass) === 'function' && typeof(methods) === 'object'){\n                for(var methodName in methods){\n                    if(!Object.hasOwnProperty(targetClass.prototype, methodName)){\n                        targetClass.prototype[methodName] = methods[methodName];\n                    }else{\n                        if(options && options.append){\n                            var _parent = targetClass.prototype[methodName];\n                            targetClass.prototype[methodName] = function(){\n                                methods[methodName].apply(this, arguments);\n                                return _parent.apply(this, arguments);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n});\n","define('taoQtiItem/qtiItem/core/Container',['taoQtiItem/qtiItem/core/Element', 'lodash', 'jquery', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(Element, _, $, rendererConfig){\n\n    var Container = Element.extend({\n        qtiClass : '_container',\n        init : function(body){\n            this._super();//generate serial, attributes array always empty\n            if(body && typeof body !== 'string'){\n                throw 'the body of a container must be a string';\n            }\n            this.bdy = body || '';\n            this.elements = {};\n        },\n        body : function(body){\n            if(typeof body === 'undefined'){\n                return this.bdy;\n            }else{\n                if(typeof body === 'string'){\n                    this.bdy = body;\n                    $(document).trigger('containerBodyChange', {\n                        body : body,\n                        container : this\n                    });\n                }else{\n                    throw 'body must be a string';\n                }\n            }\n        },\n        setElements : function(elements, body){\n            var returnValue = false;\n\n            for(var i in elements){\n                var elt = elements[i];\n                if(elt instanceof Element){\n                    \n                    body = body || this.bdy;\n                    if(body.indexOf(elt.placeholder()) === -1){\n                        body += elt.placeholder();//append the element if no placeholder found\n                    }\n\n                    elt.setRelatedItem(this.getRelatedItem() || null);\n                    this.elements[elt.getSerial()] = elt;\n                    $(document).trigger('containerElementAdded', {\n                        element : elt,\n                        container : this\n                    });\n\n                    returnValue = true;\n                }else{\n                    returnValue = false;\n                    throw 'expected a qti element';\n                }\n            }\n\n            this.body(body);\n\n            return returnValue;\n        },\n        setElement : function(element, body){\n            return this.setElements([element], body);\n        },\n        removeElement : function(element){\n            var serial = '';\n            if(typeof(element) === 'string'){\n                serial = element;\n            }else if(element instanceof Element){\n                serial = element.getSerial();\n            }\n            delete this.elements[serial];\n            this.body(this.body().replace('{{' + serial + '}}', ''));\n            return this;\n        },\n        getElements : function(qtiClass){\n            var elts = {};\n            if(typeof(qtiClass) === 'string'){\n                for(var serial in this.elements){\n                    if(Element.isA(this.elements[serial], qtiClass)){\n                        elts[serial] = this.elements[serial];\n                    }\n                }\n            }else{\n                elts = _.clone(this.elements);\n            }\n            return elts;\n        },\n        getElement : function(serial){\n            return this.elements[serial] ? this.elements[serial] : null;\n        },\n        getComposingElements : function(){\n            var elements = this.getElements();\n            var elts = {};\n            for(var serial in elements){\n                elts[serial] = elements[serial];//pass individual object by ref, instead of the whole list(object)\n                elts = _.extend(elts, elements[serial].getComposingElements());\n            }\n            return elts;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                elementsData = [],\n                tpl = this.body();\n\n            for(var serial in this.elements){\n                var elt = this.elements[serial];\n                if(typeof elt.render === 'function'){\n                    if(elt.qtiClass === '_container'){\n                        //@todo : container rendering merging, to be tested\n                        tpl = tpl.replace(elt.placeholder(), elt.render(renderer));\n                    }else{\n                        tpl = tpl.replace(elt.placeholder(), '{{{' + serial + '}}}');\n                        elementsData[serial] = elt.render(renderer);\n                    }\n                }else{\n                    throw 'render() is not defined for the qti element: ' + serial;\n                }\n            }\n\n            if(renderer.isRenderer){\n                return this._super({\n                    body : renderer.renderDirect(tpl, elementsData),\n                    contentModel : this.contentModel || 'flow'\n                }, renderer, args.placeholder);\n            }else{\n                throw 'invalid qti renderer for qti container';\n            }\n        },\n        postRender : function(data, altClassName, renderer){\n\n            renderer = renderer || this.getRenderer();\n\n            for(var serial in this.elements){\n                var elt = this.elements[serial];\n                if(typeof elt.postRender === 'function'){\n                    elt.postRender(data, '', renderer);\n                }\n            }\n            this._super(data, altClassName, renderer);\n        },\n        toArray : function(){\n            var arr = {\n                serial : this.serial,\n                body : this.bdy,\n                elements : {}\n            };\n\n            for(var serial in this.elements){\n                arr.elements[serial] = this.elements[serial].toArray();\n            }\n\n            return arr;\n        },\n        find : function(serial, parent){\n\n            var found = null;\n\n            if(this.elements[serial]){\n                \n                found = {parent : parent || this, element : this.elements[serial], location : 'body'};\n                \n            }else{\n                \n                _.each(this.elements, function(elt){\n                    \n                    found = elt.find(serial);\n                    if(found){\n                        return false;//break loop\n                    }\n                });\n            }\n\n            return found;\n        }\n    });\n\n    return Container;\n});\n","define('taoQtiItem/qtiItem/mixin/Container',['taoQtiItem/qtiItem/mixin/Mixin', 'taoQtiItem/qtiItem/core/Container'], function(Mixin, Container){\n\n    var methods = {\n        initContainer : function(body){\n            this.bdy = new Container(body || '');\n            this.bdy.setRelatedItem(this.getRelatedItem() || null);\n            this.bdy.contentModel = 'blockStatic';\n        },\n        getBody : function(){\n            return this.bdy;\n        },\n        body : function(body){\n            var ret = this.bdy.body(body);\n            return (body) ? this : ret;//for method chaining on get\n        },\n        setElement : function(element, body){\n            this.bdy.setElement(element, body);\n            return this;\n        },\n        removeElement : function(element){\n            return this.bdy.removeElement(element);\n        },\n        getElements : function(qtiClass){\n            return this.bdy.getElements(qtiClass);\n        },\n        getElement : function(serial){\n            return this.bdy.getElement(serial);\n        }\n    };\n\n    return {\n        augment : function(targetClass){\n            Mixin.augment(targetClass, methods);\n        },\n        methods : methods\n    };\n});\n","define('taoQtiItem/qtiItem/mixin/ContainerItemBody',['taoQtiItem/qtiItem/mixin/Mixin', 'taoQtiItem/qtiItem/mixin/Container', 'lodash'], function(Mixin, Container, _){\n    \n    var methods = {};\n    _.extend(methods, Container.methods);\n    _.extend(methods, {\n        initContainer:function(body){\n            Container.methods.initContainer.call(this, body);\n            this.bdy.contentModel = 'itemBody';\n        }\n    });\n\n    return {\n        augment : function(targetClass){\n            Mixin.augment(targetClass, methods);\n        },\n        methods : methods\n    };\n});\n","define('taoQtiItem/qtiItem/core/Item',[\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiItem/core/IdentifiedElement',\n    'taoQtiItem/qtiItem/mixin/ContainerItemBody',\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/helper/util'\n], function(Element, IdentifiedElement, Container, _, $, util){\n\n    var Item = IdentifiedElement.extend({\n        qtiClass : 'assessmentItem',\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.relatedItem = this;\n            this.stylesheets = {};\n            this.responses = {};\n            this.outcomes = {};\n            this.modalFeedbacks = {};\n            this.namespaces = {};\n            this.responseProcessing = null;\n        },\n        getInteractions : function(){\n            var interactions = [];\n            var elts = this.getComposingElements();\n            for(var serial in elts){\n                if(Element.isA(elts[serial], 'interaction')){\n                    interactions.push(elts[serial]);\n                }\n            }\n            return interactions;\n        },\n        addResponseDeclaration : function(response){\n            if(Element.isA(response, 'responseDeclaration')){\n                response.setRelatedItem(this);\n                this.responses[response.getSerial()] = response;\n            }else{\n                throw 'is not a qti response declaration';\n            }\n            return this;\n        },\n        getResponseDeclaration : function(identifier){\n            for(var i in this.responses){\n                if(this.responses[i].attr('identifier') === identifier){\n                    return this.responses[i];\n                }\n            }\n            return null;\n        },\n        addOutcomeDeclaration : function(outcome){\n            if(Element.isA(outcome, 'outcomeDeclaration')){\n                outcome.setRelatedItem(this);\n                this.outcomes[outcome.getSerial()] = outcome;\n            }else{\n                throw 'is not a qti outcome declaration';\n            }\n            return this;\n        },\n        addModalFeedback : function(feedback){\n            if(Element.isA(feedback, 'modalFeedback')){\n                feedback.setRelatedItem(this);\n                this.modalFeedbacks[feedback.getSerial()] = feedback;\n            }else{\n                throw 'is not a qti modal feedback';\n            }\n            return this;\n        },\n        getComposingElements : function(){\n            var elts = this._super(), _this = this;\n            _.each(['responses', 'outcomes', 'modalFeedbacks', 'stylesheets'], function(elementCollection){\n                for(var i in _this[elementCollection]){\n                    var elt = _this[elementCollection][i];\n                    elts[i] = elt;\n                    elts = _.extend(elts, elt.getComposingElements());\n                }\n            });\n            if(this.responseProcessing instanceof Element){\n                elts[this.responseProcessing.getSerial()] = this.responseProcessing;\n            }\n            return elts;\n        },\n        find : function(serial){\n\n            var found = this._super(serial);\n\n            if(!found){\n                found = util.findInCollection(this, ['responses', 'outcomes', 'modalFeedbacks', 'stylesheets'], serial);\n            }\n\n            return found;\n        },\n        getResponses : function(){\n            return _.clone(this.responses);\n        },\n        getRelatedItem : function(){\n            return this;\n        },\n        addNamespace : function(name, uri){\n            this.namespaces[name] = uri;\n        },\n        setNamespaces : function(namespaces){\n            this.namespaces = namespaces;\n        },\n        getNamespaces : function(){\n            return _.clone(this.namespaces);\n        },\n        addStylesheet : function(stylesheet){\n            if(Element.isA(stylesheet, 'stylesheet')){\n                stylesheet.setRelatedItem(this);\n                this.stylesheets[stylesheet.getSerial()] = stylesheet;\n            }else{\n                throw 'is not a qti stylesheet declaration';\n            }\n            return this;\n        },\n        removeStyleSheet : function(stylesheet){\n            delete this.stylesheets[stylesheet.getSerial()];\n            return this;\n        },\n        stylesheetExists : function(href){\n            var exists = false;\n            _.each(this.stylesheets, function(stylesheet){\n                if(stylesheet.attr('href') === href){\n                    exists = true;\n                    return false;//break each loop\n                }\n            });\n            return exists;\n        },\n        setResponseProcessing : function(rp){\n            if(Element.isA(rp, 'responseProcessing')){\n                rp.setRelatedItem(this);\n                this.responseProcessing = rp;\n            }else{\n                throw 'is not a response processing';\n            }\n            return this;\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.outcomes = {};\n            for(var i in this.outcomes){\n                arr.outcomes[i] = this.outcomes[i].toArray();\n            }\n            arr.responses = {};\n            for(var i in this.responses){\n                arr.responses[i] = this.responses[i].toArray();\n            }\n            arr.stylesheets = {};\n            for(var i in this.stylesheets){\n                arr.stylesheets[i] = this.stylesheets[i].toArray();\n            }\n            arr.namespaces = this.namespaces;\n            return arr;\n        },\n        isEmpty : function(){\n        \n            var body = this.body().trim();\n            \n            if(body){\n                \n                //hack to fix #2652\n                var $dummy = $('<div>').html(body),\n                    $children = $dummy.children();\n                \n                if($children.length === 1 && $children.hasClass('empty')){\n                    return true;\n                }else{\n                    return false;\n                }\n            }else{\n                return true;\n            }\n        }\n    });\n\n    Container.augment(Item);\n\n    return Item;\n});\n","define('taoQtiItem/qtiItem/core/Stylesheet',['taoQtiItem/qtiItem/core/Element', 'lodash', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(Element, _, rendererConfig){\n\n    var Stylesheet = Element.extend({\n        qtiClass : 'stylesheet',\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {};\n\n            defaultData.attributes = {href : renderer.getAbsoluteUrl(this.attr('href'))};\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        }\n    });\n\n    return Stylesheet;\n});\n","define('taoQtiItem/qtiCreator/model/Stylesheet',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/Stylesheet'\n], function(_, editable, Stylesheet){\n    \n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                href : 'css/tao-user-styles.css',\n                title : '',\n                type:'text/css',\n                media:'all'\n            };\n        }\n    });\n\n    return Stylesheet.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/ResponseProcessing',['taoQtiItem/qtiItem/core/Element', 'lodash'], function(Element, _){\n    \n    var ResponseProcessing = Element.extend({\n        qtiClass : 'responseProcessing',\n        processingType : '',\n        xml : ''\n    });\n    \n    return ResponseProcessing;\n});\n","define('taoQtiItem/qtiCreator/model/ResponseProcessing',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/ResponseProcessing'\n], function(_, editable, ResponseProcessing){\n\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {};\n        },\n        setProcessingType : function(processingType){\n        \n            if(this.processingType !== processingType){\n                \n                if(this.processingType === 'custom'){\n\n                    //change all response template to default : \"correct\"\n                    _.each(this.getRelatedItem().getResponses(), function(r){\n                         r.setTemplate('MATCH_CORRECT');\n                    });\n                }\n                \n                this.processingType = processingType;\n            }\n\n        }\n    });\n\n    return ResponseProcessing.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/variables/VariableDeclaration',['taoQtiItem/qtiItem/core/IdentifiedElement'], function(IdentifiedElement){\n\n    /**\n     * It is the top abstract class for all variable classes\n     * (so not renderable and qtiClass undefined)\n     */\n    var VariableDeclaration = IdentifiedElement.extend({\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.defaultValue = null;\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'variableDeclaration') || this._super(qtiClass);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.defaultValue = this.defaultValue;\n            return arr;\n        }\n    });\n\n    return VariableDeclaration;\n});\n","define('taoQtiItem/qtiItem/core/variables/OutcomeDeclaration',['taoQtiItem/qtiItem/core/variables/VariableDeclaration'], function(VariableDeclaration){\n    return  VariableDeclaration.extend({\n        qtiClass : 'outcomeDeclaration'\n    });\n});\n","define('taoQtiItem/qtiCreator/model/variables/OutcomeDeclaration',['lodash', 'taoQtiItem/qtiCreator/model/mixin/editable', 'taoQtiItem/qtiItem/core/variables/OutcomeDeclaration'], function(_, editable, OutcomeDeclaration){\n    var methods = {};\n    _.extend(methods, editable);\n    return OutcomeDeclaration.extend(methods);\n});\n\n","define('taoQtiItem/qtiItem/core/feedbacks/ModalFeedback',['taoQtiItem/qtiItem/core/IdentifiedElement', 'taoQtiItem/qtiItem/mixin/Container'], function(IdentifiedElement, Container){\n    \n    var ModalFeedback = IdentifiedElement.extend({\n        'qtiClass' : 'modalFeedback',\n        is : function(qtiClass){\n            return (qtiClass === 'feedback') || this._super(qtiClass);\n        }\n    });\n    \n    Container.augment(ModalFeedback);\n    \n    return ModalFeedback;\n});\n","define('taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/feedbacks/ModalFeedback'\n], function(_,editable,ModalFeedback){\n    \n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                title : 'modal feedback title',\n                showHide : 'show'\n            };\n        }\n    });\n    \n    return ModalFeedback.extend(methods);\n});\n","define('taoQtiItem/qtiCreator/model/Item',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableContainer',\n    'taoQtiItem/qtiItem/core/Item',\n    'taoQtiItem/qtiCreator/model/Stylesheet',\n    'taoQtiItem/qtiCreator/model/ResponseProcessing',\n    'taoQtiItem/qtiCreator/model/variables/OutcomeDeclaration',\n    'taoQtiItem/qtiCreator/model/feedbacks/ModalFeedback'\n], function(_, editable, editableContainer, Item, Stylesheet, ResponseProcessing, OutcomeDeclaration, ModalFeedback){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableContainer);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                identifier : 'myItem_1',\n                title : 'Item title',\n                adaptive : false,\n                timeDependent : false\n            };\n        },\n        createResponseProcessing : function(){\n            var rp = new ResponseProcessing();\n            rp.processingType = 'templateDriven';\n            this.setResponseProcessing(rp);\n            return rp;\n        },\n        createStyleSheet : function(href){\n            if(href && _.isString(href)){\n                var stylesheet = new Stylesheet({href : href});\n                stylesheet.setRenderer(this.getRenderer());\n                this.addStylesheet(stylesheet);\n                return stylesheet;\n            }else{\n                throw 'missing or invalid type for the required arg \"href\"';\n                return null;\n            }\n        },\n        createOutcomeDeclaration : function(attributes){\n\n            var identifier = attributes.identifier || '';\n            delete attributes.identifier;\n            var outcome = new OutcomeDeclaration(attributes);\n\n            this.addOutcomeDeclaration(outcome);\n            outcome.buildIdentifier(identifier);\n\n            return outcome;\n        },\n        createModalFeedback : function(attributes){\n\n            var identifier = attributes.identifier || '';\n            delete attributes.identifier;\n            var modalFeedback = new ModalFeedback(attributes);\n\n            this.addModalFeedback(modalFeedback);\n            modalFeedback.buildIdentifier(identifier);\n            modalFeedback.body('Some feedback text.');\n\n            return modalFeedback;\n        },\n        deleteResponseDeclaration : function(response){\n            var serial;\n            if(_.isString(response)){\n                serial = response;\n            }else if(response && response.qtiClass === 'responseDeclaration'){\n                serial = response.getSerial();\n            }\n            delete this.responses[serial];\n            return this;\n        }\n    });\n    return Item.extend(methods);\n});\n","define('taoQtiItem/qtiCreator/helper/itemLoader',[\n    'jquery',\n    'helpers',\n    'taoQtiItem/qtiItem/core/Loader',\n    'taoQtiItem/qtiCreator/model/Item',\n    'taoQtiItem/qtiCreator/model/qtiClasses'\n], function($, helpers, Loader, Item, qtiClasses){\n\n    var _generateIdentifier = function(uri){\n        var pos = uri.lastIndexOf('#');\n        return uri.substr(pos + 1);\n    };\n\n    var creatorLoader = {\n        loadItem : function(config, callback){\n\n            if(config.uri){\n                $.ajax({\n                    url : helpers._url('getItemData', 'QtiCreator', 'taoQtiItem'),\n                    dataType : 'json',\n                    data : {\n                        uri : config.uri\n                    }\n                }).done(function(data){\n\n                    if(data.itemData && data.itemData.qtiClass === 'assessmentItem'){\n\n                        var loader = new Loader().setClassesLocation(qtiClasses),\n                            itemData = data.itemData;\n\n                        loader.loadItemData(itemData, function(item){\n                            \n                            //hack to fix #2652\n                            if(item.isEmpty()){\n                                item.body('');\n                            }\n                            \n                            callback(item, this.getLoadedClasses());\n                        });\n                    }else{\n\n                        var item = new Item().id(_generateIdentifier(config.uri));\n                        var outcome = item.createOutcomeDeclaration({\n                            cardinality : 'single',\n                            baseType : 'float'\n                        });\n                        outcome.buildIdentifier('SCORE', false);\n                        \n                        item.createResponseProcessing();\n                        \n                        //always add math element : since it has become difficult to know when a math element has been added to the item\n                        item.addNamespace('m', 'http://www.w3.org/1998/Math/MathML');\n                        \n                        callback(item);\n                    }\n\n                });\n            }\n        }\n    };\n\n    return creatorLoader;\n});\n\n","/**\n * Common helper functions\n */\ndefine('taoQtiItem/qtiItem/helper/interactionHelper',['lodash', 'taoQtiItem/qtiItem/core/Element'], function(_, Element){\n    return {\n        convertChoices : function(choices, outputType){\n\n            var ret = [], _this = this;\n\n            _.each(choices, function(c){\n                if(Element.isA(c, 'choice')){\n                    switch(outputType){\n                        case 'serial':\n                            ret.push(c.getSerial());\n                            break;\n                        case 'identifier':\n                            ret.push(c.id());\n                            break;\n                        default:\n                            ret.push(c);\n                    }\n\n                }else if(_.isArray(c)){\n                    ret.push(_this.convertChoices(c, outputType));\n                }\n            });\n\n            return ret;\n        },\n        findChoices : function(interaction, choices, inputType){\n\n            var ret = [], _this = this;\n\n            _.each(choices, function(c){\n                var choice;\n                if(_.isString(c)){\n                    if(inputType === 'serial'){\n                        choice = interaction.getChoice(c);\n                        if(choice){\n                            ret.push(choice);\n                        }\n                    }else if(inputType === 'identifier'){\n                        choice = interaction.getChoiceByIdentifier(c);\n                        if(choice){\n                            ret.push(choice);\n                        }\n                    }else{\n                        ret.push(c);\n                    }\n                }else if(_.isArray(c)){\n                    ret.push(_this.findChoices(interaction, c, inputType));\n                }else{\n                    ret.push(c);\n                }\n            });\n\n            return ret;\n        },\n        shuffleChoices : function(choices){\n            var r = [], //returned array\n                f = {}, //fixed choices array\n                j = 0;\n\n            for(var i in choices){\n                if(Element.isA(choices[i], 'choice')){\n                    var choice = choices[i];\n                    if(choice.attr('fixed')){\n                        f[j] = choice;\n                    }\n                    r.push(choice);\n                    j++;\n                }else{\n                    throw 'invalid element in array: is not a qti choice';\n                }\n            }\n\n            for(var n = 0; n < r.length - 1; n++){\n                if(f[n]){\n                    continue;\n                }\n                var k = -1;\n                do{\n                    k = n + Math.floor(Math.random() * (r.length - n));\n                }while(f[k]);\n                var tmp = r[k];\n                r[k] = r[n];\n                r[n] = tmp;\n            }\n\n            return r;\n        },\n        serialToIdentifier : function(interaction, choiceSerial){\n            var choice = interaction.getChoice(choiceSerial);\n            if(choice){\n                return choice.id();\n            }else{\n                return '';\n            }\n        }\n    }\n});\n","define('taoQtiItem/qtiRunner/core/Renderer',[\n    'lodash',\n    'jquery',\n    'handlebars',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiItem/helper/interactionHelper'\n], function(_, $, Handlebars, Element, interactionHelper){\n\n    'use strict';\n\n    var _isValidRenderer = function(renderer){\n\n        var valid = true;\n\n        if(typeof (renderer) !== 'object'){\n            return false;\n        }\n\n        var classCorrect = false;\n        if(renderer.qtiClass){\n            if(_.indexOf(_renderableClasses, renderer.qtiClass) >= 0){\n                classCorrect = true;\n            }else{\n                var pos = renderer.qtiClass.indexOf('.');\n                if(pos > 0){\n                    var qtiClass = renderer.qtiClass.slice(0, pos);\n                    var subClass = renderer.qtiClass.slice(pos + 1);\n                    if(_renderableSubclasses[qtiClass] && _.indexOf(_renderableSubclasses[qtiClass], subClass) >= 0){\n                        classCorrect = true;\n                    }\n                }\n            }\n        }\n        if(!classCorrect){\n            valid = false;\n            throw new Error('invalid qti class name in renderer declaration : ' + renderer.qtiClass);\n        }\n\n        if(!renderer.template){\n            valid = false;\n            throw new Error('missing template in renderer declaration : ' + renderer.qtiClass);\n        }\n\n        return valid;\n    };\n\n    var _renderableClasses = [\n        '_container',\n        'assessmentItem',\n        'stylesheet',\n        'responseDeclaration',\n        'outcomeDeclaration',\n        'responseProcessing',\n        '_simpleFeedbackRule',\n        'img',\n        'math',\n        'object',\n        'modalFeedback',\n        'rubricBlock',\n        'associateInteraction',\n        'choiceInteraction',\n        'extendedTextInteraction',\n        'gapMatchInteraction',\n        'graphicAssociateInteraction',\n        'graphicGapMatchInteraction',\n        'graphicOrderInteraction',\n        'hotspotInteraction',\n        'hottextInteraction',\n        'inlineChoiceInteraction',\n        'matchInteraction',\n        'mediaInteraction',\n        'orderInteraction',\n        'selectPointInteraction',\n        'sliderInteraction',\n        'textEntryInteraction',\n        'uploadInteraction',\n        'endAttemptInteraction',\n        'customInteraction',\n        'prompt',\n        'associableHotspot',\n        'gap',\n        'gapImg',\n        'gapText',\n        'hotspotChoice',\n        'hottext',\n        'inlineChoice',\n        'simpleAssociableChoice',\n        'simpleChoice',\n        'infoControl'\n    ];\n\n    var _dependencies = {\n        assessmentItem : ['stylesheet', '_container', 'prompt', 'modalFeedback'],\n        rubricBlock : ['_container'],\n        associateInteraction : ['simpleAssociableChoice'],\n        choiceInteraction : ['simpleChoice'],\n        gapMatchInteraction : ['gap', 'gapText'],\n        graphicAssociateInteraction : ['associableHotspot'],\n        graphicGapMatchInteraction : ['associableHotspot', 'gapImg'],\n        graphicOrderInteraction : ['hotspotChoice'],\n        hotspotInteraction : ['hotspotChoice'],\n        hottextInteraction : ['hottext'],\n        inlineChoiceInteraction : ['inlineChoice'],\n        matchInteraction : ['simpleAssociableChoice'],\n        orderInteraction : ['simpleChoice']\n    };\n\n    var _renderableSubclasses = {\n        'simpleAssociableChoice' : ['associateInteraction', 'matchInteraction'],\n        'simpleChoice' : ['choiceInteraction', 'orderInteraction']\n    };\n    \n    /**\n     * Get the location of the document, useful to define a baseUrl for the required context\n     * @returns {String}\n     */\n    function getDocumentBaseUrl(){\n        return window.location.protocol + '//' + window.location.host + window.location.pathname.replace(/([^\\/]*)$/, '');\n    }\n    \n    var Renderer = function(options){\n\n        options = options || {};\n\n        this.isRenderer = true;\n        this.name = '';\n        this.shuffleChoices = (options.shuffleChoices !== undefined) ? options.shuffleChoices : true;\n\n        //store shuffled choice here\n        this.shuffledChoices = [];\n\n        /**\n         * Store the registered renderer location\n         */\n        var _locations = {};\n\n        /**\n         * Store loaded renderers\n         */\n        var _renderers = {};\n\n        /**\n         * Get the actual renderer of the give qti class or subclass:\n         * e.g. simplceChoice, simpleChoice.choiceInteraction, simpleChoice.orderInteraction\n         */\n        var _getClassRenderer = function(qtiClass){\n            var ret = null;\n            if(_renderers[qtiClass]){\n                ret = _renderers[qtiClass];\n            }else{\n                var pos = qtiClass.indexOf('.');\n                if(pos > 0){\n                    qtiClass = qtiClass.slice(0, pos);\n                    if(_renderers[qtiClass]){\n                        ret = _renderers[qtiClass]\n                    }\n                }\n            }\n            return ret;\n        };\n\n        this.setOption = function(key, value){\n            if(typeof (key) === 'string'){\n                options[key] = value;\n            }\n            return this;\n        };\n\n        this.setOptions = function(opts){\n            _.extend(options, opts);\n            return this;\n        };\n\n        this.getOption = function(key){\n            if(typeof (key) === 'string' && options[key]){\n                return options[key];\n            }\n            return null;\n        };\n\n        this.renderTpl = function(element, data, qtiSubclass){\n\n            var ret = '',\n                tplFound = false,\n                qtiClass = qtiSubclass || element.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.template) === 'function'){\n                    ret = renderer.template(data);\n                    tplFound = true;\n                }\n            }\n\n            if(!tplFound){\n                throw new Error('no renderer template loaded under the class name : ' + qtiClass);\n            }\n\n            return ret;\n        };\n\n        this.getData = function(element, data, qtiSubclass){\n\n            var ret = data,\n                qtiClass = qtiSubclass || element.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.getData) === 'function'){\n                    ret = renderer.getData.call(this, element, data);\n                }\n            }\n\n            return ret;\n        };\n\n        this.renderDirect = function(tpl, data){\n            return Handlebars.compile(tpl)(data);\n        };\n\n        this.getContainer = function(qtiElement, $scope, qtiSubclass){\n\n            var ret = null,\n                qtiClass = qtiSubclass || qtiElement.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                ret = renderer.getContainer(qtiElement, $scope);\n            }else{\n                throw 'no renderer found for the class : ' + qtiElement.qtiClass;\n            }\n            return ret;\n        };\n\n        this.postRender = function(qtiElement, data, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiElement.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.render) === 'function'){\n                    ret = renderer.render.call(this, qtiElement, data);\n                }else{\n                    //postRendering is optional, log missing call of postRender?\n                }\n            }\n\n            return ret;\n        };\n\n        this.setResponse = function(qtiInteraction, response, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiInteraction.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.setResponse) === 'function'){\n                    ret = renderer.setResponse.call(this, qtiInteraction, response);\n                    var $container = renderer.getContainer.call(this, qtiInteraction);\n                    if($container instanceof $ && $container.length){\n                        $container.trigger('responseSet', [qtiInteraction, response]);\n                    }\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        this.getResponse = function(qtiInteraction, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiInteraction.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.getResponse) === 'function'){\n                    ret = renderer.getResponse.call(this, qtiInteraction);\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        this.resetResponse = function(qtiInteraction, qtiSubclass){\n\n            var ret = false,\n                qtiClass = qtiSubclass || qtiInteraction.qtiClass,\n                renderer = _getClassRenderer(qtiClass);\n\n            if(renderer){\n                if(typeof (renderer.resetResponse) === 'function'){\n                    ret = renderer.resetResponse.call(this, qtiInteraction);\n                }\n            }else{\n                throw 'no renderer registered under the name : ' + qtiClass;\n            }\n            return ret;\n        };\n\n        this.getLoadedRenderers = function(){\n            return _renderers;\n        };\n\n        this.register = function(renderersLocations){\n            _.extend(_locations, renderersLocations);\n        };\n\n        this.load = function(callback, requiredClasses){\n\n            var required = [];\n            if(requiredClasses){\n                if(_.isArray(requiredClasses)){\n\n                    //exclude abstract classes\n                    requiredClasses = _.intersection(requiredClasses, _renderableClasses);\n\n                    //add dependencies\n                    _.each(requiredClasses, function(reqClass){\n                        var deps = _dependencies[reqClass];\n                        if(deps){\n                            requiredClasses = _.union(requiredClasses, deps);\n                        }\n                    });\n\n                    for(var i in requiredClasses){\n                        var qtiClass = requiredClasses[i];\n                        if(_renderableSubclasses[qtiClass]){\n                            var requiredSubClasses = _.intersection(requiredClasses, _renderableSubclasses[qtiClass]);\n                            _.each(requiredSubClasses, function(subclass){\n                                if(_locations[qtiClass + '.' + subclass]){\n                                    required.push(_locations[qtiClass + '.' + subclass]);\n                                }else if(_locations[qtiClass]){\n                                    required.push(_locations[qtiClass]);\n                                }else{\n                                    throw new Error(this.name + ' : missing qti class location declaration: ' + qtiClass + ', subclass: ' + subclass);\n                                }\n                            });\n                        }else{\n                            if(_locations[qtiClass] === false){\n                                _renderers[qtiClass] = false;//mark this class as not renderable\n                            }else if(_locations[qtiClass]){\n                                required.push(_locations[qtiClass]);\n                            }else{\n                                throw new Error(this.name + ' : missing qti class location declaration: ' + qtiClass);\n                            }\n                        }\n                    }\n                }else{\n                    throw new Error('invalid argument type: expected array for arg \"requireClasses\"');\n                }\n            }else{\n                required = _.values(_locations);\n            }\n\n            var _this = this;\n            require(required, function(){\n\n                _.each(arguments, function(clazz){\n                    if(_isValidRenderer(clazz)){\n                        _renderers[clazz.qtiClass] = clazz;\n                    }\n                });\n\n                if(typeof (callback) === 'function'){\n                    callback.call(_this, _renderers);\n                }\n            });\n\n            return this;\n        };\n\n        this.setShuffledChoices = function(interaction, choices, identificationType){\n            if(Element.isA(interaction, 'interaction')){\n                this.shuffledChoices[interaction.getSerial()] = interactionHelper.findChoices(interaction, choices, identificationType);\n            }\n        };\n\n        this.getShuffledChoices = function(interaction, reshuffle, returnedType){\n            var ret = [], tmp;\n\n            if(Element.isA(interaction, 'interaction')){\n                var serial = interaction.getSerial();\n                if(!this.shuffledChoices[serial] || reshuffle){\n                    if(Element.isA(interaction, 'matchInteraction')){\n                        this.shuffledChoices[serial] = [];\n                        for(var i = 0; i < 2; i++){\n                            this.shuffledChoices[serial].push(interactionHelper.shuffleChoices(interaction.getChoices(i)))\n                        }\n                    }else{\n                        this.shuffledChoices[serial] = interactionHelper.shuffleChoices(interaction.getChoices());\n                    }\n                }\n                tmp = this.shuffledChoices[serial];\n\n                if(returnedType === 'serial' || returnedType === 'identifier'){\n                    ret = interactionHelper.convertChoices(tmp, returnedType);\n                }else{\n                    //pass value only, not ref\n                    ret = _.clone(tmp);\n                }\n            }\n\n            return ret;\n        };\n\n        this.getRenderers = function(){\n            return _renderers;\n        };\n\n        this.getLocations = function(){\n            return _locations;\n        };\n\n        this.getAbsoluteUrl = function(relUrl){\n            \n            //allow relative url outpu only if explicitely said so\n            if(this.getOption('userRelativeUrl')){\n                return relUrl.replace(/^\\.?\\//, '');\n            }\n            \n            if(/^http(s)?:\\/\\//i.test(relUrl)){\n                //already absolute\n                return relUrl;\n            }else{\n\n                var absUrl = '';\n                var runtimeLocations = this.getOption('runtimeLocations');\n\n                if(runtimeLocations && _.size(runtimeLocations)){\n                    _.forIn(runtimeLocations, function(runtimeLocation, typeIdentifier){\n                        if(relUrl.indexOf(typeIdentifier) === 0){\n                            absUrl = relUrl.replace(typeIdentifier, runtimeLocation);\n                            return false;//break\n                        }\n                    });\n                }\n\n                if(absUrl){\n                    return absUrl;\n                }else{\n                    var baseUrl = this.getOption('baseUrl') || getDocumentBaseUrl();\n                    return baseUrl + relUrl;\n                }\n\n            }\n        };\n    };\n\n    return {\n        build : function(renderersLocations, name, defaultOptions){\n            var NewRenderer = function(){\n                Renderer.apply(this, arguments);\n                this.register(renderersLocations);\n                this.name = name || '';\n                if(defaultOptions){\n                    this.setOptions(defaultOptions);\n                }\n            };\n            NewRenderer.prototype = Renderer.prototype;\n            return NewRenderer;\n        }\n    };\n});\n","define('taoQtiItem/qtiDefaultRenderer/renderers/config',[],function(){\n    return {\n        name : 'defaultRenderer',\n        locations : {\n            '_container' : 'taoQtiItem/qtiDefaultRenderer/renderers/Container',\n            'assessmentItem' : 'taoQtiItem/qtiDefaultRenderer/renderers/Item',\n            'stylesheet' : 'taoQtiItem/qtiDefaultRenderer/renderers/Stylesheet',\n            'outcomeDeclaration' : 'taoQtiItem/qtiDefaultRenderer/renderers/OutcomeDeclaration',\n            'responseDeclaration' : 'taoQtiItem/qtiDefaultRenderer/renderers/ResponseDeclaration',\n            'responseProcessing' : 'taoQtiItem/qtiDefaultRenderer/renderers/ResponseProcessing',\n            'math' : 'taoQtiItem/qtiDefaultRenderer/renderers/Math',\n            'object' : 'taoQtiItem/qtiDefaultRenderer/renderers/Object',\n            'modalFeedback' : 'taoQtiItem/qtiDefaultRenderer/renderers/ModalFeedback',\n            'rubricBlock' : 'taoQtiItem/qtiDefaultRenderer/renderers/RubricBlock',\n            'associateInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/AssociateInteraction',\n            'choiceInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/ChoiceInteraction',\n            'extendedTextInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/ExtendedTextInteraction',\n            'gapMatchInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GapMatchInteraction',\n            'graphicAssociateInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicAssociateInteraction',\n            'graphicGapMatchInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicGapMatchInteraction',\n            'graphicOrderInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicOrderInteraction',\n            'hotspotInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/HotspotInteraction',\n            'hottextInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/HottextInteraction',\n            'inlineChoiceInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/InlineChoiceInteraction',\n            'matchInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/MatchInteraction',\n            'mediaInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/MediaInteraction',\n            'orderInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/OrderInteraction',\n            'selectPointInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/SelectPointInteraction',\n            'sliderInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/SliderInteraction',\n            'textEntryInteraction' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/TextEntryInteraction',\n            'prompt' : 'taoQtiItem/qtiDefaultRenderer/renderers/interactions/Prompt',\n            'associableHotspot' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/AssociableHotspot',\n            'gap' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/Gap',\n            'gapImg' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/GapImg',\n            'gapText' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/GapText',\n            'hotspotChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/HotspotChoice',\n            'hottext' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/Hottext',\n            'inlineChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/InlineChoice',\n            'simpleAssociableChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleAssociableChoice',\n            'simpleChoice' : 'taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleChoice'\n        }\n    }\n});\n","define('taoQtiItem/qtiCommonRenderer/renderers/config',['lodash', 'taoQtiItem/qtiDefaultRenderer/renderers/config'], function(_, defaultRenderConfig){\n    var locations = _.extend(_.clone(defaultRenderConfig.locations), {\n        'assessmentItem' : 'taoQtiItem/qtiCommonRenderer/renderers/Item',\n        '_container' : 'taoQtiItem/qtiCommonRenderer/renderers/Container',\n        '_simpleFeedbackRule' : false,\n        'stylesheet' : 'taoQtiItem/qtiCommonRenderer/renderers/Stylesheet',\n        'outcomeDeclaration' : 'taoQtiItem/qtiCommonRenderer/renderers/OutcomeDeclaration',\n        'responseDeclaration' : 'taoQtiItem/qtiCommonRenderer/renderers/ResponseDeclaration',\n        'responseProcessing' : 'taoQtiItem/qtiCommonRenderer/renderers/ResponseProcessing',\n        'img' : 'taoQtiItem/qtiCommonRenderer/renderers/Img',\n        'math' : 'taoQtiItem/qtiCommonRenderer/renderers/Math',\n        'object' : 'taoQtiItem/qtiCommonRenderer/renderers/Object',\n        'rubricBlock' : 'taoQtiItem/qtiCommonRenderer/renderers/RubricBlock',\n        'modalFeedback' : 'taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback',\n        'prompt' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/Prompt',\n        'choiceInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction',\n        'associateInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction',\n        'simpleChoice.choiceInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction',\n        'simpleChoice.orderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction',\n        'hottext' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext',\n        'gap' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/Gap',\n        'gapText' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/GapText',\n        'simpleAssociableChoice.matchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction',\n        'simpleAssociableChoice.associateInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction',\n        'inlineChoice' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/InlineChoice',\n        'hottextInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',\n        'gapMatchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',\n        'selectPointInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction',\n        'mediaInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',\n        'gapImg' : 'taoQtiItem/qtiCommonRenderer/renderers/choices/GapImg',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',\n        'customInteraction' : 'taoQtiItem/qtiCommonRenderer/renderers/interactions/PortableCustomInteraction',\n        'infoControl' : 'taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl'\n    });\n    return {\n        name:'commonRenderer',\n        locations : locations\n    };\n});\n\n\n\n\n\n","define('taoQtiItem/qtiCreator/renderers/config',['lodash', 'taoQtiItem/qtiCommonRenderer/renderers/config'], function(_, commonRenderConfig){\n\n    var locations = _.defaults({\n        '_container' : 'taoQtiItem/qtiCreator/renderers/Container',\n        'assessmentItem' : 'taoQtiItem/qtiCreator/renderers/Item',\n        'rubricBlock' : 'taoQtiItem/qtiCreator/renderers/RubricBlock',\n        'img' : 'taoQtiItem/qtiCreator/renderers/Img',\n        'math' : 'taoQtiItem/qtiCreator/renderers/Math',\n        'object' : 'taoQtiItem/qtiCreator/renderers/Object',\n        'modalFeedback' : 'taoQtiItem/qtiCreator/renderers/ModalFeedback',\n        'choiceInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/ChoiceInteraction',\n        'orderInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/OrderInteraction',\n        'matchInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/MatchInteraction',\n        'associateInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/AssociateInteraction',\n        'inlineChoiceInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/InlineChoiceInteraction',\n        'textEntryInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/TextEntryInteraction',\n        'hotspotInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction',\n        'selectPointInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction',\n        'graphicOrderInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction',\n        'graphicAssociateInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction',\n        'graphicGapMatchInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction',\n        'mediaInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/MediaInteraction',\n        'uploadInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/UploadInteraction',\n        'sliderInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/SliderInteraction',\n        'extendedTextInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/ExtendedTextInteraction',\n        'simpleChoice.choiceInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction',\n        'simpleChoice.orderInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.OrderInteraction',\n        'simpleAssociableChoice.associateInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction',\n        'simpleAssociableChoice.matchInteraction' : 'taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction',\n        'gapMatchInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/GapMatchInteraction',\n        'hottextInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/HottextInteraction',\n        'customInteraction' : 'taoQtiItem/qtiCreator/renderers/interactions/PortableCustomInteraction',\n        'infoControl' : 'taoQtiItem/qtiCreator/renderers/PortableInfoControl',\n        'gap' : 'taoQtiItem/qtiCreator/renderers/choices/Gap',\n        'gapText' : 'taoQtiItem/qtiCreator/renderers/choices/GapText',\n        'hottext' : 'taoQtiItem/qtiCreator/renderers/choices/Hottext'\n    }, commonRenderConfig.locations);\n\n    return {\n        name : 'creatorRenderer',\n        locations : locations\n    };\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Renderer',['taoQtiItem/qtiRunner/core/Renderer', 'taoQtiItem/qtiCreator/renderers/config'], function(Renderer, config){\n    return Renderer.build(config.locations, config.name);\n});\n","define('taoQtiItem/qtiCreator/helper/creatorRenderer',[\n    'taoQtiItem/qtiCreator/renderers/Renderer',\n    'helpers',\n    'jquery',\n    'lodash',\n    'util/dom'\n], function(Renderer, helpers, $, _, dom){\n\n    //configure and instanciate once only:\n    var _creatorRenderer = null;\n    \n    /**\n     * Get a preconfigured renderer singleton\n     * \n     * @param {Boolean} reset\n     * @param {Object} config\n     * @returns {Object} - a configured instance of creatorRenderer\n     */\n    var get = function(reset, config){\n        if(!_creatorRenderer || reset){\n\n            var $bodyEltForm = _creatorRenderer ? _creatorRenderer.getOption('bodyElementOptionForm') : null;\n            var mediaSources = config.properties.mediaSources || [];\n            if(reset\n                || !$bodyEltForm\n                || !$bodyEltForm.length\n                || !dom.contains($bodyEltForm)){\n\n                _creatorRenderer = new Renderer({\n                    baseUrl : '',\n                    lang : '',\n                    uri : '',\n                    shuffleChoices : false,\n                    itemOptionForm : $('#item-editor-item-property-bar .panel'),\n                    interactionOptionForm : $('#item-editor-interaction-property-bar .panel'),\n                    choiceOptionForm : $('#item-editor-choice-property-bar .panel'),\n                    responseOptionForm : $('#item-editor-response-property-bar .panel'),\n                    bodyElementOptionForm : $('#item-editor-body-element-property-bar .panel'),\n                    textOptionForm : $('#item-editor-text-property-bar .panel'),\n                    modalFeedbackOptionForm : $('#item-editor-modal-feedback-property-bar .panel'),\n                    mediaManager : {\n                        appendContainer : '#mediaManager',\n                        browseUrl : helpers._url('files', 'ItemContent', 'taoItems'),\n                        uploadUrl : helpers._url('upload', 'ItemContent', 'taoItems'),\n                        deleteUrl : helpers._url('delete', 'ItemContent', 'taoItems'),\n                        downloadUrl : helpers._url('download', 'ItemContent', 'taoItems'),\n                        fileExistsUrl : helpers._url('fileExists', 'ItemContent', 'taoItems'),\n                        mediaSources : mediaSources\n                    }\n                });\n\n            }\n        }\n\n        return _creatorRenderer;\n    };\n\n\n    return {\n        get : function(reset, config){\n            return get(reset, config);\n        },\n        setOption : function(name, value){\n            return get().setOption(name, value);\n        },\n        setOptions : function(options){\n            return get().setOptions(options);\n        },\n        load : function(qtiClasses, done){\n            return get().load(function(){\n                if(_.isFunction(done)){\n                    done.apply(this, arguments);\n                }\n            }, qtiClasses);\n        }\n    };\n\n});\n\n","\ndefine('css!taoQtiItemCss/qti',[],function(){});\n","/**\n * Define the Qti Item Common Renderer\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/Renderer',[\n    'taoQtiItem/qtiRunner/core/Renderer',\n    'taoQtiItem/qtiCommonRenderer/renderers/config',\n    'css!taoQtiItemCss/qti'\n], function(Renderer, config){\n    return Renderer.build(config.locations, config.name);\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/instruction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div id=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"small feedback-info item-instruction\\\">\\n    <span class=\\\"icon-info icon\\\"></span><span class=\\\"instruction-message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/helpers/Instruction',[\n    'lodash',\n    'taoQtiItem/qtiItem/helper/util',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/instruction',\n], function(_, util, instructionTpl){\n\n    var _notificationLevels = ['info', 'warning', 'error', 'success'];\n\n    var Instruction = function(interaction, message, callback){\n        this.interaction = interaction;\n        this.defaultMessage = message || '';\n        this.currentMessage = '';\n        this.level = 'info';\n        this.serial = util.buildSerial('instruction_');\n        this.callback = callback;\n        this.$dom = null;\n        this.state = false;\n    };\n\n    Instruction.isValidLevel = function(level){\n        return (_.indexOf(_notificationLevels, level) >= 0);\n    };\n\n    Instruction.prototype.setState = function(state){\n        this.state = state;\n    };\n\n    Instruction.prototype.checkState = function(state){\n        return (this.state === state);\n    };\n\n    Instruction.prototype.getId = function(){\n        return this.serial;\n    };\n\n    Instruction.prototype.create = function($container){\n\n        $container.append(instructionTpl({\n            'message' : this.defaultMessage,\n            'serial' : this.serial\n        }));\n\n        this.$dom = $container.find('#' + this.serial);\n    };\n\n    Instruction.prototype.update = function(options){\n\n        var level = (options && options.level) ? options.level : '',\n            message = (options && options.message) ? options.message : '',\n            timeout = (options && options.timeout) ? options.timeout : 0,\n            start = (options && typeof(options.start) === 'function') ? options.start : null,\n            stop = (options && typeof(options.stop) === 'function') ? options.stop : null;\n\n        if(level && Instruction.isValidLevel(level)){\n            this.$dom.removeClass('feedback-' + this.level).addClass('feedback-' + level);\n            this.$dom.find('.icon').removeClass('icon-' + this.level).addClass('icon-' + level);\n            this.level = level;\n        }\n\n        if(message){\n            this.$dom.find('.instruction-message').html(message);\n            this.currentMessage = message;\n        }\n\n        if(timeout){\n            var _this = this;\n            if(start){\n                start.call(_this);\n            }\n            _this.timer = setTimeout(function(){\n                if(stop){\n                    stop.call(_this);\n                }\n                _this.timer = null;\n            }, timeout);\n        }\n\n    };\n\n    Instruction.prototype.setLevel = function(level, timeout){\n        var options = {\n            level : level\n        };\n        \n        if(timeout){\n            options.timeout = parseInt(timeout);\n            options.stop = function(){\n                this.setLevel('info');\n            };\n        }\n        \n        this.update(options);\n    };\n    \n    Instruction.prototype.getLevel = function() {\n        return this.level;\n    }\n\n    Instruction.prototype.setMessage = function(message, timeout){\n        this.update({message : message, timeout : timeout});\n    };\n\n    Instruction.prototype.reset = function(){\n        this.update({level : 'info', message : this.defaultMessage});\n        this.state = false;\n    };\n\n    Instruction.prototype.validate = function(data){\n        if(typeof(this.callback) === 'function'){\n            this.callback.call(this, data);\n        }\n    };\n\n    return Instruction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/notification', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"small feedback-\";\n  if (helper = helpers.level) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.level); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" item-notification\\\">\\n    <span class=\\\"icon-\";\n  if (helper = helpers.level) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.level); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></span><span class=\\\"feedback-message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove Message\", options) : helperMissing.call(depth0, \"__\", \"Remove Message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/helpers/Helper',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCommonRenderer/helpers/Instruction',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/notification'\n], function(_, $, __, Element, Instruction, notifTpl){\n\n    var _containers = {};\n    var _instructions = {};\n    var _$containerContext = $();\n\n    var _getSelector = function(element){\n\n        var serial = element.getSerial(),\n            selector = '[data-serial=' + serial + ']';\n\n        if(Element.isA(element, 'choice')){\n            selector = '.qti-choice' + selector;\n        }else if(Element.isA(element, 'interaction')){\n            selector = '.qti-interaction' + selector;\n        }\n\n        return selector;\n    };\n\n    return {\n        setContext : function($scope){\n            _$containerContext = $scope;\n        },\n        getContainer : function(element, $scope){\n            \n            var serial = element.getSerial();\n            \n            if($scope instanceof $ && $scope.length){\n                \n                //find in the given context\n                return $scope.find(_getSelector(element));\n                \n            }else if(_$containerContext instanceof $ && _$containerContext.length){\n                \n                //find in the globally set context\n                return _$containerContext.find(_getSelector(element));\n                \n            }else if(!_containers[serial] || _containers[serial].length){\n                \n                //find in the global context\n                _containers[serial] = $(_getSelector(element));\n            }\n\n            return _containers[serial];\n        },\n        validateInstructions : function(element, data){\n            var serial = element.getSerial();\n            if(_instructions[serial]){\n                _.each(_instructions[serial], function(instruction){\n                    instruction.validate(data);\n                });\n            }\n        },\n        appendInstruction : function(element, message, validateCallback){\n            var serial = element.getSerial(),\n                instruction = new Instruction(element, message, validateCallback);\n\n            if(!_instructions[serial]){\n                _instructions[serial] = {};\n            }\n            _instructions[serial][instruction.getId()] = instruction;\n\n            instruction.create(this.getContainer(element).find('.instruction-container'));\n\n            return instruction;\n        },\n        removeInstructions : function(element){\n            _instructions[element.getSerial()] = {};\n            this.getContainer(element).find('.instruction-container').empty();\n        },\n        /**\n         * Reset the instructions states for an element (but keeps configuration)\n         * @param {Object} element - the qti object, ie. interaction, choice, etc.\n         */\n        resetInstructions : function(element){\n            var serial = element.getSerial();\n            if(_instructions[serial]){\n                _.each(_instructions[serial], function(instruction){\n                    instruction.reset();\n                });\n            }\n        },\n        /** \n         * Default instuction set with a min/max constraints.\n         * @param {Object} interaction\n         * @param {Object} options\n         * @param {Number} [options.min = 0] - \n         * @param {Number} [options.max = 0] - \n         * @param {Function} options.getResponse - a ref to a function that get the raw response (array) from the interaction in parameter\n         * @param {Function} [options.onError] - called by once an error occurs with validateInstruction data in parameters\n         */\n        minMaxChoiceInstructions : function(interaction, options){\n\n            var self = this,\n                min = options.min || 0,\n                max = options.max || 0,\n                getResponse = options.getResponse,\n                onError = options.onError || _.noop(),\n                choiceCount = options.choiceCount === false ? false : _.size(interaction.getChoices()),\n                minInstructionSet = false,\n                msg;\n\n            if(!_.isFunction(getResponse)){\n                throw \"invalid parameter getResponse\";\n            }\n\n            //if maxChoice = 0, inifinite choice possible\n            if(max > 0 && (choiceCount === false || max < choiceCount)){\n                if(max === min){\n                    minInstructionSet = true;\n                    msg = (max <= 1) ? __('You must select exactly %d choice', max) : __('You must select exactly %d choices', max);\n\n                    self.appendInstruction(interaction, msg, function(data){\n\n                        if(getResponse(interaction).length >= max){\n                            this.setLevel('success');\n                            if(this.checkState('fulfilled')){\n                                this.update({\n                                    level : 'warning',\n                                    message : __('Maximum choices reached'),\n                                    timeout : 2000,\n                                    start : function(){\n                                        onError(data);\n                                    },\n                                    stop : function(){\n                                        this.update({level : 'success', message : msg});\n                                    }\n                                });\n                            }\n                            this.setState('fulfilled');\n                        }else{\n                            this.reset();\n                        }\n                    });\n                }else if(max > min){\n                    msg = (max <= 1) ? __('You can select maximum %d choice', max) : __('You can select maximum %d choices', max);\n                    self.appendInstruction(interaction, msg, function(data){\n\n                        if(getResponse(interaction).length >= max){\n\n                            this.setLevel('success');\n                            this.setMessage(__('Maximum choices reached'));\n                            if(this.checkState('fulfilled')){\n                                this.update({\n                                    level : 'warning',\n                                    timeout : 2000,\n                                    start : function(){\n                                        onError(data);\n                                    },\n                                    stop : function(){\n                                        this.setLevel('info');\n                                    }\n                                });\n                            }\n\n                            this.setState('fulfilled');\n                        }else{\n                            this.reset();\n                        }\n                    });\n                }\n            }\n\n            if(!minInstructionSet && min > 0 && (choiceCount === false || min < choiceCount)){\n                msg = (min <= 1) ? __('You must at least %d choice', min) : __('You must select at least %d choices', max);\n                self.appendInstruction(interaction, msg, function(){\n                    if(getResponse(interaction).length >= min){\n                        this.setLevel('success');\n                    }else{\n                        this.reset();\n                    }\n                });\n            }\n        },\n        appendNotification : function(element, message, level){\n\n            level = level || 'info';\n\n            if(Instruction.isValidLevel(level)){\n\n                var $container = this.getContainer(element);\n\n                $container.find('.notification-container').prepend(notifTpl({\n                    'level' : level,\n                    'message' : message\n                }));\n\n                var $notif = $container.find('.item-notification:first');\n                var _remove = function(){\n                    $notif.fadeOut();\n                };\n\n                $notif.find('.close-trigger').on('click', _remove);\n                setTimeout(_remove, 2000);\n\n                return $notif;\n            }\n        },\n        removeNotifications : function(element){\n            this.getContainer(element).find('.item-notification').remove();\n        },\n        triggerResponseChangeEvent : function(interaction, extraData){\n            this.getContainer(interaction).trigger('responseChange', [{\n                    interaction : interaction,\n                    response : interaction.getResponse()\n                },\n                extraData\n            ]);\n        },\n        targetBlank : function($container){\n            \n            $container.on('click', 'a', function(e) {\n                e.preventDefault();\n                var href = $(this).attr('href');\n                if(href && href.match(/^http/i)){\n                    window.open(href, '_blank');\n                }\n            });\n        }\n    };\n});\n\n","define('taoQtiItem/qtiCreator/helper/commonRenderer',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Renderer',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper'\n], function(_, Renderer, commonHelper){\n    \n    //store the curret execution context of the common renderer (preview)\n    var _$previousContext = null;\n    \n    //configure and instanciate once only:\n    var _renderer = new Renderer({\n        baseUrl : '',\n        shuffleChoices : true\n    });\n    \n    \n    var commonRenderer = {\n        render : function(item, $container){\n\n            commonRenderer.setContext($container);\n            \n            return _renderer.load(function(){\n                \n                $container.append(item.render(this));\n                item.postRender({}, '', this);\n                \n            }, item.getUsedClasses());\n        },\n        get : function(){\n            return _renderer;\n        },\n        setOption : function(name, value){\n            return _renderer.setOption(name, value);\n        },\n        setOptions : function(options){\n            return _renderer.setOptions(options);\n        },\n        setContext : function($context){\n            _$previousContext = $context;\n            return commonHelper.setContext($context);\n        },\n        restoreContext : function(){\n            commonHelper.setContext(_$previousContext);\n             _$previousContext = null;\n        },\n        load : function(qtiClasses, done){\n            return _renderer.load(function(){\n                if(_.isFunction(done)){\n                    done.apply(this, arguments);\n                }\n            }, qtiClasses);\n        }\n    };\n\n    return commonRenderer;\n\n});\n","/**\n * @author Sam <sams@taotesting.com>\n * @requires jquery\n * @requires lodash\n */\ndefine('taoQtiItem/qtiCreator/helper/qtiElements',['jquery', 'lodash', 'i18n'], function($, _, __){\n\n    var QtiElements = {};\n\n    QtiElements.classes = {\n        //abstract classes:\n        'itemBody' : {'parents' : ['bodyElement'], 'contains' : ['block'], 'abstract' : true},\n        'atomicBlock' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['inline'], 'abstract' : true},\n        'atomicInline' : {'parents' : ['bodyElement', 'flowStatic', 'inlineStatic'], 'contains' : ['inline'], 'abstract' : true},\n        'simpleBlock' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['block'], 'abstract' : true},\n        'simpleInline' : {'parents' : ['bodyElement', 'flowStatic', 'inlineStatic'], 'contains' : ['inline'], 'abstract' : true},\n        'flowStatic' : {'parents' : ['flow'], 'abstract' : true},\n        'blockStatic' : {'parents' : ['block'], 'abstract' : true},\n        'inlineStatic' : {'parents' : ['inline'], 'abstract' : true},\n        'flow' : {'parents' : ['objectFlow'], 'abstract' : true},\n        'tableCell' : {'parents' : ['bodyElement'], 'contains' : ['flow'], 'abstract' : true},\n        //html-derived qti elements:\n        'caption' : {'parents' : ['bodyElement'], 'contains' : ['inline'], 'xhtml' : true},\n        'col' : {'parents' : ['bodyElement'], 'xhtml' : true},\n        'colgroup' : {'parents' : ['bodyElement'], 'contains' : ['col'], 'xhtml' : true},\n        'div' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['flow'], 'xhtml' : true},\n        'dl' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['dlElement'], 'xhtml' : true},\n        'dt' : {'parents' : ['dlElement'], 'contains' : ['inline'], 'xhtml' : true},\n        'dd' : {'parents' : ['dlElement'], 'contains' : ['flow'], 'xhtml' : true},\n        'hr' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'xhtml' : true},\n        'math' : {'parents' : ['blockStatic', 'flowStatic', 'inlineStatic'], 'xhtml' : true},\n        'li' : {'parents' : ['bodyElement'], 'contains' : ['flow'], 'xhtml' : true},\n        'ol' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['li'], 'xhtml' : true},\n        'ul' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['li'], 'xhtml' : true},\n        'object' : {'parents' : ['bodyElement', 'flowStatic', 'inlineStatic'], 'contains' : ['objectFlow'], 'xhtml' : true},\n        'param' : {'parents' : ['objectFlow'], 'xhtml' : true},\n        'table' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'contains' : ['caption', 'col', 'colgroup', 'thead', 'tfoot', 'tbody'], 'xhtml' : true},\n        'tbody' : {'parents' : ['bodyElement'], 'contains' : ['tr'], 'xhtml' : true},\n        'tfoot' : {'parents' : ['bodyElement'], 'contains' : ['tr'], 'xhtml' : true},\n        'thead' : {'parents' : ['bodyElement'], 'contains' : ['tr'], 'xhtml' : true},\n        'td' : {'parents' : ['tableCell'], 'xhtml' : true},\n        'th' : {'parents' : ['tableCell'], 'xhtml' : true},\n        'tr' : {'parents' : ['bodyElement'], 'contains' : ['tableCell'], 'xhtml' : true},\n        'a' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'abbr' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'acronym' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'b' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'big' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'cite' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'code' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'dfn' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'em' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'i' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'kbd' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'q' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'samp' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'small' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'span' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'strong' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'sub' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'sup' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'tt' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'var' : {'parents' : ['simpleInline'], 'xhtml' : true},\n        'blockquote' : {'parents' : ['simpleBlock'], 'xhtml' : true},\n        'address' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h1' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h2' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h3' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h4' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h5' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'h6' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'p' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'pre' : {'parents' : ['atomicBlock'], 'xhtml' : true},\n        'img' : {'parents' : ['atomicInline'], 'xhtml' : true, attributes : ['src', 'alt', 'longdesc', 'height', 'width']},\n        'br' : {'parents' : ['atomicInline'], 'xhtml' : true},\n        //qti elements:\n        'infoControl' : {'parents' : ['blockStatic', 'bodyElement', 'flowStatic'], 'qti' : true},\n        'textRun' : {'parents' : ['inlineStatic', 'flowstatic'], 'qti' : true},\n        'feedbackInline' : {'parents' : ['simpleInline', 'feedbackElement'], 'qti' : true},\n        'feedbackBlock' : {'parents' : ['simpleBlock'], 'qti' : true},\n        'rubricBlock' : {'parents' : ['simpleBlock'], 'qti' : true}, //strange qti 2.1 exception, marked as simpleBlock instead of\n        'blockInteraction' : {'parents' : ['block', 'flow', 'interaction'], 'qti' : true},\n        'inlineInteraction' : {'parents' : ['inline', 'flow', 'interaction'], 'qti' : true},\n        'gap' : {'parents' : ['inlineStatic'], 'qti' : true},\n        'hottext' : {'parents' : ['flowstatic', 'inlineStatic'], 'contains' : ['inlineStatic'], 'qti' : true},\n        'printedVariable' : {'parents' : ['bodyElement', 'flowStatic', 'inlineStatic', 'textOrVariable'], 'qti' : true},\n        'prompt' : {'parents' : ['bodyElement'], 'contains' : ['inlineStatic'], 'qti' : true},\n        'templateElement' : {'parents' : ['bodyElement'], 'qti' : true},\n        'templateBlock' : {'parents' : ['blockStatic', 'flowStatic', 'templateElement'], 'contains' : ['blockStatic'], 'qti' : true},\n        'templateInline' : {'parents' : ['inlineStatic', 'flowStatic', 'templateElement'], 'contains' : ['inlineStatic'], 'qti' : true},\n        'choiceInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'associateInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'orderInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'matchInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'hottextInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'gapMatchInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'mediaInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'sliderInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'uploadInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'drawingInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'graphicInteraction' : {'parents' : ['blockInteraction'], 'qti' : true},\n        'hotspotInteraction' : {'parents' : ['graphicInteraction'], 'qti' : true},\n        'graphicAssociateInteraction' : {'parents' : ['graphicInteraction'], 'qti' : true},\n        'graphicOrderInteraction' : {'parents' : ['graphicInteraction'], 'qti' : true},\n        'graphicGapMatchInteraction' : {'parents' : ['graphicInteraction'], 'qti' : true},\n        'selectPointInteraction' : {'parents' : ['graphicInteraction'], 'qti' : true},\n        'textEntryInteraction' : {'parents' : ['stringInteraction', 'inlineInteraction'], 'qti' : true},\n        'extendedTextInteraction' : {'parents' : ['stringInteraction', 'blockInteraction'], 'qti' : true},\n        'inlineChoiceInteraction' : {'parents' : ['inlineInteraction'], 'qti' : true},\n        'customInteraction' : {'parents' : ['block', 'flow', 'interaction'], 'qti' : true},\n        '_container' : {'parents' : ['block'], 'qti' : true}//a pseudo class introduced in TAO\n    };\n\n    QtiElements.cache = {containable : {}, children : {}, parents : {}};\n\n    QtiElements.getAllowedContainersElements = function(qtiClass, $container){\n        var classes = QtiElements.getAllowedContainers(qtiClass);\n        var jqSelector = '';\n        for(var i in classes){\n            if(classes[i].qti){\n                //qti element:\n\n            }else{\n                //html element:\n                jqSelector += classes[i] + ', ';\n            }\n        }\n\n        if(jqSelector){\n            jqSelector = jqSelector.substring(0, jqSelector.length - 2);\n        }\n\n        return $(jqSelector, $container ? $container : $(document)).filter(':not([data-qti-type])');\n    };\n\n    QtiElements.getAllowedContainers = function(qtiClass){\n\n        if(QtiElements.cache.containable[qtiClass]){\n            var ret = QtiElements.cache.containable[qtiClass];\n        }else{\n            var ret = [];\n            var parents = QtiElements.getParentClasses(qtiClass, true);\n            for(var aClass in QtiElements.classes){\n                var model = QtiElements.classes[aClass];\n                if(model.contains){\n                    var intersect = _.intersection(model.contains, parents);\n                    if(intersect.length){\n                        if(!model.abstract){\n                            ret.push(aClass);\n                        }\n                        ret = _.union(ret, QtiElements.getChildClasses(aClass, true));\n                    }\n                }\n            }\n            QtiElements.cache.containable[qtiClass] = ret;\n        }\n\n        return ret;\n    };\n\n    QtiElements.getAllowedContents = function(qtiClass, recursive, checked){\n\n        var ret = [];\n        checked = checked || {};\n\n        var model = QtiElements.classes[qtiClass];\n        if(model && model.contains){\n            for(var i in model.contains){\n                var contain = model.contains[i];\n                if(!checked[contain]){\n                    checked[contain] = true;\n\n                    //qtiClass can contain everything defined as its contents\n                    ret.push(contain);\n\n                    //qtiClass can also contain subclass of its contents\n                    var children = QtiElements.getChildClasses(contain, true);\n                    for(var i in children){\n                        var child = children[i];\n                        if(!checked[child]){\n                            checked[child] = true;\n\n                            ret.push(child);\n\n                            //adding children allowed contents depends on the option \"recursive\"\n                            if(recursive){\n                                ret = _.union(ret, QtiElements.getAllowedContents(child, true, checked));\n                            }\n                        }\n                    }\n\n                    //adding allowed contents of qtiClass' allowed contents depends on the option \"recursive\"\n                    if(recursive){\n                        ret = _.union(ret, QtiElements.getAllowedContents(contain, true, checked));\n                    }\n\n                }\n            }\n        }\n\n        //qtiClass can contain all allowed contents of its parents:\n        var parents = QtiElements.getParentClasses(qtiClass, true);\n        for(var i in parents){\n            ret = _.union(ret, QtiElements.getAllowedContents(parents[i], recursive, checked));\n        }\n\n        return _.uniq(ret, false);\n    };\n\n    QtiElements.isAllowedClass = function(qtiContainerClass, qtiContentClass){\n        var allowedClasses = QtiElements.getAllowedContents(qtiContainerClass);\n        return (_.indexOf(allowedClasses, qtiContentClass) >= 0);\n    };\n\n    QtiElements.getParentClasses = function(qtiClass, recursive){\n\n        if(recursive && QtiElements.cache.parents[qtiClass]){\n            var ret = QtiElements.cache.parents[qtiClass];\n        }else{\n            var ret = [];\n            if(QtiElements.classes[qtiClass]){\n                ret = QtiElements.classes[qtiClass].parents;\n                if(recursive){\n                    for(var i in ret){\n                        ret = _.union(ret, QtiElements.getParentClasses(ret[i], recursive));\n                    }\n                    ret = _.uniq(ret, false);\n                }\n            }\n            QtiElements.cache.parents[qtiClass] = ret;\n        }\n\n        return ret;\n    };\n\n    QtiElements.getChildClasses = function(qtiClass, recursive, type){\n\n        var cacheType = type ? type : 'all';\n        if(recursive && QtiElements.cache.children[qtiClass] && QtiElements.cache.children[qtiClass][cacheType]){\n            var ret = QtiElements.cache.children[qtiClass][cacheType];\n        }else{\n            var ret = [];\n            for(var aClass in QtiElements.classes){\n                var model = QtiElements.classes[aClass];\n                if(_.indexOf(model.parents, qtiClass) >= 0){\n                    if(type){\n                        if(model[type]){\n                            ret.push(aClass);\n                        }\n                    }else{\n                        ret.push(aClass);\n                    }\n                    if(recursive){\n                        ret = _.union(ret, QtiElements.getChildClasses(aClass, recursive, type));\n                    }\n                }\n            }\n            if(!QtiElements.cache.children[qtiClass]){\n                QtiElements.cache.children[qtiClass] = {};\n            }\n            QtiElements.cache.children[qtiClass][cacheType] = ret;\n        }\n\n        return ret;\n    };\n\n    QtiElements.isBlock = function(qtiClass){\n        return QtiElements.is(qtiClass, 'block');\n    };\n\n    QtiElements.isInline = function(qtiClass){\n        return QtiElements.is(qtiClass, 'inline');\n    };\n\n    QtiElements.is = function(qtiClass, topClass){\n        if(qtiClass === topClass){\n            return true;\n        }else{\n            var parents = QtiElements.getParentClasses(qtiClass, true);\n            return (_.indexOf(parents, topClass) >= 0);\n        }\n    };\n    \n    QtiElements.getAvailableAuthoringElements = function(){\n        \n        return {\n            choiceInteraction : {\n                label : __('Choice Interaction'),\n                description : __('Select a single (radio buttons) or multiple (check boxes) responses among a set of choices.'),\n                icon : 'icon-choice',\n                short : __('Choice'),\n                qtiClass : 'choiceInteraction',\n                tags:['Common Interactions', 'mcq']\n            },\n            orderInteraction : {\n                label : __('Order Interaction'),\n                icon : 'icon-order',\n                description : __('Arrange a list of choices in the correct order.'),\n                short : __('Order'),\n                qtiClass : 'orderInteraction',\n                tags:['Common Interactions', 'ordering']\n            },\n            associateInteraction : {\n                label : __('Associate Interaction'),\n                icon : 'icon-associate',\n                description : __('Create pair(s) from a series of choices.'),\n                short : __('Associate'),\n                qtiClass : 'associateInteraction',\n                tags:['Common Interactions', 'association']\n            },\n            matchInteraction : {\n                label : __('Match Interaction'),\n                icon : 'icon-match',\n                description : __('Create association(s) between two sets of choices displayed in a table (row and column).'),\n                short : __('Match'),\n                qtiClass : 'matchInteraction',\n                tags:['Common Interactions', 'association']\n            },\n            hottextInteraction : {\n                label : __('Hottext Interaction'),\n                icon : 'icon-hottext',\n                description : __('Select one or more text parts (hottext) within a text.'),\n                short : __('Hottext'),\n                qtiClass : 'hottextInteraction',\n                tags:['Common Interactions', 'text']\n            },\n            gapMatchInteraction : {\n                label : __('Gap Match Interaction'),\n                icon : 'icon-gap-match',\n                description : __(' Fill in the gaps in a text from a set of choices.'),\n                short : __('Gap Match'),\n                qtiClass : 'gapMatchInteraction',\n                tags:['Common Interactions', 'text', 'association']\n            },\n            sliderInteraction : {\n                label : __('Slider Interaction'),\n                icon : 'icon-slider',\n                description :__('Select a value within a numerical range.'),\n                short : __('Slider'),\n                qtiClass : 'sliderInteraction',\n                tags:['Common Interactions', 'special']\n            },\n            extendedTextInteraction : {\n                label : __('Extended Text Interaction'),\n                icon : 'icon-extended-text',\n                description : __('Collect open-ended information in one or more text area(s) (strings or numeric values).'),\n                short : __('Extended Text'),\n                qtiClass : 'extendedTextInteraction',\n                tags:['Common Interactions', 'text']\n            },\n            uploadInteraction : {\n                label : __('File Upload Interaction'),\n                icon : 'icon-upload',\n                description : __('Upload a file (e.g. document, picture...) as a response.'),\n                short : __('File Upload'),\n                qtiClass : 'uploadInteraction',\n                tags:['Common Interactions', 'special']\n            },\n            mediaInteraction : {\n                label : __('Media Interaction'),\n                icon : 'icon-media',\n                description : __('Control the playing parameters (auto-start, loop) of a video or audio file and report the number of time it has been played.'),\n                short : __('Media'),\n                qtiClass : 'mediaInteraction',\n                tags:['Common Interactions', 'media']\n            },\n            _container : {\n                label : __('Text Block Interaction'),\n                icon : 'icon-font',\n                description : __('Block contains the content (stimulus) of the item such as text or image. It is also required for Inline Interactions.'),\n                short : __('Block'),\n                qtiClass : '_container',\n                tags:['Inline Interactions', 'text']\n            },\n            inlineChoiceInteraction : {\n                label : __('Inline Choice Interaction'),\n                icon : 'icon-inline-choice',\n                description : __('Select a choice from a drop-down list.'),\n                short : __('Inline Choice'),\n                qtiClass : 'inlineChoiceInteraction',\n                tags:['Inline Interactions', 'inline-interactions', 'mcq']\n            },\n            textEntryInteraction : {\n                label : __('Text Entry Interaction'),\n                icon : 'icon-text-entry',\n                description : __('Collect open-ended information in a short text input (strings or numeric values).'),\n                short : __('Text Entry'),\n                qtiClass : 'textEntryInteraction',\n                tags:['Inline Interactions', 'inline-interactions', 'text']\n            },\n            hotspotInteraction : {\n                label : __('Hotspot Interaction'),\n                icon : 'icon-hotspot',\n                description : __('Select one or more areas (hotspots) displayed on an picture.'),\n                short : __('Hotspot'),\n                qtiClass : 'hotspotInteraction',\n                tags:['Graphic Interactions', 'mcq']\n            },\n            graphicOrderInteraction : {\n                label : __('Graphic Order Interaction'),\n                icon : 'icon-graphic-order',\n                description : __('Order the areas (hotspots) displayed on a picture.'),\n                short : __('Graphic Order'),\n                qtiClass : 'graphicOrderInteraction',\n                tags:['Graphic Interactions', 'ordering']\n            },\n            graphicAssociateInteraction : {\n                label : __('Graphic Associate Interaction'),\n                icon : 'icon-graphic-associate',\n                description : __('Create association(s) between areas (hotspots) displayed on a picture.'),\n                short : __('Graphic Associate'),\n                qtiClass : 'graphicAssociateInteraction',\n                tags:['Graphic Interactions', 'association']\n            },\n            graphicGapMatchInteraction : {\n                label : __('Choice Interaction'),\n                icon : 'icon-graphic-gap',\n                description : __('Fill in the gaps on a picture with a set of image choices.'),\n                short : __('Graphic Gap'),\n                qtiClass : 'graphicGapMatchInteraction',\n                tags:['Graphic Interactions', 'association']\n            },\n            selectPointInteraction : {\n                label : __('Select Point Interaction'),\n                icon : 'icon-select-point',\n                description : __('Position one or more points on a picture (response areas are not displayed).'),\n                short : __('Select Point'),\n                qtiClass : 'selectPointInteraction',\n                tags:['Graphic Interactions']\n            }\n        };\n    };\n    \n    return QtiElements;\n\n});\n","\ndefine(\"json!taoItems/preview/resources/device-list.json\", function(){ return {\n    \"tablets\": {\n        \"193986c3715c81838870f908fa98d69a\": {\n            \"label\": \"Amazon Kindle Fire HDX 7\\u2033\",\n            \"width\": 960,\n            \"height\": 600\n        },\n        \"4e8eafab11aad1486992d7ee2c8c16ca\": {\n            \"label\": \"Apple iPad\",\n            \"width\": 1024,\n            \"height\": 768\n        },\n        \"5aac2932d9ad00d6d8a1604b8f9e4e8d\": {\n            \"label\": \"Google Nexus 10, Motorola Xoom, Xyboard\",\n            \"width\": 1280,\n            \"height\": 800\n        },\n        \"9805d9753ad08c7630a9ee5418aa6c6c\": {\n            \"label\": \"Google Nexus 7\",\n            \"width\": 966,\n            \"height\": 604\n        },\n        \"d4a431cedf4705d6bf2cba6d5788378b\": {\n            \"label\": \"Samsung Galaxy Tab 7.7, 8.9, 10.1\",\n            \"width\": 1280,\n            \"height\": 800\n        }\n    },\n    \"phones\": {\n        \"1b89338531ef0155c8d6abc2ac02c81a\": {\n            \"label\": \"Apple iPhone 3GS\",\n            \"width\": 320,\n            \"height\": 480,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 320,\n            \"dpHeight\": 480\n        },\n        \"3f89da99d84214cde7df87ebe0699a6f\": {\n            \"label\": \"Apple iPhone 4\",\n            \"width\": 640,\n            \"height\": 960,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1920\n        },\n        \"0d36971a5b98b367f54ced708c9af849\": {\n            \"label\": \"Apple iPhone 5\",\n            \"width\": 640,\n            \"height\": 1136,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 320,\n            \"dpHeight\": 2272\n        },\n        \"026beffcc051af995660ebdede986ace\": {\n            \"label\": \"BlackBerry Z10\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"fd2dd53e667d6d49e4fa73356fa941dd\": {\n            \"label\": \"BlackBerry Z30\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"707584c1ae17d9b5b2cbe8603c91c147\": {\n            \"label\": \"Google Nexus 4\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"91823264de952e7f2347e07db5c4058b\": {\n            \"label\": \"Google Nexus 5\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        },\n        \"cd69817a6e147e8a4677389e56fcf568\": {\n            \"label\": \"Google Nexus S\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"75994faa6a38e31e99b53fcd75534a33\": {\n            \"label\": \"HTC Evo, Touch HD, Desire HD, Desire\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"0cab4dfccdfc880687cb608cfe4159db\": {\n            \"label\": \"HTC One X, EVO LTE\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"c4ff41fcba24d74fc21dc3490ca1edc9\": {\n            \"label\": \"HTC Sensation, Evo 3D\",\n            \"width\": 540,\n            \"height\": 960,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 360,\n            \"dpHeight\": 1440\n        },\n        \"fa969a5e0dd2de53700eeee4ba4ba142\": {\n            \"label\": \"LG Optimus 2X, Optimus 3D, Optimus Black\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"33c4f9364e295ec03531f3a3425819cf\": {\n            \"label\": \"LG Optimus G\",\n            \"width\": 768,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 384,\n            \"dpHeight\": 2560\n        },\n        \"bc47f5275f0efd56fee52d43a8082981\": {\n            \"label\": \"LG Optimus LTE, Optimus 4X HD\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 1.7,\n            \"dpWidth\": 424,\n            \"dpHeight\": 2176\n        },\n        \"0732887e6e324fd10777b735520a34cf\": {\n            \"label\": \"LG Optimus One\",\n            \"width\": 320,\n            \"height\": 480,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 213,\n            \"dpHeight\": 720\n        },\n        \"2e38a78364f09d0da0e9e1a3a68e7fb0\": {\n            \"label\": \"Motorola Defy, Droid, Droid X, Milestone\",\n            \"width\": 480,\n            \"height\": 854,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1281\n        },\n        \"bd4b78dddc7c9625a4141a1b1ddabb87\": {\n            \"label\": \"Motorola Droid 3, Droid 4, Droid Razr, Atrix 4G, Atrix 2\",\n            \"width\": 540,\n            \"height\": 960,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 540,\n            \"dpHeight\": 960\n        },\n        \"3bf1edf21cfa81006183d2b02974c84e\": {\n            \"label\": \"Motorola Droid Razr HD\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 720,\n            \"dpHeight\": 1280\n        },\n        \"ab5a352e0e016b97dac986f06c394f55\": {\n            \"label\": \"Nokia C5, C6, C7, N97, N8, X7\",\n            \"width\": 360,\n            \"height\": 640,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 360,\n            \"dpHeight\": 640\n        },\n        \"4826fb7d7257aeaac992ce699df41b3c\": {\n            \"label\": \"Nokia Lumia 7X0, Lumia 8XX, Lumia 900, N800, N810, N900\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"0a691ab20add7c432200f8fa6527b488\": {\n            \"label\": \"Samsung Galaxy Note\",\n            \"width\": 800,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 400,\n            \"dpHeight\": 2560\n        },\n        \"9c23ee31be29960fbac9e9bbfc2fc7b0\": {\n            \"label\": \"Samsung Galaxy Note 3\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 540,\n            \"dpHeight\": 3840\n        },\n        \"92177c0508c1d73905a58e2338f2a81f\": {\n            \"label\": \"Samsung Galaxy Note II\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"5222b8866dc4cc606725e16ffcc0a783\": {\n            \"label\": \"Samsung Galaxy S III, Galaxy Nexus\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"37c1541e2bd55cfd0f4073b0ccdf68b3\": {\n            \"label\": \"Samsung Galaxy S, S II, W\",\n            \"width\": 480,\n            \"height\": 800,\n            \"scaleFactor\": 1.5,\n            \"dpWidth\": 320,\n            \"dpHeight\": 1200\n        },\n        \"2f7f64b7dda0144907ff300e83eed465\": {\n            \"label\": \"Samsung Galaxy S4\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        },\n        \"9c24f9057744dad56043702a9703127f\": {\n            \"label\": \"Sony Xperia S, Ion\",\n            \"width\": 720,\n            \"height\": 1280,\n            \"scaleFactor\": 2,\n            \"dpWidth\": 360,\n            \"dpHeight\": 2560\n        },\n        \"0a8b2732a016a9395c3af5f12dd9c0da\": {\n            \"label\": \"Sony Xperia Sola, U\",\n            \"width\": 480,\n            \"height\": 854,\n            \"scaleFactor\": 1,\n            \"dpWidth\": 480,\n            \"dpHeight\": 854\n        },\n        \"5a153d7f53d82dcb0801f041574a6a43\": {\n            \"label\": \"Sony Xperia Z, Z1\",\n            \"width\": 1080,\n            \"height\": 1920,\n            \"scaleFactor\": 3,\n            \"dpWidth\": 360,\n            \"dpHeight\": 5760\n        }\n    },\n    \"screens\": {\n        \"9e523ae15b61dc766f5c818726881ecf\": {\n            \"label\": \"1920 \\u00d7 1080\",\n            \"width\": 1920,\n            \"height\": 1080,\n            \"dpWidth\": 1920,\n            \"dpHeight\": 1080,\n            \"scaleFactor\": 1\n        },\n        \"07769cd8d0a7d09818b2f0b018042fb7\": {\n            \"label\": \"1366 \\u00d7 768\",\n            \"width\": 1366,\n            \"height\": 768,\n            \"dpWidth\": 1366,\n            \"dpHeight\": 768,\n            \"scaleFactor\": 1\n        },\n        \"72d5478a24194f98b9378e8e0fd65737\": {\n            \"label\": \"1280 \\u00d7 1024\",\n            \"width\": 1280,\n            \"height\": 1024,\n            \"dpWidth\": 1280,\n            \"dpHeight\": 1024,\n            \"scaleFactor\": 1\n        },\n        \"b7a6dd5900cc72e61f0d3479c7e314ec\": {\n            \"label\": \"1280 \\u00d7 800\",\n            \"width\": 1280,\n            \"height\": 800,\n            \"dpWidth\": 1280,\n            \"dpHeight\": 800,\n            \"scaleFactor\": 1\n        },\n        \"43193b0ff671a37d8232ab664190a125\": {\n            \"label\": \"1024 \\u00d7 768\",\n            \"width\": 1024,\n            \"height\": 768,\n            \"dpWidth\": 1024,\n            \"dpHeight\": 768,\n            \"scaleFactor\": 1\n        },\n        \"c29e48814af5443ff5688d9e967ce917\": {\n            \"label\": \"800 \\u00d7 600\",\n            \"width\": 800,\n            \"height\": 600,\n            \"dpWidth\": 800,\n            \"dpHeight\": 600,\n            \"scaleFactor\": 1\n        }\n    }\n};});\n\n","\ndefine('tpl!taoItems/preview/tpl/preview', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                        <option value=\\\"\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n                        \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                        <option value=\\\"\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-value=\\\"\";\n  if (helper = helpers.dataValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.dataValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n                        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"preview-overlay tao-scope overlay preview-\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" item-no-print\\\"\\n     style=\\\"overflow-x: hidden;display:none\\\">\\n    <div class=\\\"preview-container-outer\\\">\\n        <form class=\\\"preview-utility-bar plain\\\">\\n            <div class=\\\"preview-utility-bar-inner grid-row\\\">\\n\\n                <div class=\\\"col-4\\\">\\n                    <input type=\\\"hidden\\\" value=\\\"\\\" data-value=\\\"\\\" class=\\\"standard-device-selector preview-device-selector\\\" data-target=\\\"standard\\\">\\n                    <select class=\\\"preview-type-selector\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.previewTypes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                </div>\\n                <div class=\\\"col-6 standard-only device-type-and-orientation\\\"></div>\\n                <div class=\\\"col-6 desktop-only device-type-and-orientation\\\">\\n                    <select class=\\\"desktop-device-selector preview-device-selector\\\" data-target=\\\"desktop\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.desktopDevices), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                </div>\\n                <div class=\\\"col-6 mobile-only device-type-and-orientation\\\">\\n                    <select class=\\\"mobile-device-selector preview-device-selector\\\" data-target=\\\"mobile\\\">\\n                        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mobileDevices), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                    </select>\\n                    <select tabindex=\\\"-1\\\" class=\\\"mobile-orientation-selector orientation-selector\\\"\\n                            data-target=\\\"mobile\\\">\\n                        <option value=\\\"landscape\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Landscape\", options) : helperMissing.call(depth0, \"__\", \"Landscape\", options)))\n    + \"</option>\\n                        <option value=\\\"portrait\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Portrait\", options) : helperMissing.call(depth0, \"__\", \"Portrait\", options)))\n    + \"</option>\\n                    </select>\\n                </div>\\n                <div class=\\\"col-2\\\">\\n                    <!--label>\\n                        <input type=\\\"checkbox\\\"/>\\n                        <span class=\\\"icon-checkbox\\\"></span>\\n                        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Scale \", options) : helperMissing.call(depth0, \"__\", \"Scale \", options)))\n    + \"\\n                    </label-->\\n                        <span class=\\\"btn-info small preview-closer rgt\\\">\\n                            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close\", options) : helperMissing.call(depth0, \"__\", \"Close\", options)))\n    + \"\\n                            <span class=\\\"icon-close r\\\"></span>\\n                        </span>\\n                </div>\\n            </div>\\n            <div class=\\\"preview-message-box\\\">\\n                <div class=\\\"feedback-info small\\\">\\n                    <span class=\\\"icon-info\\\"></span>\\n                    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"This preview may be scaled to fit your screen. The final rendering may differ.\", options) : helperMissing.call(depth0, \"__\", \"This preview may be scaled to fit your screen. The final rendering may differ.\", options)))\n    + \"\\n                    <a href=\\\"#\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Dont show this again!\", options) : helperMissing.call(depth0, \"__\", \"Dont show this again!\", options)))\n    + \"</a>\\n                    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove this message\", options) : helperMissing.call(depth0, \"__\", \"Remove this message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\n                </div>\\n            </div>\\n        </form>\\n        <div class=\\\"preview-canvas\\\">\\n\\n            <div class=\\\"preview-scale-container\\\">\\n                <div class=\\\"\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-frame preview-outer-frame \";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-landscape\\\">\\n                    <div class=\\\"\";\n  if (helper = helpers.previewType) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.previewType); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-preview-container preview-container\\\">\\n                        <div class=\\\"preview-item-container\\\"></div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div id=\\\"preview-console\\\">\\n        <span class=\\\"icon-close preview-console-closer\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close console\", options) : helperMissing.call(depth0, \"__\", \"Close console\", options)))\n    + \"\\\"></span>\\n\\n        <div class=\\\"preview-console-header grid-row clearfix\\\">\\n            <div class=\\\"col-12\\\">\\n                <button type=\\\"button\\\" class=\\\"btn-info small rgt\\\" id=\\\"preview-submit-button\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Submit\", options) : helperMissing.call(depth0, \"__\", \"Submit\", options)))\n    + \"</button>\\n            </div>\\n        </div>\\n        <div class=\\\"preview-console-body clear\\\">\\n            <ul></ul>\\n        </div>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoItems/preview/preview',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'util/strPad',\n    'json!taoItems/preview/resources/device-list.json',\n    'tpl!taoItems/preview/tpl/preview',\n    'ui/modal',\n    'select2',\n    'jquery.cookie'\n], function ($, _, __, strPad, deviceList, previewTpl) {\n    'use strict';\n\n    var overlay,\n        container,\n        orientation = 'landscape',\n        previewType = 'standard',\n        previewTypes = {\n            desktop: __('Desktop preview'),\n            mobile: __('Mobile preview'),\n            standard: __('Actual size')\n        },\n        $doc = $(document),\n        $window = $(window),\n        $body = $(document.body),\n        screenSize = {\n            width: $window.innerWidth(),\n            height: $window.innerHeight()\n        },\n        maxDeviceSize = {\n            width: 0,\n            height: 0\n        },\n        scaleFactor = 1,\n        typeDependant,\n        $feedbackBox,\n        $console,\n        previewContainerMaxWidth,\n        itemUri;\n\n\n    /**\n     * Create data set for device selectors\n     *\n     * @param type\n     * @returns {Array}\n     * @private\n     */\n    var _getDeviceSelectorData = function (type) {\n\n        /*\n         * @todo\n         * The device list is currently based on the devices found on the Chrome emulator.\n         * This is not ideal and should be changed in the future.\n         * I have http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density in mind but we\n         * will need to figure what criteria to apply when generating the list.\n         */\n        var devices = type === 'mobile' ? deviceList.tablets : deviceList.screens,\n            options = [];\n\n        _.forEach(devices, function (value) {\n\n            // figure out the widest possible screen to calculate the scale factor\n            maxDeviceSize = {\n                width: Math.max(maxDeviceSize.width, value.width),\n                height: Math.max(maxDeviceSize.height, value.height)\n            };\n\n            options.push({\n                value: value.label,\n                label: value.label,\n                dataValue: [value.width, value.height].join(','),\n                selected: previewType === value.label\n            });\n        });\n\n\n        return options;\n    };\n\n    /**\n     * Collect all elements that can toggle their class name between mobile-* and desktop-*\n     *\n     * @private\n     */\n    var _setupTypeDependantElements = function () {\n        typeDependant = overlay.add(overlay.find('.preview-scale-container').find('[class*=\"' + previewType + '\"]'));\n    };\n\n\n    /**\n     * Change the class name of all type dependant elements\n     *\n     * @param type\n     */\n    var _setPreviewType = function (newType) {\n\n        if (newType === previewType) {\n            return;\n        }\n        var re = new RegExp(previewType, 'g');\n\n        typeDependant.each(function () {\n            this.className = this.className.replace(re, newType);\n        });\n\n        previewType = newType;\n    };\n\n\n    /**\n     * Set orientation\n     *\n     * @param newOrientation\n     * @private\n     */\n    var _setOrientation = function (newOrientation) {\n        if (newOrientation === orientation) {\n            return;\n        }\n\n        var re = new RegExp(orientation, 'g'),\n            previewFrame = $('.preview-outer-frame')[0];\n\n        previewFrame.className = previewFrame.className.replace(re, newOrientation);\n\n        // reset global orientation\n        orientation = newOrientation;\n    };\n\n    /**\n     * Scale devices down to fit screen\n     * @private\n     */\n    var _scale = function () {\n\n        var $scaleContainer = $('.preview-scale-container'),\n            _scaleFactor = previewType === 'standard' ? 1 : scaleFactor,\n            containerScaledWidth = $scaleContainer.width() * _scaleFactor,\n            left = (screenSize.width - containerScaledWidth) / 2;\n\n        $scaleContainer.css({\n            left: left,\n            '-webkit-transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            '-ms-transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            'transform': 'scale(' + _scaleFactor + ',' + _scaleFactor + ')',\n            '-webkit-transform-origin': '0 0',\n            '-ms-transform-origin': '0 0',\n            'transform-origin': '0 0'\n        });\n    };\n\n    /**\n     * position the preview depending on the height of the toolbar\n     *\n     * @private\n     */\n    var _positionPreview = function () {\n        $('.preview-canvas').css({ paddingTop: $('.preview-utility-bar').outerHeight() + 5 })\n    };\n\n\n    /**\n     * Compute scale factor based on screen size and device size\n     *\n     * @private\n     */\n    var _computeScaleFactor = function () {\n\n        var scaleValues = {\n            x: 1,\n            y: 1\n        };\n\n        // 150/200 = device frames plus toolbar plus console plus some margin\n\n        var requiredSize = {\n            width: maxDeviceSize.width + 150,\n            height: maxDeviceSize.height + 275\n        };\n\n        if (requiredSize.width > screenSize.width) {\n            scaleValues.x = screenSize.width / requiredSize.width;\n        }\n\n        if (requiredSize.height > screenSize.height) {\n            scaleValues.y = screenSize.height / requiredSize.height;\n        }\n\n        scaleFactor = Math.min(scaleValues.x, scaleValues.y);\n    };\n\n    /**\n     * Add functionality to device selectors\n     *\n     * @private\n     */\n    var _setupDeviceSelectors = function () {\n\n\n        var previewDeviceSelectors = overlay.find('.preview-device-selector');\n\n        previewDeviceSelectors.on('change', function () {\n            var elem = $(this),\n                option = this.nodeName.toLowerCase() === 'select' ? this.options[this.selectedIndex] : this,\n                type = elem.data('target'),\n                val = $(option).data('value').split(','),\n                sizeSettings,\n                i = val.length,\n                container = overlay.find('.' + type + '-preview-container');\n\n\n            while (i--) {\n                val[i] = parseFloat(val[i]);\n            }\n\n            if (type === 'mobile' && orientation === 'portrait') {\n                sizeSettings = {\n                    width: val[1],\n                    height: val[0]\n                };\n            }\n            else {\n                sizeSettings = {\n                    width: val[0],\n                    height: val[1]\n                };\n            }\n\n            if (sizeSettings.width === container.width() && sizeSettings.height === container.height()) {\n                return false;\n            }\n            _setPreviewType(type);\n            container.css(sizeSettings);\n            _scale();\n            _adaptFrameSize();\n        });\n\n        previewDeviceSelectors.each(function () {\n            if (this.nodeName.toLowerCase() === 'select') {\n                $(this).select2({\n                    minimumResultsForSearch: -1\n                });\n            }\n        });\n    };\n\n    /**\n     * Setup orientation selector. There is no actual orientation switch for desktop but it could\n     * be added easily if required.\n     * @private\n     */\n    var _setupOrientationSelectors = function () {\n\n        $('select.orientation-selector').on('change',function () {\n\n            var type = $(this).data('target'),\n                previewFrame = $('.' + type + '-preview-frame'),\n                container = previewFrame.find('.' + type + '-preview-container'),\n                sizeSettings,\n                newOrientation = $(this).val();\n\n            if (newOrientation === orientation) {\n                return false;\n            }\n\n            sizeSettings = {\n                height: container.width(),\n                width: container.height()\n            };\n\n            container.css(sizeSettings);\n            _scale();\n            _adaptFrameSize();\n\n\n            _setOrientation(newOrientation);\n\n        }).select2({\n            minimumResultsForSearch: -1\n        });\n    };\n\n    /**\n     * Close preview\n     *\n     * @returns {*|HTMLElement}\n     */\n    var _setupClosers = function () {\n        var $closer = overlay.find('.preview-closer'),\n            $feedbackCloser = $feedbackBox.find('.close-trigger'),\n            $hideForever = $feedbackBox.find('a');\n        var $iframe = $('#preview-iframe');\n\n        $closer.on('click', function () {\n//            commonRenderer.setContext($('.item-editor-item'));\n            overlay.hide();\n\n            //empty the iframe\n            $iframe.off('load').attr('src', 'about:blank');\n        });\n\n        $doc.keyup(function (e) {\n            if (e.keyCode === 27) {\n                $closer.trigger('click');\n            }\n        });\n\n        $feedbackCloser.on('click', function () {\n            $feedbackBox.hide();\n            _positionPreview();\n            _scale();\n        });\n\n        $hideForever.on('click', function (e) {\n            e.preventDefault();\n            $.cookie('hidePreviewFeedback', true, { expires: 1000, path: '/' });\n            $feedbackCloser.trigger('click');\n        });\n    };\n\n    /**\n     * Build options for preview types\n     *\n     * @returns {Array}\n     * @private\n     */\n    var _getPreviewTypes = function () {\n        var options = [];\n        _(previewTypes).forEach(function (_previewLabel, _previewType) {\n            options.push({\n                value: _previewType,\n                label: _previewLabel,\n                selected: previewType === _previewType\n            });\n        });\n        return options;\n    };\n\n    /**\n     * Select preview type\n     *\n     * @private\n     */\n    var _setupViewSelector = function () {\n\n        $('select.preview-type-selector').on('change',function () {\n            var _previewType = $(this),\n                value = _previewType.val();\n\n            _setPreviewType(value);\n\n            $('.' + value + '-device-selector').trigger('change');\n        }).select2({\n            minimumResultsForSearch: -1\n        });\n\n    };\n\n    var _adaptFrameSize = function () {\n\n        var $previewContainer = $('.preview-container'),\n            $iframe = (function () {\n                var _iframe = $previewContainer.find('iframe');\n                _iframe.height('');\n                return _iframe;\n            }()),\n            contentHeight = $iframe.contents().outerHeight(),\n            containerHeight = $previewContainer.innerHeight();\n\n        if (previewType !== 'standard') {\n            if (contentHeight < containerHeight) {\n                contentHeight = containerHeight;\n            }\n        }\n        else {\n            $previewContainer.height(contentHeight + 10);\n        }\n\n        $iframe.height(contentHeight);\n    };\n\n\n    /**\n     * Set the size for the standard preview\n     * @param height\n     * @private\n     */\n    var _updateStandardPreviewSize = function (height) {\n        var $selector = $('.standard-device-selector'),\n            values = ($selector.val() ? $selector.val().split(',') : '') || [$window.width().toString()],\n            valueStr = values.join(',');\n\n        values[1] = height || values[1] || '1200';\n\n        $selector.val(valueStr).data('value', valueStr);\n    };\n\n    var _initConsole = function () {\n\n        var $body = $console.find('.preview-console-body'),\n            $listing = $body.find('ul'),\n            $closer = $console.find('.preview-console-closer');\n\n        $console.off('updateConsole').on('updateConsole', function (event, type, message) {\n            var timer = new Date(),\n                logTime = [\n                    strPad(timer.getHours(), 2, '0', 'STR_PAD_LEFT'),\n                    strPad(timer.getMinutes(), 2, '0', 'STR_PAD_LEFT'),\n                    strPad(timer.getSeconds(), 2, '0', 'STR_PAD_LEFT')\n                ].join(':'),\n                msgStr = '<span class=\"log-time\">' + strPad(logTime, 12, ' ') + '</span> '\n                    + '<span class=\"log-type\">' + strPad(type, 18, ' ') + '</span> '\n                    + '<span class=\"log-message\">' + strPad(message, 18, ' ') + '</span>';\n            $listing.append('<li><pre>' + msgStr + '</pre></li>');\n            if (!$body.is(':visible')) {\n                $body.slideDown('slow', function () {\n                    $closer.show();\n                    $listing.scrollTop(10000);\n                });\n            }\n            else {\n                $listing.scrollTop(10000);\n            }\n        });\n\n        $closer.on('click', function () {\n            $body.slideUp('slow', function () {\n                $closer.hide();\n            });\n        });\n    };\n\n\n    /**\n     * Display the preview\n     */\n    var show = function () {\n\n        $.ajax({\n            url: itemUri,\n            dataType: 'html'\n        }).done(function (data) {\n            $('.preview-item-container').html(data);\n        });\n\n        // $.show() does not work from the item manager\n        // this is either a miracle or a jquery bug\n        // overlay.hide().show();\n        overlay[0].style.display = 'block';\n        overlay.height('100%');\n        overlay.find('select:visible').trigger('change');\n        _scale();\n        _positionPreview();\n    };\n\n    /**\n     * Create preview\n     *\n     * @param string _itemUri\n     */\n    var init = function (_itemUri) {\n\n        if(!_itemUri || _itemUri.length === 0){\n            throw new TypeError('Wrong URI');\n        }\n\n        $('.preview-overlay').remove();\n        container = null;\n        overlay = $(previewTpl({\n            mobileDevices: _getDeviceSelectorData('mobile'),\n            desktopDevices: _getDeviceSelectorData('desktop'),\n            previewTypes: _getPreviewTypes(),\n            previewType: previewType\n        }));\n\n        $body.append(overlay);\n\n        previewContainerMaxWidth = parseInt($('.preview-container').css('max-width'), 10);\n\n        $feedbackBox = overlay.find('.preview-message-box');\n        if ($.cookie('hidePreviewFeedback')) {\n            $feedbackBox.hide();\n        }\n\n        $console = overlay.find('#preview-console');\n\n        _initConsole();\n        _updateStandardPreviewSize();\n        _setupTypeDependantElements();\n        _setupDeviceSelectors();\n        _setupOrientationSelectors();\n        _setupViewSelector();\n        _setupClosers();\n        _computeScaleFactor();\n        _setPreviewType(previewType);\n        _setOrientation(orientation);\n\n        $window.on('resize orientationchange', function (e) {\n            screenSize = {\n                width: $window.innerWidth(),\n                height: $window.innerHeight()\n            };\n            _updateStandardPreviewSize();\n            _computeScaleFactor();\n            _scale();\n        });\n\n        itemUri = _itemUri;\n\n        return overlay;\n    };\n\n    return {\n        init: init,\n        show: show\n    };\n});\n\n","define('taoQtiItem/qtiCreator/editor/preparePrint',[\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * Prepare item for printing.\n     *\n     * @author <a href=\"mailto:dieter@taotesting.com\">Dieter Raber</a>\n     */\n    var preparePrint = function () {\n\n        function initHideOnPrint(elem) {\n            elem.siblings().each(function () {\n                $(this).addClass('item-no-print');\n            });\n            return elem.parent();\n        }\n\n        var parent = initHideOnPrint($('#item-editor-scope').parent());\n        while (parent.length && parent.get(0).nodeName.toLowerCase() !== 'body') {\n            parent = initHideOnPrint(parent);\n        }\n\n        $('#item-editor-toolbar, .item-editor-sidebar').addClass('item-no-print');\n    };\n\n    $('#print-trigger').on('click', function () {\n        window.print();\n    });\n\n    return preparePrint;\n});\n\n\n\n","\ndefine(\"json!taoQtiItem/qtiCreator/editor/resources/font-stacks.json\", function(){ return {\"sans-serif\":[\"Arial, \\\"Helvetica Neue\\\", Helvetica, sans-serif\",\"\\\"Avant Garde\\\", Avantgarde, \\\"Century Gothic\\\", CenturyGothic, \\\"AppleGothic\\\", sans-serif\",\"Calibri, Candara, Segoe, \\\"Segoe UI\\\", Optima, Arial, sans-serif\",\"Candara, Calibri, Segoe, \\\"Segoe UI\\\", Optima, Arial, sans-serif\",\"\\\"Century Gothic\\\", CenturyGothic, AppleGothic, sans-serif\",\"Corbel, \\\"Lucida Grande\\\", \\\"Lucida Sans Unicode\\\", \\\"Lucida Sans\\\", \\\"DejaVu Sans\\\", \\\"Bitstream Vera Sans\\\", \\\"Liberation Sans\\\", Verdana, \\\"Verdana Ref\\\", sans-serif\",\"\\\"Franklin Gothic Medium\\\", \\\"Franklin Gothic\\\", \\\"ITC Franklin Gothic\\\", Arial, sans-serif\",\"Frutiger, \\\"Frutiger Linotype\\\", Univers, Calibri, \\\"Gill Sans\\\", \\\"Gill Sans MT\\\", \\\"Myriad Pro\\\", Myriad, \\\"DejaVu Sans Condensed\\\", \\\"Liberation Sans\\\", \\\"Nimbus Sans L\\\", Tahoma, Geneva, \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif\",\"Futura, \\\"Century Gothic\\\", AppleGothic, \\\"Trebuchet MS\\\", sans-serif\",\"Geneva, Verdana, \\\"Lucida Sans\\\", \\\"Lucida Grande\\\", \\\"Lucida Sans Unicode\\\", sans-serif\",\"\\\"Gill Sans\\\", \\\"Gill Sans MT\\\", Calibri, sans-serif\",\"\\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif\",\"Impact, Haettenschweiler, \\\"Franklin Gothic Bold\\\", Charcoal, \\\"Helvetica Inserat\\\", \\\"Bitstream Vera Sans Bold\\\", \\\"Arial Black\\\", sans-serif\",\"\\\"Lucida Grande\\\", \\\"Lucida Sans Unicode\\\", \\\"Lucida Sans\\\", Geneva, Verdana, sans-serif\",\"Optima, Segoe, \\\"Segoe UI\\\", Candara, Calibri, Arial, sans-serif\",\"\\\"Segoe UI\\\", Candara, \\\"Bitstream Vera Sans\\\", \\\"DejaVu Sans\\\", \\\"Bitstream Vera Sans\\\", \\\"Trebuchet MS\\\", Verdana, \\\"Verdana Ref\\\", sans-serif\",\"Tahoma, Verdana, Segoe, sans-serif\",\"\\\"Trebuchet MS\\\", \\\"Lucida Grande\\\", \\\"Lucida Sans Unicode\\\", \\\"Lucida Sans\\\", Tahoma, sans-serif\",\"Verdana, Geneva, Tahoma, sans-serif\"],\"serif\":[\"Baskerville, \\\"Baskerville Old Face\\\", \\\"Hoefler Text\\\", Garamond, \\\"Times New Roman\\\", serif\",\"\\\"Big Caslon\\\", \\\"Book Antiqua\\\", \\\"Palatino Linotype\\\", Georgia, serif\",\"\\\"Bodoni MT\\\", Didot, \\\"Didot LT STD\\\", \\\"Hoefler Text\\\", Garamond, \\\"Times New Roman\\\", serif\",\"\\\"Book Antiqua\\\", Palatino, \\\"Palatino Linotype\\\", \\\"Palatino LT STD\\\", Georgia, serif\",\"\\\"Calisto MT\\\", \\\"Bookman Old Style\\\", Bookman, \\\"Goudy Old Style\\\", Garamond, \\\"Hoefler Text\\\", \\\"Bitstream Charter\\\", Georgia, serif\",\"Cambria, \\\"Hoefler Text\\\", Utopia, \\\"Liberation Serif\\\", \\\"Nimbus Roman No9 L Regular\\\", Times, \\\"Times New Roman\\\", serif\",\"Constantia, \\\"Lucida Bright\\\", Lucidabright, \\\"Lucida Serif\\\", Lucida, \\\"DejaVu Serif\\\", \\\"Bitstream Vera Serif\\\", \\\"Liberation Serif\\\", Georgia, serif\",\"Didot, \\\"Didot LT STD\\\", \\\"Hoefler Text\\\", Garamond, \\\"Times New Roman\\\", serif\",\"Garamond, Baskerville, \\\"Baskerville Old Face\\\", \\\"Hoefler Text\\\", \\\"Times New Roman\\\", serif\",\"Georgia, Palatino,\\\" Palatino Linotype\\\", Times, \\\"Times New Roman\\\", serif\",\"\\\"Goudy Old Style\\\", Garamond, \\\"Big Caslon\\\", \\\"Times New Roman\\\", serif\",\"\\\"Hoefler Text\\\", \\\"Baskerville old face\\\", Garamond, \\\"Times New Roman\\\", serif\",\"\\\"Lucida Bright\\\", Georgia, serif\",\"\\\"Palatino Linotype\\\", Palatino, Palladio, \\\"URW Palladio L\\\", \\\"Book Antiqua\\\", Baskerville, \\\"Bookman Old Style\\\", \\\"Bitstream Charter\\\", \\\"Nimbus Roman No9 L\\\", Garamond, \\\"Apple Garamond\\\", \\\"ITC Garamond Narrow\\\", \\\"New Century Schoolbook\\\", \\\"Century Schoolbook\\\", \\\"Century Schoolbook L\\\", Georgia, serif\",\"Perpetua, Baskerville, \\\"Big Caslon\\\", \\\"Palatino Linotype\\\", Palatino, \\\"URW Palladio L\\\", \\\"Nimbus Roman No9 L\\\", serif\",\"Rockwell, \\\"Courier Bold\\\", Courier, Georgia, Times, \\\"Times New Roman\\\", serif\",\"\\\"Times New Roman\\\", TimesNewRoman, Times, Baskerville, Georgia, serif\"],\"monospace\":[\"\\\"Andale Mono\\\", AndaleMono, monospace\",\"Consolas, \\\"Andale Mono WT\\\", \\\"Andale Mono\\\", \\\"Lucida Console\\\", \\\"Lucida Sans Typewriter\\\", \\\"DejaVu Sans Mono\\\", \\\"Bitstream Vera Sans Mono\\\", \\\"Liberation Mono\\\", \\\"Nimbus Mono L\\\", Monaco, \\\"Courier New\\\", Courier, monospace\",\"\\\"Courier New\\\", Courier, \\\"Lucida Sans Typewriter\\\", \\\"Lucida Typewriter\\\", monospace\",\"\\\"Lucida Console\\\", \\\"Lucida Sans Typewriter\\\", Monaco, \\\"Bitstream Vera Sans Mono\\\", monospace\",\"Monaco, Consolas, \\\"Lucida Console\\\", monospace\",\"\\\"Rockwell Extra Bold\\\", \\\"Rockwell Bold\\\", monospace\"]};});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/cssToggler', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n<li data-css-res=\\\"\";\n  if (helper = helpers.path) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.path); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"icon-preview style-sheet-toggler\\\" title=\\\"\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></span>\\n    <span class=\\\"file-label truncate\\\" title=\\\"\";\n  if (helper = helpers.editLabelTxt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.editLabelTxt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <input type=\\\"text\\\" class=\\\"style-sheet-label-editor\\\" value=\\\"\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"icon-bin\\\" title=\\\"\";\n  if (helper = helpers.deleteTxt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.deleteTxt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"css-delete\\\"></span>\\n    <span class=\\\"icon-download\\\" title=\\\"\";\n  if (helper = helpers.downloadTxt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.downloadTxt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"css-download\\\"></span>\\n</li>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.stylesheets), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',[\n    'jquery',\n    'lodash',\n    'helpers',\n    'i18n',\n    'urlParser',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/cssToggler',\n    'lib/jquery.fileDownload'\n], function (\n    $,\n    _,\n    helpers,\n    __,\n    UrlParser,\n    cssTpl\n    ) {\n   // 'use strict'\n\n    var itemConfig;\n\n    /**\n     * generate Ajax URI\n     * @param action\n     * @returns {*}\n     */\n    var _getUri = function(action) {\n        return helpers._url(action, 'QtiCssAuthoring', 'taoQtiItem');\n    };\n\n    /**\n     * Extract the file name from a path\n     * @param path\n     * @returns {*}\n     * @private\n     */\n    var _basename = function(path) {\n        return path.substring(path.lastIndexOf('/') + 1);\n    };\n\n    /**\n     * Manage style rules as CSS rather than style attributes.\n     * Must be used by all widgets that change the style of an item.\n     */\n    var styleEditor = (function ($, doc) {\n\n        // stylesheet as object\n        var style = {},\n            // DOM element to hold the style\n            $styleElem = (function () {\n                var styleElem = $('#item-editor-user-styles');\n                if(!styleElem.length) {\n                    styleElem = $('<style>', { id : 'item-editor-user-styles' } );\n                    $('head').append(styleElem);\n                }\n                else {\n                    styleElem.empty();\n                }\n                return styleElem;\n            }()),\n            currentItem,\n            common = {\n                title: __('Disable this stylesheet temporarily'),\n                deleteTxt: __('Remove this stylesheet'),\n                editLabelTxt: __('Edit stylesheet label'),\n                downloadTxt: __('Download this stylesheet'),\n                preparingMessageHtml: __('Preparing CSS, please wait'),\n                failMessageHtml: __('There was a problem downloading your CSS, please try again.'),\n                isInValidLocalTxt: __('This stylesheet has not been found on the server. you may want to delete this reference')\n            },\n            customStylesheet = '';\n\n\n        /**\n         * Create CSS and add it to DOM\n         *\n         * @param dontAppend whether or not to append the stylesheet to the DOM. This is used by the iframe preview\n         */\n        var create = function(dontAppend) {\n\n            var key1, // first level key, could be selector or media query\n                key2, // second level key, could be css property or selector\n                mSelector, // selector inside a media query\n                mProp, // property inside a media query\n                css = '';\n\n            if(_.isEmpty(style)){\n                return erase();\n            }\n\n            // rebuild CSS\n            for (key1 in style) {\n                if (!style.hasOwnProperty(key1)) {\n                    continue;\n                }\n\n                css += key1 + '{';\n                for (key2 in style[key1]) {\n                    if (!style[key1].hasOwnProperty(key2)) {\n                        continue;\n                    }\n                    // in the case of a surrounding media query\n                    if (_.isPlainObject(style[key1][key2])) {\n                        for (mSelector in style[key1][key2]) {\n                            css += key2 + '{';\n                            for (mProp in style[key1][key2]) {\n                                css += mProp + ':' + style[key1][key2][mSelector] + ';';\n                            }\n                            css += '}';\n                        }\n                    }\n                    // regular selectors\n                    else {\n                        css += key2 + ':' + style[key1][key2] + ';';\n                    }\n                }\n                css += '}\\n';\n            }\n\n            if(!dontAppend) {\n                $styleElem.text(css);\n            }\n            return css;\n\n        };\n\n        /**\n         * Apply rule to CSS\n         *\n         * @param {{string}} selector\n         * @param {{string}} property\n         * @param {{string}} value\n         */\n        var apply = function (selector, property, value) {\n            style[selector] = style[selector] || {};\n\n            // delete this rule\n            if (!value) {\n                delete(style[selector][property]);\n                if(_.size(style[selector]) === 0) {\n                    delete(style[selector]);\n                }\n            }\n            // add this rule\n            else {\n                style[selector][property] = value;\n            }\n\n            // apply rule\n            create();\n\n            /**\n             * Fires a change notification on the item style\n             * @event taoQtiItem/qtiCreator/editor/styleEditor/styleEditor#stylechange.qti-creator\n             */\n            $(document).trigger('stylechange.qti-creator');\n        };\n\n\n        /**\n         * Delete all custom styles\n         */\n        var erase = function() {\n            style = {};\n            $styleElem.text('');\n            return false;\n        };\n\n        /**\n         * Save the resulting CSS to a file\n         */\n        var save = function () {\n            verifyInit();\n            return $.post(_getUri('save'), _.extend({}, itemConfig,\n                {\n                    cssJson: JSON.stringify(style),\n                    stylesheetUri: customStylesheet.attr('href')\n                }\n            ));\n        };\n\n\n        /**\n         * Download CSS as file\n         */\n        var download = function(uri) {\n            verifyInit();\n            $.fileDownload(_getUri('download'), {\n                preparingMessageHtml: common.preparingMessageHtml,\n                failMessageHtml: common.failMessageHtml,\n                successCallback: function () { },\n                httpMethod: 'POST',\n                data: _.extend({}, itemConfig, { stylesheetUri: uri })\n            });\n        };\n\n\n        /**\n         * Has the class been initialized\n         *\n         * @returns {boolean}\n         */\n        var verifyInit = function() {\n            if(!itemConfig) {\n                throw new Error('Missing itemConfig, did you call styleEditor.init()?');\n            }\n            return true;\n        };\n\n        /**\n         * Add a single stylesheet, the custom stylesheet will be loaded as object\n         *\n         * @param stylesheet\n         * @returns {*} promise\n         */\n        var addStylesheet = function(stylesheet) {\n\n            var fileName,\n                link,\n                stylesheets = [],\n                listEntry,\n                parser,\n                loadStylesheet = function(link, stylesheet, isLocal, isValid) {\n\n                    // in the given scenario we cannot test whether a remote stylesheet really exists\n                    // this would require to pipe all remote css via php curl\n                    var isInvalidLocal = isLocal && !isValid,\n                        tplData = {\n                            path: stylesheet.attr('href'),\n                            label: (stylesheet.attr('title') || fileName),\n                            title: common.title,\n                            deleteTxt: common.deleteTxt,\n                            downloadTxt: common.downloadTxt,\n                            editLabelTxt: isInvalidLocal ? common.isInValidLocalTxt : common.editLabelTxt\n                        };\n\n                    stylesheets.push(tplData);\n\n                    // create list entry\n                    listEntry = $(cssTpl({ stylesheets: stylesheets }));\n\n                    listEntry.data('stylesheetObj', stylesheet);\n\n                    // initialize download button\n                    $('#style-sheet-toggler').append(listEntry);\n\n                    if(isInvalidLocal) {\n                        listEntry.addClass('not-available');\n                        listEntry.find('[data-role=\"css-download\"], .style-sheet-toggler').css('visibility', 'hidden');\n                        return;\n                    }\n\n                    $styleElem.before(link);\n\n                    // time difference between loading the css file and applying the styles\n                    setTimeout(function() {\n                        $(doc).trigger('customcssloaded.styleeditor', [style]);\n                        $(window).trigger('resize');\n                    }, isLocal ? 500 : 3500);\n\n                };\n\n            // argument is uri\n            if(_.isString(stylesheet)) {\n                stylesheet = currentItem.createStyleSheet(stylesheet);\n            }\n\n\n            fileName = _basename(stylesheet.attr('href'));\n            // link with cache buster\n            link = (function() {\n                var _link = $(stylesheet.render()),\n                    _href = _link.attr('href'),\n                    _sep  = _href.indexOf('?') > -1 ? '&' : '?';\n                _link.attr('href', _href + _sep + (new Date().getTime()).toString());\n                return _link;\n            }());\n\n            // cache css before applying allows for a pretty good guess\n            // when the stylesheet is loaded and the buttons in the style editor\n            // can be changed\n            parser = new UrlParser(link.attr('href'));\n            if (parser.checkCORS()) {\n            $.when($.ajax(link.attr('href'))).then(function() {\n                    loadStylesheet(link, stylesheet, true, true);\n                },\n                    // add file to list even on failure to be able to remove it from the item\n                    function() {\n                        loadStylesheet(link, stylesheet, true, false);\n            });\n            }\n            // otherwise load it with a big timeout and hope for the best\n            // unfortunately this dirty way is the only possibility in cross domain environments\n            else {\n                loadStylesheet(link, stylesheet, false);\n            }\n\n        };\n\n\n        /**\n         * Add style sheets to toggler\n         * @param item\n         */\n        var addItemStylesheets = function() {\n            \n            var currentStylesheet;\n\n            for(var key in currentItem.stylesheets) {\n                if(!currentItem.stylesheets.hasOwnProperty(key)) {\n                    continue;\n                }\n\n                currentStylesheet = currentItem.stylesheets[key];\n\n                if('tao-user-styles.css' === _basename(currentStylesheet.attr('href'))) {\n                    customStylesheet = currentStylesheet;\n                    continue;\n                }\n\n                // add those that are loaded synchronously\n                addStylesheet(currentItem.stylesheets[key]);\n            }\n            \n            // if no custom css had been found, add empty stylesheet anyway\n            if(!customStylesheet) {\n                customStylesheet = currentItem.createStyleSheet('style/custom/tao-user-styles.css');\n            }\n        };\n\n        /**\n         * Remove orphaned stylesheets. These would be present if previously another item has been edited\n         */\n        var removeOrphanedStylesheets = function() {\n            $('link[data-serial]').remove();\n        };\n        \n        /**\n         * retrieve the current item\n         *\n         * @returns {*}\n         */\n        var getItem = function() {\n            return currentItem;\n        };\n\n\n        /**\n         * Initialize class\n         * @param config\n         */\n        var init = function(item, config) {\n            \n            // promise\n            currentItem = item;\n            \n            //prepare config object (don't pass all of them, otherwise, $.param will break)\n            itemConfig = {\n                uri : config.uri,\n                lang : config.lang,\n                baseUrl : config.baseUrl\n            };\n\n            removeOrphanedStylesheets();\n            \n            // this creates at the same time customStylesheet in case it doesn't exist yet\n            addItemStylesheets();\n\n            var resizerTarget = $('#item-editor-item-resizer').data('target'),\n                href = customStylesheet.attr('href');\n            \n            currentItem.data('responsive', true);\n\n            $.when(\n                $.getJSON (\n                    _getUri('load'),\n                    _.extend({}, itemConfig, { stylesheetUri: href })\n                )\n            ).then(function(_style) {\n                // copy style to global style\n                style = _style;\n\n                // apply rules\n                create();\n\n                // reset meta in case the width is set in the custom stylesheet\n                if(style.length){\n                    currentItem.data('responsive', !!(style[resizerTarget] && style[resizerTarget].width));\n                }\n\n                // inform editors about custom sheet\n                $(doc).trigger('customcssloaded.styleeditor', [style]);\n\n            });\n\n        };\n\n        var getStyle = function() {\n            return style;\n        };\n\n        // expose public functions\n        return {\n            apply: apply,\n            save: save,\n            download: download,\n            erase: erase,\n            init: init,\n            create: create,\n            getItem: getItem,\n            getStyle: getStyle,\n            addStylesheet: addStylesheet\n        };\n    }($, document));\n\n    return styleEditor;\n});\n\n","define('taoQtiItem/qtiCreator/editor/styleEditor/fontSelector',[\n    'jquery',\n    'json!taoQtiItem/qtiCreator/editor/resources/font-stacks.json',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'i18n',\n    'select2'\n], function ($, fontStacks, styleEditor, __) {\n    'use strict';\n\n    /**\n     * Populate a select box with a list of fonts to select from.\n     * On change apply the selected font to the specified target.\n     *\n     * @example\n     * The expected mark-up must be like this:\n     * <select\n     *   data-target=\"selector-of-targeted-element\"\n     *   data-not-selected=\"Select a font\n     *   data-selected=\"Reset to default\">\n     * <option value=\"\"></option>\n     *\n     * The function is called like this:\n     * fontSelector('the-select-box-selector');\n     *\n     * @param selector\n     */\n    var fontSelector = function () {\n        var fontSelector = $('select#item-editor-font-selector'),\n            target = fontSelector.data('target'),\n            $target = $(target),\n            normalize = function (font) {\n                return font.replace(/\"/g, \"'\").replace(/, /g, \",\");\n            },\n            clean = function (font) {\n                return font.substring(0, font.indexOf(',')).replace(/'/g, '');\n            },\n            resetButton =  fontSelector.parent().find('[data-role=\"font-selector-reset\"]'),\n            generic,\n            optGroup,\n            option,\n            i = 0,\n            l,\n            toLabel = function (font) {\n                font = font.replace(/-/g, ' ');\n                return (font + '').replace(/^([a-z\\u00E0-\\u00FC])|\\s+([a-z\\u00E0-\\u00FC])/g, function ($1) {\n                    return $1.toUpperCase();\n                });\n            },\n            format = function (state) {\n                var originalOption = state.element;\n                if (!state.id) return state.text;\n                return '<span style=\"font-size: 12px;' + $(originalOption).attr('style') + '\">' + state.text + '</span>';\n            },\n            reset = function() {\n                styleEditor.apply(target, 'font-family');\n                fontSelector.select2('val', $target.css('font-family'));\n            };\n\n\n        fontSelector.append('<option value=\"\">' + __('Default')  + '</option>');\n\n        for (generic in fontStacks) {\n            if (fontStacks.hasOwnProperty(generic)) {\n                optGroup = $('<optgroup>', { label: toLabel(generic) });\n                l = fontStacks[generic].length;\n                for (i = 0; i < l; i++) {\n                    // normalize quotes\n                    fontStacks[generic][i] = normalize(fontStacks[generic][i]);\n                    option = $('<option>', {\n                        value: fontStacks[generic][i],\n                        text: clean(fontStacks[generic][i])\n                    })\n                        .css({\n                            fontFamily: fontStacks[generic][i]\n                        });\n                    optGroup.append(option);\n                }\n                fontSelector.append(optGroup);\n            }\n        }\n\n\n\n        resetButton.on('click', reset);\n\n        fontSelector.select2({\n            formatResult: format,\n            formatSelection: format,\n            width: 'resolve'\n        });\n\n        $(document).on('customcssloaded.styleeditor', function(e, style) {\n            //@todo : to be fixed ! currently disabled because keep triggering error \"style is undefined\"\n            return;\n            if(style[target] && style[target]['font-family']) {\n                fontSelector.select2('val', style[target]['font-family']);\n            }\n        });\n\n        fontSelector.on('change', function () {\n            styleEditor.apply(target, 'font-family', $(this).val());\n        });\n    };\n\n    return fontSelector;\n});\n\n\n","define('taoQtiItem/qtiCreator/helper/popup',[\n    'jquery',\n    'lodash',\n    'core/dataattrhandler'\n], function(\n    $,\n    _,\n    dataAttrHandler\n    ){\n\n    'use strict';\n\n\n    var init = function($trigger, options) {\n\n        var defaults = {\n            top: null,     // || pixels relative to the top border of the sidebar\n            right: 2,      // pixels relative to the left border of the sidebar\n            title: null    // || string title\n        };\n\n        options = _.assign(defaults, (options || {}));\n\n        // open the popup\n        var open = function($trigger, $popup) {\n\n            // The following sidebar related variables apply only in the case where the popup\n            // is attached to a sidebar. In the the case of farbtastic for example\n            // the popup is attached to the body.\n            var $container = $popup.parents('.sidebar-popup-parent');\n\n\n            // this makes sure the popup height never exceeds the height of the content part of the page\n            var $actionBar = $('.item-editor-action-bar');\n            var baseOffsetTop = $actionBar.offset().top - $actionBar.height();\n            var maxHeight = $(window).height() - baseOffsetTop;\n\n            var top = _.isNull(options.top) ? $trigger.offset().top - baseOffsetTop - ($popup.height() / 2) : options.top;\n            var $titleArea = $popup.find('.sidebar-popup-title');\n            var $title = $titleArea.find('h3');\n            if($titleArea.length) {\n                maxHeight -= $titleArea.height();\n            }\n\n            $trigger.trigger('beforeopen.popup', { popup: $popup, trigger: $trigger });\n            $popup.show();\n\n            $popup.css({\n                top: Math.max(baseOffsetTop, top),\n                right: $container.hasClass('item-editor-sidebar-wrapper') ? $container.width() + options.right : options.right\n            });\n\n            if(options.title) {\n                $title.text(options.title);\n            }\n\n            $popup.find('.sidebar-popup-content').css({ maxHeight: maxHeight });\n\n            $trigger.trigger('open.popup', { popup: $popup, trigger: $trigger });\n        };\n\n        // close the popup\n        var close = function($trigger, $popup) {\n            $trigger.trigger('beforeclose.popup', { popup: $popup, trigger: $trigger });\n            $popup.hide();\n            $trigger.trigger('close.popup', { popup: $popup, trigger: $trigger });\n        };\n\n\n        // find popup, assign basic actions, add it to trigger props\n        $trigger.each(function() {\n            var _trigger = $(this),\n                $popup = options.popup || (function() {\n                    return dataAttrHandler.getTarget('popup', _trigger);\n                }());\n\n            var $closer = $popup.find('.closer'),\n                $dragger = $popup.find('.sidebar-popup-title').not($closer);\n\n            if(!$popup || !$popup.length) {\n                throw new Error('No popup found');\n            }\n\n            // close popup by clicking on x button\n            if($closer.length) {\n                $closer.on('click', function() {\n                    close(_trigger, $popup);\n                });\n            }\n\n            // drag popup\n            if($dragger.length){\n                $popup.draggable({\n                    handle : $dragger\n                });\n            }\n\n            // assign popup to trigger to avoid future DOM operations\n            _trigger.prop('popup', $popup);\n        });\n\n        // toggle popup\n        $trigger.on('click', function(e) {\n            var _trigger = $(e.target),\n                $popup   = _trigger.prop('popup');\n\n            // in case the trigger is an <a>\n            e.preventDefault();\n\n            // toggle popup\n            if($popup.is(':visible')) {\n                close(_trigger, $popup);\n            }\n            else {\n                open(_trigger, $popup);\n            }\n        })\n    };\n\n\n    function reorderZindex() {\n\n    }\n\n\n\n    return {\n        init: init,\n        reorderZindex: reorderZindex\n    };\n\n});\n\n\n\n","/**\n * Farbtastic Color Picker 1.2\n *  2008 Steven Wittens\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 2 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n */\n\n/**\n * NOTE: THIS IS A MOD OF COLOR PICKER 1.2 - DO NOT UPGRADE!\n * 2014-03-06  dieter@taotesting.com\n */\ndefine('taoQtiItem/qtiCreator/editor/styleEditor/farbtastic/farbtastic',['jquery'], function(jQuery){\n    var $ = jQuery;\n\njQuery.fn.farbtastic = function(callback) {\n    $.farbtastic(this, callback);\n    return this;\n};\n\njQuery.farbtastic = function(container, callback) {\n    if (!container.length) return;\n    var container = $(container).get(0);\n    return container.farbtastic || (container.farbtastic = new jQuery._farbtastic(container, callback));\n}\n\njQuery._farbtastic = function(container, callback) {\n    // Store farbtastic object\n    var fb = this;\n\n    // Insert markup\n    var e = $('<div>', {\n        'class': 'farbtastic'\n    }),\n        colorObj = $('<div>', {\n            'class': 'color'\n        }),\n        wheelObj = $('<div>', {\n            'class': 'wheel'\n        }),\n        overlayObj = $('<div>', {\n            'class': 'overlay'\n        }),\n        hMarkerObj = $('<div>', {\n            'class': 'h-marker marker'\n        }),\n        slMarkerObj = $('<div>', {\n            'class': 'sl-marker marker'\n        });\n\n    container = $(container);\n\n    $(e).append(colorObj);\n    $(e).append(wheelObj);\n    $(e).append(overlayObj);\n    $(e).append(hMarkerObj);\n    $(e).append(slMarkerObj);\n\n    container.append(e);\n\n\n    fb.wheel = wheelObj.get(0);\n    // Dimensions\n    fb.radius = 70;\n    fb.square = overlayObj.width();\n    fb.width = e.width();\n\n\n    /**\n     * Link to the given element(s) or callback.\n     */\n    fb.linkTo = function(callback) {\n        // Unbind previous nodes\n        if (typeof fb.callback == 'object') {\n            $(fb.callback).unbind('keyup', fb.updateValue);\n        }\n\n        // Reset color\n        fb.color = null;\n\n        // Bind callback or elements\n        if (typeof callback == 'function') {\n            fb.callback = callback;\n        } else if (typeof callback == 'object' || typeof callback == 'string') {\n            fb.callback = $(callback);\n            fb.callback.bind('keyup', fb.updateValue);\n            if (fb.callback.get(0).value) {\n                fb.setColor(fb.callback.get(0).value);\n            }\n        }\n        return this;\n    };\n\n    fb.updateValue = function(event) {\n        if (this.value && this.value != fb.color) {\n            fb.setColor(this.value);\n        }\n    };\n\n    /**\n     * Change color with HTML syntax #123456\n     */\n    fb.setColor = function(color) {\n        var unpack = fb.unpack(color);\n        if (fb.color != color && unpack) {\n            fb.color = color;\n            fb.rgb = unpack;\n            fb.hsl = fb.RGBToHSL(fb.rgb);\n            fb.updateDisplay();\n        }\n        return this;\n    };\n\n\n    /**\n     * Change color with HSL triplet [0..1, 0..1, 0..1]\n     */\n    fb.setHSL = function(hsl) {\n        fb.hsl = hsl;\n        fb.rgb = fb.HSLToRGB(hsl);\n        fb.color = fb.pack(fb.rgb);\n        fb.updateDisplay();\n        return this;\n    }\n\n    /////////////////////////////////////////////////////\n\n    /**\n     * Retrieve the coordinates of the given event relative to the center\n     * of the widget.\n     */\n    fb.widgetCoords = function(event) {\n        var x, y;\n        var el = event.target || event.srcElement;\n        var reference = fb.wheel;\n\n        if (typeof event.offsetX != 'undefined') {\n            // Use offset coordinates and find common offsetParent\n            var pos = {\n                x: event.offsetX,\n                y: event.offsetY\n            };\n\n            // Send the coordinates upwards through the offsetParent chain.\n            var e = el;\n            while (e) {\n                e.mouseX = pos.x;\n                e.mouseY = pos.y;\n                pos.x += e.offsetLeft;\n                pos.y += e.offsetTop;\n                e = e.offsetParent;\n            }\n\n            // Look for the coordinates starting from the wheel widget.\n            var e = reference;\n            var offset = {\n                x: 0,\n                y: 0\n            }\n            while (e) {\n                if (typeof e.mouseX != 'undefined') {\n                    x = e.mouseX - offset.x;\n                    y = e.mouseY - offset.y;\n                    break;\n                }\n                offset.x += e.offsetLeft;\n                offset.y += e.offsetTop;\n                e = e.offsetParent;\n            }\n\n            // Reset stored coordinates\n            e = el;\n            while (e) {\n                e.mouseX = undefined;\n                e.mouseY = undefined;\n                e = e.offsetParent;\n            }\n        } else {\n            // Use absolute coordinates\n            var pos = fb.absolutePosition(reference);\n            x = (event.pageX || 0 * (event.clientX + $('html').get(0).scrollLeft)) - pos.x;\n            y = (event.pageY || 0 * (event.clientY + $('html').get(0).scrollTop)) - pos.y;\n        }\n        // Subtract distance to middle\n        return {\n            x: x - fb.width / 2,\n            y: y - fb.width / 2\n        };\n    }\n\n    /**\n     * Mousedown handler\n     */\n    fb.mousedown = function(event) {\n        // Capture mouse\n        if (!document.dragging) {\n            $(document).bind('mousemove', fb.mousemove).bind('mouseup', fb.mouseup);\n            document.dragging = true;\n        }\n\n        // Check which area is being dragged\n        var pos = fb.widgetCoords(event);\n        fb.circleDrag = Math.max(Math.abs(pos.x), Math.abs(pos.y)) * 2 > fb.square;\n\n        // Process\n        fb.mousemove(event);\n        return false;\n    }\n\n    /**\n     * Mousemove handler\n     */\n    fb.mousemove = function(event) {\n        // Get coordinates relative to color picker center\n        var pos = fb.widgetCoords(event);\n\n        // Set new HSL parameters\n        if (fb.circleDrag) {\n            var hue = Math.atan2(pos.x, -pos.y) / 6.28;\n            if (hue < 0) hue += 1;\n            fb.setHSL([hue, fb.hsl[1], fb.hsl[2]]);\n        } else {\n            var sat = Math.max(0, Math.min(1, -(pos.x / fb.square) + .5));\n            var lum = Math.max(0, Math.min(1, -(pos.y / fb.square) + .5));\n            fb.setHSL([fb.hsl[0], sat, lum]);\n        }\n        return false;\n    }\n\n    /**\n     * Mouseup handler\n     */\n    fb.mouseup = function() {\n        // Uncapture mouse\n        $(document).unbind('mousemove', fb.mousemove);\n        $(document).unbind('mouseup', fb.mouseup);\n        document.dragging = false;\n    }\n\n    /**\n     * Update the markers and styles\n     */\n    fb.updateDisplay = function() {\n        // Markers\n        var angle = fb.hsl[0] * 6.28;\n        $('.h-marker', e).css({\n            left: Math.round(Math.sin(angle) * fb.radius + fb.width / 2) + 'px',\n            top: Math.round(-Math.cos(angle) * fb.radius + fb.width / 2) + 'px'\n        });\n\n        $('.sl-marker', e).css({\n            left: Math.round(fb.square * (.5 - fb.hsl[1]) + fb.width / 2) + 'px',\n            top: Math.round(fb.square * (.5 - fb.hsl[2]) + fb.width / 2) + 'px'\n        });\n\n        // Saturation/Luminance gradient\n        $('.color', e).css('backgroundColor', fb.pack(fb.HSLToRGB([fb.hsl[0], 1, 0.5])));\n\n        // Linked elements or callback\n        if (typeof fb.callback == 'object') {\n            // Set background/foreground color\n            $(fb.callback).css({\n                backgroundColor: fb.color,\n                color: fb.hsl[2] > 0.5 ? '#000' : '#fff'\n            });\n\n            // Change linked value\n            $(fb.callback).each(function() {\n                if (this.value && this.value != fb.color) {\n                    this.value = fb.color;\n                }\n            });\n        } else if (typeof fb.callback == 'function') {\n            fb.callback.call(fb, fb.color);\n        }\n        // mod by dieter\n        container.trigger('colorchange.farbtastic', [fb.color]);\n    }\n\n    /**\n     * Get absolute position of element\n     */\n    fb.absolutePosition = function(el) {\n        var r = {\n            x: el.offsetLeft,\n            y: el.offsetTop\n        };\n        // Resolve relative to offsetParent\n        if (el.offsetParent) {\n            var tmp = fb.absolutePosition(el.offsetParent);\n            r.x += tmp.x;\n            r.y += tmp.y;\n        }\n        return r;\n    };\n\n    /* Various color utility functions */\n    fb.pack = function(rgb) {\n        var r = Math.round(rgb[0] * 255);\n        var g = Math.round(rgb[1] * 255);\n        var b = Math.round(rgb[2] * 255);\n        return '#' + (r < 16 ? '0' : '') + r.toString(16) +\n            (g < 16 ? '0' : '') + g.toString(16) +\n            (b < 16 ? '0' : '') + b.toString(16);\n    }\n\n    fb.unpack = function(color) {\n        if (color.length == 7) {\n            return [parseInt('0x' + color.substring(1, 3)) / 255,\n                parseInt('0x' + color.substring(3, 5)) / 255,\n                parseInt('0x' + color.substring(5, 7)) / 255];\n        } else if (color.length == 4) {\n            return [parseInt('0x' + color.substring(1, 2)) / 15,\n                parseInt('0x' + color.substring(2, 3)) / 15,\n                parseInt('0x' + color.substring(3, 4)) / 15];\n        }\n    }\n\n    fb.HSLToRGB = function(hsl) {\n        var m1, m2, r, g, b;\n        var h = hsl[0],\n            s = hsl[1],\n            l = hsl[2];\n        m2 = (l <= 0.5) ? l * (s + 1) : l + s - l * s;\n        m1 = l * 2 - m2;\n        return [this.hueToRGB(m1, m2, h + 0.33333),\n            this.hueToRGB(m1, m2, h),\n            this.hueToRGB(m1, m2, h - 0.33333)];\n    };\n\n    fb.hueToRGB = function(m1, m2, h) {\n        h = (h < 0) ? h + 1 : ((h > 1) ? h - 1 : h);\n        if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n        if (h * 2 < 1) return m2;\n        if (h * 3 < 2) return m1 + (m2 - m1) * (0.66666 - h) * 6;\n        return m1;\n    };\n\n    fb.RGBToHSL = function(rgb) {\n        var min, max, delta, h, s, l;\n        var r = rgb[0],\n            g = rgb[1],\n            b = rgb[2];\n        min = Math.min(r, Math.min(g, b));\n        max = Math.max(r, Math.max(g, b));\n        delta = max - min;\n        l = (min + max) / 2;\n        s = 0;\n        if (l > 0 && l < 1) {\n            s = delta / (l < 0.5 ? (2 * l) : (2 - 2 * l));\n        }\n        h = 0;\n        if (delta > 0) {\n            if (max == r && max != g) h += (g - b) / delta;\n            if (max == g && max != b) h += (2 + (b - r) / delta);\n            if (max == b && max != r) h += (4 + (r - g) / delta);\n            h /= 6;\n        }\n        return [h, s, l];\n    }\n\n    // Install mousedown handler (the others are set on the document on-demand)\n    $('*', e).mousedown(fb.mousedown);\n\n    // Init color\n    fb.setColor('#123456');\n\n    // Set linked elements/callback\n    if (callback) {\n        fb.linkTo(callback);\n    }\n}\n});\n\n","define('taoQtiItem/qtiCreator/editor/styleEditor/colorSelector',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'taoQtiItem/qtiCreator/helper/popup',\n    'taoQtiItem/qtiCreator/editor/styleEditor/farbtastic/farbtastic'\n], function ($, _, __, styleEditor, popup) {\n    'use strict';\n\n    // based on http://stackoverflow.com/a/14238466\n    // this conversion is required to communicate with farbtastic\n    function rgbToHex(color) {\n\n        function toHexPair(inp) {\n            return ('0' + parseInt(inp, 10).toString(16)).slice(-2);\n        }\n\n        // undefined can happen when no color is defined for a particular element\n        // isString on top of that should cover all sorts of weird input\n        if(!_.isString(color)) {\n            return color;\n        }\n\n        var rgbArr = /rgb\\s*\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)/i.exec(color);\n\n        // color is not rgb\n        if(!_.isArray(rgbArr) || rgbArr.length !== 4) {\n            return color;\n        }\n\n        return '#' + toHexPair(rgbArr[1]) + toHexPair(rgbArr[2]) + toHexPair(rgbArr[3]);\n    }\n\n    var colorSelector = function () {\n        var colorPicker = $('.item-editor-color-picker'),\n            widget = colorPicker.find('.color-picker'),\n            widgetBox = colorPicker.find('.color-picker-container'),\n            titleElement =  colorPicker.find('#color-picker-title'),\n            input = colorPicker.find('#color-picker-input'),\n            resetButtons = colorPicker.find('.reset-button'),\n            colorTriggers = colorPicker.find('.color-trigger'),\n            colorTriggerLabels = colorPicker.find('label'),\n            currentProperty = 'color',\n            widgetObj,\n            $doc = $(document);\n\n\n\n        /**\n         * Widget title\n         *\n         * @param property\n         * @param trigger\n         */\n        var setTitle = function (property, trigger) {\n            titleElement.text(trigger.parent().find('label').text());\n        };\n\n        /**\n         * Trigger button background\n         */\n        var setTriggerColor = function() {\n            colorTriggers.each(function () {\n                var $trigger = $(this),\n                    target   = $trigger.data('target'),\n                    $target  = $(target),\n                    style    = styleEditor.getStyle() || {},\n                    value;\n                // elements have a color from usage of style editor\n                if(style[target] && style[target][$trigger.data('value')]) {\n                    value = style[target][$trigger.data('value')];\n                    $trigger.css('background-color', value);\n                    $trigger.attr('title', rgbToHex(value));\n                }\n                // elements have a default color from tao css\n                else if($target.css($trigger.data('value'))) {\n                    value = $target.css($trigger.data('value'));\n                    $trigger.css('background-color', value);\n                    $trigger.attr('title', rgbToHex(value));\n                }\n                // elements have no color at all\n                else {\n                    $trigger.css('background-color', '');\n                    $trigger.attr('title', __('No value set'));\n                }\n\n            });\n        };\n\n        widgetObj = $.farbtastic(widget).linkTo(input);\n\n        // event received from modified farbtastic\n        widget.on('colorchange.farbtastic', function (e, color) {\n            styleEditor.apply(widget.prop('target'), currentProperty, color);\n            setTriggerColor();\n        });\n\n\n        // open color picker\n        setTriggerColor();\n        colorTriggers.add(colorTriggerLabels).on('click', function () {\n            var $tmpTrigger = $(this),\n                $trigger = (this.nodeName.toLowerCase() === 'label' ? $tmpTrigger.parent().find('.color-trigger') : $tmpTrigger),\n                value = $trigger.css('background-color');\n\n            widget.prop('target', $trigger.data('target'));\n            widgetBox.hide();\n            currentProperty = $trigger.data('value');\n            setTitle(currentProperty, $trigger);\n            widgetObj.setColor(rgbToHex($trigger.css('background-color')));\n            widgetBox.show();\n        });\n\n        // close color picker, when clicking somewhere outside or on the x\n        $doc.on('mouseup', function(e) {\n            if($(e.target).hasClass('closer')) {\n                widgetBox.hide();\n                return false;\n            }\n\n            if (!widgetBox.is(e.target) && widgetBox.has(e.target).length === 0) {\n                widgetBox.hide();\n                return false;\n            }\n        });\n\n        // close color picker on escape\n        $doc.on('keyup', function(e){\n            if (e.keyCode === 27) {\n                widgetBox.hide();\n                return false;\n            }\n        });\n\n\n        // reset to default\n        resetButtons.on('click', function () {\n            var $this = $(this),\n                $colorTrigger = $this.parent().find('.color-trigger'),\n                target = $colorTrigger.data('target'),\n                value = $colorTrigger.data('value');\n            styleEditor.apply(target, value);\n            setTriggerColor();\n        });\n\n\n        $doc.on('customcssloaded.styleeditor', setTriggerColor);\n    };\n\n    return colorSelector;\n});\n\n","define('taoQtiItem/qtiCreator/editor/styleEditor/fontSizeChanger',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor'\n], function ($, _, styleEditor) {\n    'use strict';\n\n    var fontSizeChanger = function () {\n        var fontSizeChanger = $('#item-editor-font-size-changer'),\n            target = fontSizeChanger.data('target'),\n            headSelector = target + ' .item-title',\n            bodySelector = target + ' .qti-itemBody *',\n            headFontSize = parseInt($(headSelector).css('font-size'), 10),\n            bodyFontSize = parseInt($(bodySelector).css('font-size'), 10),\n            headBodyDiff = headFontSize - bodyFontSize,\n            resetButton =  fontSizeChanger.parents('.reset-group').find('[data-role=\"font-size-reset\"]'),\n            input = $('#item-editor-font-size-text');\n\n        var resizeFont = function() {\n            var headFontSize = bodyFontSize + headBodyDiff;\n            styleEditor.apply(headSelector, 'font-size', headFontSize.toString() + 'px');\n            styleEditor.apply(bodySelector, 'font-size', bodyFontSize.toString() + 'px');\n        };\n\n        fontSizeChanger.find('a').on('click', function(e) {\n            e.preventDefault();\n            if($(this).data('action') === 'reduce') {\n                if(bodyFontSize <= 10) {\n                    return;\n                }\n                bodyFontSize--;\n            }\n            else {\n                bodyFontSize++;\n            }\n            resizeFont();\n            input.val(bodyFontSize);\n            $(this).parent().blur();\n        });\n\n        input.on('keydown', function(e) {\n            var c = e.keyCode;\n            return (_.contains([8, 37, 39, 46], c)\n                || (c >= 48 && c <= 57)\n                || (c >= 96 && c <= 105));\n        });\n\n        input.on('blur', function() {\n            bodyFontSize = parseInt(this.value, 10);\n            resizeFont();\n        });\n\n        input.on('keydown', function(e) {\n            var c = e.keyCode;\n            if(c === 13) {\n                input.trigger('blur');\n            }\n        });\n\n        resetButton.on('click', function () {\n            input.val('');\n            styleEditor.apply(headSelector, 'font-size');\n            styleEditor.apply(bodySelector, 'font-size');\n        });\n\n        // style loaded from style sheet\n        $(document).on('customcssloaded.styleeditor', function(e, style) {\n            if(style[bodySelector] && style[bodySelector]['font-size']) {\n                input.val(parseInt(style[bodySelector]['font-size'], 10));\n                input.trigger('blur');\n            }\n            else {\n                input.val(parseInt($(bodySelector).css('font-size'), 10));\n            }\n        });\n    };\n\n    return fontSizeChanger;\n});\n\n\n","define('taoQtiItem/qtiCreator/editor/styleEditor/itemResizer',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'nouislider',\n    'jqueryui'\n\n], function ($, _, styleEditor) {\n    'use strict';\n\n    /**\n     * Adapt the image editor to the target screen the students will be using\n     * @param {Object} item - the current item\n     */\n    var itemResizer = function (item) {\n\n        var itemResizer = $('#item-editor-item-resizer'),\n            target = itemResizer.data('target'),\n            $target = $(target),\n            targetWidth = $target.width(),\n            itemWidthPrompt = itemResizer.find('[name=\"item-width-prompt\"]'),\n            sliderBox = itemResizer.find('.slider-box'),\n            slider = itemResizer.find('#item-editor-item-resizer-slider'),\n            input = $('#item-editor-item-resizer-text'),\n            resetButton =  itemResizer.find('[data-role=\"item-width-reset\"]'),\n            sliderSettings = {\n                range : {\n                    min: Math.min(768, targetWidth),\n                    max: Math.max(1200, targetWidth)\n                },\n                start: targetWidth\n            };\n\n\n        var reset = function() {\n            itemResizer.find('[value=\"no-slider\"]').trigger('click');\n        };\n\n        /**\n         * Resize item\n         *\n         * @param val int|string\n         */\n        var resizeItem = function(val) {\n            // to make sure the value can come as int or string\n            val = parseInt(val).toString() + 'px';\n            styleEditor.apply(target, 'width', val);\n            styleEditor.apply(target, 'max-width', 'none');\n            \n            item.data('widget').$container.trigger('resize.itemResizer');\n        };\n\n        /**\n         * Initialize radio buttons\n         */\n        itemWidthPrompt.on('click', function() {\n            // user intends to resize the item\n            if(this.value === 'slider') {\n                resizeItem($target.width());\n                input.val($target.width());\n                sliderBox.slideDown();\n                slider.val($target.width()).trigger('slide');\n                item.data('responsive', false); \n            }\n            // user wants to use default\n            else {\n                slider.val(sliderSettings.start);\n                sliderBox.slideUp();\n                input.val('');\n\n                styleEditor.apply(target, 'width');\n                styleEditor.apply(target, 'max-width');\n                item.data('responsive', true); \n            }\n        });\n\n\n        slider.noUiSlider(sliderSettings);\n        slider.on('slide', function() {\n            var value = Math.round(slider.val());\n            input.val(value);\n            resizeItem(value);\n        });\n\n        input.on('keydown', function(e) {\n            var c = e.keyCode;\n            return (_.contains([8, 37, 39, 46], c)\n                || (c >= 48 && c <= 57)\n                || (c >= 96 && c <= 105));\n        });\n\n        input.on('blur', function() {\n            resizeItem(this.value);\n        });\n\n        resetButton.on('click', reset);\n        $(document).on('customcssloaded.styleeditor', function(e, style) {\n            var width;\n            // make a proper width change\n            if(style[target] && style[target].width) {\n                width = parseInt(style[target].width, 10);\n                input.val(width);\n                slider.val(width);\n                itemResizer.find('[value=\"slider\"]').trigger('click');\n            }\n            // just fill the text field\n            else {\n                input.val($target.width());\n            }\n        });\n    };\n    return itemResizer;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/notifications/genericFeedbackPopup', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"feedback-\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" popup\\\">\\n    <span class=\\\"icon-\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></span>\\n    \";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove Message\", options) : helperMissing.call(depth0, \"__\", \"Remove Message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/styleEditor/styleSheetToggler',[\n    'jquery',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'i18n',\n    'helpers',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/Stylesheet',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/genericFeedbackPopup',\n    'ui/resourcemgr'\n], function ($, styleEditor, __, helpers, _, Stylesheet, genericFeedbackPopup) {\n    'use strict';\n\n    var $doc = $(document);\n\n    var styleSheetToggler = (function () {\n\n        var init = function (itemConfig) {\n\n            var cssToggler = $('#style-sheet-toggler'),\n                uploader = $('#stylesheet-uploader'),\n                customCssToggler = $('[data-custom-css]'),\n                getContext = function (trigger) {\n                    trigger = $(trigger);\n                    var li = trigger.closest('li'),\n                        stylesheetObj = li.data('stylesheetObj') || new Stylesheet({href : li.data('css-res')}),\n                        input = li.find('.style-sheet-label-editor'),\n                        labelBox = input.prev('.file-label'),\n                        label = input.val();\n\n                    return {\n                        li: li,\n                        input: input,\n                        label: label,\n                        labelBox: labelBox,\n                        isCustomCss: !!li.data('custom-css'),\n                        isDisabled: li.find('.icon-preview').hasClass('disabled'),\n                        stylesheetObj: stylesheetObj,\n                        cssUri: stylesheetObj.attr('href')\n                    };\n                };\n\n\n\n            /**\n             * Upload custom stylesheets\n             */\n            uploader.on('click', function () {\n\n                uploader.resourcemgr({\n                    appendContainer: '#mediaManager',\n                    root: '/',\n                    browseUrl: helpers._url('files', 'ItemContent', 'taoItems'),\n                    uploadUrl: helpers._url('upload', 'ItemContent', 'taoItems'),\n                    deleteUrl: helpers._url('delete', 'ItemContent', 'taoItems'),\n                    downloadUrl: helpers._url('download', 'ItemContent', 'taoItems'),\n                    fileExistsUrl : helpers._url('fileExists', 'ItemContent', 'taoItems'),\n                    params: {\n                        uri: itemConfig.uri,\n                        lang: itemConfig.lang,\n                        filters: 'text/css'\n                    },\n                    pathParam: 'path',\n                    select: function (e, files) {\n                        var i, l = files.length;\n                        for (i = 0; i < l; i++) {\n                            styleEditor.addStylesheet(files[i].file);\n                        }\n                    }\n                });\n            });\n\n\n            /**\n             * Confirm to save the item\n             */\n            var deleteStylesheet = function(trigger) {\n                var context = getContext(trigger),\n                    attr = context.isDisabled ? 'disabled-href' : 'href',\n                    cssLinks = $('head link');\n\n\n                styleEditor.getItem().removeStyleSheet(context.stylesheetObj);\n\n                cssLinks.filter('[' + attr + '*=\"' + context.cssUri + '\"]').remove();\n                context.li.remove();\n\n                $('.feedback-info').hide();\n                _createInfoBox({\n                    message: __('Style Sheet <b>%s</b> removed<br> Click <i>Add Style Sheet</i> to re-apply.').replace('%s', context.label),\n                    type: 'info'\n                });\n\n                $doc.trigger('customcssloaded.styleeditor', [styleEditor.getStyle()]);\n            };\n\n\n            /**\n             * Modify stylesheet title (enable)\n             */\n            var initLabelEditor = function (trigger) {\n                var context = getContext(trigger);\n                context.labelBox.hide();\n                context.input.show();\n            };\n\n            /**\n             * Download current stylesheet\n             *\n             * @param trigger\n             */\n            var downloadStylesheet = function(trigger) {\n                styleEditor.download(getContext(trigger).cssUri);\n            };\n\n            /**\n             * Modify stylesheet title (save modification)\n             */\n            var saveLabel = function (trigger) {\n                var context = getContext(trigger),\n                    title = $.trim(context.input.val());\n\n                if (!title) {\n                    context.stylesheetObj.attr('title', '');\n                    return false;\n                }\n\n                context.stylesheetObj.attr('title', title);\n                context.input.hide();\n                context.labelBox.html(title).show();\n            };\n\n            /**\n             * Dis/enable style sheets\n             */\n            var handleAvailability = function (trigger) {\n                var context = getContext(trigger),\n                    link,\n                    attrTo = 'disabled-href',\n                    attrFrom = 'href';\n\n                // custom styles are handled in a style element, not in a link\n                if (context.isCustomCss) {\n                    if (context.isDisabled) {\n                        styleEditor.create();\n                        customCssToggler.removeClass('not-available');\n                    }\n                    else {\n                        styleEditor.erase();\n                        customCssToggler.addClass('not-available');\n                    }\n                }\n                // all other styles are handled via their link element\n                else {\n                    if (context.isDisabled) {\n                        attrTo = 'href';\n                        attrFrom = 'disabled-href';\n                    }\n\n                    link = $('link[' + attrFrom + '$=\"' + context.cssUri + '\"]');\n                    link.attr(attrTo, link.attr(attrFrom)).removeAttr(attrFrom);\n                }\n\n                // add some visual feed back to the triggers\n                $(trigger).toggleClass('disabled');\n            };\n\n            /**\n             * Distribute click events\n             */\n            cssToggler.on('click', function (e) {\n                var target = e.target,\n                    className = target.className;\n\n                // distribute click actions\n                if (className.indexOf('icon-bin') > -1) {\n                    deleteStylesheet(e.target);\n                }\n                else if (className.indexOf('file-label') > -1) {\n                    initLabelEditor(e.target);\n                }\n                else if (className.indexOf('icon-preview') > -1) {\n                    handleAvailability(e.target);\n                }\n                else if(className.indexOf('icon-download') > -1) {\n                    downloadStylesheet(e.target);\n                }\n            });\n\n\n            /**\n             * Handle renaming on enter\n             */\n            cssToggler.on('keydown', 'input', function (e) {\n                if (e.keyCode === 13) {\n                    $(e.target).trigger('blur');\n                }\n            });\n\n            /**\n             * Handle renaming on blur\n             */\n            cssToggler.on('blur', 'input', function (e) {\n                saveLabel(e.target);\n            });\n\n\n        };\n\n\n        var _createInfoBox = function(data){\n            var $messageBox = $(genericFeedbackPopup(data)),\n                closeTrigger = $messageBox.find('.close-trigger');\n\n            $('body').append($messageBox);\n\n            closeTrigger.on('click', function(){\n                $messageBox.fadeOut(function(){\n                    $(this).remove();\n                });\n            });\n\n            setTimeout(function() {\n                closeTrigger.trigger('click');\n            }, 4523);\n\n            return $messageBox;\n        };\n\n        return {\n            init: init\n        };\n\n    })();\n\n    return styleSheetToggler;\n});\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/helper/itemSerializer',['lodash'], function(_){\n    'use strict';\n\n    /**\n     * Helps you to create a JSON representation of an item\n     * @exports taoQtiItem/qtiCreator/helper/itemSerializer\n     */\n    var itemSerializer = {\n\n        /**\n         * Serialize an item object to JSON\n         * @param {Object} item - the {@link taoQtiItem/qtiCreator/model/Item} to serialize\n         * @returns {String} the JSON string\n         */\n        serialize : function(item){\n           var serialized = ''; \n           if(item){\n               try {\n                    //clone and serialize the cleaned up value \n                    serialized = JSON.stringify(item.toArray());\n                } catch(e){\n                    console.error(e);\n                }\n            }\n            return serialized;\n        }\n    };\n\n    return itemSerializer;\n});\n\n","define('taoQtiItem/qtiCreator/editor/editor',[\n    'jquery',\n    'lodash',\n    'helpers',\n    'core/dataattrhandler',\n    //gui components\n    'taoItems/preview/preview',\n    'taoQtiItem/qtiCreator/editor/preparePrint',\n    //appearance editor:\n    'taoQtiItem/qtiCreator/editor/styleEditor/fontSelector',\n    'taoQtiItem/qtiCreator/editor/styleEditor/colorSelector',\n    'taoQtiItem/qtiCreator/editor/styleEditor/fontSizeChanger',\n    'taoQtiItem/qtiCreator/editor/styleEditor/itemResizer',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleSheetToggler',\n    // item related\n    'taoQtiItem/qtiCreator/helper/itemSerializer'\n], function(\n    $,\n    _,\n    helpers,\n    dataAttrHandler,\n    preview,\n    preparePrint,\n    fontSelector,\n    colorSelector,\n    fontSizeChanger,\n    itemResizer,\n    styleEditor,\n    styleSheetToggler,\n    itemSerializer\n    ){\n\n    'use strict';\n\n    var askForSave = false,\n        serializeTimeOut,\n        lastItemData,\n        serializeItem = function (element) {\n            lastItemData = itemSerializer.serialize(element);\n        };\n\n    var initStyleEditor = function(widget, config){\n\n        styleEditor.init(widget.element, config);\n\n        styleSheetToggler.init(config);\n\n        // CSS widgets\n        fontSelector();\n        colorSelector();\n        fontSizeChanger();\n        itemResizer(widget.element);\n\n    };\n\n\n    /**\n     * Confirm to save the item\n     */\n    var _confirmPreview = function (overlay) {\n\n        var confirmBox = $('.preview-modal-feedback'),\n            cancel = confirmBox.find('.cancel'),\n            save = confirmBox.find('.save'),\n            close = confirmBox.find('.modal-close');\n\n        confirmBox.modal({ width: 500 });\n\n        save.on('click', function () {\n            overlay.trigger('save.preview');\n            confirmBox.modal('close');\n        });\n\n        cancel.on('click', function () {\n            confirmBox.modal('close');\n        });\n    };\n\n\n    var initPreview = function(widget){\n\n        var previewContainer, previewUrl;\n\n        clearTimeout(serializeTimeOut);\n        //serialize the item at the initialization level\n        //TODO wait for an item ready event\n        // itemWidget.$container.on('ready...\n        serializeTimeOut = setTimeout(function() {\n            serializeItem(widget.element);\n        }, 500);\n\n        //get the last value by saving\n        $('#save-trigger').on('click.qti-creator', function() {\n            serializeItem(widget.element);\n        });\n\n        $(document).on('stylechange.qti-creator', function () {\n            //we need to save before preview of style has changed (because style content is not part of the item model)\n            askForSave = true;\n        });\n\n        //compare the current item with the last serialized to see if there is any change\n        if (!askForSave) {\n            var currentItemData = serializeItem(widget.element);\n            if (lastItemData !== currentItemData || currentItemData === '') {\n                lastItemData = currentItemData;\n                askForSave = true;\n            }\n        }\n\n        previewUrl = helpers._url('index', 'QtiPreview', 'taoQtiItem') + '?uri=' + encodeURIComponent(widget.itemUri);\n        previewContainer = preview.init(previewUrl);\n\n        // wait for confirmation to save the item\n        if (askForSave) {\n            _confirmPreview(previewContainer);\n            previewContainer.on('save.preview', function () {\n                previewContainer.off('save.preview');\n                askForSave = false;\n                $.when(styleEditor.save(), widget.save()).done(function () {\n                    preview.show();\n                });\n            });\n        }\n        else {\n            //or show the preview\n            preview.show();\n        }\n\n    };\n\n    /**\n     * Initialize interface\n     */\n    var initGui = function(widget, config){\n\n        updateHeight();\n        $(window).off('resize.qti-editor')\n            .on('resize.qti-editor', _.throttle(updateHeight, 50));\n\n        initStyleEditor(widget, config);\n\n        preparePrint();\n\n        var $itemPanel = $('#item-editor-panel'),\n            $label = $('#item-editor-label'),\n            $actionGroups = $('.action-group');\n\n        $itemPanel.addClass('has-item');\n        $label.text(config.label);\n        $actionGroups.show();\n    };\n\n    /**\n     * Update the height of the authoring tool\n     * @private \n     */\n    var updateHeight = function updateHeight(){\n        var $itemEditorPanel = $('#item-editor-panel');\n        var $itemSidebars = $('.item-editor-sidebar');\n        var $contentPanel = $('#panel-authoring');\n        var /*$searchBar,\n            searchBarHeight,*/\n            footerTop,\n            contentWrapperTop,\n            remainingHeight;\n\n        if (!$contentPanel.length || !$itemEditorPanel.length) {\n            return;\n        }\n\n        //$searchBar = $contentPanel.find('.search-action-bar');\n        //searchBarHeight = $searchBar.outerHeight() + parseInt($searchBar.css('margin-bottom')) + parseInt($searchBar.css('margin-top'));\n\n        footerTop = (function() {\n            var $footer = $('body > footer'),\n                footerTop;\n            $itemSidebars.hide();\n            footerTop = $footer.offset().top;\n            $itemSidebars.show();\n            return footerTop;\n        }());\n        contentWrapperTop = $contentPanel.offset().top;\n        remainingHeight = footerTop - contentWrapperTop - $('.item-editor-action-bar').outerHeight();\n\n\n        // in the item editor the action bars are constructed slightly differently\n        $itemEditorPanel.find('#item-editor-scroll-outer').css({ minHeight: remainingHeight, maxHeight: remainingHeight, height: remainingHeight });\n        $itemSidebars.css({ minHeight: remainingHeight, maxHeight: remainingHeight, height: remainingHeight });\n    };\n\n    return {\n        initGui : initGui,\n        initPreview: initPreview\n    };\n\n});\n\n\n\n","define('taoQtiItem/qtiCreator/editor/customElementRegistryFactory',[\n    'lodash',\n    'jquery',\n    'helpers'\n], function(_, $, helpers){\n    \n    var _defaults = {\n        onRegister : _.noop\n    };\n    \n    var _urls = {\n        addRequiredResources : helpers._url('addRequiredResources', 'PortableElement', 'taoQtiItem')\n    };\n\n    function create(options){\n        \n        options = options || {};\n        options = _.defaults(options, _defaults);\n        \n        var _registeredHooks = {};\n        var _requirejs = window.require;\n\n        function isValidHook(hook){\n\n            if(!hook.typeIdentifier){\n                throw 'invalid hook : missing typeIdentifier';\n            }\n            if(!hook.baseUrl){\n                throw 'invalid hook : missing baseUrl';\n            }\n            if(!hook.file){\n                throw 'invalid hook : missing file';\n            }\n            return true;\n        }\n\n        /**\n         * Load manifest and baseUrl data\n         * \n         * @param {Object} hooks\n         * @param {Function} callback called after each hook registration\n         */\n        function register(hooks){\n\n            var paths = {};\n\n            _(hooks).values().each(function(hook){\n\n                if(isValidHook(hook)){\n\n                    var id = hook.typeIdentifier;\n\n                    //register the hook\n                    _registeredHooks[id] = hook;\n\n                    //load customInteraction namespace in _requirejs config \n                    paths[id] = hook.baseUrl;\n                    \n                    //exec callback\n                    if(_.isFunction(options.onRegister)){\n                        options.onRegister(hook);\n                    }\n                }\n            });\n\n            //register custom interaction paths\n            _requirejs.config({\n                paths : paths\n            });\n        }\n\n        /**\n         * Load all previously registered creator hooks\n         * \n         * @param {Function} callback\n         */\n        function loadAll(callback){\n\n            var required = [];\n            _.each(_registeredHooks, function(hook){\n                required.push(hook.file);\n            });\n           \n            _requirejs(required, function(){\n                var creators = {};\n                _.each(arguments, function(creator){\n                    var id = creator.getTypeIdentifier();\n                    creators[id] = creator;\n                    _registeredHooks[id].creator = creator;\n                });\n                callback(creators);\n            });\n        }\n\n        /**\n         * Load one single creator hook  identified by its typeIdentifier\n         * \n         * @param {String} typeIdentifier\n         * @param {Function} callback\n         */\n        function loadOne(typeIdentifier, callback){\n\n            var hook = _registeredHooks[typeIdentifier];\n            if(hook){\n                _requirejs([hook.file], function(creator){\n                    hook.creator = creator;\n                    callback(creator);\n                });\n            }else{\n                throw 'cannot load the hook because it is not registered '+typeIdentifier;\n            }\n\n        }\n\n        function getCreator(typeIdentifier){\n\n            var hook = _registeredHooks[typeIdentifier];\n            if(hook){\n                if(hook.creator){\n                    return hook.creator;\n                }else{\n                    throw 'the hook is not loaded ' + typeIdentifier;\n                }\n            }else{\n                throw 'the hook is not registered ' + typeIdentifier;\n            }\n        }\n\n        function isDev(typeIdentifier){\n            return _registeredHooks[typeIdentifier] && _registeredHooks[typeIdentifier].dev;\n        }\n\n        function get(typeIdentifier){\n            return _registeredHooks[typeIdentifier];\n        }\n\n        function getBaseUrl(typeIdentifier){\n            return get(typeIdentifier).baseUrl;\n        }\n\n        /**\n         * Get complete manifest object for a custom interaction\n         * \n         * @param {String} typeIdentifier\n         * @returns {Object}\n         */\n        function getManifest(typeIdentifier){\n            return get(typeIdentifier).manifest;\n        }\n\n        function isDev(typeIdentifier){\n            return _registeredHooks[typeIdentifier] && _registeredHooks[typeIdentifier].dev;\n        }\n        \n        function addRequiredResources(typeIdentifier, itemUri, callback){\n            \n            var registryClass = encodeURIComponent(get(typeIdentifier).registry);\n            $.getJSON(_urls.addRequiredResources, {registryClass: registryClass, typeIdentifier : typeIdentifier, uri : itemUri}, function(r){\n                if(_.isFunction(callback)){\n                    callback(r);\n                }\n            });\n        }\n        \n        return {\n            register : register,\n            loadAll : loadAll,\n            loadOne : loadOne,\n            getBaseUrl : getBaseUrl,\n            getCreator : getCreator,\n            isDev : isDev,\n            get : get,\n            getManifest : getManifest,\n            addRequiredResources : addRequiredResources\n        };\n\n    };\n\n    return {\n        create : create\n    };\n});\n","define('taoQtiItem/qtiCreator/editor/customInteractionRegistry',[\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/qtiElements',\n    'taoQtiItem/qtiCreator/editor/customElementRegistryFactory'\n], function(_, qtiElements, factory){\n\n    var registry = factory.create({\n        onRegister : function(hook){\n            //for compatiblility\n            qtiElements.classes['customInteraction.' + hook.typeIdentifier] = {parents : ['customInteraction'], qti : true};\n        }\n    });\n\n    /**\n     * Get authorign data for a custom interaction\n     * \n     * @param {String} typeIdentifier\n     * @returns {Object}\n     */\n    registry.getAuthoringData = function(typeIdentifier){\n\n        var manifest = registry.getManifest(typeIdentifier);\n\n        return {\n            label : manifest.label, //currently no translation available \n            icon : registry.getBaseUrl(typeIdentifier) + manifest.icon, //use baseUrl from context\n            short : manifest.short,\n            description : manifest.description,\n            qtiClass : 'customInteraction.' + manifest.typeIdentifier, //custom interaction is block type\n            tags : _.union(['Custom Interactions'], manifest.tags)\n        };\n    }\n\n    return registry;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionButton', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    data-sub-group=\\\"\";\n  if (helper = helpers.subGroup) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subGroup); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n    class=\\\"dev\\\"\\n\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n    class=\\\"disabled\\\"\\n    title=\\\"element available in the final release\\\"\\n\";\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    title=\\\"\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n\";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <span class=\\\"icon \";\n  if (helper = helpers.icon) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.icon); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></span>\\n    \";\n  return buffer;\n  }\n\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <img class=\\\"icon\\\" src=\\\"\";\n  if (helper = helpers.icon) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.icon); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<li\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.subGroup), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    data-qti-class=\\\"\";\n  if (helper = helpers.qtiClass) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.qtiClass); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n    \\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.dev), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.disabled), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n>\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.iconFont), {hash:{},inverse:self.program(11, program11, data),fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \\n    <div class=\\\"truncate\\\">\";\n  if (helper = helpers['short']) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0['short']); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</div>\\n</li>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionGroup', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<section class=\\\"tool-group\\\" id=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <h2>\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h2>\\n    <div class=\\\"panel clearfix\\\">\\n        <ul class=\\\"tool-list plain\\\"></ul>\\n    </div>\\n</section>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/tooltip', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\\n        \";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/interactionsToolbar',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/editor/customInteractionRegistry',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionButton',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/insertInteractionGroup',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/tooltip',\n    'ui/tooltipster'\n], function($, _, __, ciRegistry, insertInteractionTpl, insertSectionTpl, tooltipTpl, tooltip){\n\n    /**\n     * String to identify a custom interaction from the authoring data\n     * \n     * @type String\n     */\n    var _customInteractionTag = 'Custom Interactions';\n\n    /**\n     * Interaction types that require a sub group in the toolbar\n     * \n     * @type Object\n     */\n    var _subgroups = {\n        'inline-interactions' : 'Inline Interactions'\n    };\n\n    var _events = {\n        interactiontoolbarready : 'interactiontoolbarready.qti-widget'\n    };\n\n    function getGroupId(groupLabel){\n        return groupLabel.replace(/\\W+/g, '-').toLowerCase();\n    }\n\n    function getGroupSectionId(groupLabel){\n        return 'sidebar-left-section-' + getGroupId(groupLabel);\n    }\n\n    function addGroup($sidebar, groupLabel){\n\n        var groupId = getGroupSectionId(groupLabel);\n\n        var $section = $(insertSectionTpl({\n            id : groupId,\n            label : groupLabel\n        }));\n\n        $sidebar.append($section);\n\n        return $section;\n    }\n    \n    function create($sidebar, interactions){\n\n        _.each(interactions, function(interactionAuthoringData){\n            add($sidebar, interactionAuthoringData);\n        });\n\n        buildSubGroups($sidebar);\n\n        //set it ad \"ready\":\n        $sidebar.data('interaction-toolbar-ready', true);\n        $sidebar.trigger(_events.interactiontoolbarready);//interactiontoolbarready.qti-widget\n    }\n\n    function getGroup($sidebar, groupLabel){\n\n        var groupId = getGroupSectionId(groupLabel);\n        return $sidebar.find('#' + groupId);\n    }\n\n    function isReady($sidebar){\n\n        return !!$sidebar.data('interaction-toolbar-ready');\n    }\n\n    function remove($sidebar, interactionClass){\n        $sidebar.find('li[data-qti-class=\"' + interactionClass + '\"]:not(.dev)').remove();\n    }\n    \n    function exists($sidebar, interactionClass){\n        return !!$sidebar.find('li[data-qti-class=\"' + interactionClass + '\"]').length;\n    }\n    \n    function add($sidebar, interactionAuthoringData){\n        \n        if(exists($sidebar, interactionAuthoringData.qtiClass)){\n            throw 'the interaction is already in the sidebar';\n        }\n        \n        var groupLabel = interactionAuthoringData.tags[0] || '',\n            subGroupId = interactionAuthoringData.tags[1],\n            $group = getGroup($sidebar, groupLabel),\n            tplData = {\n                qtiClass : interactionAuthoringData.qtiClass,\n                disabled : !!interactionAuthoringData.disabled,\n                title : interactionAuthoringData.description,\n                iconFont : /^icon-/.test(interactionAuthoringData.icon),\n                icon : interactionAuthoringData.icon,\n                short : interactionAuthoringData.short,\n                dev : (_customInteractionTag === groupLabel) && ciRegistry.isDev(interactionAuthoringData.qtiClass.replace('customInteraction.', ''))\n            };\n\n        if(subGroupId && _subgroups[subGroupId]){\n            tplData.subGroup = subGroupId;\n        }\n\n        if(!$group.length){\n            //the group does not exist yet : create a <section> for the group\n            $group = addGroup($sidebar, groupLabel);\n        }\n\n        if(subGroupId && _subgroups[subGroupId]){\n            tplData.subGroup = subGroupId;\n        }\n\n        if(!$group.length){\n            //the group does not exist yet : create a <section> for the group\n            $group = addGroup($sidebar, groupLabel);\n        }\n        \n        var $interaction = $(insertInteractionTpl(tplData));\n        $group.find('.tool-list').append($interaction);\n        \n        return $interaction;\n    }\n\n    function buildSubGroups($sidebar){\n\n        $sidebar.find('[data-sub-group]').each(function(){\n\n            var $element = $(this),\n                $section = $element.parents('section'),\n                subGroup = $element.data('sub-group'),\n                $subGroupPanel,\n                $subGroupList,\n                $cover;\n\n            if(!subGroup){\n                return;\n            }\n\n            $subGroupPanel = $section.find('.sub-group.' + subGroup);\n            $subGroupList = $subGroupPanel.find('.tool-list');\n            if(!$subGroupPanel.length){\n                $subGroupPanel = $('<div>', {'class' : 'panel clearfix sub-group ' + subGroup});\n                $subGroupList = $('<ul>', {'class' : 'tool-list plain clearfix'});\n                $subGroupPanel.append($subGroupList);\n                $section.append($subGroupPanel);\n                $cover = $('<div>', {'class' : 'sub-group-cover blocking'});\n                $subGroupPanel.append($cover);\n                $subGroupPanel.data('cover', $cover);\n            }\n            $subGroupList.append($element);\n        });\n\n        addInlineInteractionTooltip();\n    }\n\n    /**\n     * add tooltip to explain special requirement and behaviours for inline interactions\n     * may need to generalize it in the future\n     */\n    function addInlineInteractionTooltip(){\n\n        var timer,\n            $inlineInteractionsPanel = $('#sidebar-left-section-inline-interactions .inline-interactions'),\n            $tooltip = $(tooltipTpl({\n                message : __('Inline interactions need to be inserted into a text block.')\n            }));\n\n        $inlineInteractionsPanel.append($tooltip);\n        tooltip($inlineInteractionsPanel);\n\n        $tooltip.css({\n            position : 'absolute',\n            zIndex : 11,\n            top : 0,\n            right : 10\n        });\n\n        $inlineInteractionsPanel.on('mouseenter', '.sub-group-cover', function(){\n\n            timer = setTimeout(function(){\n                $tooltip.find('[data-tooltip]').tooltipster('show');\n            }, 300);\n\n        }).on('mouseleave', '.sub-group-cover', function(){\n\n            $tooltip.find('[data-tooltip]').tooltipster('hide');\n            clearTimeout(timer);\n        });\n    }\n\n    return {\n        create : create,\n        add : add,\n        exists : exists,\n        addGroup : addGroup,\n        getGroupId : getGroupId,\n        getGroupSectionId : getGroupSectionId,\n        getGroup : getGroup,\n        isReady : isReady,\n        remove : remove,\n        getCustomInteractionTag : function(){\n            return _customInteractionTag;\n        }\n    };\n\n});\n","define('taoQtiItem/qtiCreator/editor/infoControlRegistry',[\n    'taoQtiItem/qtiCreator/editor/customElementRegistryFactory'\n], function(factory){\n    \n    return factory.create();\n});\n","define('taoQtiItem/controller/creator/main',[\n    'jquery',\n    'lodash',\n    'module',\n    'async',\n    'layout/loading-bar',\n    'layout/section',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/helper/panel',\n    'taoQtiItem/qtiCreator/helper/itemLoader',\n    'taoQtiItem/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/helper/commonRenderer', //for the preview\n    'taoQtiItem/qtiCreator/helper/qtiElements',\n    // css editor related\n    'taoQtiItem/qtiCreator/editor/editor',\n    'taoQtiItem/qtiCreator/editor/interactionsToolbar',\n    'taoQtiItem/qtiCreator/editor/customInteractionRegistry',\n    'taoQtiItem/qtiCreator/editor/infoControlRegistry'\n], function(\n    $,\n    _,\n    module,\n    async,\n    loadingBar,\n    section,\n    event,\n    panel,\n    loader,\n    creatorRenderer,\n    commonRenderer,\n    qtiElements,\n    editor,\n    interactionsToolbar,\n    ciRegistry,\n    icRegistry\n    ){\n\n    loadingBar.start();\n\n    var _initializeInteractionsToolbar = function($toolbar, interactionModels){\n\n        var toolbarInteractions = qtiElements.getAvailableAuthoringElements();\n\n        _.each(interactionModels, function(interactionModel){\n            var data = ciRegistry.getAuthoringData(interactionModel.getTypeIdentifier());\n            if(data.tags && data.tags[0] === interactionsToolbar.getCustomInteractionTag()){\n                toolbarInteractions[data.qtiClass] = data;\n            }else{\n                throw 'invalid authoring data for custom interaction';\n            }\n        });\n\n        //create toolbar:\n        interactionsToolbar.create($toolbar, toolbarInteractions);\n\n        //init accordions:\n        panel.initSidebarAccordion($toolbar);\n        panel.closeSections($toolbar.find('section'));\n        panel.openSections($toolbar.find('#sidebar-left-section-common-interactions'), false);\n\n        //init special subgroup\n        panel.toggleInlineInteractionGroup();\n\n    };\n\n    var _initializeHooks = function(uiHooks, configProperties){\n\n        require(_.values(uiHooks), function(){\n\n            _.each(arguments, function(hook){\n                hook.init(configProperties);\n            });\n        });\n    };\n\n    return {\n        /**\n         * \n         * @param {object} config (baseUrl, uri, lang)\n         */\n        start : function(config){\n\n            //first all, start loading bar\n            loadingBar.start();\n            //init config\n            config = config || module.config();\n            //reinitialize the renderer:\n            creatorRenderer.get(true, config);\n\n\n            var configProperties = config.properties;\n\n            //pass reference to useful dom element\n            var $doc = $(document),\n                $editorScope = $('#item-editor-scope'),\n                $itemContainer = $('#item-editor-scroll-inner'),\n                $propertySidebar = $('#item-editor-item-widget-bar');\n\n            configProperties.dom = {\n                getEditorScope : function(){\n                    return $editorScope;\n                },\n                getMenuLeft : function(){\n                    return $editorScope.find('.item-editor-menu.lft');\n                },\n                getMenuRight : function(){\n                    return $editorScope.find('.item-editor-menu.rgt');\n                },\n                getInteractionToolbar : function(){\n                    return $editorScope.find('#item-editor-interaction-bar');\n                },\n                getItemPanel : function(){\n                    return $itemContainer;\n                },\n                getItemPropertyPanel : function(){\n                    return $editorScope.find('#sidebar-right-item-properties');\n                },\n                getModalContainer : function(){\n                    return $editorScope.find('#modal-container');\n                }\n            };\n\n            //back button\n            $('#authoringBack').on('click', function(e){\n                e.preventDefault();\n\n                //Capitalized History means polyfilled by History.js\n                if(window.History){\n                    window.History.back();\n                }\n            });\n\n            //initialize hooks\n            _initializeHooks(config.uiHooks, configProperties);\n\n            async.parallel([\n                //register custom interacitons\n                function(callback){\n                    ciRegistry.register(config.interactions);\n                    ciRegistry.loadAll(function(hooks){\n                        callback(null, hooks);\n                    });\n                },\n                //register info controls\n                function(callback){\n                    icRegistry.register(config.infoControls);\n                    icRegistry.loadAll(function(hooks){\n                        callback(null, hooks);\n                    });\n                },\n                //load item\n                function(callback){\n                    loader.loadItem({uri : configProperties.uri}, function(item){\n\n                        //configure commonRenderer for the preview\n                        commonRenderer.setOption('baseUrl', configProperties.baseUrl);\n                        commonRenderer.setContext(configProperties.dom.getItemPanel());\n\n                        //set reference to item object\n                        $editorScope.data('item', item);\n\n                        //fires event itemloaded\n                        $doc.trigger('itemloaded.qticreator', [item]);\n\n                        //set useful data :\n                        item.data('uri', configProperties.uri);\n\n                        callback(null, item);\n\n                    });\n                }\n            ], function(err, res){\n\n                //get results from parallelized ajax calls:\n                var interactionHooks = res[0],\n                    infoControlHooks = res[1],\n                    item = res[2];\n\n                //init interaction sidebar\n                _initializeInteractionsToolbar(configProperties.dom.getInteractionToolbar(), interactionHooks);\n\n                //load creator renderer\n                creatorRenderer\n                    .get()\n                    .setOptions(configProperties)\n                    .load(function(){\n\n                        //set renderer\n                        item.setRenderer(this);\n\n                        //render item (body only) into the \"drop-area\"\n                        configProperties.dom.getItemPanel().append(item.render());\n\n                        //\"post-render it\" to initialize the widget\n                        var widget = item.postRender(_.clone(configProperties));\n\n                        editor.initGui(widget, configProperties);\n                        panel.initSidebarAccordion($propertySidebar);\n                        panel.initFormVisibilityListener();\n\n                        //hide loading bar when completed\n                        loadingBar.stop();\n\n                        //destroy by leaving the section\n                        section.on('hide', function(hiddenSection){\n                            if(hiddenSection.id === 'authoring'){\n\n                                //remove global events\n                                $(window).off('.qti-widget');\n                                $doc.off('.qti-widget').off('.qti-creator');\n                            }\n                        });\n\n                        //set reference to item widget object\n                        $editorScope.data('widget', item);\n\n                        //fires event itemloaded\n                        $doc.trigger('widgetloaded.qticreator', [widget]);\n\n                        //init event listeners:\n                        event.initElementToWidgetListeners();\n\n                    }, item.getUsedClasses());\n\n            });\n\n        }\n    };\n});\n\n","define('taoQtiItem/qtiCreator/editor/MathEditor',['lodash', 'jquery', 'mathJax'], function(_, $, MathJax){\n\n    var MathEditor = function MathEditor(config){\n\n        config = config || {};\n\n        this.mathML = config.mathML || '';\n        this.tex = config.tex || '';\n        this.display = config.display || 'inline';\n\n        //computed, system variables:\n        this.processing = false;\n        this.$target = config.target || $();\n\n        if(config.buffer && config.buffer instanceof $ && config.buffer.length){\n            this.$buffer = config.buffer;\n        }else{\n            throw 'missing required element in config \"buffer\"';\n        }\n    };\n\n    MathEditor.prototype.setMathML = function(mathMLstr){\n\n        this.mathML = _stripMathTags(mathMLstr);\n\n        return this;//for chaining purpose\n    };\n\n    MathEditor.prototype.setTex = function(texStr){\n\n        this.tex = texStr;\n\n        //need to run renderFromTex\n\n        return this;//for chaining purpose\n    };\n\n    var _processArguments = function(mathEditor, args){\n\n\n        var ret = {\n            target : null,\n            callback : null\n        };\n\n        _.each(args, function(arg){\n            if(_.isFunction(arg)){\n                ret.callback = arg;\n            }else if(arg instanceof $){\n                ret.target = arg;\n            }\n        });\n\n        if(!ret.target){\n            if(mathEditor.$target){\n                ret.target = mathEditor.$target;\n            }else{\n                throw 'no target defined for rendering';\n            }\n        }\n\n        return ret;\n    };\n\n    MathEditor.prototype.renderFromMathML = function(){\n\n        var args = _processArguments(this, arguments);\n\n        if(typeof(MathJax) !== 'undefined'){\n\n            if(this.processing){\n                return;\n            }\n            var jaxQueue = MathJax.Hub.queue;\n            var mathStr = _wrapMathTags(this.mathML, (this.display === 'block'));\n            this.$buffer.html(mathStr);\n\n            var _this = this;\n            jaxQueue.Push(\n                [\"Typeset\", MathJax.Hub, this.$buffer[0]],\n                function(){\n                    _this.processing = false;\n\n                    args.target.html(_this.$buffer.html());\n                    _this.$buffer.empty();\n                }\n            );\n\n            if(args.callback){\n                jaxQueue.Push(args.callback);\n            }\n        }\n\n    };\n\n    MathEditor.prototype.renderFromTex = function(){\n\n        var args = _processArguments(this, arguments);\n\n        if(typeof(MathJax) !== 'undefined'){\n\n            var _this = this;\n            var jaxQueue = MathJax.Hub.queue;\n            if(this.display === 'block'){\n                _this.$buffer.html('\\\\[\\\\displaystyle{' + _this.tex + '}\\\\]');\n            }else{\n                _this.$buffer.html('\\\\(\\\\displaystyle{' + _this.tex + '}\\\\)');\n            }\n\n            //render preview:\n            jaxQueue.Push(\n                //programmatically typeset the buffer\n                    [\"Typeset\", MathJax.Hub, _this.$buffer[0]],\n                    function(){\n\n                        //replace the target element\n                        args.target.html(_this.$buffer.html());\n\n                        //store mathjax \"tex\", for tex for later mathML conversion\n                        var texJax = _getJaxByElement(_this.$buffer);\n\n                        //empty buffer;\n                        _this.$buffer.empty();\n\n                        //sync MathML\n                        _this.texToMathML(texJax, function(mathML){\n                            _this.setMathML(_stripMathTags(mathML));\n                        });\n                    }\n                );\n\n                if(args.callback){\n                    jaxQueue.Push(args.callback);\n                }\n            }\n\n        };\n\n        var _stripMathTags = function(mathMLstr){\n\n            mathMLstr = mathMLstr.replace(/<(\\/)?math[^>]*>/g, '');\n            mathMLstr = mathMLstr.replace(/^\\s*[\\r\\n]/gm, '');//remove first blank line\n            mathMLstr = mathMLstr.replace(/\\s*[\\r\\n]$/gm, '');//last blank line\n\n            return mathMLstr;\n        };\n\n        var _getJaxByElement = function($element){\n\n            if($element instanceof $ && $element.length){\n                var $script = $element.find('script');\n                if($script.length && $script[0].MathJax && $script[0].MathJax.elementJax){\n                    return $script[0].MathJax.elementJax;\n                }\n            }\n        };\n\n        var _wrapMathTags = function(mathMLstr, displayBlock){\n\n            if(!mathMLstr.match(/<math[^>]*>/)){\n                var display = displayBlock ? ' display=\"block\"' : '';\n                mathMLstr = '<math' + display + '>' + mathMLstr;//always show preview in block mode\n            }\n            if(!mathMLstr.match(/<\\/math[^>]*>/)){\n                mathMLstr += '</math>';\n            }\n\n            return mathMLstr;\n        };\n\n        MathEditor.prototype.texToMathML = function(texJax, callback){\n\n            var _this = this;\n            var mathML = '';\n\n            try{\n                mathML = texJax.root.toMathML('');\n            }catch(err){\n                if(!err.restart){\n                    throw err;\n                }\n                return MathJax.Callback.After(function(){\n                    _this.texToMathML(texJax, callback);\n                }, err.restart);\n            }\n\n            MathJax.Callback(callback)(mathML);\n        };\n\n        return MathEditor;\n    });\n","define('taoQtiItem/qtiCreator/editor/ckEditor/dtdHandler',[\r\n    'lodash'\r\n], function (_) {\r\n    'use strict'\r\n\r\n    /**\r\n     * Singleton to edit the XHTML DTD and to retrieve element relationships.\r\n     * The DTD code itself is almost 1:1 copied from CKEDITOR\r\n     */\r\n    var dtdHandler = (function () {\r\n\r\n        var dtdMode = 'html',\r\n            dtds = {};\r\n\r\n\r\n        /**\r\n         * Set DTD mode (qti|html)\r\n         */\r\n        var setMode = function (mode) {\r\n            // for the oblivious ones such as myself:\r\n            if(mode.toLowerCase() === 'xhtml'){\r\n                mode = 'html';\r\n            }\r\n            if (!_.contains(['html', 'qti'], mode)) {\r\n                throw new Error('Unknown mode ' + mode)\r\n            }\r\n            dtdMode = mode;\r\n            return this;\r\n        };\r\n\r\n        /**\r\n         * Elements that are present in HTML 5 only\r\n         * @type {string[]}\r\n         */\r\n        var html5Only = [\r\n            'article', 'aside', 'bdi', 'command', 'datalist', 'details', 'dialog',\r\n            'figcaption', 'figure', 'footer', 'header', 'keygen', 'main', 'mark',\r\n            'meter', 'nav', 'output', 'progress', 'rp', 'rt', 'ruby', 'section',\r\n            'summary', 'time', 'wbr', 'hgroup'\r\n        ];\r\n\r\n\r\n        /**\r\n         * Check in which element this element can be contained\r\n         *\r\n         * @param child (string|DOM element|jQuery element)\r\n         * @returns {Array}\r\n         */\r\n        var getParentsOf = function (child) {\r\n            var parents = [],\r\n                element;\r\n\r\n            child = _normalizeElement(child);\r\n\r\n            for (element in dtds[dtdMode]) {\r\n                if (!dtds[dtdMode].hasOwnProperty(element)) {\r\n                    continue;\r\n                }\r\n                if (element.indexOf('$') === 0) {\r\n                    continue;\r\n                }\r\n                if (child in dtds[dtdMode][element]) {\r\n                    parents.push(element);\r\n                }\r\n            }\r\n            return parents;\r\n        };\r\n\r\n\r\n        /**\r\n         * Get all elements parent can contain\r\n         *\r\n         * @param parent (string|DOM element|jQuery element)\r\n         * @returns {*}\r\n         */\r\n        var getChildrenOf = function (parent) {\r\n\r\n            parent = _normalizeElement(parent);\r\n\r\n            if (parent in dtds[dtdMode]) {\r\n                return _.keys(dtds[dtdMode][parent]);\r\n            }\r\n\r\n            return [];\r\n        };\r\n\r\n\r\n        /**\r\n         * Finds whether a child can have a certain parent\r\n         *\r\n         * @param child (string|DOM element|jQuery element)\r\n         * @param of (string|DOM element|jQuery element)\r\n         * @returns {*}\r\n         */\r\n        var isChildOf = function (child, of) {\r\n            return _.contains(getChildrenOf(of), _normalizeElement(child));\r\n        };\r\n\r\n\r\n        /**\r\n         * Finds whether a parent can have a certain child\r\n         *\r\n         * @param parent (string|DOM element|jQuery element)\r\n         * @param of (string|DOM element|jQuery element)\r\n         * @returns {*}\r\n         */\r\n        var isParentOf = function (parent, of) {\r\n            return _.contains(getParentsOf(of), _normalizeElement(parent));\r\n        };\r\n\r\n\r\n        /**\r\n         * Retrieve the current DTD\r\n         *\r\n         * @returns {*}\r\n         */\r\n        var getDtd = function () {\r\n            return dtds[dtdMode];\r\n        };\r\n\r\n\r\n        /**\r\n         * Retrieve the current dtdMode (qti|html)\r\n         *\r\n         * @returns {string}\r\n         */\r\n        var getMode = function () {\r\n            return dtdMode;\r\n        };\r\n\r\n        /**\r\n         * Convert (node)element into string\r\n         *\r\n         * @param element (string|DOM element|jQuery element)\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        var _normalizeElement = function (element) {\r\n\r\n            // jQuery or DOM element\r\n            if (_.isObject(element) && !_.isArray(element)) {\r\n                // DOM element\r\n                if ('nodeName' in element) {\r\n                    return element.nodeName.toLowerCase();\r\n                }\r\n                // jQuery element\r\n                else if (0 in element && 'nodeName' in element[0]) {\r\n                    return element[0].nodeName.toLowerCase();\r\n                }\r\n            }\r\n            // node name\r\n            else if (_.isString(element)) {\r\n                return element.toLowerCase();\r\n            }\r\n            // invalid input\r\n            throw new Error('Unknown element ' + element);\r\n        };\r\n\r\n\r\n        /**\r\n         * This part is almost literally copied from CKEDITOR (apart from using lodash instaed of CKEDITOR tools)\r\n         *\r\n         * @license Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.\r\n         * For licensing, see LICENSE.md or http://ckeditor.com/license\r\n         */\r\n        dtds.html = (function () {\r\n            'use strict';\r\n\r\n            var X = _.extend,\r\n                Y = function (source, removed) {\r\n                    var substracted = _.cloneDeep(source);\r\n                    for (var i = 1; i < arguments.length; i++) {\r\n                        removed = arguments[i];\r\n                        for (var name in removed)\r\n                            delete substracted[name];\r\n                    }\r\n                    return substracted;\r\n                };\r\n\r\n            // Phrasing elements.\r\n            // P = { a: 1, em: 1, strong: 1, small: 1, abbr: 1, dfn: 1, i: 1, b: 1, s: 1,\r\n            //      u: 1, code: 1, 'var': 1, samp: 1, kbd: 1, sup: 1, sub: 1, q: 1, cite: 1,\r\n            //      span: 1, bdo: 1, bdi: 1, br: 1, wbr: 1, ins: 1, del: 1, img: 1, embed: 1,\r\n            //      object: 1, iframe: 1, map: 1, area: 1, script: 1, noscript: 1, ruby: 1,\r\n            //      video: 1, audio: 1, input: 1, textarea: 1, select: 1, button: 1, label: 1,\r\n            //      output: 1, keygen: 1, progress: 1, command: 1, canvas: 1, time: 1,\r\n            //      meter: 1, detalist: 1 },\r\n\r\n            // Flow elements.\r\n            // F = { a: 1, p: 1, hr: 1, pre: 1, ul: 1, ol: 1, dl: 1, div: 1, h1: 1, h2: 1,\r\n            //      h3: 1, h4: 1, h5: 1, h6: 1, hgroup: 1, address: 1, blockquote: 1, ins: 1,\r\n            //      del: 1, object: 1, map: 1, noscript: 1, section: 1, nav: 1, article: 1,\r\n            //      aside: 1, header: 1, footer: 1, video: 1, audio: 1, figure: 1, table: 1,\r\n            //      form: 1, fieldset: 1, menu: 1, canvas: 1, details:1 },\r\n\r\n            // Text can be everywhere.\r\n            // X( P, T );\r\n            // Flow elements set consists of phrasing elements set.\r\n            // X( F, P );\r\n\r\n            var P = {}, F = {},\r\n            // Intersection of flow elements set and phrasing elements set.\r\n                PF = {\r\n                    a: 1,\r\n                    abbr: 1,\r\n                    area: 1,\r\n                    audio: 1,\r\n                    b: 1,\r\n                    bdi: 1,\r\n                    bdo: 1,\r\n                    br: 1,\r\n                    button: 1,\r\n                    canvas: 1,\r\n                    cite: 1,\r\n                    code: 1,\r\n                    command: 1,\r\n                    datalist: 1,\r\n                    del: 1,\r\n                    dfn: 1,\r\n                    em: 1,\r\n                    embed: 1,\r\n                    i: 1,\r\n                    iframe: 1,\r\n                    img: 1,\r\n                    input: 1,\r\n                    ins: 1,\r\n                    kbd: 1,\r\n                    keygen: 1,\r\n                    label: 1,\r\n                    map: 1,\r\n                    mark: 1,\r\n                    meter: 1,\r\n                    noscript: 1,\r\n                    object: 1,\r\n                    output: 1,\r\n                    progress: 1,\r\n                    q: 1,\r\n                    ruby: 1,\r\n                    s: 1,\r\n                    samp: 1,\r\n                    script: 1,\r\n                    select: 1,\r\n                    small: 1,\r\n                    span: 1,\r\n                    strong: 1,\r\n                    sub: 1,\r\n                    sup: 1,\r\n                    textarea: 1,\r\n                    time: 1,\r\n                    u: 1,\r\n                    'var': 1,\r\n                    video: 1,\r\n                    wbr: 1\r\n                },\r\n            // F - PF (Flow Only).\r\n                FO = {\r\n                    address: 1,\r\n                    article: 1,\r\n                    aside: 1,\r\n                    blockquote: 1,\r\n                    details: 1,\r\n                    div: 1,\r\n                    dl: 1,\r\n                    fieldset: 1,\r\n                    figure: 1,\r\n                    footer: 1,\r\n                    form: 1,\r\n                    h1: 1,\r\n                    h2: 1,\r\n                    h3: 1,\r\n                    h4: 1,\r\n                    h5: 1,\r\n                    h6: 1,\r\n                    header: 1,\r\n                    hgroup: 1,\r\n                    hr: 1,\r\n                    menu: 1,\r\n                    nav: 1,\r\n                    ol: 1,\r\n                    p: 1,\r\n                    pre: 1,\r\n                    section: 1,\r\n                    table: 1,\r\n                    ul: 1\r\n                },\r\n            // Metadata elements.\r\n                M = {\r\n                    command: 1,\r\n                    link: 1,\r\n                    meta: 1,\r\n                    noscript: 1,\r\n                    script: 1,\r\n                    style: 1\r\n                },\r\n            // Empty.\r\n                E = {},\r\n            // Text.\r\n                T = {\r\n                    '#': 1\r\n                },\r\n\r\n            // Deprecated phrasing elements.\r\n                DP = {\r\n                    acronym: 1,\r\n                    applet: 1,\r\n                    basefont: 1,\r\n                    big: 1,\r\n                    font: 1,\r\n                    isindex: 1,\r\n                    strike: 1,\r\n                    style: 1,\r\n                    tt: 1\r\n                }, // TODO remove \"style\".\r\n            // Deprecated flow only elements.\r\n                DFO = {\r\n                    center: 1,\r\n                    dir: 1,\r\n                    noframes: 1\r\n                };\r\n\r\n            // Phrasing elements := PF + T + DP\r\n            X(P, PF, T, DP);\r\n            // Flow elements := FO + P + DFO\r\n            X(F, FO, P, DFO);\r\n\r\n            var dtd = {\r\n                a: Y(P, {\r\n                    a: 1,\r\n                    button: 1\r\n                }), // Treat as normal inline element (not a transparent one).\r\n                abbr: P,\r\n                address: F,\r\n                area: E,\r\n                article: X({\r\n                    style: 1\r\n                }, F),\r\n                aside: X({\r\n                    style: 1\r\n                }, F),\r\n                audio: X({\r\n                    source: 1,\r\n                    track: 1\r\n                }, F),\r\n                b: P,\r\n                base: E,\r\n                bdi: P,\r\n                bdo: P,\r\n                blockquote: F,\r\n                body: F,\r\n                br: E,\r\n                button: Y(P, {\r\n                    a: 1,\r\n                    button: 1\r\n                }),\r\n                canvas: P, // Treat as normal inline element (not a transparent one).\r\n                caption: F,\r\n                cite: P,\r\n                code: P,\r\n                col: E,\r\n                colgroup: {\r\n                    col: 1\r\n                },\r\n                command: E,\r\n                datalist: X({\r\n                    option: 1\r\n                }, P),\r\n                dd: F,\r\n                del: P, // Treat as normal inline element (not a transparent one).\r\n                details: X({\r\n                    summary: 1\r\n                }, F),\r\n                dfn: P,\r\n                div: X({\r\n                    style: 1\r\n                }, F),\r\n                dl: {\r\n                    dt: 1,\r\n                    dd: 1\r\n                },\r\n                dt: F,\r\n                em: P,\r\n                embed: E,\r\n                fieldset: X({\r\n                    legend: 1\r\n                }, F),\r\n                figcaption: F,\r\n                figure: X({\r\n                    figcaption: 1\r\n                }, F),\r\n                footer: F,\r\n                form: F,\r\n                h1: P,\r\n                h2: P,\r\n                h3: P,\r\n                h4: P,\r\n                h5: P,\r\n                h6: P,\r\n                head: X({\r\n                    title: 1,\r\n                    base: 1\r\n                }, M),\r\n                header: F,\r\n                hgroup: {\r\n                    h1: 1,\r\n                    h2: 1,\r\n                    h3: 1,\r\n                    h4: 1,\r\n                    h5: 1,\r\n                    h6: 1\r\n                },\r\n                hr: E,\r\n                html: X({\r\n                    head: 1,\r\n                    body: 1\r\n                }, F, M), // Head and body are optional...\r\n                i: P,\r\n                iframe: T,\r\n                img: E,\r\n                input: E,\r\n                ins: P, // Treat as normal inline element (not a transparent one).\r\n                kbd: P,\r\n                keygen: E,\r\n                label: P,\r\n                legend: P,\r\n                li: F,\r\n                link: E,\r\n                map: F,\r\n                mark: P, // Treat as normal inline element (not a transparent one).\r\n                menu: X({\r\n                    li: 1\r\n                }, F),\r\n                meta: E,\r\n                meter: Y(P, {\r\n                    meter: 1\r\n                }),\r\n                nav: F,\r\n                noscript: X({\r\n                    link: 1,\r\n                    meta: 1,\r\n                    style: 1\r\n                }, P), // Treat as normal inline element (not a transparent one).\r\n                object: X({\r\n                    param: 1\r\n                }, P), // Treat as normal inline element (not a transparent one).\r\n                ol: {\r\n                    li: 1\r\n                },\r\n                optgroup: {\r\n                    option: 1\r\n                },\r\n                option: T,\r\n                output: P,\r\n                p: P,\r\n                param: E,\r\n                pre: P,\r\n                progress: Y(P, {\r\n                    progress: 1\r\n                }),\r\n                q: P,\r\n                rp: P,\r\n                rt: P,\r\n                ruby: X({\r\n                    rp: 1,\r\n                    rt: 1\r\n                }, P),\r\n                s: P,\r\n                samp: P,\r\n                script: T,\r\n                section: X({\r\n                    style: 1\r\n                }, F),\r\n                select: {\r\n                    optgroup: 1,\r\n                    option: 1\r\n                },\r\n                small: P,\r\n                source: E,\r\n                span: P,\r\n                strong: P,\r\n                style: T,\r\n                sub: P,\r\n                summary: P,\r\n                sup: P,\r\n                table: {\r\n                    caption: 1,\r\n                    colgroup: 1,\r\n                    thead: 1,\r\n                    tfoot: 1,\r\n                    tbody: 1,\r\n                    tr: 1\r\n                },\r\n                tbody: {\r\n                    tr: 1\r\n                },\r\n                td: F,\r\n                textarea: T,\r\n                tfoot: {\r\n                    tr: 1\r\n                },\r\n                th: F,\r\n                thead: {\r\n                    tr: 1\r\n                },\r\n                time: Y(P, {\r\n                    time: 1\r\n                }),\r\n                title: T,\r\n                tr: {\r\n                    th: 1,\r\n                    td: 1\r\n                },\r\n                track: E,\r\n                u: P,\r\n                ul: {\r\n                    li: 1\r\n                },\r\n                'var': P,\r\n                video: X({\r\n                    source: 1,\r\n                    track: 1\r\n                }, F),\r\n                wbr: E,\r\n\r\n                // Deprecated tags.\r\n                acronym: P,\r\n                applet: X({\r\n                    param: 1\r\n                }, F),\r\n                basefont: E,\r\n                big: P,\r\n                center: F,\r\n                dialog: E,\r\n                dir: {\r\n                    li: 1\r\n                },\r\n                font: P,\r\n                isindex: E,\r\n                noframes: F,\r\n                strike: P,\r\n                tt: P\r\n            };\r\n\r\n            X(dtd, {\r\n                /**\r\n                 * List of block elements, like `<p>` or `<div>`.\r\n                 */\r\n                $block: X({\r\n                    audio: 1,\r\n                    dd: 1,\r\n                    dt: 1,\r\n                    figcaption: 1,\r\n                    li: 1,\r\n                    video: 1\r\n                }, FO, DFO),\r\n\r\n                /**\r\n                 * List of elements that contain other blocks, in which block-level operations should be limited,\r\n                 * this property is not intended to be checked directly, use {@link CKEDITOR.dom.elementPath#blockLimit} instead.\r\n                 *\r\n                 * Some examples of editor behaviors that are impacted by block limits:\r\n                 *\r\n                 * * Enter key never split a block-limit element;\r\n                 * * Style application is constraint by the block limit of the current selection.\r\n                 * * Pasted html will be inserted into the block limit of the current selection.\r\n                 *\r\n                 * **Note:** As an exception `<li>` is not considered as a block limit, as it's generally used as a text block.\r\n                 */\r\n                $blockLimit: {\r\n                    article: 1,\r\n                    aside: 1,\r\n                    audio: 1,\r\n                    body: 1,\r\n                    caption: 1,\r\n                    details: 1,\r\n                    dir: 1,\r\n                    div: 1,\r\n                    dl: 1,\r\n                    fieldset: 1,\r\n                    figcaption: 1,\r\n                    figure: 1,\r\n                    footer: 1,\r\n                    form: 1,\r\n                    header: 1,\r\n                    hgroup: 1,\r\n                    menu: 1,\r\n                    nav: 1,\r\n                    ol: 1,\r\n                    section: 1,\r\n                    table: 1,\r\n                    td: 1,\r\n                    th: 1,\r\n                    tr: 1,\r\n                    ul: 1,\r\n                    video: 1\r\n                },\r\n\r\n                /**\r\n                 * List of elements that contain character data.\r\n                 */\r\n                $cdata: {\r\n                    script: 1,\r\n                    style: 1\r\n                },\r\n\r\n                /**\r\n                 * List of elements that are accepted as inline editing hosts.\r\n                 */\r\n                $editable: {\r\n                    address: 1,\r\n                    article: 1,\r\n                    aside: 1,\r\n                    blockquote: 1,\r\n                    body: 1,\r\n                    details: 1,\r\n                    div: 1,\r\n                    fieldset: 1,\r\n                    figcaption: 1,\r\n                    footer: 1,\r\n                    form: 1,\r\n                    h1: 1,\r\n                    h2: 1,\r\n                    h3: 1,\r\n                    h4: 1,\r\n                    h5: 1,\r\n                    h6: 1,\r\n                    header: 1,\r\n                    hgroup: 1,\r\n                    nav: 1,\r\n                    p: 1,\r\n                    pre: 1,\r\n                    section: 1\r\n                },\r\n\r\n                /**\r\n                 * List of empty (self-closing) elements, like `<br>` or `<img>`.\r\n                 */\r\n                $empty: {\r\n                    area: 1,\r\n                    base: 1,\r\n                    basefont: 1,\r\n                    br: 1,\r\n                    col: 1,\r\n                    command: 1,\r\n                    dialog: 1,\r\n                    embed: 1,\r\n                    hr: 1,\r\n                    img: 1,\r\n                    input: 1,\r\n                    isindex: 1,\r\n                    keygen: 1,\r\n                    link: 1,\r\n                    meta: 1,\r\n                    param: 1,\r\n                    source: 1,\r\n                    track: 1,\r\n                    wbr: 1\r\n                },\r\n\r\n                /**\r\n                 * List of inline (`<span>` like) elements.\r\n                 */\r\n                $inline: P,\r\n\r\n                /**\r\n                 * List of list root elements.\r\n                 */\r\n                $list: {\r\n                    dl: 1,\r\n                    ol: 1,\r\n                    ul: 1\r\n                },\r\n\r\n                /**\r\n                 * List of list item elements, like `<li>` or `<dd>`.\r\n                 */\r\n                $listItem: {\r\n                    dd: 1,\r\n                    dt: 1,\r\n                    li: 1\r\n                },\r\n\r\n                /**\r\n                 * List of elements which may live outside body.\r\n                 */\r\n                $nonBodyContent: X({\r\n                    body: 1,\r\n                    head: 1,\r\n                    html: 1\r\n                }, dtd.head),\r\n\r\n                /**\r\n                 * Elements that accept text nodes, but are not possible to edit into the browser.\r\n                 */\r\n                $nonEditable: {\r\n                    applet: 1,\r\n                    audio: 1,\r\n                    button: 1,\r\n                    embed: 1,\r\n                    iframe: 1,\r\n                    map: 1,\r\n                    object: 1,\r\n                    option: 1,\r\n                    param: 1,\r\n                    script: 1,\r\n                    textarea: 1,\r\n                    video: 1\r\n                },\r\n\r\n                /**\r\n                 * Elements that are considered objects, therefore selected as a whole in the editor.\r\n                 */\r\n                $object: {\r\n                    applet: 1,\r\n                    audio: 1,\r\n                    button: 1,\r\n                    hr: 1,\r\n                    iframe: 1,\r\n                    img: 1,\r\n                    input: 1,\r\n                    object: 1,\r\n                    select: 1,\r\n                    table: 1,\r\n                    textarea: 1,\r\n                    video: 1\r\n                },\r\n\r\n                /**\r\n                 * List of elements that can be ignored if empty, like `<b>` or `<span>`.\r\n                 */\r\n                $removeEmpty: {\r\n                    abbr: 1,\r\n                    acronym: 1,\r\n                    b: 1,\r\n                    bdi: 1,\r\n                    bdo: 1,\r\n                    big: 1,\r\n                    cite: 1,\r\n                    code: 1,\r\n                    del: 1,\r\n                    dfn: 1,\r\n                    em: 1,\r\n                    font: 1,\r\n                    i: 1,\r\n                    ins: 1,\r\n                    label: 1,\r\n                    kbd: 1,\r\n                    mark: 1,\r\n                    meter: 1,\r\n                    output: 1,\r\n                    q: 1,\r\n                    ruby: 1,\r\n                    s: 1,\r\n                    samp: 1,\r\n                    small: 1,\r\n                    span: 1,\r\n                    strike: 1,\r\n                    strong: 1,\r\n                    sub: 1,\r\n                    sup: 1,\r\n                    time: 1,\r\n                    tt: 1,\r\n                    u: 1,\r\n                    'var': 1\r\n                },\r\n\r\n                /**\r\n                 * List of elements that have tabindex set to zero by default.\r\n                 */\r\n                $tabIndex: {\r\n                    a: 1,\r\n                    area: 1,\r\n                    button: 1,\r\n                    input: 1,\r\n                    object: 1,\r\n                    select: 1,\r\n                    textarea: 1\r\n                },\r\n\r\n                /**\r\n                 * List of elements used inside the `<table>` element, like `<tbody>` or `<td>`.\r\n                 */\r\n                $tableContent: {\r\n                    caption: 1,\r\n                    col: 1,\r\n                    colgroup: 1,\r\n                    tbody: 1,\r\n                    td: 1,\r\n                    tfoot: 1,\r\n                    th: 1,\r\n                    thead: 1,\r\n                    tr: 1\r\n                },\r\n\r\n                /**\r\n                 * List of \"transparent\" elements. See [W3C's definition of \"transparent\" element](http://dev.w3.org/html5/markup/terminology.html#transparent).\r\n                 */\r\n                $transparent: {\r\n                    a: 1,\r\n                    audio: 1,\r\n                    canvas: 1,\r\n                    del: 1,\r\n                    ins: 1,\r\n                    map: 1,\r\n                    noscript: 1,\r\n                    object: 1,\r\n                    video: 1\r\n                },\r\n\r\n                /**\r\n                 * List of elements that are not to exist standalone that must live under its parent element.\r\n                 */\r\n                $intermediate: {\r\n                    caption: 1,\r\n                    colgroup: 1,\r\n                    dd: 1,\r\n                    dt: 1,\r\n                    figcaption: 1,\r\n                    legend: 1,\r\n                    li: 1,\r\n                    optgroup: 1,\r\n                    option: 1,\r\n                    rp: 1,\r\n                    rt: 1,\r\n                    summary: 1,\r\n                    tbody: 1,\r\n                    td: 1,\r\n                    tfoot: 1,\r\n                    th: 1,\r\n                    thead: 1,\r\n                    tr: 1\r\n                }\r\n            });\r\n\r\n            return dtd;\r\n        })();\r\n\r\n\r\n        /**\r\n         * Applies QTI rules to a copy of the xhtmlDtd\r\n         *\r\n         * @return dtd {object} the modified dtd\r\n         */\r\n        dtds.qti = (function () {\r\n            var element,\r\n                listCnt,\r\n                child,\r\n                actions = ['remove', 'add'],\r\n                actCnt,\r\n                actLnt = actions.length,\r\n                action,\r\n                overrides = {\r\n                    pre: {\r\n                        add: [],\r\n                        remove: ['img', 'object', 'big', 'small', 'sub', 'sup']\r\n                    },\r\n                    table: {\r\n                        remove: ['col']\r\n                    }\r\n                },\r\n                qtiDtd = _.cloneDeep(dtds.html),\r\n                tmp,\r\n                h5Len = html5Only.length,\r\n                intersection;\r\n\r\n            // remove html5-only keys\r\n            while (h5Len--) {\r\n                delete(qtiDtd[html5Only[h5Len]]);\r\n            }\r\n\r\n            // find html5-only elements in children and add them to overrides\r\n            for (element in qtiDtd) {\r\n                if (!qtiDtd.hasOwnProperty(element)) {\r\n                    continue;\r\n                }\r\n                intersection = _.intersection(_.keys(qtiDtd[element]), html5Only);\r\n                if (!intersection.length) {\r\n                    continue;\r\n                }\r\n                if (!overrides[element]) {\r\n                    overrides[element] = {\r\n                        remove: []\r\n                    };\r\n                }\r\n                overrides[element].remove = overrides[element].remove.concat(intersection);\r\n            }\r\n\r\n            // execute overrides\r\n            for (element in overrides) {\r\n                if (!overrides.hasOwnProperty(element)) {\r\n                    continue;\r\n                }\r\n                // disallow adding keys to the dtd ckeditor cannot handle\r\n                if (!qtiDtd.hasOwnProperty(element)) {\r\n                    continue;\r\n                }\r\n\r\n                // note: removing and adding is on purpose done in two steps\r\n                for (actCnt = 0; actCnt < actLnt; actCnt++) {\r\n                    action = actions[actCnt];\r\n                    if (!(action in overrides[element])) {\r\n                        continue;\r\n                    }\r\n                    listCnt = overrides[element][action].length;\r\n\r\n\r\n                    // allow 'all' as a shortcut for 'remove all children'\r\n                    if (action === 'remove' && overrides[element][action] === 'all') {\r\n                        qtiDtd[element] = {};\r\n                        continue;\r\n                    }\r\n\r\n\r\n                    // doggy style loop over children to add\r\n                    while (listCnt--) {\r\n                        child = overrides[element][action][listCnt];\r\n                        // there was some weird behaviour with references\r\n                        // deleting from pre would also delete from p\r\n                        // going over a tmp var solves this, though I have no idea why\r\n                        tmp = _.cloneDeep(qtiDtd[element]);\r\n                        if (action === 'remove') {\r\n                            delete(tmp[child]);\r\n                            qtiDtd[element] = tmp;\r\n                        }\r\n                        // add child element to element as long as it's not entirely unknown to ckeditor\r\n                        else if (action === 'add' && typeof qtiDtd[child] !== 'undefined') {\r\n                            tmp[child] = 1;\r\n                            qtiDtd[element] = tmp[child];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return qtiDtd;\r\n        }());\r\n\r\n        return {\r\n            getDtd: getDtd,\r\n            getChildrenOf: getChildrenOf,\r\n            getParentsOf: getParentsOf,\r\n            isChildOf: isChildOf,\r\n            isParentOf: isParentOf,\r\n            getMode: getMode,\r\n            setMode: setMode\r\n        }\r\n    }());\r\n\r\n    return dtdHandler;\r\n});\r\n\n","define('taoQtiItem/qtiCreator/editor/ckEditor/ckConfigurator',[\n    'jquery',\n    'lodash',\n    'ckeditor',\n    'taoQtiItem/qtiCreator/editor/ckEditor/dtdHandler',\n    'mathJax'\n], function($, _, ckeditor, dtdHandler, mathJax) {\n    'use strict';\n    /**\n     * Cache original config\n     */\n    var originalConfig = _.cloneDeep(CKEDITOR.config);\n\n    var ckConfigurator = (function(){\n\n        // This is different from CKEDITOR.config.extraPlugins since it also allows to position the button\n        // Valid positioning keys are insertAfter | insertBefore | replace followed by the button name, e.g. 'Anchor'\n        // separator bool, defaults to false\n        // don't get confused by the naming - TaoMediaManager is the button name for the plugin taomediamanager\n        var positionedPlugins = {\n            TaoMediaManager : {\n                insertAfter : 'SpecialChar'\n            }\n        };\n\n        var qtiPositionedPlugins = {\n//            TaoQtiMedia : {insertAfter : 'SpecialChar'},\n            TaoQtiImage : {insertAfter : 'SpecialChar'}\n        };\n\n        if(mathJax){\n            qtiPositionedPlugins.TaoQtiMaths = {insertAfter : 'SpecialChar'}\n        }\n\n        /**\n         * Toolbar presets that you normally never would need to change, they can however be overridden with options.toolbar.\n         * The argument 'toolbarType' determines which toolbar to use\n         */\n        var toolbarPresets = {\n            inline : [{\n                    name : 'basicstyles',\n                    items : ['Bold', 'Italic', 'Subscript', 'Superscript']\n                }, {\n                    name : 'insert',\n                    items : ['SpecialChar']\n                }, {\n                    name : 'links',\n                    items : ['Link']\n                }],\n            flow : [{\n                    name : 'basicstyles',\n                    items : ['Bold', 'Italic', 'Subscript', 'Superscript']\n                }, {\n                    name : 'insert',\n                    items : ['SpecialChar']\n                }, {\n                    name : 'links',\n                    items : ['Link']\n                }],\n            block : [{\n                    name : 'basicstyles',\n                    items : ['Bold', 'Italic', 'Subscript', 'Superscript']\n                }, {\n                    name : 'insert',\n                    items : ['Image', 'Table', 'SpecialChar']\n                },\n                {\n                    name : 'links',\n                    items : ['Link']\n                },\n                '/',\n                {\n                    name : 'styles',\n                    items : ['Format']\n                }, {\n                    name : 'paragraph',\n                    items : ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock']\n                }],\n            extendedText : [{\n                    name : 'basicstyles',\n                    items : ['Bold', 'Italic', 'Underline']\n                },{\n                    name : 'paragraph',\n                    items : ['NumberedList', 'BulletedList']\n                },{\n                    name : 'clipboard',\n                    items : ['Cut', 'Copy', 'Paste']\n                },{\n                    name : 'history',\n                    items : ['Undo', 'Redo']\n                }]\n        };\n\n        /**\n         * defaults for editor configuration\n         */\n        var ckConfig = {\n            disableAutoInline : true,\n            entities : false,\n            entities_processNumerical : true,\n            autoParagraph : false,\n            extraPlugins : 'confighelper',\n            floatSpaceDockedOffsetY : 0,\n            forcePasteAsPlainText : true,\n            skin : 'tao',\n            language : 'en',\n            removePlugins : '',\n            linkShowAdvancedTab : false,\n            justifyClasses : ['txt-lft', 'txt-ctr', 'txt-rgt', 'txt-jty'],\n            linkShowTargetTab : false,\n            specialChars : ['!', '&quot;', '#', '$', '%', '&amp;', \"'\", '(', ')', '*', '+', '-', '.', '/', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', ':', ';', ['&lt;', 'Less than'], ['&le;', 'Less than or equal to'], '&asymp;', '=', '&ne;', ['&ge;', 'Greater than or equal to'], ['&gt;', 'Greater than'], '?', '@', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '[', ']', '^', '_', '`', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '{', '|', '}', '~', \"&euro;\", \"&lsquo;\", \"&rsquo;\", \"&ldquo;\", \"&rdquo;\", \"&ndash;\", \"&mdash;\", \"&iexcl;\", \"&cent;\", \"&pound;\", \"&curren;\", \"&yen;\", \"&brvbar;\", \"&sect;\", \"&uml;\", \"&copy;\", \"&ordf;\", \"&laquo;\", \"&not;\", \"&reg;\", \"&macr;\", \"&deg;\", \"&sup2;\", \"&sup3;\", \"&acute;\", \"&micro;\", \"&para;\", \"&middot;\", \"&cedil;\", \"&sup1;\", \"&ordm;\", \"&raquo;\", \"&frac14;\", \"&frac12;\", \"&frac34;\", \"&iquest;\", \"&Agrave;\", \"&Aacute;\", \"&Acirc;\", \"&Atilde;\", \"&Auml;\", \"&Aring;\", \"&AElig;\", \"&Ccedil;\", \"&Egrave;\", \"&Eacute;\", \"&Ecirc;\", \"&Euml;\", \"&Igrave;\", \"&Iacute;\", \"&Icirc;\", \"&Iuml;\", \"&ETH;\", \"&Ntilde;\", \"&Ograve;\", \"&Oacute;\", \"&Ocirc;\", \"&Otilde;\", \"&Ouml;\", \"&times;\", \"&Oslash;\", \"&Ugrave;\", \"&Uacute;\", \"&Ucirc;\", \"&Uuml;\", \"&Yacute;\", \"&THORN;\", \"&szlig;\", \"&agrave;\", \"&aacute;\", \"&acirc;\", \"&atilde;\", \"&auml;\", \"&aring;\", \"&aelig;\", \"&ccedil;\", \"&egrave;\", \"&eacute;\", \"&ecirc;\", \"&euml;\", \"&igrave;\", \"&iacute;\", \"&icirc;\", \"&iuml;\", \"&eth;\", \"&ntilde;\", \"&ograve;\", \"&oacute;\", \"&ocirc;\", \"&otilde;\", \"&ouml;\", \"&divide;\", \"&oslash;\", \"&ugrave;\", \"&uacute;\", \"&ucirc;\", \"&uuml;\", \"&yacute;\", \"&thorn;\", \"&yuml;\", \"&OElig;\", \"&oelig;\", \"&#372;\", \"&#374\", \"&#373\", \"&#375;\", \"&sbquo;\", \"&#8219;\", \"&bdquo;\", \"&hellip;\", \"&trade;\", \"&#9658;\", \"&bull;\", \"&rarr;\", \"&rArr;\", \"&hArr;\", \"&diams;\", \"&asymp;\"]\n        };\n\n        /**\n         * Insert positioned plugins at position specified in options.positionedPlugins\n         *\n         * @param ckConfig\n         * @param positionedPlugins\n         */\n        var _updatePlugins = function(ckConfig, positionedPlugins){\n            var itCnt,\n                tbCnt = ckConfig.toolbar.length,\n                itLen,\n                method,\n                plugin,\n                index,\n                separator,\n                idxItem,\n                numToReplace,\n                stringVal,\n                stringVals = {},\n                i;\n\n            // add positioned plugins to extraPlugins and let CKEDITOR take care of their registration\n            ckConfig.extraPlugins = (function(positionedPluginArr, extraPlugins){\n                var i = positionedPluginArr.length,\n                    extraPluginArr = extraPlugins.split(',');\n\n                while(i--){\n                    positionedPluginArr[i] = positionedPluginArr[i].toLowerCase();\n                }\n\n                extraPluginArr = _.compact(_.union(extraPluginArr, positionedPluginArr));\n                return extraPluginArr.join(',');\n\n            }(_.keys(positionedPlugins), ckConfig.extraPlugins));\n\n            // capture line breaks (/) and such\n            // and turn them into a objects temporarily\n            for(i = 0; i < tbCnt; i++){\n                if(_.isString(ckConfig.toolbar[i])){\n                    stringVals[i] = ckConfig.toolbar[i];\n                    ckConfig.toolbar[i] = {\n                        items : []\n                    };\n                }\n            }\n\n            // add positioned plugins to toolbar\n            for(plugin in positionedPlugins){\n\n                method = (function(pluginProps){\n                    var i = pluginProps.length;\n                    while(i--){\n                        if(pluginProps[i].indexOf('insert') === 0 || pluginProps[i] === 'replace'){\n                            return pluginProps[i];\n                        }\n                    }\n\n                    throw 'Missing key insertBefore | insertAfter | replace in positionedPlugins';\n\n                }(_.keys(positionedPlugins[plugin])));\n\n\n                // the item to insert before | after\n                idxItem = positionedPlugins[plugin][method].toLowerCase();\n                separator = positionedPlugins[plugin].separator || false;\n                index = -1;\n\n                // each button row\n                while(tbCnt--){\n                    itLen = ckConfig.toolbar[tbCnt].items.length;\n\n                    // each item in row\n                    for(itCnt = 0; itCnt < itLen; itCnt++){\n                        if(ckConfig.toolbar[tbCnt].items[itCnt].toLowerCase() === idxItem){\n                            index = itCnt;\n                            break;\n                        }\n                    }\n                    //continue\n                    if(index > -1){\n                        // ~~ converts bool to number\n                        numToReplace = ~~(method === 'replace');\n                        if(method === 'insertAfter'){\n                            index++;\n                        }\n                        if(separator){\n                            ckConfig.toolbar[tbCnt].items.splice(index, numToReplace, '-');\n                            index++;\n                        }\n                        ckConfig.toolbar[tbCnt].items.splice(index, numToReplace, plugin);\n                        break;\n                    }\n                }\n                // reset tbCnt\n                tbCnt = ckConfig.toolbar.length;\n            }\n\n\n            // re-add toolbar line breaks\n            for(stringVal in stringVals){\n                ckConfig.toolbar[stringVal] = stringVals[stringVal];\n            }\n\n        };\n\n\n        /**\n         * Generate a configuration object for CKEDITOR\n         *\n         * Options not covered in http://docs.ckeditor.com/#!/api/CKEDITOR.config:\n         * options.dtdOverrides         -> @see dtdOverrides which pre-defines them\n         * options.positionedPlugins    -> @see ckConfig.positionedPlugins\n         *\n         * @param editor instance of ckeditor\n         * @param toolbarType block | inline | flow | qtiBlock | qtiInline | qtiFlow | reset to get back to normal\n         * @param options is based on the CKEDITOR config object with some additional sugar\n         *        Note that it's here you need to add parameters for the resource manager\n         * @see http://docs.ckeditor.com/#!/api/CKEDITOR.config\n         */\n        var getConfig = function(editor, toolbarType, options){\n            if(toolbarType === 'reset'){\n                return originalConfig;\n            }\n\n            options = options || {};\n\n            options.resourcemgr = options.resourcemgr || {};\n\n            var toolbar,\n                toolbars = _.clone(toolbarPresets, true),\n                config,\n                dtdMode = 'html';\n\n            // modify DTD to either comply with QTI or XHTML\n            if(toolbarType.indexOf('qti') === 0){\n                toolbarType = toolbarType.slice(3).toLowerCase();\n                ckConfig.allowedContent = true;\n                ckConfig.autoParagraph = false;\n                dtdMode = 'qti';\n            }\n\n            // if there is a toolbar in the options add it to the set\n            if(options.toolbar){\n                toolbars[toolbarType] = _.clone(options.toolbar);\n                delete(options.toolbar);\n            }\n\n            // add toolbars to config\n            for(toolbar in toolbars){\n                if(toolbars.hasOwnProperty(toolbar)){\n                    ckConfig['toolbar_' + toolbar] = toolbars[toolbar];\n                }\n            }\n\n            // add the toolbar\n            if(typeof toolbars[toolbarType] !== 'undefined'){\n                ckConfig.toolbar = toolbars[toolbarType];\n            }\n\n            // modify plugins - this will change the toolbar too\n            // this would add the qti plugins qtiPositionedPlugins\n            if(typeof options.positionedPlugins !== 'undefined'){\n                options.positionedPlugins = {};\n            }\n\n            // set options.positionedPlugins to false to prevent the class from using them at all\n            if(false !== options.positionedPlugins){\n                if(dtdMode === 'qti'){\n                    positionedPlugins = _.assign(qtiPositionedPlugins, _.clone(options.positionedPlugins));\n                }\n                // this would add positionedPlugins (e.g. the media manager)\n                else{\n                    positionedPlugins = _.assign(positionedPlugins, _.clone(options.positionedPlugins));\n                }\n                delete(options.positionedPlugins);\n                _updatePlugins(ckConfig, positionedPlugins);\n            }\n\n            config = _.assign({}, _.cloneDeep(originalConfig), ckConfig, options);\n\n            // debugger: has this config been used?\n            //config.aaaConfigurationHasBeenLoadedFromConfigurator = true;\n\n            // toggle global DTD\n            // I know that this is rather ugly\n            editor.on('focus', function(e){\n                dtdHandler.setMode(dtdMode);\n                CKEDITOR.dtd = dtdHandler.getDtd();\n                // should be 1 on html, undefined on qti\n                // console.log(CKEDITOR.dtd.pre.img)\n            });\n\n            // remove title 'Rich Text Editor, instance n' that CKE sets by default\n            // ref: http://tinyurl.com/keedruc\n            editor.on('instanceReady', function(e){\n                $(e.editor.element.$).removeAttr('title');\n            });\n\n            // This fixes bug #2855. Unfortunately this can be done on the global object only, not on the instance\n            CKEDITOR.on('dialogDefinition', function(e) {\n                if(e.data.name !== 'link') {\n                    return;\n                }\n                var linkTypes = e.data.definition.getContents('info').get('linkType')['items'],\n                    i = linkTypes.length,\n                    wanted;\n\n                while(i--) {\n                    if(linkTypes[i][1] !== 'anchor') {\n                        wanted = i;\n                        continue;\n                    }\n                }\n\n                linkTypes.splice(wanted + 1, 1);\n                return;\n            });\n\n\n            return config;\n        };\n\n        return {\n            getConfig : getConfig\n        };\n\n    }());\n\n    return ckConfigurator;\n});\n\n\n","define('taoQtiItem/qtiCreator/editor/ckEditor/ckProtector',[\n    'jquery',\n    'i18n'\n], function($, __){\n    'use strict';\n\n    /**\n     * Protect / unprotect an element to avoid edition by CK EDITOR\n     *\n     * @returns {{protect: protect, init: init, unprotect: unprotect}}\n     */\n    var ckeProtector = (function() {\n\n        var selector = '.widget-box';\n\n        /**\n         * Observe changes to content editable elements\n         *\n         * @param context\n         */\n        var observeContentChanges = function($context) {\n\n            var contextDomNode = $context[0];\n\n            var MutationObserver = (window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver);\n\n            // IE 10\n            if (!MutationObserver) {\n                contextDomNode.addEventListener('DOMCharacterDataModified', function() {\n                    $context.trigger('contentchange.protector');\n                }, false);\n            }\n            // all recent browser apart from IE 10\n            else {\n                var observer = new MutationObserver(function(mutations) {\n                    mutations.forEach(function() {\n                        $context.trigger('contentchange.protector');\n                    })\n                });\n                observer.observe(contextDomNode, {\n                    subtree: true,\n                    characterData: true\n                });\n            }\n\n        };\n\n        /**\n         * Retrieve selector from the outside\n         *\n         * @returns {string}\n         */\n        var getSelector = function() {\n            return selector;\n        };\n\n        /**\n         * Protect elements from being edited by CKeditor.\n         * Global selector can be overridden by any function\n         *\n         * @param context optional\n         * @param selectorParam optional\n         */\n        var protect = function(context, selectorParam) {\n            if(selectorParam) {\n                selector = selectorParam;\n            }\n            context.find(selector).each(function() {\n                var widget = $(this),\n                    iWidth = widget.outerWidth(),\n                    iHeight = widget.outerHeight(),\n                    cover = $('<button class=\"cke-cover-up\">'),\n                    wrapper,\n                    // cke copies the widget to a kind of shadow dom, hence this trickery\n                    getProtectedWidgetBySerial = function(serial) {\n                        $('[data-serial=\"' + serial + '\"]').each(function() {\n                            var widget = $(this);\n                            if(widget.parent().hasClass('cke-qti-wrapper')) {\n                                return false;\n                            }\n                        });\n                        return widget.length ? widget : $();\n                    },\n                    positionCover = function(cover) {\n                        var wrapper = getProtectedWidgetBySerial(cover.prop('serial')).parent('.cke-qti-wrapper'),\n                            iOffset = wrapper.offset();\n                        cover.css({\n                            left: iOffset.left,\n                            top: iOffset.top\n                        })\n                    };\n\n                if(widget.parent('.cke-qti-wrapper').length) {\n                    return false;\n                }\n\n                // avoid empty elements since they would be killed by CKE\n                // &#8203; means zero-width-space\n                widget.find('*').each(function() {\n                    if(!this.innerHTML) {\n                        this.innerHTML = '&#8203;'\n                    }\n                });\n\n                widget.wrap($('<span class=\"cke-qti-wrapper\" />'));\n\n                wrapper = widget.parent();\n\n                cover.css({\n                    width: iWidth,\n                    height: iHeight\n                });\n                $('body').append(cover);\n\n                wrapper.css({\n                    width: iWidth,\n                    height: iHeight\n                });\n                wrapper.attr('contenteditable', false);\n                wrapper.prop('cover', cover);\n\n                cover.prop('serial', widget.data('serial'));\n\n                positionCover(cover);\n\n                cover.attr('title', __('Click to display interaction widget'));\n\n                cover.on('click', function() {\n                    var widget = getProtectedWidgetBySerial($(this).prop('serial'));\n                    //unprotect(widget);\n                    $(document).trigger('removeprotection.ckprotector', { context: context, widget: widget });\n                });\n\n                observeContentChanges(context);\n\n                context.on('contentchange.protector', function() {\n                    positionCover(cover);\n                });\n            });\n        };\n\n        /**\n         * Protect protection\n         * Global selector can be overridden by any function\n         *\n         * @param protectedArea optional\n         */\n        var unprotect = function(widget) {\n            widget.each(function() {\n                var widget = $(this),\n                    wrapper = widget.parent('.cke-qti-wrapper');\n                if(wrapper.length) {\n                    wrapper.prop('cover').remove();\n                    widget.unwrap();\n                }\n            });\n        };\n\n        return {\n            protect: protect,\n            unprotect: unprotect,\n            getSelector: getSelector\n        };\n    }());\n    return ckeProtector;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/editor/gridEditor/config',[],function(){\n    return {\n        min : {\n            interaction : 2,\n            text : 1,\n            rubricBlock : 12\n        },\n        throttle : {\n            resize : 100\n        }\n    };\n});\n\n\n\n","define('taoQtiItem/qtiCreator/editor/gridEditor/helper',[],function(){\n    \n    var helpers = {\n        getColUnits : function getColUnits($elt){\n\n            var cssClasses = $elt.attr('class');\n            if(!cssClasses){\n                throw new Error('the element has no css class');\n            }\n\n            var colMatch = cssClasses.match(/col-([\\d]+)/);\n            if(colMatch && colMatch.length){\n                return parseInt(colMatch.pop());\n            }else{\n                throw 'the element has no col-* class';\n            }\n        },\n        setUnitsFromClass : function setUnitsFromClass($el){\n            var units = helpers.getColUnits($el);\n            $el.attr('data-units', units);\n            return units;\n        }\n    };\n\n    return helpers;\n});\n\n","define('taoQtiItem/qtiCreator/editor/gridEditor/resizable',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiCreator/editor/gridEditor/config',\n    'taoQtiItem/qtiCreator/editor/gridEditor/helper',\n    'taoQtiItem/qtiCreator/helper/qtiElements',\n    'jqueryui'\n], function(_, $, config, helper, qtiElements){\n\n    var _syncHandleHeight = function($row){\n        var h = $row.height() - parseFloat($row.children('[class^=\"col-\"], [class*=\" col-\"]').css('margin-bottom'));\n        $row.find('.grid-edit-resizable-zone').height(h);\n    };\n\n    var _createResizables = function createResizables($el){\n\n        var marginWidth = parseFloat($el.find('[class^=\"col-\"]:last, [class*=\" col-\"]:last').css('margin-left')),\n            activeWidth = 20;\n\n\n\n        $el.find('[class^=\"col-\"], [class*=\" col-\"]').each(function(){\n\n            var $col = $(this);\n\n            //@todo this should be more generic\n            //see draggable etc for more references\n            if($col.parent().hasClass('fixed-grid-row')) {\n                return true;\n            }\n\n            if($col.children('.grid-edit-resizable-zone').length){\n                //already created, next !\n                return true;\n            }\n\n            var $nextCol = $col.next(),\n                $row = $col.parent('.grid-row'),\n                offset = $col.offset(),\n                max = 12,\n                min = qtiElements.is($col.data('qti-class'), 'interaction') ? config.min.interaction : config.min.text,\n                nextMin = qtiElements.is($nextCol.data('qti-class'), 'interaction') ? config.min.interaction : config.min.text,\n                unitWidth = $row.width() / max;\n\n            var activeHeight = $row.height() - parseFloat($col.css('margin-bottom'));\n            var $activeZone = $('<div>', {'class' : 'grid-edit-resizable-zone grid-edit-resizable-zone-active'}).css({top : 0, right : -(marginWidth + (activeWidth - marginWidth) / 2), width : activeWidth, height : activeHeight});\n            var $handle = $('<span>', {'class' : 'grid-edit-resizable-handle'});\n            $activeZone.append($handle);\n            $col.append($activeZone);\n\n            var _syncOutlineHeight = function(){\n                var h = $row.height() - parseFloat($col.css('margin-bottom'));\n                $col.find('.grid-edit-resizable-outline').height(h);\n                $activeZone.height(h);\n            };\n\n            $activeZone.draggable({\n                containment : $nextCol.length ? [\n                    offset.left + min * unitWidth - marginWidth * 2 + 10,\n                    offset.top,\n                    offset.left + $col.outerWidth() + marginWidth + $nextCol.outerWidth() - nextMin * unitWidth - activeWidth / 2 - 10,\n                    offset.top + $col.height()\n                ] : [\n                    offset.left + min * unitWidth - marginWidth - activeWidth / 2 - 10,\n                    offset.top,\n                    $row.offset().left + $row.outerWidth() - marginWidth - activeWidth / 2 - 12,\n                    offset.top + $col.height()\n                ],\n                axis : 'x',\n                cursor : 'col-resize',\n                start : function(){\n\n                    $col.trigger('resizestart.gridEdit');\n\n                    var $overlay = $('<div>', {'class' : 'grid-edit-resizable-outline'});\n                    if($nextCol.length){\n                        $overlay.width(parseFloat($col.outerWidth()) + marginWidth + parseFloat($nextCol.outerWidth()));\n                    }else{\n                        $overlay.css({'width' : '100%', 'border-right-width' : 0});\n                    }\n                    //store in memory for quick access during resize:\n                    $(this).data('overlay', $overlay);\n                    $col.append($overlay);\n                    $handle.addClass('grid-edit-resizable-active');\n                    $el.find('.grid-edit-resizable-zone-active').removeClass('grid-edit-resizable-zone-active');\n                    _syncOutlineHeight();\n\n                },\n                drag : _.throttle(function(){\n\n                    var width = ($(this).offset().left + activeWidth / 2) - offset.left,\n                        units = helper.getColUnits($col),\n                        nextUnits = $nextCol.length ? helper.getColUnits($nextCol) : 0;\n\n                    if(!$nextCol.length){\n                        //need to resize the outline element:\n                        $col.find('.grid-edit-resizable-outline').width($handle.offset().left - offset.left);\n                    }\n\n                    if(width + marginWidth * 0 < (units - 1) * unitWidth){//need to compensate for the width of the active zone\n                        \n                        units--;\n                        _setColUnits($col, units);\n\n                        if($nextCol.length){\n                            nextUnits++;\n                            _setColUnits($nextCol, nextUnits);\n                        }\n\n                        _syncOutlineHeight();\n                        \n                        $col.trigger('resize.gridEdit');\n                        \n                    }else if(width + marginWidth + 20 > (units + 1) * unitWidth){//need to compensate for the width of the active zone\n                        \n                        units++;\n                        _setColUnits($col, units);\n\n                        if($nextCol.length){\n                            nextUnits--;\n                            _setColUnits($nextCol, nextUnits);\n                        }\n\n                        _syncOutlineHeight();\n                        \n                        $col.trigger('resize.gridEdit');\n                    }\n\n                }, config.throttle.resize),\n                stop : function(){\n\n                    $col.find('.grid-edit-resizable-outline').remove();\n\n                    _deleteResizables($el);\n                    _createResizables($el);\n\n                    $col.trigger('resizestop.gridEdit');\n                }\n            }).css('position', 'absolute');\n\n        });\n\n        $el.off('.gridEdit.resizable').on('dragoverstart.gridEdit.resizable', function(){\n\n            _deleteResizables($el);\n\n        }).on('dragoverstop.gridEdit.resizable', function(){\n\n            _createResizables($el);\n\n        }).on('contentChange.gridEdit.resizable', '.grid-row', function(){\n\n            _deleteResizables($el);\n            _createResizables($el);\n        });\n\n    };\n\n    var _deleteResizables = function _deleteResizables($el){\n        \n        $el.find('.grid-edit-resizable-zone').remove();\n    };\n\n    var _setColUnits = function _setColUnits($elt, newUnits){\n        \n        if($elt.attr('class').match(/col-([\\d]+)/)){\n            \n            var oldUnits = $elt.attr('data-units');\n            var $parentRow = $elt.parent('.grid-row');\n            var totalUnits = $parentRow.attr('data-units');\n            $parentRow.attr('data-units', totalUnits - oldUnits + newUnits);//update parent\n            $elt.attr('data-units', newUnits);//update element\n            $elt.removeClass('col-' + oldUnits).addClass('col-' + newUnits);\n            \n        }else{\n            \n            throw $.error('the element is not a grid column');\n        }\n    };\n\n    return {\n        create : function($element){\n            \n            _createResizables($element);\n            \n            $(window).off('resize.qtiEdit.resizable').on('resize.qtiEdit.resizable', function(){\n                \n                _deleteResizables($element);\n                _createResizables($element);\n            });\n        },\n        destroy : function($element, preserveGlobalEvents){\n            \n            _deleteResizables($element);\n            \n            if(!preserveGlobalEvents){\n                \n                $(window).off('resize.qtiEdit.resizable');\n            }\n        },\n        syncHandleHeight : function($row){\n        \n            if($row.hasClass('grid-row')){\n                _syncHandleHeight($row);\n            }else{\n                $row.find('.grid-row').each(function(){\n                    _syncHandleHeight($(this));\n                });\n            }\n        }\n\n    };\n});\n","define('taoQtiItem/qtiCreator/editor/gridEditor/content',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/editor/gridEditor/resizable'\n], function($, _, resizable){\n\n    var contentHelper = {};\n\n    /**\n     * Get html string content for a qti container\n     * \n     * @param {string|domelement|jquery} element\n     * @returns {string}\n     */\n    contentHelper.getContent = function(element, opts){\n\n        var options = _.defaults({\n            inner : true\n        }, opts);\n\n        var $body = options.inner ? $(element).clone() : $('<div>', {'class' : 'col-fictive content-helper-wrapper'}).append($(element).clone());\n\n        contentHelper.destroyGridWidgets($body, true);//working on clone only, so destroyGridWidgetsClone\n\n        contentHelper.serializeElements($body);\n\n        return $body.html();\n    };\n\n    /**\n     * Create a callback function for the ck edit:\n     * \n     * @param {object} container\n     */\n    contentHelper.getChangeCallback = function(container){\n\n        return _.throttle(function(data){\n\n            var $pseudoContainer = $('<div>').html(data),\n                newBody = contentHelper.getContent($pseudoContainer);\n\n            container.body(newBody);\n\n        }, 800);\n    };\n\n    /**\n     * Create a callback function for the ck edit (special case of blockstatic content\n     * \n     * @param {object} container\n     */\n    contentHelper.getChangeCallbackForBlockStatic = function(container){\n\n        return _.throttle(function(data){\n\n            var $pseudoContainer = $('<div>').html(data);\n            \n            $pseudoContainer.contents().each(function(){\n                \n                if(this.nodeType === 3 && this.nodeValue.trim()){\n                    \n                    //use jquery to wrap all content by a <p> \n                    $pseudoContainer.wrapInner('<p>');\n                    \n                    //... transform it into valid html :  <p><p>aaa</p></p> becomes <p></p><p>aaa</p><p></p>\n                    $pseudoContainer = $('<div>').html($pseudoContainer.html());\n                    \n                    return false;//breaks jquery each loop\n                }\n            });\n\n            container.body(contentHelper.getContent($pseudoContainer));\n\n        }, 800);\n    };\n\n    contentHelper.serializeElements = function($el){\n\n        var existingElements = [];\n\n        //select only the first level of \".widget-box\" found\n        $el.find('.widget-box:not(.widget-box *)').each(function(){\n\n            var $qtiElementWidget = $(this);\n\n            if($qtiElementWidget.data('serial')){\n\n                //an existing qti element:\n                var serial = $qtiElementWidget.data('serial');\n                $qtiElementWidget.replaceWith('{{' + serial + '}}');\n\n                //store existing element\n                existingElements.push(serial);\n\n            }else if($qtiElementWidget.data('new') && $qtiElementWidget.data('qti-class')){\n\n                //a newly inserted qti element\n                var qtiClass = $qtiElementWidget.data('qti-class');\n                $qtiElementWidget.replaceWith('{{' + qtiClass + ':new}}');\n\n            }else{\n\n                throw 'unknown qti-widget type';\n            }\n\n        });\n\n        return existingElements;\n    };\n\n    contentHelper.destroyGridWidgets = function($elt, inClone){\n\n        $elt.removeData('qti-grid-options');\n\n        $elt.find('.grid-row, [class*=\" col-\"], [class^=\"col-\"]')\n            .removeAttr('style')\n            .removeAttr('data-active')\n            .removeAttr('data-units');\n\n        $elt.children('.ui-draggable-dragging').remove();\n\n        resizable.destroy($elt, inClone);\n    };\n\n    return contentHelper;\n});\n","define('taoQtiItem/qtiCreator/widgets/helpers/content',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/model/helper/container',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function($, _, creatorRenderer, containerHelper, gridContentHelper){\n\n    var contentHelper = {};\n    \n    contentHelper.createElements = function(container, $container, data, callback){\n\n        var $dummy = $('<div>').html(data);\n\n        containerHelper.createElements(container, gridContentHelper.getContent($dummy), function(newElts){\n\n            creatorRenderer.get().load(function(){\n\n                for(var serial in newElts){\n\n                    var elt = newElts[serial],\n                        $placeholder = $container.find('.widget-box[data-new][data-qti-class=' + elt.qtiClass + ']'),\n                        $widget,\n                        widget;\n                        \n                    elt.setRenderer(this);\n                    elt.render($placeholder);\n\n                    //render widget\n                    widget = elt.postRender();\n                    $widget = widget.$original;\n\n                    //inform height modification\n                    $widget.trigger('contentChange.gridEdit');\n\n                    if(_.isFunction(callback)){\n                        callback(widget);\n                    }\n                    \n                }\n\n            }, this.getUsedClasses());\n        });\n\n    };\n    \n    contentHelper.changeInnerWidgetState = function _changeInnerWidgetState(outerWidget, state){\n        \n         var selector = [];\n        _.each(['img', 'math', 'object'], function(qtiClass){\n            selector.push('[data-html-editable] .widget-'+qtiClass); \n        });\n        \n        outerWidget.$container.find(selector.join(',')).each(function(){\n            var innerWidget = $(this).data('widget');\n            if(innerWidget){\n                innerWidget.changeState(state);\n            }\n        });\n    };\n    \n    return contentHelper;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/notifications/deletingInfoBox', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"You have deleted an element\", options) : helperMissing.call(depth0, \"__\", \"You have deleted an element\", options)))\n    + \".\\n    \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"You have deleted\", options) : helperMissing.call(depth0, \"__\", \"You have deleted\", options)))\n    + \" \";\n  if (helper = helpers.count) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.count); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"elements\", options) : helperMissing.call(depth0, \"__\", \"elements\", options)))\n    + \".\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"feedback-info popup\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"icon-info\\\"></span>\\n    \";\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.count), 1, options) : helperMissing.call(depth0, \"equal\", (depth0 && depth0.count), 1, options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <a class=\\\"undo\\\" href=\\\"#\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"undo\", options) : helperMissing.call(depth0, \"__\", \"undo\", options)))\n    + \"</a>\\n    <span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove Message\", options) : helperMissing.call(depth0, \"__\", \"Remove Message\", options)))\n    + \"\\\" class=\\\"icon-close close-trigger\\\"></span>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/deletingState',['lodash', 'jquery', 'tpl!taoQtiItem/qtiCreator/tpl/notifications/deletingInfoBox'], function(_, $, deletingInfoTpl){\n\n    var _timeout = 10000;\n    \n    var _bindEvents = function($messageBox){\n\n        var timeout = setTimeout(function(){\n            _confirmDeletion($messageBox, 1000);\n        }, _timeout);\n\n        $('body').on('mousedown.deleting keydown.deleting', function(e){\n            //confirm deleting whenever user interact with another object\n            if(e.target !== $messageBox[0] && !$.contains($messageBox[0], e.target)){\n                _confirmDeletion($messageBox, 400);\n            }\n        });\n        \n        $messageBox.find('a.undo').on('click', function(e){\n            e.preventDefault();\n            $messageBox.trigger('undo.deleting');\n            clearTimeout(timeout);\n            $messageBox.remove();\n        });\n\n        $messageBox.find('.close-trigger').on('click', function(e){\n            e.preventDefault();\n            _confirmDeletion($messageBox, 0);\n        });\n    };\n\n    var _confirmDeletion = function($messageBox, fadeDelay){\n        \n        $messageBox.trigger('confirm.deleting');\n        $messageBox.fadeOut(fadeDelay, function(){\n            $(this).remove();\n        });\n    };\n    \n    var deletingHelper = {\n        createInfoBox : function(widgets){\n\n            var $messageBox = $(deletingInfoTpl({\n                serial : 'widgets',\n                count : widgets.length\n            }));\n\n            $('body').append($messageBox);\n\n            $messageBox.css({\n                'display' : 'block',\n                'position' : 'fixed',\n                'top' : '50px',\n                'left' : '50%',\n                'margin-left' : '-200px',\n                'width' : '400px',\n                zIndex : 999999\n            });\n            \n            _bindEvents($messageBox);\n            \n            _.each(widgets, function(w){\n                w.on('beforeStateInit', function(){\n                    _confirmDeletion($messageBox, 400);\n                });\n            });\n        \n            return $messageBox;\n        }\n    };\n\n    return deletingHelper;\n});\n","define('taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',[\n    'lodash',\n    'i18n',\n    'jquery',\n    'ckeditor',\n    'taoQtiItem/qtiCreator/editor/ckEditor/ckConfigurator',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/widgets/helpers/content',\n    'taoQtiItem/qtiCreator/widgets/helpers/deletingState'\n], function(_, __, $, CKEditor, ckConfigurator, Element, contentHelper, deletingHelper){\n\n    //prevent auto inline editor creation:\n    CKEditor.disableAutoInline = true;\n\n    var _defaults = {\n        placeholder : __('some text ...'),\n        shieldInnerContent : true,\n        passthroughInnerContent : false\n    };\n\n    var _buildEditor = function($editable, $editableContainer, options){\n\n        var $trigger,\n            toolbarType;\n\n        options = _.defaults(options, _defaults);\n\n        if(!$editable instanceof $ || !$editable.length){\n            throw 'invalid jquery element for $editable';\n        }\n        if(!$editableContainer instanceof $ || !$editableContainer.length){\n            throw 'invalid jquery element for $editableContainer';\n        }\n\n        $trigger = $editableContainer.find('[data-role=\"cke-launcher\"]');\n        $editable.attr('placeholder', options.placeholder);\n\n        // build parameter for toolbar\n        if($editableContainer.hasClass('widget-blockInteraction') || $editableContainer.hasClass('widget-textBlock') || $editableContainer.hasClass('widget-rubricBlock')){\n\n            toolbarType = 'qtiBlock';\n\n        }else if($editableContainer.hasClass('qti-prompt-container') || $editableContainer.hasClass('widget-hottext')){\n\n            toolbarType = 'qtiInline';\n\n        }else{\n\n            toolbarType = 'qtiFlow';\n        }\n\n        var ckConfig = {\n            autoParagraph : false,\n            floatSpaceDockedOffsetY : 10,\n            taoQtiItem : {\n                insert : function(){\n                    if(options.data && options.data.container && options.data.widget){\n                        contentHelper.createElements(options.data.container, $editable, _htmlEncode(this.getData()), function(createdWidget){\n                            _activateInnerWidget(options.data.widget, createdWidget);\n                        });\n                    }\n                }\n            },\n            floatSpace : {\n                debug : true,\n                initialHide : true,\n                centerElement : function(){\n                    //cke initialize the config too early.. so need to provide a callback to initialize it...\n                    return $editableContainer.find('[data-role=\"cke-launcher\"]')[0];\n                },\n                on : {\n                    ready : function(floatSpaceApi){\n\n                        // works around tiny bug in tao floating space\n                        // nose must be in .cke_toolbox rather than .cke\n                        // otherwise z-indexing will fail\n                        var nose = $(this).find('.cke_nose'),\n                            oldParent = nose.parent(),\n                            newParent = $(this).find('.cke_toolbox');\n                        if(oldParent.is('.cke')){\n                            newParent.append(nose);\n                        }\n\n                        floatSpaceApi.hide();\n                        //@todo namespace this event: .editor.qti-widget or stuff...\n                        $trigger.on('click', function(){\n                            if($trigger.hasClass('active')){\n                                $trigger.removeClass('active');\n                                floatSpaceApi.hide();\n                            }else{\n                                $trigger.addClass('active');\n                                floatSpaceApi.show();\n                            }\n                        });\n\n                    },\n                    changeMode : function(oldYMode, newYMode){\n                        var element = this,\n                            $element = $(element),\n                            $nose = $element.find('.cke_nose');\n\n                        var xModeIsReady = function(domElem){\n                            var dfd = new $.Deferred(),\n                                counter = 0,\n                                check = setInterval(function(){\n                                    var style = domElem.getAttribute('style');\n                                    if(counter > 5 || style.indexOf('left') > -1 || style.indexOf('right') > -1){\n                                        dfd.resolve();\n                                        clearInterval(check);\n                                    }\n                                    counter++;\n                                }, 1000);\n                            return dfd.promise();\n                        };\n\n                        if(oldYMode !== newYMode){\n                            $nose.removeClass('float-space-' + oldYMode).addClass('float-space-' + newYMode);\n                        }\n\n                        $.when(xModeIsReady(element)).done(function(){\n                            if(!!element.style.left && !element.style.right){\n                                $nose.removeClass('float-space-right').addClass('float-space-left');\n                            }else{\n                                $nose.removeClass('float-space-left').addClass('float-space-right');\n                            }\n                        });\n                    }\n                }\n            },\n            on : {\n                instanceReady : function(e){\n\n                    var widgets = {},\n                        editor = e.editor;\n\n                    var changed = function(editor){\n\n                        _detectWidgetDeletion($editable, widgets, editor);\n\n                        //callback:\n                        if(_.isFunction(options.change)){\n                            options.change.call(editor, _htmlEncode(editor.getData()));\n                        }\n\n                    };\n\n                    var markupChanged = function() {\n\n                        //callbacks:\n                        if(_.isFunction(options.markupChange)){\n                            options.markupChange.call($editable);\n                        }\n                        if(_.isFunction(options.change)){\n                            options.change.call(editor, _htmlEncode(editor.getData()));\n                        }\n\n                    }\n\n                    /*\n                     dirty trick: shows and hides combo boxes (styles for instance)\n                     in the CKE toolbar and acts as a pre-loader for the iframes in these boxes\n                     */\n                    $('#cke_' + e.editor.name).find('.cke_combo_button').each(function(){\n                        var btn = this;\n                        btn.click();\n                        setTimeout(function(){\n                            btn.click();\n                        }, 500)\n\n                    });\n\n\n                    //store it in editable elt data attr\n                    $editable.data('editor', editor);\n                    $editable.data('editor-options', options);\n\n                    $editable.on('change', function(){\n                        changed(editor);\n                    });\n\n                    editor.on('change', function(){\n                        markupChanged(editor);\n                    });\n\n                    if(options.data && options.data.container){\n\n                        //store in data-qti-container attribute the editor instance as soon as it is ready\n                        $editable.data('qti-container', options.data.container);\n\n                        //init editable\n                        widgets = _rebuildWidgets(options.data.container, $editable, {\n                            restoreState : true\n                        });\n\n                        if(options.shieldInnerContent){\n                            _shieldInnerContent($editable, options.data.widget);\n                        }else if(options.passthroughInnerContent){\n                            _passthroughInnerContent($editable);\n                        }\n                    }\n\n                    _focus(editor);\n\n                    $editable.trigger('editorready', [editor]);\n\n                    $('.qti-item').trigger('toolbarchange');\n\n                },\n                focus : function(e){\n\n                    //show trigger\n                    $editableContainer.find('[data-role=\"cke-launcher\"]').hide();\n                    $trigger.show();\n\n                    //callback:\n                    if(_.isFunction(options.focus)){\n                        options.focus.call(this, _htmlEncode(this.getData()));\n                    }\n\n                    $('.qti-item').trigger('toolbarchange');\n\n\n                },\n                blur : function(e){\n\n                    $('.qti-item').trigger('toolbarchange');\n\n                },\n                configLoaded : function(e){\n                    e.editor.config = ckConfigurator.getConfig(e.editor, toolbarType, ckConfig);\n                },\n                afterPaste : function(e){\n                    //@todo : we may add some processing on the editor after paste\n                }\n            }\n        };\n\n        return CKEditor.inline($editable[0], ckConfig);\n    };\n\n    var _find = function($container, dataAttribute){\n\n        var $collection;\n\n        if($container.data(dataAttribute)){\n            $collection = $container;\n        }else{\n            $collection = $container.find('[data-' + dataAttribute + '=true]');\n        }\n        return $collection;\n    };\n\n    var _destroyWidgets = function(container){\n\n        _.each(_.values(container.elements), function(elt){\n            elt.data('widget').destroy();\n        });\n\n    };\n\n    var _rebuildWidgets = function(container, $container, options){\n\n        options = options || {};\n\n        var widgets = {};\n\n        //re-init all widgets:\n        _.each(_.values(container.elements), function(elt){\n\n            var widget = elt.data('widget'),\n                currentState = widget.getCurrentState().name;\n\n            widgets[elt.serial] = widget.rebuild({\n                context : $container,\n                ready : function(widget){\n                    if(options.restoreState){\n                        //restore current state\n                        widget.changeState(currentState);\n                    }\n                }\n            });\n        });\n\n        $container.trigger('widgetCreated', [widgets, container]);\n\n        return widgets;\n    };\n\n    var _findWidgetContainer = function($container, serial){\n        return $container.find('.widget-box[data-serial=' + serial + ']');\n    };\n\n    var _detectWidgetDeletion = function($container, widgets, editor){\n\n        var deleted = [];\n\n        _.each(widgets, function(w){\n\n            if(!w.element.data('removed')){\n                var $widget = _findWidgetContainer($container, w.serial);\n                if(!$widget.length){\n                    deleted.push(w);\n                }\n            }\n\n        });\n\n        if(deleted.length){\n\n            var $messageBox = deletingHelper.createInfoBox(deleted);\n            $messageBox.on('confirm.deleting', function(){\n\n                _.each(deleted, function(w){\n                    w.element.remove();\n                    w.destroy();\n                });\n            }).on('undo.deleting', function(){\n\n                editor.undoManager.undo();\n            });\n\n        }\n    };\n\n    var _shieldInnerContent = function($container, containerWidget){\n\n        $container.find('.widget-box').each(function(){\n\n            var $widget = $(this),\n                innerWidget = $widget.data('widget'),\n                $shield = $('<button>', {\n                    'class' : 'html-editable-shield'\n                });\n\n            $widget.attr('contenteditable', false);\n            $widget.append($shield);\n            $shield.on('click', function(e){\n\n                //click on shield: \n                //1. this.widget.changeState('sleep');\n                //2. clicked widget.changeState('active');\n\n                e.stopPropagation();\n\n                _activateInnerWidget(containerWidget, innerWidget);\n\n            });\n\n        });\n\n    };\n\n    var _passthroughInnerContent = function($container){\n\n        $container.find('.widget-box').each(function(){\n\n            var $widget = $(this),\n                $shield = $('<button>', {\n                    'class' : 'html-editable-shield'\n                });\n\n            $widget.attr('contenteditable', false);\n            $widget.append($shield);\n        });\n\n    };\n\n    var _activateInnerWidget = function(containerWidget, innerWidget){\n\n        if(containerWidget && containerWidget.element && containerWidget.element.qtiClass){\n\n            var listenToWidgetCreation = function(){\n\n                containerWidget.$container.off('widgetCreated').one('widgetCreated', function(e, widgets){\n                    var targetWidget = widgets[innerWidget.serial];\n                    if(targetWidget){\n                        //@todo : fix this race condition\n\n                        _.delay(function(){\n\n                            if(Element.isA(innerWidget.element, 'interaction')){\n\n                                targetWidget.changeState('question');\n\n                            }else{\n\n                                targetWidget.changeState('active');\n                            }\n\n                        }, 100);\n                    }\n                });\n\n            };\n\n            if(Element.isA(containerWidget.element, '_container')){\n\n                listenToWidgetCreation();\n                containerWidget.changeState('sleep');\n\n            }else if(Element.isA(containerWidget.element, 'choice')){\n\n                listenToWidgetCreation();\n                containerWidget.changeState('question');\n\n            }else if(Element.isA(innerWidget.element, 'choice')){\n\n                innerWidget.changeState('choice');\n\n            }else{\n\n                innerWidget.changeState('active');\n            }\n\n        }else{\n\n            innerWidget.changeState('active');\n        }\n    };\n\n    /**\n     * Special encoding of ouput html generated from ie8 : moved to xmlRenderer\n     */\n    var _htmlEncode = function(encodedStr){\n        return encodedStr;\n    };\n\n    var _focus = function(editor){\n\n        editor.focus();\n        var range = editor.createRange();\n        range.moveToElementEditablePosition(editor.editable(), true);\n        editor.getSelection().selectRanges([range]);\n    };\n\n    var editorFactory = {\n        /**\n         * Check if all data-html-editable has an editor\n         *\n         * @param {type} $container\n         * @returns {undefined}\n         */\n        hasEditor : function($container){\n\n            var hasEditor = false;\n\n            _find($container, 'html-editable').each(function(){\n                hasEditor = !!$(this).data('editor');\n                return hasEditor; //continue if true, break if false\n            });\n\n            return hasEditor;\n        },\n        buildEditor : function($container, editorOptions){\n\n            _find($container, 'html-editable-container').each(function(){\n\n                var editor,\n                    $editableContainer = $(this),\n                    $editable = $editableContainer.find('[data-html-editable]');\n\n                //need to make the element html editable to enable ck inline editing:\n                $editable.attr('contenteditable', true);\n\n                //build it\n                editor = _buildEditor($editable, $editableContainer, editorOptions);\n            });\n\n        },\n        destroyEditor : function($container){\n\n            _find($container, 'html-editable-container').each(function(){\n\n                var $editableContainer = $(this),\n                    $editable = $editableContainer.find('[data-html-editable]');\n\n                $editableContainer.find('[data-role=\"cke-launcher\"]')\n                    .off()\n                    .removeClass('active')\n                    .hide();\n\n                $editable.removeAttr('contenteditable');\n                if($editable.data('editor')){\n\n                    var editor = $editable.data('editor'),\n                        options = $editable.data('editor-options');\n                    \n                    //before destroying, ensure that data is stored\n                    if(_.isFunction(options.change)){\n                        options.change.call(editor, _htmlEncode(editor.getData()));\n                    }\n                    \n                    editor.focusManager.blur(true);\n                    editor.destroy();\n\n                    $editable.removeData('editor').removeData('editor-options');\n                    if($editable.data('qti-container')){\n                        _rebuildWidgets($editable.data('qti-container'), $editable);\n                    }\n                }\n            });\n        },\n        getData : function($editable){\n            var editor = $editable.data('editor');\n            if(editor){\n                return _htmlEncode(editor.getData());\n            }else{\n                throw 'no editor attached to the DOM element';\n            }\n        },\n        focus : function($editable){\n            _find($editable, 'html-editable').each(function(){\n                var editor = $(this).data('editor');\n                if(editor){\n                    _focus(editor);\n                }\n            });\n        }\n    };\n\n    return editorFactory;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/editor/colorPicker/tpl/popup', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"color-picker-container sidebar-popup\\\">\\n    <div class=\\\"sidebar-popup-title\\\">\\n        <h3 style=\\\"font-size:13px;margin:0\\\"></h3>\\n        <a class=\\\"closer\\\" href=\\\"#\\\"></a>\\n    </div>\\n    <div class=\\\"sidebar-popup-content\\\">\\n        <div class=\\\"color-picker\\\"></div>\\n        <input class=\\\"color-picker-input\\\" type=\\\"text\\\" value=\\\"#000000\\\">\\n    </div>\\n</div>\\n\";\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/colorPicker/colorPicker',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/popup',\n    'tpl!taoQtiItem/qtiCreator/editor/colorPicker/tpl/popup',\n    'taoQtiItem/qtiCreator/editor/styleEditor/farbtastic/farbtastic'\n], function($, _, popup, popupTpl){\n\n    var _defaults = {};\n\n    function create($colorTrigger, config){\n\n        config = _.defaults(config || {}, _defaults);\n\n        var color, $input = $colorTrigger.siblings('input');\n\n        //set color recorded in the hidden input to the color trigger\n        if(config.color){\n            color = config.color;\n            $input.val(color);\n        }else{\n            color = $input.val();\n        }\n        \n        $colorTrigger.css('background-color', color);\n\n        var $popup = $(popupTpl());\n\n        $('#item-editor-wrapper').append($popup);\n\n        // basic popup functionality\n        popup.init($colorTrigger, { popup: $popup });\n\n\n        // after popup opens\n        $colorTrigger.on('open.popup', function(e, params) {\n\n            var $trigger = $(this),\n                $content   = $trigger.parents('.sidebar-popup-content'),\n            // this is the input above the trigger, _not_ the one of the color picker\n                $titleField   = $content.find('[data-role=\"title\"]'),\n            // this is the input of the color picker\n                color = $input.val();\n            var $colorPicker = params.popup.find('.color-picker'),\n                $colorPickerInput = params.popup.find('.color-picker-input');\n\n            var $container = $(this).parents('.sidebar-popup');\n\n            //console.log($panel)\n\n            params.popup.css({ right: $(window).width() - $container.offset().left + 2, top: $titleField.offset().top -$('#item-editor-wrapper').offset().top });\n            params.popup.find('h3').text($titleField.val());\n\n            // Init the color picker\n            $colorPicker.farbtastic($colorPickerInput);\n\n            // Set the color to the currently set on the form init\n            $colorPickerInput.val(color).trigger('keyup');\n            config.color = color;\n\n            // Populate the input with the color on quitting the modal\n            params.popup.find('.closer').off('click').on('click', function(){\n                params.popup.hide();\n                $colorPicker.off('.farbtastic');\n            });\n\n            //listen to color change\n            $colorPicker.off('.farbtastic').on('colorchange.farbtastic', function(e, color){\n                $colorTrigger.css('background-color', color);\n                $input.val(color).trigger('change');\n            });\n            \n        });\n\n        // after popup closes\n        $colorTrigger.on('close.popup', function(e, params) {\n            params.popup.find('.color-picker').off('.farbtastic');\n        });\n\n   }\n\n    function destroy($trigger){\n        $trigger.off('.color-picker');\n        $trigger.removeAttr('data-color-picker');\n    }\n    \n    return {\n        create : create,\n        destroy : destroy\n    };\n});\n","define('taoQtiItem/qtiCreator/model/Container',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/Container'\n], function(_, editable, Container) {\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        afterCreate: function() {\n            this.body('Lorem ipsum dolor sit amet, consectetur adipisicing ...');\n        }\n    });\n    return Container.extend(methods);\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/config',[],function(){\n    return {\n        name : 'xmlRenderer',\n        locations : {\n            '_container' : 'taoQtiItem/qtiXmlRenderer/renderers/Container',\n            'assessmentItem' : 'taoQtiItem/qtiXmlRenderer/renderers/Item',\n            'stylesheet' : 'taoQtiItem/qtiXmlRenderer/renderers/Stylesheet',\n            'responseDeclaration' : 'taoQtiItem/qtiXmlRenderer/renderers/ResponseDeclaration',\n            'outcomeDeclaration' : 'taoQtiItem/qtiXmlRenderer/renderers/OutcomeDeclaration',\n            'responseProcessing' : 'taoQtiItem/qtiXmlRenderer/renderers/ResponseProcessing',\n            '_simpleFeedbackRule' : 'taoQtiItem/qtiXmlRenderer/renderers/responses/SimpleFeedbackRule',\n            'math' : 'taoQtiItem/qtiXmlRenderer/renderers/Math',\n            'img' : 'taoQtiItem/qtiXmlRenderer/renderers/Img',\n            'object' : 'taoQtiItem/qtiXmlRenderer/renderers/Object',\n            'modalFeedback' : 'taoQtiItem/qtiXmlRenderer/renderers/feedbacks/ModalFeedback',\n            'rubricBlock' : 'taoQtiItem/qtiXmlRenderer/renderers/RubricBlock',\n            'associateInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/AssociateInteraction',\n            'choiceInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/ChoiceInteraction',\n            'extendedTextInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction',\n            'gapMatchInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GapMatchInteraction',\n            'graphicAssociateInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction',\n            'graphicGapMatchInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction',\n            'graphicOrderInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction',\n            'hotspotInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/HotspotInteraction',\n            'hottextInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/HottextInteraction',\n            'inlineChoiceInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction',\n            'matchInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/MatchInteraction',\n            'mediaInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/MediaInteraction',\n            'orderInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/OrderInteraction',\n            'selectPointInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/SelectPointInteraction',\n            'sliderInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/SliderInteraction',\n            'textEntryInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/TextEntryInteraction',\n            'uploadInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/UploadInteraction',\n            'prompt' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/Prompt',\n            'associableHotspot' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/AssociableHotspot',\n            'gap' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/Gap',\n            'gapImg' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/GapImg',\n            'gapText' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/GapText',\n            'hotspotChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/HotspotChoice',\n            'hottext' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/Hottext',\n            'inlineChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/InlineChoice',\n            'simpleAssociableChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleAssociableChoice',\n            'simpleChoice' : 'taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleChoice',\n            'customInteraction' : 'taoQtiItem/qtiXmlRenderer/renderers/interactions/PortableCustomInteraction',\n            'infoControl' : 'taoQtiItem/qtiXmlRenderer/renderers/PortableInfoControl'\n        },\n        options : {\n            userRelativeUrl : true\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/Renderer',['taoQtiItem/qtiRunner/core/Renderer', 'taoQtiItem/qtiXmlRenderer/renderers/config'], function(Renderer, config){\n    return Renderer.build(config.locations, config.name, config.options);\n});\n","define('taoQtiItem/qtiCreator/helper/xmlRenderer',['taoQtiItem/qtiXmlRenderer/renderers/Renderer'], function(XmlRenderer){\n\n    var _xmlRenderer = new XmlRenderer({shuffleChoices : false}).load();\n\n    var _render = function(item){\n        var xml = '';\n        try{\n            xml = item.render(_xmlRenderer);\n        }catch(e){\n            console.log(e);\n        }\n\n        return xml;\n    };\n\n    return {\n        render : _render,\n        get : function(){\n            return _xmlRenderer;\n        }\n    };\n});\n","define('taoQtiItem/qtiCreator/helper/simpleParser',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/helper/util',\n    'taoQtiItem/qtiItem/core/Loader'\n], function(_, $, util, Loader){\n\n    var _parsableElements = ['img', 'object'];\n    var _qtiClassNames = {\n        rubricblock : 'rubricBlock'\n    };\n\n    var _defaultOptions = {\n        ns : {\n            math : ''\n        },\n        loaded : null,\n        model : null\n    };\n\n    function _getElementSelector(qtiClass, ns){\n        return ns ? ns + \"\\\\:\" + qtiClass + ','+qtiClass : qtiClass;\n    }\n\n    function getQtiClassFromXmlDom($node){\n\n        var qtiClass = $node.prop('tagName').toLowerCase();\n\n        //remove ns : \n        qtiClass = qtiClass.replace(/.*:/, '');\n\n        return _qtiClassNames[qtiClass] ? _qtiClassNames[qtiClass] : qtiClass;\n    }\n\n    function buildElement($elt){\n\n        var qtiClass = getQtiClassFromXmlDom($elt);\n\n        var elt = {\n            qtiClass : qtiClass,\n            serial : util.buildSerial(qtiClass + '_'),\n            attributes : {}\n        };\n\n        $.each($elt[0].attributes, function(){\n            if(this.specified){\n                elt.attributes[this.name] = this.value;\n            }\n        });\n\n        return elt;\n    }\n\n    function buildMath($elt, options){\n\n        var elt = buildElement($elt);\n\n        //set annotations:\n        elt.annotations = {};\n        $elt.find(_getElementSelector('annotation', options.ns.math)).each(function(){\n            var $annotation = $(this);\n            var encoding = $annotation.attr('encoding');\n            if(encoding){\n                elt.annotations[encoding] = $annotation.html();\n            }\n            $annotation.remove();\n        });\n        \n        //set math xml\n        elt.mathML = $elt.html();\n        \n        //set ns: \n        elt.ns = {\n            name : 'm',\n            uri : 'http://www.w3.org/1998/Math/MathML'//@todo : remove hardcoding there\n        };\n\n        return elt;\n    }\n\n    function parseContainer($container, opts){\n\n        var options = _.merge(_.clone(_defaultOptions), opts || {});\n\n        var ret = {\n            serial : util.buildSerial('_container_'),\n            body : '',\n            elements : {}\n        };\n\n        _.each(_parsableElements, function(qtiClass){\n\n            $container.find(qtiClass).each(function(){\n\n                var $qtiElement = $(this);\n                var element = buildElement($qtiElement, opts);\n\n                ret.elements[element.serial] = element;\n                $qtiElement.replaceWith(_placeholder(element));\n\n            });\n\n        });\n        \n        $container.find(_getElementSelector('math', options.ns.math)).each(function(){\n\n            var $qtiElement = $(this);\n            var element = buildMath($qtiElement, opts);\n\n            ret.elements[element.serial] = element;\n            $qtiElement.replaceWith(_placeholder(element));\n\n        });\n\n        ret.body = $container.html();\n\n        return ret;\n    }\n\n    function _placeholder(element){\n        return '{{' + element.serial + '}}';\n    }\n\n    var parser = {\n        parse : function(xmlStr, options){\n\n            var $container = $(xmlStr);\n\n            var element = buildElement($container, options);\n\n            var data = parseContainer($container, options);\n\n            if(data.body !== undefined){\n                element.body = data;\n            }\n\n            if(_.isFunction(options.loaded) && options.model){\n                var loader = new Loader().setClassesLocation(options.model);\n                loader.loadElement(element, options.loaded);\n            }\n\n            return element;\n        }\n    };\n\n    return parser;\n});\n\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"cke-launcher-tlb\\\">\\n    <div class=\\\"rgt tlb-button\\\" data-role=\\\"cke-launcher\\\" title=\\\"Formatting options\\\">\\n        <span class=\\\"icon-font\\\"></span>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/editor/containerEditor',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/core/Loader',\n    'taoQtiItem/qtiCreator/model/Container',\n    'taoQtiItem/qtiCreator/model/Item',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/qtiClasses',\n    'taoQtiItem/qtiCreator/helper/xmlRenderer',\n    'taoQtiItem/qtiCreator/helper/simpleParser',\n    'taoQtiItem/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger'\n], function(_, $, Loader, Container, Item, event, qtiClasses, xmlRenderer, simpleParser, creatorRenderer, content, htmlEditor, toolbarTpl){\n\n    var _ns = 'containereditor';\n\n    var _defaults = {\n        change : _.noop,\n        markup : '',\n        markupSelector : ''\n    };\n\n    function parser($container){\n\n        //detect math ns :\n        var mathNs = 'm';//for 'http://www.w3.org/1998/Math/MathML'\n\n        //parse qti xml content to build a data object\n        var data = simpleParser.parse($container.clone(), {\n            ns : {\n                math : mathNs\n            }\n        });\n\n        if(data.body){\n            return data.body;\n        }else{\n            throw 'invalid content for qti container';\n        }\n    }\n\n    function create($container, options){\n\n        options = _.defaults(options || {}, _defaults);\n        \n        //assign proper markup\n        if(options.markup){\n            var html = options.markup;\n            if(options.markupSelector){\n                var htmls = extractHtmlFromMarkup(html, options.markupSelector);\n                html = htmls[0] || '';\n            }\n            $container.html(html);\n        }\n        \n        var data = parser($container);\n        var loader = new Loader().setClassesLocation(qtiClasses);\n        loader.loadRequiredClasses(data, function(){\n\n            //create a new container object\n            var container = new Container();\n            \n            $container.data('container', container);\n\n            //need to attach a container to the item to enable innserElement.remove()\n            //@todo fix this\n            var item = new Item().setElement(container);\n            container.setRelatedItem(item);\n\n            //associate it to the interaction?\n            if(options.related){\n                options.related.data('container-editor', container);\n            }\n\n            this.loadContainer(container, data);\n\n            //apply common renderer :\n            creatorRenderer.load(['img', 'object', 'math', '_container'], function(){\n                \n                container.setRenderer(this);\n                $container.html(container.render());\n                container.postRender();\n\n                buildContainer($container);\n                createToolbar($container);\n                buildEditor($container, container);\n\n                $container.off('.' + _ns).on(event.getList(_ns + event.getNs() + event.getNsModel()).join(' '), _.throttle(function(e, data){\n                    var html = container.render(xmlRenderer.get());\n                    $container.trigger('containerchange.' + _ns, [html]);\n                    if(_.isFunction(options.change)){\n                        options.change(html);\n                    }\n                }, 600));\n                \n                $container.trigger('editorready.containereditor');\n            });\n\n        });\n\n    }\n\n    function buildContainer($container){\n\n        $container.wrapInner($('<div>', {'class' : 'container-editor', 'data-html-editable' : true}));\n    }\n\n    function createToolbar($container){\n\n        var $tlb = $(toolbarTpl({\n            serial : 'serial123456',\n            state : 'active'\n        }));\n\n        $container.append($tlb);\n        $tlb.show();\n\n        return this;\n    }\n\n    function cleanup($container){\n\n        //remove the text toolbar\n        $container.find('.mini-tlb').remove();\n\n        var container = $container.data('container');\n        if(container){\n            $(document).off('.' + container.serial);\n            $container.html(container.render());\n        }\n\n        $container.removeData('container');\n\n    }\n    \n    /**\n     * create a fase widget that is required in html editor\n     * \n     * @param {JQuery} $editableContainer\n     * @param {Object} container\n     * @returns {Object} The fake widget object\n     */\n    function createFakeWidget($editableContainer, container){\n        \n        var widget = {\n            $container : $editableContainer,\n            element : container,\n            changeState : _.noop\n        };\n        //associate the widget to the container\n        container.data('widget', widget);\n        \n        return widget;\n    }\n\n    function buildEditor($editableContainer, container){\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n\n            htmlEditor.buildEditor($editableContainer, {\n                shieldInnerContent : false,\n                passthroughInnerContent : false,\n                change : content.getChangeCallback(container),\n                data : {\n                    widget : createFakeWidget($editableContainer, container),\n                    container : container\n                }\n            });\n        }\n    }\n\n    function destroyEditor($editableContainer){\n        htmlEditor.destroyEditor($editableContainer);\n        $editableContainer.removeAttr('data-html-editable-container');\n    }\n\n    function destroy($container){\n        destroyEditor($container);\n        cleanup($container)\n    }\n    \n    function extractHtmlFromMarkup(markupStr, selector){\n        var $found = $('<div>').html(markupStr).find(selector);\n        var ret = [];\n        $found.each(function(){\n            ret.push($(this).html());\n        });\n        return ret;\n    }\n    \n    return {\n        create : create,\n        destroy : destroy\n    };\n});\n","define('taoQtiItem/qtiCreator/editor/gridEditor/arrow',['jquery', 'lodash'], function($, _){\n\n    var _eventName = 'arrowenter.gridEdit.gridDragDrop';\n\n    //build arrow for inter-column insertion:\n    var _buildArrows = function _buildArrows($col, options){\n\n        var defaults = {\n            insertZoneWidth : 20,\n            marginWidth : 0\n        };\n\n        options = _.extend(defaults, options);\n\n        //create inter-column insertion helper\n        var $insertRight = $('<div>', {'class' : 'grid-edit-insert-box'})\n            .css({\n                top : 0,\n                width: options.insertZoneWidth,\n                right : -(options.marginWidth + (options.insertZoneWidth - options.marginWidth) / 2),\n                height : $col.parent('.grid-row').height() - parseFloat($col.css('margin-bottom'))\n            })\n            .append($('<div>', {'class' : 'grid-edit-insert-square'}))\n            .append($('<div>', {'class' : 'grid-edit-insert-triangle'}))\n            .append($('<div>', {'class' : 'grid-edit-insert-line'}))\n            .on('mouseenter', '.grid-edit-insert-triangle, .grid-edit-insert-square', function(){\n                $col.trigger(_eventName, ['right']);\n                _removeArrows($col);\n            });\n\n        var $insertLeft = $insertRight\n            .clone()\n            .css({'left' : -(options.marginWidth + 5), 'right' : 'auto'})\n            .on('mouseenter', '.grid-edit-insert-triangle, .grid-edit-insert-square', function(){\n                $col.trigger(_eventName, ['left']);\n                _removeArrows($col);\n            });\n\n        $col.append($insertRight).append($insertLeft);\n\n        _arrowFall($insertRight, function(){\n            $col.trigger(_eventName, ['right']);\n            _removeArrows($col);\n        });\n\n        _arrowFall($insertLeft, function(){\n            $col.trigger(_eventName, ['left']);\n            _removeArrows($col);\n        });\n\n    };\n\n    //remove arrows:\n    var _removeArrows = function _removeArrows($col){\n        $col.find('.grid-edit-insert-box').remove();\n    };\n\n    //animate arrow fall:\n    var _arrowFall = function _arrowFall($insert, callback){\n\n        var interval = null;\n        $insert.on('mouseenter', function(e){\n\n            var relY = e.pageY - $(this).offset().top\n                - parseInt($(this).find('.grid-edit-insert-triangle').outerHeight())\n                - parseInt($(this).find('.grid-edit-insert-square').outerHeight());\n\n            var $arrow = $(this).find('.grid-edit-insert-triangle, .grid-edit-insert-square');\n\n            var t = 0;\n            interval = setInterval(function(){\n                var top = 0.5 * 9.81 * Math.pow(t, 2) / 100;\n                $arrow.css('top', top);\n\n                if(top > relY){\n                    clearInterval(interval);\n                    callback();\n                }\n\n                t++;\n            }, 10);\n        }).on('mouseleave', function(){\n            $(this).find('.grid-edit-insert-triangle, .grid-edit-insert-square').css('top', 0);\n            clearInterval(interval);\n        });\n    };\n\n    return {\n        create : _buildArrows\n    };\n});\n\n","define('taoQtiItem/qtiCreator/helper/gridUnits',['lodash'], function(_){\n\n    /**\n     * Argument cols format: \n     * [{elt:elementRef, units:6, min:4}]\n     * \n     * Return format:\n     * {last:6, middle:4, distributed:[{elt:elementRef, units:5}]}\n     * \n     * @param {array} cols \n     * @param {int} min \n     * @param {int} max \n     * @returns {object}\n     */\n    function distributeUnits(cols, min, max){\n\n        max = max || 12;\n        var totalUnits = 0, size = 0, _cols = {}, ret = {}, minimized = [], decimals = [];\n\n        for(var i in cols){\n            _cols[i] = _.clone(cols[i]);\n            totalUnits += cols[i].units;\n            size++;\n        }\n\n        var avg = totalUnits / size;\n        _cols[size + 1] = {\n            'elt' : 'middle',\n            'units' : avg,\n            'min' : min\n        };\n\n        if(totalUnits + Math.round(avg) > max){\n\n            var refactoredTotalUnits = 0;\n            //need to squeeze the new col between existing ones:\n            //refactored\n            for(var i in _cols){\n\n                var col = _cols[i];\n                var refactoredUnits = col.units * max / (max + avg);//calculate the average, basis for the new inserted element's units\n                decimals[i] = Math.round((refactoredUnits % 1) * 100);//get its decimals for later usage\n\n                col.refactoredUnits = Math.round(refactoredUnits);\n                if(col.min && col.refactoredUnits < col.min){//a col cannot be smaller than its min units\n                    col.refactoredUnits = col.min;\n                    minimized[i] = true;//marked it as not changeable\n                }\n                refactoredTotalUnits += col.refactoredUnits;\n\n            }\n\n            if(refactoredTotalUnits > max){\n                //try ceil new units values:\n                for(var i; i < size + 1; i++){\n                    var col = _cols[i];\n                    if(col.decimal > 50 && col.refactoredUnits - 1 > col.min){\n                        col.refactoredUnits--;\n                        refactoredTotalUnits--;\n                    }\n                    if(refactoredTotalUnits === max){\n                        break;//target achieved\n                    }\n                }\n            }\n\n            var middleUnitValue = _cols[size + 1].refactoredUnits;\n            var lastUnitValue = (refactoredTotalUnits > max) ? max : middleUnitValue;\n            delete _cols[size + 1];\n\n            ret = {\n                last : lastUnitValue, //new col takes the remaining space\n                middle : middleUnitValue,\n                cols : _cols,\n                refactoredTotalUnits : refactoredTotalUnits\n            };\n        }else{\n\n            //there is \"room\" for the new element to fill the whole row:\n            var last = max - totalUnits;\n            ret = {\n                last : last,\n                middle : last,\n                cols : {}//no need to resize cols\n            };\n        }\n\n        return ret;\n    }\n\n    /**\n     * Rebistributs the cols proportionally to fill out the \"max\" width\n     * \n     * @param {array} cols\n     * @param {integer} max\n     * @returns {object}\n     */\n    function redistributeUnits(cols, max){\n\n        max = max || 12;//default to max\n\n        var totalUnits = 0,\n            _cols = [],\n            totalRefactoredUnits = 0,\n            negative = [],\n            positive = [],\n            ret = [];\n\n        _.each(cols, function(col){\n            _cols.push(col);\n            totalUnits += col.units;\n        });\n\n        if(totalUnits > max){\n            throw 'the total number of units exceed the maximum of ' + max;\n        }\n\n        _.each(_cols, function(col){\n\n            var refactoredUnits = col.units * max / totalUnits;\n            var rounded = Math.round(refactoredUnits);\n            totalRefactoredUnits += rounded;\n\n            col.refactoredUnits = rounded;\n            \n            if(rounded > refactoredUnits){\n                positive.push(col);\n            }else{\n                negative.push(col);\n            }\n            \n        });\n        \n        positive = _.sortBy(positive, 'refactoredUnits');\n        negative = _.sortBy(negative, 'refactoredUnits');\n        \n        if(totalRefactoredUnits > max){\n            //too much !\n            \n            //@todo : start with the hightest refactored\n            _.eachRight(positive, function(col){\n                col.refactoredUnits --;\n                totalRefactoredUnits--;\n                if(totalRefactoredUnits === max){\n                    return false;\n                }\n            });\n            \n        }else if(totalRefactoredUnits < max){\n            \n            //@todo : start with the lowest refactored\n            _.each(negative, function(col){\n                col.refactoredUnits ++;\n                totalRefactoredUnits++;\n                if(totalRefactoredUnits === max){\n                    return false;\n                }\n            });\n            \n        }\n        \n        _.each(negative, function(col){\n            ret.push(col);\n        });\n        _.each(positive, function(col){\n            ret.push(col);\n        });\n\n        return _cols;\n    }\n    \n\n    return {\n        distribute : function(cols, min, max){\n            return distributeUnits(cols, min, max);\n        },\n        redistribute : function(cols, max){\n            return redistributeUnits(cols, max);\n        }\n\n    };\n});\n\n","define('taoQtiItem/qtiCreator/editor/targetFinder',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/editor/ckEditor/dtdHandler',\n    'taoQtiItem/qtiCreator/helper/qtiElements'\n], function($, _, dtdHandler, qtiElements){\n    'use strict';\n\n    var _qtiHtmlEditableTypes = {\n        'itemBody' : '.widget-textBlock > [data-html-editable]',\n        'prompt' : '.qti-prompt[data-html-editable]',\n        'choice' : '.qti-choice [data-html-editable]'\n    };\n\n    /**\n     * Extends taoQtiItem/qtiCreator/editor/dtdHandler\n     * to retrieve a collection of jQuery elements within a given context\n     */\n    var targetFinder = (function($, _, dh){\n\n        /**\n         * Inherit functions from parent class\n         */\n        var inheritedFunctions = (function(){\n            var fns = {}, fn;\n            for(fn in dh){\n                if(!dh.hasOwnProperty(fn)){\n                    continue;\n                }\n                if(!(dh[fn] instanceof Function)){\n                    continue;\n                }\n                fns[fn] = dh[fn];\n            }\n            return fns;\n        }());\n\n        /**\n         * Find potential targets within a given context\n         *\n         * @param child\n         * @param context (string|DOM element|jQuery element), defaults to document.body\n         * @returns {*}\n         */\n        var getTargetsFor = function(qtiClass, context){\n\n            var child,\n                $qtiContainers,\n                $targets = $();\n\n            context = context || document.body;\n            context = $(context);\n\n            if(qtiElements.is(qtiClass, 'inlineInteraction')){\n\n                $qtiContainers = context.find(_qtiHtmlEditableTypes['itemBody']);\n                child = 'object';\n\n            }else{\n\n                $qtiContainers = context.find(_.values(_qtiHtmlEditableTypes).join(','));\n                $qtiContainers = context.find(_qtiHtmlEditableTypes['itemBody']);//beta limitation\n                switch(qtiClass){\n                    case 'math':\n                        child = 'object';\n                        break;\n                    case 'object.audio':\n                    case 'object.video':\n                        child = 'object';\n                        break;\n                    default:\n                        child = qtiClass;\n                }\n            }\n\n            var parents = dh.getParentsOf(child),\n                parentSelector = parents.join(',');\n\n            $qtiContainers.each(function(){\n\n                var $qtiContainer = $(this),\n                    $widget = $qtiContainer.closest('.widget-box');\n\n                if($qtiContainer.is(parentSelector)){\n                    $targets = $targets.add($qtiContainer);\n                }\n                $targets = $targets.add($qtiContainer.find(parentSelector).not(function(){\n                    var $closest = $(this).closest('.widget-box');\n                    return ($closest.length && $closest[0] !== $widget[0]);\n                }));\n            });\n\n            return $targets;\n        };\n\n        /**\n         * return both parent and own functions\n         */\n        return _.extend(inheritedFunctions, {\n            getTargetsFor : getTargetsFor\n        });\n\n    }($, _, dtdHandler));\n\n    return targetFinder;\n});\n\n\n","define('taoQtiItem/qtiCreator/editor/gridEditor/droppable',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/gridUnits',\n    'taoQtiItem/qtiCreator/helper/qtiElements',\n    'taoQtiItem/qtiCreator/editor/gridEditor/helper',\n    'taoQtiItem/qtiCreator/editor/gridEditor/arrow',\n    'taoQtiItem/qtiCreator/editor/targetFinder'\n], function($, _, gridUnits, qtiElements, helper, arrow, targetFinder){\n\n    var droppableGridEditor = {};\n\n    droppableGridEditor.createDroppableBlocks = function createDroppableBlocks(qtiClass, $el, options){\n\n        options = options || {};\n\n        var minUnits = (typeof options.min === 'string') ? options.min : 0,\n            $colInitial = (options.initialPosition instanceof $) ? options.initialPosition : null,\n            ns = options.namespace ? '.' + options.namespace : '',\n            data = options.data || {};\n\n        var $placeholder = $('<div>', {'id' : 'qti-block-element-placeholder', 'class' : 'qti-droppable-block-hover'}),\n        marginWidth = parseFloat($el.find('[class^=\"col-\"]:last, [class*=\" col-\"]:last').css('margin-left')),\n            isEmpty = ($el.children('.grid-row').length === 0);\n\n        //add dropping class (used to fix col-*:first margin issue);\n        $el.addClass('dropping');\n\n        //prepare tmp rows and cols\n        if(isEmpty){\n\n            $el.append(_getNewRow().append(_getNewCol().addClass('col-12')));\n\n        }else{\n\n            $el.find('.grid-row').each(function(){\n\n                var $row = $(this), cols = [];\n\n                //build tmp new cols:\n                var maxHeight = 0;\n                var $cols = $row.children(':not(.new-col)').each(function(){\n                    $(this).before(_getNewCol().attr('data-index', $(this).index() / 2));\n                    maxHeight = Math.max($(this).height(), maxHeight);\n                    cols.push({\n                        'elt' : $(this),\n                        'units' : parseInt($(this).attr('data-units'))\n                    });\n                });\n                $cols.last().after(_getNewCol().attr('data-index', 'last'));\n                $cols.height(maxHeight);\n\n                $row.data('distributed-units', gridUnits.distribute(cols, minUnits, 12));\n\n                //build tmp new rows:\n                $row.before(_getNewRow().append(_getNewCol()));\n\n            }).last().after(_getNewRow().append(_getNewCol()));\n        }\n\n        //append the dropping element placeholder:\n        var _appendPlaceholder = function($col){\n\n            if($col.length){\n\n                $placeholder\n                    .data('dropped', true)\n                    .show()\n                    .parent().removeClass('col-12')\n                    .parent().removeData('active');\n\n                $col.append($placeholder);\n\n            }else{\n                //insertion failed\n            }\n        };\n\n        //restore the dropping element placeholder back to its default location:\n        var _resetPlaceholder = function(){\n\n            $placeholder.parent().parent().removeData('active');\n\n            $placeholder\n                .removeData('dropped')\n                .hide();\n\n            $el.append($placeholder);\n        };\n\n        //function to be called for inter-column insertions:\n        var _insertBetween = function($col, location){\n\n            if(location === 'left' || location === 'right'){\n                _restoreTmpCol($el);\n                var $row = $col.parent().attr('data-active', true);\n\n                //store temporary the original classes before columns are resized\n                $row.children(':not(.new-col)').each(function(){\n                    $(this).attr('data-original-class', $(this).attr('class'));\n                });\n\n                var distributedUnits = $row.data('distributed-units');\n                var $newCol = (location === 'left') ? $col.prev() : $col.next();\n                _appendPlaceholder($newCol);\n\n                if(distributedUnits.refactoredTotalUnits > 12){\n                    //need to create a new row\n                    var newUnit = ($newCol.is(':last-child') && distributedUnits.last) ? distributedUnits.last : distributedUnits.middle;\n                    $newCol.attr('class', 'new-col col-' + newUnit);\n\n                    var cumulatedUnits = 0,\n                        index = $newCol.data('index');\n\n                    var _appendToNextRow = function _appendToNextRow($row, $newCol){\n                        $row.next().attr('data-active', true).append($newCol);\n                    };\n\n                    if(index === 'last'){\n                        _appendToNextRow($row, $newCol);\n                    }else{\n                        for(var i in distributedUnits.cols){\n\n                            if(i == index){//note: no strict comparison here\n                                if(cumulatedUnits + newUnit > 12){\n                                    _appendToNextRow($row, $newCol)\n                                }\n                                cumulatedUnits += newUnit;\n                            }\n\n                            var col = distributedUnits.cols[i];\n                            if(cumulatedUnits + col.refactoredUnits > 12){\n                                _appendToNextRow($row, col.elt);\n                            }\n                            col.elt.attr('class', 'col-' + col.refactoredUnits);\n                            cumulatedUnits += col.refactoredUnits;\n                        }\n                    }\n\n                }else{\n                    if($newCol.is(':last-child') && distributedUnits.last){\n                        $newCol.attr('class', 'new-col col-' + distributedUnits.last);\n                    }else{\n                        $newCol.attr('class', 'new-col col-' + distributedUnits.middle);\n                    }\n                    _.each(distributedUnits.cols, function(col){\n                        col.elt.attr('class', 'col-' + col.refactoredUnits);\n                    });\n                }\n\n                var h = _resetColsHeight($col);\n                $placeholder.css('height', '100%').parent().height(h);//causes issue on new-col sizes!\n            }\n        };\n\n        //recalculate the cols height according to new layout\n        var _resetColsHeight = function($col, self){\n\n            var maxHeight = 0;\n            if(self === undefined){\n                self = true;\n            }\n\n            $placeholder.css('height', 'auto').parent().removeAttr('style');//remove added height, to reset the height to auto\n\n            var $cols = $col.siblings('[class^=\"col-\"]:not(.new-col), [class*=\" col-\"]:not(.new-col)').andSelf();\n            $cols.removeAttr('style');//remove added height, to reset the height to auto\n            $cols.each(function(){\n                maxHeight = Math.max($(this).height(), maxHeight);\n            });\n\n            $cols.height(maxHeight);\n            if(!self){\n                $col.removeAttr('style');\n            }\n            return maxHeight;\n        };\n\n        _resetPlaceholder();\n\n        //manage initial positioning, useful in the \"move\" context\n        if($colInitial && $colInitial.length){\n\n            var $prev = $colInitial.prevAll('[class^=\"col-\"], [class*=\" col-\"]').first();\n            var $next = $colInitial.nextAll('[class^=\"col-\"], [class*=\" col-\"]').first();\n            if($prev.length){\n                _insertBetween($prev, 'right');\n            }else if($next.length){\n                _insertBetween($next, 'left');\n            }else{\n                //replace it self...\n            }\n        }\n\n        //bind all event handlers:\n        $el.on('mouseover.gridEdit.gridDragDrop', function(){\n\n            var $previousCol = $placeholder.parent('.new-col');\n            _restoreTmpCol($el);//restore tmp columns before reevaluating the heights\n            _resetColsHeight($previousCol, false);//recalculate the height of the previously located row\n\n            var $newCol = $el.find('.new-col:last').css('background', '1px solid red');\n            _appendPlaceholder($newCol);\n            $newCol.addClass('col-12');\n\n        }).on('mouseover.gridEdit.gridDragDrop', '.grid-row', function(e){\n\n            e.stopPropagation();\n\n        }).on('mouseenter.gridEdit.gridDragDrop', '[class^=\"col-\"]:not(.new-col), [class*=\" col-\"]:not(.new-col)', function(e){\n\n            var $col = $(this), $previousCol = $placeholder.parent('.new-col');\n\n            _resetPlaceholder();//remove the placeholder from the previous location\n            _restoreTmpCol($el);//restore tmp columns before reevaluating the heights\n\n            _resetColsHeight($previousCol, false);//recalculate the height of the previously located row\n            _resetColsHeight($col);//recalculate the height for the current row\n\n            arrow.create($col, {marginWidth : marginWidth});\n\n        }).on('arrowenter.gridEdit.gridDragDrop', '[class^=\"col-\"]:not(.new-col), [class*=\" col-\"]:not(.new-col)', function(e, position){\n\n            _insertBetween($(this), position);\n\n        }).on('mousemove.gridEdit.gridDragDrop', '[class^=\"col-\"]:not(.new-col), [class*=\" col-\"]:not(.new-col)', _.throttle(function(e){\n\n            //insert element above or below the col's row:\n            var $col = $(this),\n                h = $col.height(),\n                relY = e.pageY - $col.offset().top;\n\n            //insert on top or bottom:\n            var $newRow = (relY < h / 2) ? $col.parent().prev() : $col.parent().next();\n            if(!$newRow.find('#qti-block-element-placeholder').length){//append row only not already included\n                var $newCol = $newRow.attr('data-active', true).children('.new-col').addClass('col-12');\n                if($newCol.length){\n                    _appendPlaceholder($newCol);\n                }else{\n                    console.log('insert form col failure ', $col, $newRow);\n                }\n            }\n\n        }, 100)).on('mouseleave.gridEdit.gridDragDrop', '[class^=\"col-\"], [class*=\" col-\"]', function(e){\n\n            //destroy inter-column insertion helper\n            e.stopPropagation();\n            $(this).find('.grid-edit-insert-box').remove();\n\n        }).on('mouseleave.gridEdit.gridDragDrop', function(){\n\n            //restore dom when the mouse leaves the drop area \"$el\":\n            $placeholder.hide();\n            _resetPlaceholder();\n            _restoreTmpCol($el);\n\n        });\n\n        //listen to the end of the dragging\n        //on element drop (mouseout in the drop area $el)\n        $el.one('dragoverstop.gridEdit', function(){\n\n            $el.off('.gridEdit.gridDragDrop');\n\n            var $selectedCol = $placeholder.parent('.new-col'),\n                dropped = !!$selectedCol.length;\n\n            if(dropped){//has been properly dropped:\n\n                //make the placeholder permanent\n                $placeholder.removeAttr('id').removeClass('qti-droppable-block-hover');\n\n                //make the dropped col permanent\n                $selectedCol\n                    .data('qti-class', qtiClass)\n                    .removeClass('new-col')\n                    .removeAttr('data-index');\n\n                helper.setUnitsFromClass($selectedCol);\n\n                //make the dropped row permanent\n                $selectedCol.parent('.grid-row-new').removeClass('grid-row-new');\n\n                //manage the temp grid-new-row:\n                $el.find('.grid-row[data-active=true]').each(function(){\n\n                    var $row = $(this);\n\n                    $row.removeClass('grid-row-new');\n\n                    //make the modified  col-n class permanent and update data attribute \"data-units\"\n                    $row.children(':not(.new-col)').removeAttr('data-original-class').each(function(){\n                        helper.setUnitsFromClass($(this));\n                    });\n                });\n            }\n\n            _destroyDroppableBlocks($el);\n\n            if(dropped && $placeholder.data('dropped')){\n                //trigger dropped event\n                $el.trigger('dropped.gridEdit' + ns, [qtiClass, $placeholder, data]);\n            }\n\n        });\n\n    };\n\n    var _mapQtiToHtml = function _mapQtiToHtml(qtiClass){\n\n        if(qtiElements.is(qtiClass, 'inlineInteraction')){\n            return 'object';//an inlineInteraction is a flow, like xhtml \"object\" elements\n        }else{\n            switch(qtiClass){\n                case 'math':\n                    return 'div';\n                case 'object.audio':\n                case 'object.video':\n                    return 'object';\n            }\n        }\n\n        //else return the html itself : a qti img is an img:\n        return qtiClass;\n    };\n\n    var _pulseTimer = null;\n    var _pulse = function($el){\n\n        if(_pulseTimer){\n            clearInterval(_pulseTimer);\n        }\n        var intervalDuration = 1000;\n\n        setInterval(function(){\n\n            $el.animate({\n                opacity : 0.1\n            }, intervalDuration * 0.5, function(){\n                $el.animate({\n                    opacity : 0.9\n                }, intervalDuration * 0.5);\n            });\n\n        }, intervalDuration);\n\n    };\n\n    droppableGridEditor.createDroppableInlines = function createDroppableInlines(qtiClass, $el, options){\n\n        var ns = options.namespace ? '.' + options.namespace : '',\n            data = options.data || {},\n            $targets = targetFinder.getTargetsFor(qtiClass, $el),\n            dropped = false;\n\n        $targets.addClass('drop-target');\n\n        $targets.contents().each(function(){\n            //a text node\n            if(this.nodeType === 3 && !this.nodeValue.match(/^\\s+$/)){\n                $(this).replaceWith($.map(this.nodeValue.split(/(\\S+)/), function(w){\n                    return w.match(/^\\s*$/) ? document.createTextNode(w) : $('<span>', {'text' : w, 'class' : 'qti-word-wrap'}).get();\n                }));\n            }\n        });\n\n        var $placeholder = $('<span>', {'id' : 'qti-inline-element-placeholder', 'data-inline' : true});\n        $placeholder.append($('<span>', {'class' : 'cursor-h'})).append($('<span>', {'class' : 'cursor-v'}));\n        _pulse($placeholder);\n        var _resetPlaceholder = function($el){\n            $placeholder.detach();\n            dropped = false;\n        };\n        _resetPlaceholder($el);\n\n        var _showPlaceholder = function(){\n            dropped = true;\n            return $placeholder;\n        };\n\n        $el.on('mousemove.gridEdit.gridDragDrop', 'span.qti-word-wrap', function(e){\n\n            var w = $(this).width(),\n                parentOffset = $(this).offset(),\n                relX = e.pageX - parentOffset.left;\n\n            $placeholder;\n            if(relX < w / 2){\n                $(this).before(_showPlaceholder());\n            }else{\n                $(this).after(_showPlaceholder());\n            }\n\n        }).on('mouseover.gridEdit.gridDragDrop', function(e){\n            \n            e.stopPropagation();\n            var $target = $(e.target);\n            \n            if($target.hasClass('drop-target') && !$target.find($placeholder).length){\n                \n                //make first insertion easier\n                $target.append(_showPlaceholder());\n                \n            }else if($target[0] !== $placeholder[0]\n                && !$target.hasClass('qti-word-wrap')\n                && !$target.children('.qti-word-wrap').length){\n\n                _resetPlaceholder($el);\n            }\n        });\n\n        //listen to the end of the dragging \n        $el.one('dragoverstop.gridEdit', function(){\n            \n            //make placeholder permanent\n            if(dropped){\n                $placeholder.removeAttr('id').removeAttr('class');\n            }\n\n            //destroy droppable\n            _destroyDroppableInlines($el);\n\n            //call callback function:\n            if(dropped){\n                $el.trigger('dropped.gridEdit' + ns, [qtiClass, $placeholder, data]);\n            }else{\n                //clean up :\n                $placeholder.remove();\n                $placeholder = null;\n            }\n        });\n    };\n\n    droppableGridEditor.destroyDroppables = function destroyDroppables($el){\n\n        _destroyDroppableInlines($el);\n        _destroyDroppableBlocks($el);\n    };\n\n    var _destroyDroppableInlines = function($el){\n\n        $el.off('.gridEdit.gridDragDrop');\n\n        $el.find('span.qti-word-wrap').replaceWith(function(){\n            return $(this).text();\n        });\n        \n        $el.find('.drop-target').removeClass('drop-target');\n    };\n\n    var _destroyDroppableBlocks = function($el){\n\n        $el.removeClass('dropping').off('.gridEdit.gridDragDrop');\n\n        $el.find('[class^=\"col-\"], [class*=\" col-\"]').removeAttr('style');\n\n        _restoreTmpCol($el);\n\n        var _toBeRemoved = [\n            '#qti-block-element-placeholder',\n            '.new-col',\n            '.grid-row-new',\n            '.grid-edit-insert-box'\n        ];\n\n        $el.find(_toBeRemoved.join(',')).remove();\n\n    };\n\n    var _getNewRow = function _getNewRow(){\n        return $('<div>', {'class' : 'grid-row grid-row-new', 'data-units' : 0});\n    };\n\n    var _getNewCol = function _getNewCol(){\n        return $('<div>', {'class' : 'new-col'});\n    };\n\n    var _restoreTmpCol = function _restoreTmpCol($el){\n        $el.find('.grid-row').each(function(){\n            var $row = $(this);\n            $row.children('.new-col').attr('class', 'new-col').removeAttr('style');//reset all column\n\n            //restore location of overflown cols\n            if($row.hasClass('grid-row-new')){\n                var $children = $row.children();\n                if($children.length > 1){\n                    $row.prev().append($children);\n                    $row.append($children.first());\n                }\n            }\n\n            //restore original classes\n            $row.children(':not(.new-col)').each(function(){\n                var $col = $(this), originalClasses = $col.attr('data-original-class');\n                if(originalClasses){\n                    $col.attr('class', originalClasses).removeAttr('data-original-class');\n                }\n            });\n            $row.removeAttr('data-active');\n        });\n    };\n\n    return droppableGridEditor;\n});\n\n","define('taoQtiItem/qtiCreator/editor/gridEditor/draggable',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/qtiElements',\n    'taoQtiItem/qtiCreator/editor/gridEditor/droppable',\n    'jqueryui'\n], function($, _, QtiElements, droppable){\n\n    var _insertableDefaultsOptions = {\n        helper : function(){\n            return $(this).clone();\n        }\n    };\n\n    var createInsertable = function createInsertable($el, $to, opts){\n\n        var options = _.defaults(opts, _insertableDefaultsOptions);\n\n        createDraggable($el, $to, {\n            helper : options.helper,\n            namespace : 'insertable'\n        });\n    };\n\n    var createDraggable = function createDraggable($el, $to, opts){\n\n        var options = _.defaults(opts, {\n            distance : 1,\n            helper : 'original'\n        });\n\n        $el.draggable({\n            distance : parseInt(options.distance),\n            helper : options.helper,\n           // appendTo : $('#item-editor-panel'), // @TODO needs to be set to $to => very important ! to enable movable correct positioning\n            // this will create the issue that elements dragged from the sidebar will be UNDER the sidebar\n            // so far no solution found (before scroll-new scroll bar r.XXX)\n            appendTo : $(document.body), // @TODO needs to be set to $to => very important ! to enable movable correct positioning\n                                         // this will create the issue that elements dragged from the sidebar will be UNDER the sidebar\n                                         // so far no solution found\n            opacity : 1,\n            scroll : false,\n            cursor : 'crosshair',\n            cursorAt : {left : -5, bottom : -5},\n            create : function(){\n                $(this).addClass('grid-draggable');\n            },\n            start : function(e, ui){\n                \n                $to.trigger('beforedragoverstart.gridEdit');\n\n                if(typeof(options.start) === 'function'){\n                    options.start.call(this, e, ui);\n                }\n\n                $(this).removeClass('grid-draggable-active');\n\n                //define the type of draggable block/inline?\n                var qtiClass = $(this).data('qti-class');\n                if(QtiElements.isInline(qtiClass)){\n                    droppable.createDroppableInlines(qtiClass, $to, options);\n                }else if(QtiElements.isBlock(qtiClass)){\n                    droppable.createDroppableBlocks(qtiClass, $to, options);\n                }else{\n                    throw 'undefined qti class';\n                }\n\n                $to.trigger('dragoverstart.gridEdit');\n            },\n            stop : function(e, ui){\n                \n                //restore dom:\n                $('body').css('cursor', 'auto');\n                \n                //no longer needed\n                ui.helper.remove();\n                \n                //fire \"stop\" events\n                \n                if(typeof(options.stop) === 'function'){\n                    options.stop.call(this, e, ui);\n                }\n\n                $to.trigger('dragoverstop.gridEdit');\n            }\n        });\n\n        $el.on('mousedown.gridDraggable.gridEdit', function(){\n            $(this).addClass('grid-draggable-active');\n        }).on('mouseup.gridDraggable.gridEdit', function(){\n            $(this).removeClass('grid-draggable-active');\n        });\n    };\n\n    var createMovable = function createMovable($el, $to){\n\n        var $parent = $el.parent('[class^=\"col-\"], [class*=\" col-\"]');\n        createDraggable($el, $to, {\n            distance : 5,\n            initialPosition : $el.parent(),\n            namespace : 'movable',\n            start : function(e, ui){\n\n                $el.hide();\n\n                $parent.data({\n                    'initial-position' : true,\n                    'initial-class' : $parent.attr('class')\n                }).attr('class', 'new-col');\n            },\n            helper : function(){\n\n                return $(this).clone()\n                    .addClass('grid-draggable-helper')\n                    .css({\n                    height : $(this).height(),\n                    width : $(this).width()\n                });\n            },\n            stop : function(e, ui){\n\n                //restore initial position if given:\n                if(!$el.data('grid-element-dropped')){\n                    $parent.attr('class', $parent.data('initial-class'));\n                }\n\n                //re-init the dropped value:\n                $el.data('grid-element-dropped', false);\n//                $el.removeData('grid-element-dropped');\n\n                //show it\n                $el.show();\n\n            },\n            data : {\n                widget : $el.data('widget')\n            }\n        });\n\n    };\n\n    var _destroyDraggables = function _destroyDraggables($el){\n        $el.draggable('destroy');\n        $el.removeClass('grid-draggable');\n        $el.off('.gridDraggable');\n    };\n\n    return {\n        createInsertable : function($el, $to, opts){\n            createInsertable($el, $to, opts);\n        },\n        createMovable : function($el, $to, opts){\n            createMovable($el, $to, opts);\n        },\n        destroy : _destroyDraggables\n    };\n});\n\n","define('taoQtiItem/qtiCreator/editor/jquery.gridEditor',[\n    'jquery',\n    'taoQtiItem/qtiCreator/editor/gridEditor/helper',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/editor/gridEditor/draggable',\n    'taoQtiItem/qtiCreator/editor/gridEditor/resizable'\n], function($, helper, contentHelper, draggable, resizable) {\n\n    'use strict';\n\n    $.fn.gridEditor = function(options) {\n\n        var opts = {};\n        var method = '';\n        var args = [];\n        var ret = undefined;\n        if (typeof options === 'object') {\n            opts = $.extend({}, $.fn.gridEditor.defaults, options);\n        } else if (options === undefined) {\n            opts = $.extend({}, $.fn.gridEditor.defaults);//use default\n        } else if (typeof options === 'string') {\n            if (typeof methods[options] === 'function') {\n                method = options;\n                args = Array.prototype.slice.call(arguments, 1);\n            }\n        }\n\n        this.each(function() {\n            var $this = $(this);\n            if (method) {\n                if (isCreated($this)) {\n                    ret = methods[method].apply($(this), args);\n                } else {\n                    $.error('call of method of gridEditor while it has not been initialized');\n                }\n            } else if (!isCreated($this) && typeof opts === 'object') {\n                create($this, opts);\n            }\n        });\n\n        if (ret === undefined) {\n            return this;\n        } else {\n            return ret;\n        }\n    };\n\n    $.fn.gridEditor.defaults = {\n        'elementClass': 'itemBody'\n    };\n\n    var methods = {\n        addInsertables: function($elts, options) {\n            var $grid = $(this);\n            $elts.each(function() {\n                draggable.createInsertable($(this), $grid, options);\n            });\n        },\n        createMovables: function($elts) {\n            var $grid = $(this);\n            $elts.each(function() {\n                draggable.createMovable($(this), $grid);\n            });\n        },\n        destroy: function() {\n            destroy($(this));\n        },\n        getContent: function() {\n            return getContent($(this));\n        },\n        setContent: function(content) {\n            if (content) {\n                setContent($(this), content);\n            }\n        },\n        resizable: function() {\n            resizable.create($(this));\n        }\n    };\n\n    function isCreated($elt) {\n        return (typeof $elt.data('qti-grid-options') === 'object');\n    }\n\n    function create($elt, options) {\n\n        $elt.data('qti-grid-options', options);\n\n        //initialize grid count\n        $elt.find('.grid-row').each(function() {\n            var totalUnits = 0;\n            $(this).children('[class*=\" col-\"], [class^=\"col-\"]').each(function() {\n                totalUnits += helper.setUnitsFromClass($(this));\n            });\n//            $(this).attr('data-units', parseInt(totalUnits));//useless??\n        });\n    }\n\n    function destroy($elt) {\n        contentHelper.destroyGridWidgets($elt);\n    }\n\n    function getContent($el) {\n        return contentHelper.getContent($el);\n    }\n\n});\n","define('taoQtiItem/qtiCreator/editor/simpleContentEditableElement',['jquery', 'lodash'], function($, _){\n\n    function create($container, selector, callback){\n\n        function _init($elt){\n            $elt.attr('contenteditable', true).addClass('simple-editable');\n        }\n\n        _init($container.find(selector));\n\n        $container.on('mouseenter.simpleeditable', selector, _.throttle(function(){\n\n            var $elt = $(this);\n            if(!$elt.attr('contenteditable')){\n                //incase the element does not exists on init()\n                _init($elt);\n            }\n\n        }, 200)).on('keyup.simpleeditable', selector, _.throttle(function(e){\n\n            callback($(this).text());\n\n        }, 200)).on('keydown.simpleeditable', selector, function(e){\n\n            if(e.which === 13){\n                e.preventDefault();\n                $(this).blur();\n            }\n        });\n\n    }\n\n    function destroy($container){\n\n        $container.find('.simple-editable')\n            .removeClass('simple-editable')\n            .removeAttr('contenteditable');\n\n        $container.off('.simpleeditable');\n    }\n\n    return {\n        create : create,\n        destroy : destroy\n    };\n\n});\n\n","define('taoQtiItem/qtiCreator/editor/widgetToolbar',[\n    'jquery',\n    'i18n'\n], function($, __){\n    'use strict';\n\n\n    var defaultConfig = [\n        [\n            {\n                title : 'Question',\n                'class' : 'question-trigger',\n                status : 'off', // on | disabled | off => default\n                fn : function(e){\n                    var target = arguments[1],\n                        toolbar = arguments[2],\n                        responseButton = toolbar.find('.answer-trigger a'),\n                        answerEditors = target.find('[data-edit=\"answer\"]'),\n                        questionEditors = target.find('[data-edit=\"question\"]');\n\n                    responseButton.removeClass('tlb-text-button-on').addClass('tlb-text-button-off');\n                    questionEditors.show();\n                    answerEditors.hide();\n                    target.data('mode', 'question');\n                }\n            },\n            {\n                title : 'Answer',\n                'class' : 'answer-trigger',\n                fn : function(e){\n                    var target = arguments[1],\n                        toolbar = arguments[2],\n                        contentButton = toolbar.find('.question-trigger a'),\n                        answerEditors = target.find('[data-edit=\"answer\"]'),\n                        questionEditors = target.find('[data-edit=\"question\"]');\n\n                    contentButton.removeClass('tlb-text-button-on').addClass('tlb-text-button-off');\n                    answerEditors.show();\n                    questionEditors.hide();\n                    target.data('mode', 'answer');\n                    target.find('[contenteditable]').attr('contenteditable', false);\n                    $(document).trigger('widgetBlur');\n                    //$('.cke.cke_reset_all').remove();\n                    //also remove ck and unbind\n                }\n            }\n        ],\n        'spacer', // |  ' '\n//    [\n//      {\n//        icon: 'edit',\n//        title: 'Edit',\n//        fn: function () {\n//          var widget = $(this).parents('.widget'),\n//            id = widget.attr('id') || randId();\n//\n//          widget.attr('contentEditable', true);\n//          widget.attr('id', id);\n//\n//          ckeditor.inline(id);\n//          //ckFocusManager.focus();\n//          console.log(widget);\n//        }\n//      }\n//    ],\n//    [\n//      {\n//        icon: 'move',\n//        title: 'Move',\n//        fn: function () {\n//          console.log('Move');\n//        }\n//      },\n//      'separator', // | '-'\n//      {\n//        icon: 'resize-grid',\n//        title: 'Resize',\n//        fn: function () {\n//          console.log('Resize');\n//        }\n//      }\n//   ],\n        [\n            {\n                icon : 'bin',\n                title : 'Delete',\n                fn : function(e){\n                    // arguments[1] is the box the toolbar belongs to\n                    // arguments[2] is the toolbar itself\n                    var target = arguments[1],\n                        toolbar = arguments[2],\n                        msg = $('<span>', {text : __('You have deleted an element.') + ' '}),\n                    undo = $('<a>', {text : __('Undo'), href : '#'}),\n                    icon = $('<span>', { 'class' : 'icon-info'}),\n                    closer = $('<span>', {title : 'Remove Message', 'class' : 'icon-close close-trigger'}),\n                    feedback = $('<div>', { 'class' : 'feedback-info'}).hide();\n\n                    closer.on('click', function(){\n                        feedback.fadeOut(function(){\n                            feedback.remove();\n                            target.remove();\n                            toolbar.remove();\n                        });\n                    });\n\n                    undo.on('click', function(e){\n                        e.preventDefault();\n                        feedback.remove();\n                        target.removeClass('deleted').fadeIn();\n                    });\n\n                    feedback.append(icon);\n                    feedback.append(msg);\n                    feedback.append(undo);\n                    feedback.append(closer);\n                    target.before(feedback);\n\n                    toolbar.hide();\n                    target.hide().addClass('deleted');\n                    feedback.fadeIn(function(){\n                        setTimeout(function(){\n                            closer.trigger('click');\n                        }, 6500)\n                    });\n                }\n            }\n        ]\n    ];\n\n\n\n    /**\n     * build breaks, separators etc.\n     * @param type\n     * @returns {*|HTMLElement}\n     */\n    var structure = function(type){\n        // makes config more similar to ckeditor\n        switch(type){\n            case '/':\n                type = 'break';\n                break;\n            case '-':\n                type = 'separator'\n                break;\n            case ' ':\n                type = 'spacer'\n                break;\n        }\n        return $('<span>', { 'class' : 'tlb-' + type});\n    };\n\n\n    var bar = function(items, target, toolbar){\n        var bar = $('<div>', {'class' : 'tlb-bar'}),\n        group,\n            // does first element have an icon? if not the items are buttons\n            isTextButton = !items[0].icon,\n            l = items.length,\n            i;\n\n\n        bar.append(structure('start'));\n\n        if(isTextButton){\n            for(i = 0; i < l; i++){\n                if($.type(items[i]) === 'string'){\n                    bar.append(structure(items[i]));\n                }\n                else{\n                    items[i].target = target;\n                    items[i].toolbar = toolbar;\n                    bar.append(button(items[i], isTextButton));\n                }\n            }\n        }\n        else{\n            group = $('<div>', {'class' : 'tlb-group'});\n            bar.append(group);\n            for(i = 0; i < l; i++){\n                if($.type(items[i]) === 'string'){\n                    group.append(structure(items[i]));\n                }\n                else{\n                    items[i].target = target;\n                    items[i].toolbar = toolbar;\n                    group.append(button(items[i], isTextButton));\n                }\n            }\n        }\n\n        bar.append(structure('end'));\n        return bar;\n    };\n\n    /**\n     * build a single button\n     *\n     * @param config\n     * @param isTextButton bool\n     * @returns {*|HTMLElement}\n     */\n    var button = function(config, isTextButton){\n        var a,\n            span,\n            button,\n            icon,\n            text,\n            // re-assigning and deleting serves to\n            // allow any attribute in the config\n            status = config.status || 'off',\n            fn = config.fn || function(){\n        },\n            target = config.target || $(),\n            toolbar = config.toolbar || $();\n\n        delete(config.status);\n        delete(config.fn);\n        delete(config.target);\n        delete(config.toolbar);\n\n        if(!isTextButton){\n\n            // handle common misconfiguration with 'icon-' prefix\n            icon = 'icon-' + (config.icon.replace('icon-', ''));\n            delete(config.icon);\n\n            config['class'] = config['class'] ? config['class'] + ' tlb-button-' + status : 'tlb-button-' + status;\n\n            button = $('<a>', config);\n            span = $('<span>', {'class' : icon});\n            button.append(span);\n        }\n        else{\n            text = __(config.title);\n            delete(config.title);\n\n            config['class'] = config['class'] ? config['class'] + ' tlb-text-button-box' : 'tlb-text-button-box';\n\n            button = $('<span>', config);\n            a = $('<a>', {'class' : 'tlb-text-button-' + status});\n            span = $('<span>', {'class' : 'tlb-text', text : text});\n            button.append(a);\n            a.append(span);\n        }\n\n        button.on('click.toolbar', function(e){\n            // disabled buttons do nothing\n            if(button.hasClass('tlb-text-button-disabled') || button.hasClass('tlb-button-disabled')){\n                return false;\n            }\n            if(isTextButton){\n                button.find('a').toggleClass('tlb-text-button-off').toggleClass('tlb-text-button-on');\n            }\n            else{\n                button.toggleClass('tlb-button-off').toggleClass('tlb-button-on');\n            }\n            fn.apply(this, [e, target, toolbar]);\n        });\n\n        return button;\n    };\n\n\n    /**\n     * merge configurations\n     *\n     * @param config\n     * @param extendDefaultConfig\n     * @returns {*}\n     */\n    var handleConfig = function(config, extendDefaultConfig){\n        // config = []\n        if($.isArray(config) && !config.length){\n            config = false;\n        }\n\n        // config is now either a proper array or false or undefined\n        // 1. false or undefined - use the default\n        if(!config){\n            config = defaultConfig;\n        }\n        // 2. proper array - should the default be extended or not?\n        else if(extendDefaultConfig){\n            config = $.extend(defaultConfig, config);\n        }\n\n        return config;\n    };\n\n    /**\n     * Configuration and resulting toolbar structure\n     *\n     * tlb            // implicit\n     *   top          // implicit\n     *\n     *     ****** config starts here *****\n     *\n     *     box        // = parent element []\n     *       bar      // = [] | string 'break' or '/' | string 'spacer' or ' '\n     *         { icon, title, fn [, status, anyAttribute] } | { title, fn [, status, anyAttribute] } | string 'separator' or '-'\n     *       /bar     // implicit\n     *       bar | break\n     *     /box       // implicit\n     *\n     *     ****** config ends here *****\n     *\n     *   /top         // implicit\n     * /tlb           // implicit\n     *\n     * bar configuration:\n     * []                    creates for each element one of the following\n     *   { icon, title, fn [, status] } creates a square button with a text icon\n     *   { title, fn [, status] }       creates a button with text\n     *     icon:   can be with or without prefix e.g. 'icon-move' === 'move'\n     *     title:  title attribute or text when icon is not set\n     *     fn:     on click handler\n     *     status: optional 'off'|'on'|'disabled', default is 'off',\n     *     anyAttribute: any HTML attribute, 'class' will be appended to the default button class\n     *   Note: { icon, title, fn [, status] } and { icon, title [, status] } cannot be mixed within one group!\n     *   'separator' or '-'    creates a vertical line\n     *\n     * 'break' or '/'          creates a new line\n     * 'spacer' or ' '         creates a horizontal distance in the size of a square button\n     *\n     * @param config\n     * @param target\n     */\n    var buildToolbar = function(config, target, tlbWrapper){\n\n        // 1st level container\n        var tlb = $('<div>', {'class' : 'tlb'}),\n        // 2nd level container\n        top = $('<div>', {'class' : 'tlb-top'}),\n        // 3rd level container\n        box = $('<div>', {'class' : 'tlb-box'}),\n        i,\n            ic = config.length;\n\n        top.append(box);\n        tlb.append(top);\n\n        // box level\n        for(i = 0; i < ic; i++){\n            if($.type(config[i]) === 'string'){\n                box.append(structure(config[i]));\n            }\n            else{\n                box.append(bar(config[i], target, tlbWrapper));\n            }\n        }\n        tlb.data('edit', 'toolbar');\n        return tlb;\n    };\n\n\n\n    return (function(){\n\n        /**\n         * Add a tool bar to another element\n         *\n         * @param buttonConfig\n         * @param barConfig\n         * @returns {boolean}\n         */\n        var attach = function(buttonConfig, barConfig){\n\n            var defaultBarConfig = {\n                    offsetTop : -2,\n                    title : '',\n                    extendDefaultConfig : false,\n                    target : $()\n                },\n                toolbar,\n                target = $(barConfig.target),\n                title,\n                top,\n                tlbWrapper = target.prop('tlb') || $('<div>', {'class' : 'tlb-wrapper'});\n\n            if(!target.prop('tlb')){\n\n                buttonConfig = handleConfig(buttonConfig, barConfig.extendDefaultConfig);\n                barConfig = $.extend(defaultBarConfig, (barConfig || {}));\n\n\n                toolbar = buildToolbar(buttonConfig, target, tlbWrapper);\n\n                if(barConfig.title){\n                    title = $('<span>', {text : barConfig.title, 'class' : 'tlb-title', title : barConfig.title});\n                    tlbWrapper.append(title);\n                }\n\n                tlbWrapper.append(toolbar);\n\n                target.prop('tlb', tlbWrapper);\n\n                target.append(tlbWrapper);\n\n                // note: css parameters cannot be passed as an object\n                // since the DOM element must have its position\n                // before the size can be calculated\n                tlbWrapper.css('position', 'absolute');\n                tlbWrapper.css('display', 'none');\n                tlbWrapper.css('width', '100%');\n\n                top = defaultBarConfig.offsetTop - tlbWrapper.height();\n                tlbWrapper.css('top', top);\n            }\n\n            tlbWrapper.fadeIn();\n//\n//      $(document).on('click', function(e){\n//        if(!target.is(e.target)\n//          && !tlbWrapper.is(e.target)\n//          && target.has(e.target).length === 0\n//          && tlbWrapper.has(e.target).length === 0\n//          && !$(e.target).hasClass('.cke')) {\n//          target.find('[data-edit]').hide();\n//          tlbWrapper.hide();\n//          $(document).trigger('widgetBlur');\n//        }\n//      });\n\n            return tlbWrapper;\n        };\n\n        return {\n            attach : attach\n        };\n\n    }());\n\n});\n\n\n","define('taoQtiItem/qtiCreator/helper/adaptSize',[\n    'jquery'\n], function($){\n    'use strict';\n\n    function ucfirst(str){\n        return str.charAt(0).toUpperCase() + str.substr(1);\n    }\n\n    var adaptSize = (function(){\n\n        var height = function(elements){\n            _resize(elements, {height : 0});\n        };\n\n        var width = function(elements){\n            _resize(elements, {width : 0});\n        };\n\n        var both = function(elements){\n            _resize(elements, {height : 0, width : 0});\n        };\n\n        var _resize = function(elements, dimensions){\n\n            var dimension;\n\n            if(!(elements instanceof $)){\n                elements = $(elements);\n            }\n\n            // This whole function is based on calculating the largest height/width.\n            // Therefor the elements need to have style: height/width to be removed\n            // since otherwise we could never track when something is actually getting smaller than before.\n            elements.each(function(){\n                var element = $(this);\n                for(dimension in dimensions){\n                    element[dimension]('auto');\n                }\n            });\n\n            elements.each(function(){\n                var element = $(this);\n                for(dimension in dimensions){\n                    dimensions[dimension] = Math.max(dimensions[dimension], element['outer' + ucfirst(dimension)]());\n                }\n            });\n\n            elements.css(dimensions);\n        };\n\n        return {\n            width : width,\n            height : height,\n            both : both\n        };\n\n    })();\n\n    return adaptSize;\n});\n\n","define('taoQtiItem/qtiCreator/helper/devTools',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiCreator/helper/xmlRenderer',\n    'taoQtiItem/qtiCreator/model/helper/event'\n], function(_, $, xmlRenderer, event) {\n\n    var tools = {};\n\n    tools.listenStateChange = function() {\n\n        $(document).on('afterStateInit.qti-widget', function(e, element, state) {\n            console.log('->state : ' + state.name + ' : ' + element.serial);\n        }).on('afterStateExit.qti-widget', function(e, element, state) {\n            console.log('<-state : ' + state.name + ' : ' + element.serial);\n        });\n    };\n    \n    tools.getStates = function(item){\n        \n        var states = {},\n            elements = item.getComposingElements();\n        \n        _.each(elements, function(element){\n           var widget = element.data('widget');\n           if(widget){\n               states[element.getSerial()] = widget.getCurrentState().name;\n           }\n        });\n        \n        return states;\n    };\n    \n    tools.liveXmlPreview = function(item, $destination) {\n\n        //render qti xml:\n        $(document).on(event.getList().join(' '), _.throttle(function(){\n            \n            var rawXml = xmlRenderer.render(item);\n            \n            _printXml(rawXml, $destination);\n            \n        }, 200));\n\n    };\n\n    var _formatXml = function(xml) {\n        return vkbeautify.xml(xml, '\\t');\n    };\n\n    var _printXml = function(rawXml, $destination) {\n\n        var $code = $(),\n                xml = _formatXml(rawXml);\n\n        xml = xml\n                .replace(/&/g, \"&amp;\")\n                .replace(/</g, \"&lt;\")\n                .replace(/>/g, \"&gt;\")\n                .replace(/\"/g, \"&quot;\")\n                .replace(/'/g, \"&#039;\");\n\n        if ($destination.hasClass('language-markup')) {\n            $code = $destination;\n        } else {\n            $code = $destination.find('code.language-markup');\n            if (!$code.length) {\n                $code = $('<code>', {'class': 'language-markup'});\n                $destination.addClass('line-numbers').html($code);\n            }\n        }\n\n        if ($code.length) {\n            $code.html(xml);\n            Prism.highlightElement($code[0]);\n        }\n    };\n\n    return tools;\n});\n","define('taoQtiItem/qtiCreator/helper/dummyElement',[\n    'jquery',\n    'lodash'\n], function ($, _) {\n    'use strict';\n\n\n    var dummyElement = (function () {\n\n        var types = {\n            maths: {\n                icon: 'maths',\n                css: {\n                    width : 40,\n                    height : 22\n                }\n            },\n            image: {\n                icon: 'image',\n                css: {\n                    width : 50,\n                    height : 35\n                }\n            },\n            video: {\n                icon: 'video',\n                css: {\n                    width : 200,\n                    height : 150\n                }\n            },\n            media: {\n                icon: 'media',\n                css: {\n                    width : 150,\n                    height : 100\n                }\n            }\n        };\n\n        /**\n         * create dummy element\n         *\n         * Examples:\n         *\n         * 1. Generic placeholder\n         * dummyElement.get();\n         * -> <span class=\"dummy-element\" style=\"width:80px; height: 22px\"></span>\n         *\n         * 2. Pre-defined placeholder\n         * dummyElement.get('math|image|video|...')\n         * -> <span style=\"width: 150px; height: 100px; font-size: 80px; padding-top: 9px;\" class=\"dummy-element\">\n         *       <span class=\"icon-image\"></span>\n         *    </span>\n         *\n         * 3. Freestyle\n         * works almost like $('<element>'), except that 'element' and 'css' (both optionally) are part of an object\n         * dummyElement.get({ element: 'div', class: 'foo bar', css: { color: 'red'}})\n         * -> <div class=\"dummy-element foo bar\" style=\"color: red; width:80px; height: 22px\">\n         *       <span class=\"icon-image\"></span>\n         *    </div>\n         *\n         *\n         * @param arg {} | string\n         * @returns {*|HTMLElement}\n         */\n        var get = function (arg) {\n            var options = {\n                element: 'span',\n                'class': 'dummy-element',\n                css: {\n                    width : 80,\n                    height : 22\n                }\n            },\n            element,\n            $element,\n            $icon,\n            css,\n            finalOptions;\n\n            if(arg) {\n                if($.isPlainObject(arg)) {\n                    // class names must be added to 'dummy-element'\n                    if(arg.class) {\n                        options.class += ' ' + arg.class;\n                        delete(arg.class);\n                    }\n                    // 'deep' required to copy CSS correctly\n                    options = $.extend(true, {}, options, arg);\n                }\n                else if (types[arg]) {\n                    options = $.extend({}, options, types[arg]);\n                }\n            }\n\n            // icon\n            $icon = options.icon ? $('<span>', { class: 'icon-' + options.icon.replace('icon-', '') }) : false;\n\n            element = '<' + options.element + '>';\n\n            css = _.cloneDeep(options.css);\n\n            // adapt font size to container size\n            css['font-size'] = css.height && !css['font-size']\n                ? (css.height * .8)\n                : 14;\n\n            if(css['height'] > 30) {\n                css['padding-top'] = ((css['height'] - css['font-size']) / 2) * .9;\n            }\n\n            // don't scale background-picture on large elements\n            if(css.height && css.height > 100) {\n                css['background-size'] = 'auto';\n            }\n\n            finalOptions = _.cloneDeep(options);\n            delete(finalOptions.icon);\n            delete(finalOptions.element);\n            delete(finalOptions.css);\n\n            $element = $(element, finalOptions).css(css);\n\n            if($icon) {\n                $element.append($icon);\n            }\n            return $element;\n        };\n\n        return {\n            get: get\n        }\n\n    }());\n    return dummyElement;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/helper/uploadMime',[\n    'i18n'\n], function(__){\n\n    /**\n     * @TODO these mime types are not up-to-date, in particular the MS ones\n     * refer to http://filext.com/faq/office_mime_types.php\n     * @type {{getMimeTypes: getMimeTypes}}\n     */\n    var uploadMime = {\n        getMimeTypes : function() {\n            return [\n                { \"mime\" : \"application/zip\", \"label\" : __(\"ZIP archive\") },\n                { \"mime\" : \"text/plain\", \"label\" : __(\"Plain text\") },\n                { \"mime\" : \"application/pdf\", \"label\" : __(\"PDF file\") },\n                { \"mime\" : \"image/jpeg\", \"label\" : __(\"JPEG image\") },\n                { \"mime\" : \"image/png\", \"label\" : __(\"PNG image\") },\n                { \"mime\" : \"image/gif\", \"label\" : __(\"GIF image\") },\n                { \"mime\" : \"image/svg+xml\", \"label\" : __(\"SVG image\") },\n                { \"mime\" : \"application/ogg\", \"label\" : __(\"MPEG audio\") },\n                { \"mime\" : \"audio/x-ms-wma\", \"label\" : __(\"Windows Media audio\") },\n                { \"mime\" : \"audio/x-wav\", \"label\" : __(\"WAV audio\") },\n                { \"mime\" : \"video/mpeg\", \"label\" : __(\"MPEG video\") },\n                { \"mime\" : \"video/mp4\", \"label\" : __(\"MP4 video\") },\n                { \"mime\" : \"video/quicktime\", \"label\" : __(\"Quicktime video\") },\n                { \"mime\" : \"video/x-ms-wmv\", \"label\" : __(\"Windows Media video\") },\n                { \"mime\" : \"video/x-flv\", \"label\" : __(\"Flash video\") },\n                { \"mime\" : \"text/csv\", \"label\" : __(\"CSV file\") },\n                { \"mime\" : \"application/msword\", \"label\" : __(\"Microsoft Word\") },\n                { \"mime\" : \"application/vnd.ms-excel\", \"label\" : __(\"Microsoft Excel\") },\n                { \"mime\" : \"application/vnd.ms-powerpoint\", \"label\" : __(\"Microsoft Powerpoint\") }\n            ]\n        }\n    };\n\n    return uploadMime;\n});\n","define('taoQtiItem/qtiItem/core/Img',[\n    'taoQtiItem/qtiItem/core/Element',\n    'lodash',\n    'taoQtiItem/qtiItem/helper/rendererConfig'\n], function(Element, _, rendererConfig){\n\n    var Img = Element.extend({\n        qtiClass : 'img',\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {};\n\n            defaultData.attributes = {\n                src : renderer.getAbsoluteUrl(this.attr('src'))\n            };\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        isEmpty : function(){\n            return (!this.attr('src'));\n        }\n    });\n\n    return Img;\n});\n\n","define('taoQtiItem/qtiCreator/model/Img',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/Img'\n], function(_, editable, Img){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                src : '',\n                alt : ''\n            };\n        },\n        afterCreate : function(){\n            this.data('responsive', true);\n        }\n    });\n    return Img.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/Math',['lodash', 'taoQtiItem/qtiItem/core/Element', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(_, Element, rendererConfig){\n\n    var _stripMathTags = function(mathML, nsName){\n        var regex = new RegExp('<(\\/)?' + (nsName ? nsName + ':' : '') + 'math[^>]*>', 'g');\n        return mathML.replace(regex, '')\n            .replace(/^\\s*[\\r\\n]/gm, '')//remove first blank line\n            .replace(/\\s*[\\r\\n]$/gm, '');//last blank line\n    };\n\n    var _stripNamespace = function(mathML, nsName){\n        var regex = new RegExp('<(\\/)?' + (nsName ? nsName + ':' : ''), 'g');\n        return mathML.replace(regex, '<$1');\n    };\n\n    var Math = Element.extend({\n        qtiClass : 'math',\n        defaultNsName : 'm',\n        defaultNsUri : 'http://www.w3.org/1998/Math/MathML',\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.ns = null;\n            this.mathML = '';\n            this.annotations = {};\n        },\n        getNamespace : function(){\n\n            if(this.ns && this.ns.name && this.ns.uri){\n                return _.clone(this.ns);\n            }else{\n\n                var relatedItem = this.getRelatedItem();\n                if(relatedItem){\n                    var namespaces = relatedItem.getNamespaces();\n                    for(var ns in namespaces){\n                        if(namespaces[ns].indexOf('MathML') > 0){\n                            return {\n                                name : ns,\n                                uri : namespaces[ns]\n                            };\n                        }\n                    }\n                    //if no ns found in the item, set the default one!\n                    relatedItem.namespaces[this.defaultNsName] = this.defaultNsUri;\n                    return {\n                        name : this.defaultNsName,\n                        uri : this.defaultNsUri\n                    };\n                }\n            }\n\n            return {};\n        },\n        setNamespace : function(name, uri){\n            this.ns = {\n                name : name,\n                uri : uri\n            };\n        },\n        setAnnotation : function(encoding, value){\n            this.annotations[encoding] = value;\n        },\n        getAnnotation : function(encoding){\n            return this.annotations[encoding];\n        },\n        removeAnnotation : function(encoding){\n            delete this.annotations[encoding];\n        },\n        setMathML : function(mathML){\n            var ns = this.getNamespace(),\n                nsName = (ns.name && ns.uri) ? ns.name : '';\n\n            mathML = _stripMathTags(mathML, nsName);\n            if(ns){\n                mathML = _stripNamespace(mathML, nsName)\n            }\n            this.mathML = mathML;\n        },\n        getMathML : function(){\n            return this.mathML;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                tag = this.qtiClass,\n                raw = this.mathML,\n                body = raw,\n                ns = this.getNamespace(),\n                annotations = '';\n\n            for(var encoding in this.annotations){\n                annotations += '<annotation encoding=\"' + encoding + '\">' + this.annotations[encoding] + '</annotation>';\n            }\n\n            if(annotations){\n                if(raw.indexOf('</semantics>') > 0){\n                    raw = raw.replace('</semantics>', annotations + '</semantics>');\n                }else{\n                    raw = '<semantics>' + raw + annotations + '</semantics>';\n                }\n            }\n\n            if(ns && ns.name){\n                body = raw.replace(/<(\\/)?([^!])/g, '<$1' + ns.name + ':$2');\n                tag = ns.name + ':' + tag;\n            }\n\n            var defaultData = {\n                block : (this.attr('display') === 'block') ? true : false,\n                body : body,\n                raw : raw,\n                tag : tag,\n                ns : ns\n            };\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        isEmpty : function(){\n            return _isEmptyMathML(this.mathML) && (!this.annotations['latex'] || !this.annotations['latex'].trim());\n        }\n    });\n\n    var _isEmptyMathML = function(mathStr){\n\n        var hasContent = false;\n\n        if(mathStr && mathStr.trim()){\n            var $math = $(mathStr);\n            hasContent = !!$math.text();\n        }\n\n        return !hasContent;\n    }\n\n    return Math;\n});\n\n","define('taoQtiItem/qtiCreator/model/Math',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/Math'\n], function(_, editable, Math){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {};\n        },\n        afterCreate : function(){\n            this.getNamespace();\n        }\n    });\n    return Math.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/Object',[\n    'taoQtiItem/qtiItem/core/Element', \n    'lodash', \n    'taoQtiItem/qtiItem/helper/rendererConfig',\n    'taoQtiItem/qtiItem/helper/util'\n], function(Element, _, rendererConfig, util){\n\n    var QtiObject = Element.extend({\n        qtiClass : 'object',\n        getMediaType : function(){\n            var type = 'undefined';\n            var mimetype = this.attr('type');\n            if(mimetype){\n                if(mimetype.indexOf('video') === 0){\n                    type = 'video';\n                }else if(mimetype.indexOf('audio') === 0){\n                    type = 'audio';\n                }else if(mimetype.indexOf('image') === 0){\n                    type = 'image';\n                }else if(mimetype.indexOf('text/html') === 0){\n                    type = 'html';\n                }else{\n                    type = 'object';\n                }\n            }\n            return type;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {};\n\n            switch(this.getMediaType()){\n                case 'video':\n                    defaultData.video = true;\n                    break;\n                case 'audio':\n                    defaultData.audio = true;\n                    break;\n                case 'html':\n                    defaultData.html = true;\n                    break;\n                case 'image':\n                default:\n                    defaultData.object = true;\n            }\n            \n            defaultData.attributes = {data : renderer.getAbsoluteUrl(this.attr('data'))};\n            defaultData.body = this._alt;\n            \n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        isEmpty : function(){\n            return (!this.attr('data'));\n        }\n    });\n\n    return QtiObject;\n});\n","define('taoQtiItem/qtiCreator/model/Object',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/Object'\n], function(_, editable, Object){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                data : '',\n                type : ''\n            };\n        }\n    });\n    return Object.extend(methods);\n});\n","define('taoQtiItem/qtiCreator/model/helper/portableElement',['lodash', 'jquery'], function(_, $){\n\n    function _addNsDir(typeIdentifier, file){\n        return typeIdentifier + '/' + file.replace(/^\\.\\//, '');\n    }\n\n    function addNamespaceDirectory($typeIdentifier, $file){\n        if(_.isString($file)){\n            return _addNsDir($typeIdentifier, $file);\n        }else if(_.isArray($file)){\n            return _.map($file, function($f){\n                return _addNsDir($typeIdentifier, $f);\n            });\n        }\n    }\n\n\n    function getDefaultMethods(registry){\n\n        return {\n            getDefaultAttributes : function(){\n                return {};\n            },\n            getDefaultProperties : function(){\n\n                var creator = registry.getCreator(this.typeIdentifier);\n                if(_.isFunction(creator.getDefaultProperties)){\n                    return creator.getDefaultProperties(this);\n                }else{\n                    return {};\n                }\n            },\n            afterCreate : function(){\n\n                var typeId = this.typeIdentifier,\n                    creator = registry.getCreator(typeId),\n                    manifest = registry.getManifest(typeId),\n                    item = this.getRelatedItem();\n                \n                //add required resource\n                //@todo need afterCreate() to return a promise\n                var _this = this;\n                registry.addRequiredResources(typeId, item.data('uri'), function(res){\n                    if(res.success){\n                        $(document).trigger('resourceadded.qti-creator', [typeId, res.resources, _this]);\n                    }else{\n                        throw 'resource addition failed';\n                    }\n                });\n\n                //set default markup (for initial rendering)\n                creator.getMarkupTemplate();\n\n                //set pci props\n                this.properties = creator.getDefaultProperties();\n\n                //set hook entry point\n                this.entryPoint = addNamespaceDirectory(typeId, manifest.entryPoint);\n\n                //set libs\n                if(_.isArray(manifest.libraries)){\n                    this.libraries = addNamespaceDirectory(typeId, manifest.libraries);\n                }\n\n                if(_.isArray(manifest.css)){\n                    this.css = addNamespaceDirectory(typeId, manifest.css);\n                    _.each(this.css, function(css){\n                        if(!item.stylesheetExists(css)){\n                            item.createStyleSheet(css);\n                        }\n                    });\n                }\n                \n                //@todo fix this !\n                if(manifest.response){//for custom interaciton only\n                    //create response\n                    this.createResponse({\n                        baseType : manifest.response.baseType,\n                        cardinality : manifest.response.cardinality\n                    });\n                }else{\n                    //the attribute is mendatory for info control\n                    this.attr('title', manifest.label);\n                }\n\n                //set markup\n                this.markup = this.renderMarkup();\n\n                //set pci namespace to item\n                this.getNamespace();\n\n                //after create\n                if(_.isFunction(creator.afterCreate)){\n                    return creator.afterCreate(this);\n                }\n            },\n            renderMarkup : function(){\n\n                var creator = registry.getCreator(this.typeIdentifier),\n                    markupTpl = creator.getMarkupTemplate(),\n                    markupData = this.getDefaultMarkupTemplateData();\n\n                if(_.isFunction(creator.getMarkupData)){\n                    //extends the default data with the custom one\n                    markupData = creator.getMarkupData(this, markupData);\n                }\n\n                return markupTpl(markupData);\n            },\n            updateMarkup : function(){\n                this.markup = this.renderMarkup();\n            }\n        };\n    }\n\n    return {\n        getDefaultMethods : getDefaultMethods\n    };\n});\n\n","define('taoQtiItem/qtiItem/mixin/CustomElement',[\n    'taoQtiItem/qtiItem/mixin/Mixin',\n    'lodash'\n], function(Mixin, _){\n\n    var methods = {\n        prop : function(name, value){\n            if(name){\n                if(value !== undefined){\n                    this.properties[name] = value;\n                }else{\n                    if(typeof (name) === 'object'){\n                        for(var prop in name){\n                            this.prop(prop, name[prop]);\n                        }\n                    }else if(typeof (name) === 'string'){\n                        if(this.properties[name] === undefined){\n                            return undefined;\n                        }else{\n                            return this.properties[name];\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        removeProp : function(propNames){\n            var _this = this;\n            if(typeof (propNames) === 'string'){\n                propNames = [propNames];\n            }\n            _.each(propNames, function(propName){\n                delete _this.attributes[propName];\n            });\n            return this;\n        },\n        getNamespace : function(){\n\n            if(this.ns && this.ns.name && this.ns.uri){\n                return _.clone(this.ns);\n            }else{\n\n                var relatedItem = this.getRelatedItem();\n                if(relatedItem){\n                    var namespaces = relatedItem.getNamespaces();\n                    for(var ns in namespaces){\n                        if(namespaces[ns].indexOf(this.defaultNsUri) >= 0){\n                            return {\n                                name : ns,\n                                uri : namespaces[ns]\n                            };\n                        }\n                    }\n                    //if no ns found in the item, set the default one!\n                    relatedItem.namespaces[this.defaultNsName] = this.defaultNsUri;\n                    return {\n                        name : this.defaultNsName,\n                        uri : this.defaultNsUri\n                    };\n                }\n            }\n\n            return {};\n        },\n        setNamespace : function(name, uri){\n            this.ns = {\n                name : name,\n                uri : uri\n            };\n        },\n        getMarkupNamespace : function(){\n\n            if(this.markupNs && this.markupNs.name && this.markupNs.uri){\n                return _.clone(this.markupNs);\n            }else{\n                var relatedItem = this.getRelatedItem();\n                if(relatedItem){\n                    //set the default one:\n                    relatedItem.namespaces[this.defaultMarkupNsName] = this.defaultMarkupNsUri;\n                    return {\n                        name : this.defaultMarkupNsName,\n                        uri : this.defaultMarkupNsUri\n                    };\n                }\n            }\n\n            return {};\n        },\n        setMarkupNamespace : function(name, uri){\n            this.markupNs = {\n                name : name,\n                uri : uri\n            };\n        }\n    };\n\n    return {\n        augment : function(targetClass){\n            Mixin.augment(targetClass, methods);\n        },\n        methods : methods\n    };\n});\n\n","define('taoQtiItem/qtiItem/core/PortableInfoControl',[\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiItem/mixin/CustomElement',\n    'taoQtiItem/qtiItem/helper/rendererConfig',\n    'lodash'\n], function(Element, CustomElement, rendererConfig, _){\n    \n    var PortableInfoControl = Element.extend({\n        qtiClass : 'infoControl',\n        defaultNsName : 'pic',\n        defaultNsUri : 'http://www.imsglobal.org/xsd/portableInfoControl',\n        defaultMarkupNsName : 'html5',\n        defaultMarkupNsUri : 'html5',\n        init : function(serial, attributes){\n\n            this._super(serial, attributes);\n\n            this.typeIdentifier = '';\n            this.markup = '';\n            this.properties = {};\n            this.libraries = [];\n            this.entryPoint = '';\n            \n            //note : if the uri is defined, it will be set the uri in the xml on xml serialization,\n            //which may trigger xsd validation, which is troublesome for html5 (use xhtml5 maybe ?)\n            this.markupNs = {};\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'infoControl') || this._super(qtiClass);\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    typeIdentifier : this.typeIdentifier,\n                    markup : this.markup,\n                    properties : this.properties,\n                    libraries : this.libraries,\n                    entryPoint : this.entryPoint,\n                    ns : {\n                        pic : this.getNamespace().name + ':'\n                    }\n                };\n                \n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.markup = this.markup;\n            arr.properties = this.properties;\n            return arr;\n        }\n    });\n    \n    //add portable element standard functions\n    CustomElement.augment(PortableInfoControl);\n    \n    return PortableInfoControl;\n});\n","define('taoQtiItem/qtiCreator/model/PortableInfoControl',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/helper/portableElement',\n    'taoQtiItem/qtiCreator/editor/infoControlRegistry',\n    'taoQtiItem/qtiItem/core/PortableInfoControl'\n], function(_, editable, portableElement, icRegistry, PortableInfoControl){\n\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, portableElement.getDefaultMethods(icRegistry));\n    _.extend(methods, {\n        getDefaultMarkupTemplateData : function(){\n            return {};\n        }\n    });\n\n    return PortableInfoControl.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/RubricBlock',['taoQtiItem/qtiItem/core/Element', 'taoQtiItem/qtiItem/mixin/Container'], function(Element, Container){\n\n    var RubricBlock = Element.extend({\n        qtiClass : 'rubricBlock'\n    });\n    \n    Container.augment(RubricBlock);\n    \n    return RubricBlock;\n});\n","define('taoQtiItem/qtiCreator/model/RubricBlock',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/RubricBlock'\n], function(_, editable, RubricBlock){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'view' : ['candidate'],\n                'use' : ''\n            };\n        }\n    });\n    return RubricBlock.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/Choice',['taoQtiItem/qtiItem/core/IdentifiedElement'], function(IdentifiedElement){\n\n    var Choice = IdentifiedElement.extend({\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'choice') || this._super(qtiClass);\n        },\n        getInteraction : function(){\n            var found, ret = null, item = this.getRelatedItem();\n            if(item){\n                found = item.find(this.serial);\n                if(found){\n                    ret = found.parent;\n                }\n            }\n            return ret;\n        }\n    });\n\n    return Choice;\n});\n","define('taoQtiItem/qtiItem/core/choices/Hotspot',['taoQtiItem/qtiItem/core/choices/Choice'], function(QtiChoice){\n    var QtiHotspot = QtiChoice.extend({});\n    return QtiHotspot;\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/AssociableHotspot',['taoQtiItem/qtiItem/core/choices/Hotspot'], function(QtiHotspot){\n    var QtiAssociableHotspot = QtiHotspot.extend({\n        qtiClass : 'associableHotspot'\n    });\n    return QtiAssociableHotspot;\n});\n\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/choices/AssociableHotspot',[\n    'lodash', \n    'taoQtiItem/qtiCreator/model/mixin/editable', \n    'taoQtiItem/qtiItem/core/choices/AssociableHotspot'\n], function(_, editable, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {\n               matchMax : 0,\n               matchMin : 0 \n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/Gap',['taoQtiItem/qtiItem/core/choices/Choice'], function(QtiChoice){\n    var QtiGap = QtiChoice.extend({\n        qtiClass : 'gap'\n    });\n    return QtiGap;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/Gap',[\n    'lodash', \n    'taoQtiItem/qtiCreator/model/mixin/editable', \n    'taoQtiItem/qtiItem/core/choices/Gap'\n], function(_, editable, Gap){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n               required : false\n            };\n        }\n    });\n    return Gap.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/GapImg',['taoQtiItem/qtiItem/core/choices/Choice', 'taoQtiItem/qtiItem/core/Object'], function(QtiChoice, QtiObject){\n    var QtiGapImg = QtiChoice.extend({\n        qtiClass : 'gapImg',\n        //common methods to object containers (start)\n        initObject : function(object){\n            this.object = object || new QtiObject();\n        },\n        getObject : function(){\n            return this.object;\n        }\n        //common methods to object containers (end)\n    });\n    return QtiGapImg;\n});\n\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/choices/GapImg',[\n    'lodash', \n    'taoQtiItem/qtiCreator/model/mixin/editable', \n    'taoQtiItem/qtiItem/core/choices/GapImg'\n], function(_, editable, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {\n                matchMin : 0,\n                matchMax : 0  \n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/TextVariableChoice',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiItem/core/choices/Choice',\n    'taoQtiItem/qtiItem/helper/rendererConfig'\n], function($, _, QtiChoice, rendererConfig){\n\n    var QtiTextVariableChoice = QtiChoice.extend({\n        init : function(serial, attributes, text){\n            this._super(serial, attributes);\n            this.val(text || '');\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'textVariableChoice') || this._super(qtiClass);\n        },\n        val : function(text){\n            if(typeof text === 'undefined'){\n                return this.text;\n            }else{\n                if(typeof text === 'string'){\n                    this.text = text;\n                    $(document).trigger('choiceTextChange', {\n                        choice: this,\n                        text: text\n                    });\n                }else{\n                    throw 'text must be a string';\n                }\n            }\n            return this;\n        },\n        render : function(){\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer||this.getRenderer(),\n                defaultData = {\n                    body : this.text\n                };\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        }\n    });\n\n    return QtiTextVariableChoice;\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/GapText',['taoQtiItem/qtiItem/core/choices/TextVariableChoice'], function(QtiTextVariableChoice){\n    var QtiGapText = QtiTextVariableChoice.extend({\n        qtiClass : 'gapText'\n    });\n    return QtiGapText;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/GapText',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/choices/GapText'\n], function(_, editable, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                fixed : false,\n                matchMax : 1,\n                matchMin : 0\n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/HotspotChoice',['taoQtiItem/qtiItem/core/choices/Hotspot'], function(QtiHotspot){\n    var QtiHotspotChoice = QtiHotspot.extend({\n        qtiClass : 'hotspotChoice'\n    });\n    return QtiHotspotChoice;\n});\n\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/choices/HotspotChoice',[\n    'lodash', \n    'taoQtiItem/qtiCreator/model/mixin/editable', \n    'taoQtiItem/qtiItem/core/choices/HotspotChoice'\n], function(_, editable, Choice){\n\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {};\n        }\n    });\n    return Choice.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/mixin/ContainerInline',['taoQtiItem/qtiItem/mixin/Mixin', 'taoQtiItem/qtiItem/mixin/Container', 'lodash'], function(Mixin, Container, _){\n    \n    var methods = {};\n    _.extend(methods, Container.methods);\n    _.extend(methods, {\n        initContainer:function(body){\n            Container.methods.initContainer.call(this, body);\n            this.bdy.contentModel = 'inlineStatic';\n        }\n    });\n\n    return {\n        augment : function(targetClass){\n            Mixin.augment(targetClass, methods);\n        },\n        methods : methods\n    };\n});\n","define('taoQtiItem/qtiItem/core/choices/Hottext',['taoQtiItem/qtiItem/core/choices/Choice', 'taoQtiItem/qtiItem/mixin/ContainerInline'], function(Choice, Container){\n    \n    var Hottext = Choice.extend({\n        qtiClass : 'hottext'\n    });\n    \n    Container.augment(Hottext);\n    \n    return Hottext;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/Hottext',[\n    'lodash', \n    'taoQtiItem/qtiCreator/model/mixin/editable', \n    'taoQtiItem/qtiItem/core/choices/Hottext'\n], function(_, editable, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n               fixed : false\n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/choices/InlineChoice',['taoQtiItem/qtiItem/core/choices/TextVariableChoice'], function(QtiTextVariableChoice){\n    var QtiInlineChoice = QtiTextVariableChoice.extend({\n        qtiClass : 'inlineChoice'\n    });\n    return QtiInlineChoice;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/InlineChoice',['lodash', 'taoQtiItem/qtiCreator/model/mixin/editable', 'taoQtiItem/qtiItem/core/choices/InlineChoice'], function(_, editable, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'fixed' : false,\n                'showHide' : 'show'\n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/choices/ContainerChoice',['taoQtiItem/qtiItem/core/choices/Choice', 'taoQtiItem/qtiItem/mixin/Container'], function(Choice, Container){\n\n    var ContainerChoice = Choice.extend({\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'containerChoice') || this._super(qtiClass);\n        }\n    });\n    \n    Container.augment(ContainerChoice);\n    \n    return ContainerChoice;\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice',['taoQtiItem/qtiItem/core/choices/ContainerChoice'], function(QtiContainerChoice){\n\n    var QtiSimpleAssociableChoice = QtiContainerChoice.extend({\n        qtiClass : 'simpleAssociableChoice'\n    });\n    \n    return QtiSimpleAssociableChoice;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice',['lodash', 'taoQtiItem/qtiCreator/model/mixin/editable', 'taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice'], function(_, editable, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'fixed' : false,\n                'showHide' : 'show',\n                'matchMax' : 0,\n                'matchMin' : 0\n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/choices/SimpleChoice',['taoQtiItem/qtiItem/core/choices/ContainerChoice'], function(QtiContainerChoice){\n\n    var QtiSimpleChoice = QtiContainerChoice.extend({\n        qtiClass : 'simpleChoice'\n    });\n\n    return QtiSimpleChoice;\n\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/choices/SimpleChoice',['lodash', 'taoQtiItem/qtiCreator/model/mixin/editable', 'taoQtiItem/qtiItem/core/choices/SimpleChoice'], function(_, editable, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'fixed' : false,\n                'showHide' : 'show'\n            };\n        }\n    });\n    return Choice.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/helper/response',['lodash'], function(_){\n    return {\n        removeChoice : function(response, choice){\n\n            var escapedIdentifier = choice.id().replace(/([.-])/g, '\\\\$1'),\n                regex = new RegExp('([^a-z_\\-\\d\\.]*)(' + escapedIdentifier + ')([^a-z_\\-\\d\\.]*)');\n            \n            _.remove(response.correctResponse, function(entry){\n                return entry.match(regex);\n            });\n            \n            var mapEntries = {};\n            _.forIn(response.mapEntries, function(value, mapKey){\n                if(!mapKey.match(regex)){\n                    mapEntries[mapKey] = value;\n                }\n            });\n            response.mapEntries = mapEntries;\n\n        }\n    };\n});\n","define('taoQtiItem/qtiItem/core/variables/ResponseDeclaration',['taoQtiItem/qtiItem/core/variables/VariableDeclaration', 'lodash'], function(VariableDeclaration, _){\n\n    var ResponseDeclaration = VariableDeclaration.extend({\n        qtiClass : 'responseDeclaration',\n        init : function(serial, attributes){\n\n            this._super(serial, attributes);\n\n            //MATCH_CORRECT, MAP_RESPONSE, MAP_RESPONSE_POINT\n            this.template = '';//previously called 'howMatch'\n\n            //when template equals ont of the \"map\" one (MAP_RESPONSE, MAP_RESPONSE_POINT)\n            this.mappingAttributes = {};\n            this.mapEntries = {};\n\n            //correct response [0..*]\n            this.correctResponse = null;\n\n            //tao internal usage:\n            this.feedbackRules = {};\n        },\n        getFeedbackRules : function(){\n            return [];\n        },\n        getComposingElements : function(){\n            var elts = this._super();\n            elts = _.extend(elts, this.getFeedbackRules());\n            return elts;\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.howMatch = this.template;\n            arr.correctResponses = this.correctResponse;\n            arr.mapping = this.mapEntries;\n            arr.mappingAttributes = this.mappingAttributes;\n            return arr;\n        }\n    });\n\n    return ResponseDeclaration;\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/response/SimpleFeedbackRule',['taoQtiItem/qtiItem/core/Element'], function(Element){\n\n    var SimpleFeedbackRule = Element.extend({\n        qtiClass : '_simpleFeedbackRule',\n        serial : '',\n        relatedItem : null,\n        init : function(serial, feedbackOutcome, feedbackThen, feedbackElse){\n\n            this._super(serial, {});\n\n            this.condition = 'correct';\n            this.comparedOutcome = null;\n            this.comparedValue = 0.0;\n\n            this.feedbackOutcome = feedbackOutcome;\n            if(Element.isA(feedbackThen, 'feedback')){\n                this.feedbackThen = feedbackThen;\n            }else{\n                this.feedbackThen = null;\n            }\n            if(Element.isA(feedbackElse, 'feedback')){\n                this.feedbackElse = feedbackThen;\n            }else{\n                this.feedbackElse = null;\n            }\n\n        },\n        setCondition : function(comparedOutcome, condition, comparedValue){\n\n            if(Element.isA(comparedOutcome, 'variableDeclaration')){\n                switch(condition){\n                    case 'correct':\n                    case 'incorrect':\n                        if(Element.isA(comparedOutcome, 'responseDeclaration')){\n                            this.comparedOutcome = comparedOutcome;\n                            this.condition = condition;\n                        }else{\n                            throw 'invalid outcome type: must be a responseDeclaration';\n                        }\n                        break;\n                    case 'lt':\n                    case 'lte':\n                    case 'equal':\n                    case 'gte':\n                    case 'gt':\n                        if(comparedValue !== null && comparedValue !== undefined){\n                            this.comparedOutcome = comparedOutcome;\n                            this.condition = condition;\n                            this.comparedValue = comparedValue;\n                        }else{\n                            throw 'compared value must not be null';\n                        }\n                        break;\n                    default:\n                        throw 'unknown condition type : '.condition;\n                }\n            }else{\n                throw 'invalid outcome type: must be a variableDeclaration';\n            }\n\n            return this;\n        },\n        setFeedbackElse : function(feedback){\n            if(Element.isA(feedback, 'feedback')){\n                this.feedbackElse = feedback;\n            }\n        }\n    });\n\n    return SimpleFeedbackRule;\n});\n","define('taoQtiItem/qtiItem/helper/response',['lodash'], function(_){\n    \n   var _templateNames = {\n        'MATCH_CORRECT' : 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/match_correct',\n        'MAP_RESPONSE' : 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response',\n        'MAP_RESPONSE_POINT' : 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response_point'\n    };\n    \n   return {\n       isUsingTemplate : function(response, tpl){\n            if(_.isString(tpl)){\n                if(tpl === response.template || _templateNames[tpl] === response.template){\n                    return true;\n                }\n            }\n            return false;\n        },\n        isValidTemplateName:function(tplName){\n            return !!this.getTemplateUriFromName(tplName);\n        },\n        getTemplateUriFromName:function(tplName){\n            if(_templateNames[tplName]){\n                return _templateNames[tplName];\n            }\n            return '';\n        },\n        getTemplateNameFromUri:function(tplUri){\n            var tplName = '';\n            _.forIn(_templateNames, function(uri, name){\n                if(uri === tplUri){\n                    tplName = name;\n                    return false;\n                }\n            });\n            return tplName;\n        }\n   };\n});\n","define('taoQtiItem/qtiCreator/model/variables/ResponseDeclaration',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiItem/core/variables/ResponseDeclaration',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiItem/core/response/SimpleFeedbackRule',\n    'taoQtiItem/qtiItem/helper/response'\n], function($, _, Element, ResponseDeclaration, editable, SimpleFeedbackRule, responseHelper){\n\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, {\n        setTemplate : function(template){\n            var templateUri = responseHelper.getTemplateUriFromName(template);\n            if(templateUri && this.template !== templateUri){\n                this.template = templateUri;\n                $(document).trigger('responseTemplateChange.qti-widget', {'element' : this, 'value' : template});\n            }\n            return this;\n        },\n        getTemplate : function(){\n            return this.template;\n        },\n        resetCorrect : function(){\n            this.correctResponse = null;\n            $(document).trigger('correctResponseChange.qti-widget', {'element' : this, 'value' : null});\n            return this;\n        },\n        setCorrect : function(value){\n            if(_.isString(value)){\n                value = [value];\n            }\n            this.correctResponse = value;\n            $(document).trigger('correctResponseChange.qti-widget', {'element' : this, 'value' : value});\n            return this;\n        },\n        getCorrect : function(){\n            return _.clone(this.correctResponse);\n        },\n        setMappingAttribute : function(name, value){\n            this.mappingAttributes[name] = value;\n            $(document).trigger('mappingAttributeChange.qti-widget', {'element' : this, 'key' : name, 'value' : value});\n        },\n        removeMappingAttribute : function(name){\n            delete this.mappingAttributes[name];\n            $(document).trigger('mappingAttributeChange.qti-widget', {'element' : this, 'key' : name, 'value' : null});\n        },\n        getMappingAttribute : function(name){\n            return this.mappingAttributes[name];\n        },\n        setMapEntry : function(mapKey, mappedValue, caseSensitive){\n\n            mappedValue = parseFloat(mappedValue);\n            caseSensitive = caseSensitive ? true : false;\n\n            if(!isNaN(mappedValue)){\n                if(this.attr('cardinality') === 'multiple' && this.attr('baseType') === 'pair'){\n                    //in this case, A-B is equivalent to B-A so need to check if any of those conbination already exists:\n\n                    var mapKeys = mapKey.split(' '),\n                        mapKeysReverse = mapKeys[1] + ' ' + mapKeys[0];\n\n                    if(this.mapEntries[mapKeysReverse]){\n                        this.mapEntries[mapKeysReverse] = mappedValue;\n                    }else{\n                        this.mapEntries[mapKey] = mappedValue;\n                    }\n                }else{\n                    this.mapEntries[mapKey] = mappedValue;\n                }\n\n                /**\n                 * @todo caseSensitive is always set to \"false\" currently, need to add an option for this\n                 * this.mapEntries[mapKey] = {\n                 'mappedValue' : mappedValue,\n                 'caseSensitive' : caseSensitive\n                 };\n                 */\n\n                $(document).trigger('mapEntryChange.qti-widget', {\n                    element : this,\n                    mapKey : mapKey,\n                    mappedValue : mappedValue,\n                    caseSensitive : caseSensitive\n                });\n            }else{\n                throw 'the mapped value is not a number';\n            }\n\n            return this;\n        },\n        removeMapEntry : function(mapKey, canBeEmpty){\n            //is there a opportunity mapKey to be empty string\n            if(typeof canBeEmpty == 'undefined'){\n                canBeEmpty = false;\n            }\n\n            if(mapKey || canBeEmpty){\n                if(this.attr('cardinality') === 'multiple' && this.attr('baseType') === 'pair'){\n                    //in this case, A-B is equivalent to B-A so need to check if any of those conbination already exists:\n                    var mapKeys = mapKey.split(' '),\n                        mapKeysReverse = mapKeys[1] + ' ' + mapKeys[0];\n\n                    delete this.mapEntries[mapKeysReverse];\n                }\n                delete this.mapEntries[mapKey];\n\n                $(document).trigger('mapEntryRemove.qti-widget', {element : this, mapKey : mapKey});\n            }\n\n            return this;\n        },\n        getMapEntries : function(){\n            return _.clone(this.mapEntries);\n        },\n        removeMapEntries : function(){\n            _(this.mapEntries).keys().forEach(this.removeMapEntry, this);\n        },\n        createFeedbackRule : function(){\n\n            var item = this.getRelatedItem();\n\n            var outcome = item.createOutcomeDeclaration({\n                identifier : 'FEEDBACK',\n                cardinality : 'single',\n                baseType : 'identifier'\n            });\n\n            var modalFeedback = item.createModalFeedback({\n                identifier : 'feedbackModal',\n                outcomeIdentifier : outcome.id()\n            });\n\n            var rule = new SimpleFeedbackRule('', outcome, modalFeedback);\n\n            rule.setCondition(this, 'correct');\n            this.feedbackRules[rule.getSerial()] = rule;\n\n            //set renderer\n            var renderer = this.getRenderer();\n            if(renderer){\n                rule.setRenderer(renderer);\n                modalFeedback.setRenderer(renderer);\n            }\n\n            //trigger creation event\n            $(document).trigger('feedbackRuleCreated.qti-widget', {element : this, rule : rule});\n\n            return rule;\n        },\n        getFeedbackRule : function(serial){\n            return this.feedbackRules[serial];\n        },\n        getFeedbackRules : function(){\n            return _.clone(this.feedbackRules);\n        },\n        setCondition : function(rule, condition, value){\n            rule.setCondition(this, condition, value);\n            $(document).trigger('feedbackRuleConditionChange.qti-widget', {element : this, rule : rule, condition : condition, value : value});\n        },\n        deleteFeedbackRule : function(rule){\n\n            var item = this.getRelatedItem(), ret;\n\n            item.remove('outcomes', rule.feedbackOutcome);\n            item.remove('modalFeedbacks', rule.feedbackThen);\n            item.remove('modalFeedbacks', rule.feedbackElse || '');//feedback \"else\" is optional\n\n            ret = this.remove('feedbackRules', rule);\n\n            $(document).trigger('feedbackRuleRemoved.qti-widget', {element : this, rule : rule});\n\n            return ret;\n        },\n        createFeedbackElse : function(rule){\n\n            var modalFeedback;\n\n            if(Element.isA(rule, '_simpleFeedbackRule')){\n\n                modalFeedback = this.getRelatedItem().createModalFeedback({\n                    identifier : 'feedbackModal',\n                    outcomeIdentifier : rule.feedbackOutcome.id()\n                });\n\n                rule.setFeedbackElse(modalFeedback);\n\n                //set renderer\n                var renderer = this.getRenderer();\n                if(renderer){\n                    modalFeedback.setRenderer(renderer);\n                }\n\n                $(document).trigger('feedbackRuleElseCreated.qti-widget', {element : this, rule : rule, modalFeedback : modalFeedback});\n            }\n\n            return modalFeedback;\n        },\n        deleteFeedbackElse : function(rule){\n\n            this.getRelatedItem().remove('modalFeedbacks', rule.feedbackElse);\n            rule.feedbackElse = null;\n\n            $(document).trigger('feedbackRuleElseRemoved.qti-widget', {element : this, rule : rule});\n        },\n        getDefaultAttributes : function(){\n            return {};\n        }\n    });\n\n    return ResponseDeclaration.extend(methods);\n});\n\n","define('taoQtiItem/qtiCreator/model/mixin/editableInteraction',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/variables/ResponseDeclaration',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/helper/response'\n], function(_, Element, ResponseDeclaration, event, responseHelper){\n\n    var methods = {\n        /**\n         * Remove a choice from the interaction\n         * \n         * @param {string|choice} choice\n         * @returns {object} this\n         */\n        removeChoice : function(choice){\n\n            var serial = '', c;\n            if(typeof(choice) === 'string'){\n                serial = choice;\n            }else if(Element.isA(choice, 'choice')){\n                serial = choice.getSerial();\n            }\n            if(this.choices[serial]){\n\n                //remove choice\n                c = this.choices[serial];\n                delete this.choices[serial];\n\n                //update the response\n                responseHelper.removeChoice(this.getResponseDeclaration(), c);\n\n                //trigger event\n                event.deleted(c, this);\n            }\n            return this;\n        },\n        createResponse : function(attrs, template){\n\n            var response = new ResponseDeclaration();\n            if(attrs){\n                response.attr(attrs);\n            }\n\n            //we assume in the context of edition, every element is created from the api so alwayd bound to an item:\n            this.getRelatedItem().addResponseDeclaration(response);\n\n            //assign responseIdentifier only after attaching it to the item to generate a unique id\n            response.buildIdentifier('RESPONSE', false);\n            response.setTemplate(template || 'MATCH_CORRECT');\n            this.attr('responseIdentifier', response.id());\n    \n            //se the default value for the score default value\n            response.mappingAttributes.defaultValue = 0;\n\n            //set renderer\n            var renderer = this.getRenderer();\n            if(renderer){\n                response.setRenderer(renderer);\n            }\n\n            return response;\n        },\n        /**\n         * To be called before deleting the interaction\n         */\n        deleteResponse : function(){\n\n            var response = this.getResponseDeclaration();\n            if(response){\n                this.getRelatedItem().deleteResponseDeclaration(response);\n            }\n            this.removeAttr('responseIdentifier');\n            return this;\n        },\n        beforeRemove : function(){\n            \n            var serial = this.serial,\n                interactions = this.getRelatedItem().getInteractions();\n            \n            //delete its reponse\n            this.deleteResponse();\n            \n            //when there is only one interaction remaining, its reponseIdentifier must be RESPONSE to be able to use one of the standard rp\n            if(_.size(interactions) === 2){\n                _.each(interactions, function(interaction){\n                    \n                    //find the other interaction, which will be the last remaining one\n                    if(interaction.serial !== serial){\n                        \n                        var response = interaction.getResponseDeclaration();\n                        interaction.attr('responseIdentifier', 'RESPONSE');\n                        response.id('RESPONSE');\n                    }\n                });\n            }\n        }\n    };\n\n    return methods;\n});\n\n","define('taoQtiItem/qtiItem/core/interactions/Interaction',[\n    'taoQtiItem/qtiItem/core/Element', \n    'lodash', \n    'taoQtiItem/qtiItem/helper/rendererConfig',\n    'taoQtiItem/qtiItem/helper/util'\n], function(Element, _, rendererConfig, util){\n\n    var QtiInteraction = Element.extend({\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.choices = {};\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'interaction') || this._super(qtiClass);\n        },\n        addChoice : function(choice){\n            choice.setRelatedItem(this.getRelatedItem() || null);\n            this.choices[choice.getSerial()] = choice;\n            return this;\n        },\n        getChoices : function(){\n            var choices = {};\n            for(var i in this.choices){//prevent passing the whole array by ref\n                choices[i] = this.choices[i];\n            }\n            return choices;\n        },\n        getChoice : function(serial){\n            var ret = null;\n            if(this.choices[serial]){\n                ret = this.choices[serial];\n            }\n            return ret;\n        },\n        getChoiceByIdentifier : function(identifier){\n            for(var i in this.choices){\n                if(this.choices[i].id() === identifier){\n                    return this.choices[i];\n                }\n            }\n            return null;\n        },\n        getComposingElements : function(){\n            var elts = this._super();\n            //recursive to choices:\n            for(var serial in this.choices){\n                if(Element.isA(this.choices[serial], 'choice')){\n                    elts[serial] = this.choices[serial];\n                    elts = _.extend(elts, this.choices[serial].getComposingElements());\n                }\n            }\n            return elts;\n        },\n        find : function(serial){\n            var found = this._super(serial);\n            if(!found){\n                found = util.findInCollection(this, 'choices', serial);\n            }\n            return found;\n        },\n        getResponseDeclaration : function(){\n            var response = null;\n            var responseId = this.attr('responseIdentifier');\n            if(responseId){\n                var item = this.getRelatedItem();\n                if(item){\n                    response = item.getResponseDeclaration(responseId);\n                }else{\n                    throw 'cannot get response of an interaction out of its item context';\n                }\n            }\n            return response;\n        },\n        /**\n         * Render the interaction to the view.\n         * The optional argument \"subClass\" allows distinguishing customInteraction: e.g. customInteraction.matrix, customInteraction.likertScale ...\n         */\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    '_type' : this.qtiClass.replace(/([A-Z])/g, function($1){\n                        return \"_\" + $1.toLowerCase();\n                    }),\n                    'choices' : [],\n                    'choiceShuffle' : true\n                };\n\n            if(!renderer){\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n            \n            var choices = (this.attr('shuffle') && renderer.shuffleChoices) ? renderer.getShuffledChoices(this) : this.getChoices();\n            var interactionData = {'interaction' : {'serial' : this.serial, 'attributes' : this.attributes}};\n            var _this = this;\n            _.each(choices, function(choice){\n                if(Element.isA(choice, 'choice')){\n                    try{\n                        var renderedChoice = choice.render(_.clone(interactionData, true), null, choice.qtiClass + '.' + _this.qtiClass, renderer); //use interaction type as choice subclass\n                        defaultData.choices.push(renderedChoice);\n                    }catch(e){\n                        //leave choices empty in case of error\n                    }\n                }\n            });\n            \n            var tplName = args.subclass ? this.qtiClass + '.' + args.subclass : this.qtiClass;\n            \n            return this._super(_.merge(defaultData, args.data), args.placeholder, tplName, renderer);\n        },\n        postRender : function(data, altClassName, renderer){\n\n            renderer = renderer || this.getRenderer();\n\n            var choices = this.getChoices();\n            for(var i in choices){\n                var c = choices[i];\n                if(Element.isA(c, 'choice')){\n                    c.postRender({}, c.qtiClass + '.' + this.qtiClass, renderer);\n                }\n            }\n            return this._super(data, altClassName, renderer);\n        },\n        setResponse : function(values){\n            var ret = null;\n            var renderer = this.getRenderer();\n            if(renderer){\n                ret = renderer.setResponse(this, values);\n            }else{\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n            return ret;\n        },\n        getResponse : function(){\n            var ret = null;\n            var renderer = this.getRenderer();\n            if(renderer){\n                ret = renderer.getResponse(this);\n            }else{\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n            return ret;\n        },\n        resetResponse : function(){\n            var ret = null;\n            var renderer = this.getRenderer();\n            if(renderer){\n                ret = renderer.resetResponse(this);\n            }else{\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n            return ret;\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.choices = {};\n            for(var serial in this.choices){\n                if(Element.isA(this.choices[serial], 'choice')){\n                    arr.choices[serial] = this.choices[serial].toArray();\n                }\n            }\n            return arr;\n        }\n    });\n    return QtiInteraction;\n});\n\n","define('taoQtiItem/qtiItem/core/interactions/Prompt',['taoQtiItem/qtiItem/core/Element', 'taoQtiItem/qtiItem/mixin/ContainerInline'], function(Element, Container){\n    var Prompt = Element.extend({qtiClass : 'prompt'});\n    Container.augment(Prompt);\n    return Prompt;\n});\n","define('taoQtiItem/qtiItem/core/interactions/BlockInteraction',[\n    'taoQtiItem/qtiItem/core/interactions/Interaction',\n    'taoQtiItem/qtiItem/core/interactions/Prompt', \n    'lodash',\n    'taoQtiItem/qtiItem/helper/rendererConfig'\n], function(Interaction, Prompt, _, rendererConfig){\n\n    var BlockInteraction = Interaction.extend({\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.prompt = new Prompt('');\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'blockInteraction') || this._super(qtiClass);\n        },\n        getComposingElements : function(){\n            var elts = this._super();\n            elts = _.extend(elts, this.prompt.getComposingElements());\n            elts[this.prompt.getSerial()] = this.prompt;\n            return elts;\n        },\n        find : function(serial){\n            return this._super(serial) || this.prompt.find(serial);\n        },\n        render : function(){\n            \n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    'prompt' : this.prompt.render(renderer)\n                };\n            \n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        postRender : function(data, altClassName, renderer){\n            renderer = renderer || this.getRenderer();\n            this.prompt.postRender({}, '', renderer);\n            return this._super(data, altClassName, renderer);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.prompt = this.prompt.toArray();\n            return arr;\n        }\n    });\n    return BlockInteraction;\n});\n\n\n","define('taoQtiItem/qtiItem/core/interactions/AssociateInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction'], function(BlockInteraction){\n    var AssociateInteraction = BlockInteraction.extend({\n        qtiClass : 'associateInteraction'\n    });\n    return AssociateInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/AssociateInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/AssociateInteraction',\n    'taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'shuffle' : false,\n                'maxAssociations' : 0,\n                'minAssociations' : 0\n            };\n        },\n        afterCreate : function(){\n            this.createChoice();\n            this.createChoice();\n            this.createResponse({\n                baseType:'pair',\n                cardinality:'multiple'\n            });\n        },\n        createChoice : function(){\n            var choice = new Choice();\n\n            this.addChoice(choice);\n\n            var rank = _.size(this.getChoices());\n\n            choice\n                .body('choice' + ' #' + rank)\n                .buildIdentifier('choice');\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n\n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n\n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/ChoiceInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction'], function(BlockInteraction){\n    var ChoiceInteraction = BlockInteraction.extend({\n        qtiClass : 'choiceInteraction'\n    });\n    return ChoiceInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/ChoiceInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/ChoiceInteraction',\n    'taoQtiItem/qtiCreator/model/choices/SimpleChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'shuffle' : false,\n                'maxChoices' : 0,\n                'minChoices' : 0,\n                'orientation' : 'vertical'\n            };\n        },\n        afterCreate : function(){\n            this.createChoice();\n            this.createChoice();\n            this.createChoice();\n            this.createResponse({\n                baseType:'identifier',\n                cardinality:'multiple'\n            });\n        },\n        createChoice : function(){\n            var choice = new Choice();\n\n            this.addChoice(choice);\n\n            var rank = _.size(this.getChoices());\n\n            choice\n                .body('choice' + ' #' + rank)\n                .buildIdentifier('choice');\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n\n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n\n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction', 'lodash', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(BlockInteraction, _, rendererConfig){\n    \n    var ExtendedTextInteraction = BlockInteraction.extend({\n        qtiClass : 'extendedTextInteraction',\n        render : function(){\n            \n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    'multiple' : false,\n                    'maxStringLoop' : []\n                },\n                response = this.getResponseDeclaration();\n        \n            if(this.attr('maxStrings') && (response.attr('cardinality') === 'multiple' || response.attr('cardinality') === 'ordered')){\n                defaultData.multiple = true;\n                for(var i = 0; i < this.attr('maxStrings'); i++){\n                    defaultData.maxStringLoop.push(i + '');//need to convert to string. The tpl engine fails otherwise\n                }\n            }\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        }\n    });\n    \n    return ExtendedTextInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/ExtendedTextInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction',\n], function(_, editable, editableInteraction, Interaction){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                format: 'plain'\n            };\n        },\n        afterCreate : function(){\n            this.createResponse({\n                baseType: 'string',\n                cardinality: 'single'\n            });\n        },\n        createChoice : function(){\n            throw \"extendedTextInteraction does not have any choices\";\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/ContainerInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction', 'taoQtiItem/qtiItem/mixin/Container'], function(BlockInteraction, Container){\n    var ContainerInteraction = BlockInteraction.extend({});\n    Container.augment(ContainerInteraction);\n    return ContainerInteraction;\n});\n","define('taoQtiItem/qtiItem/core/interactions/GapMatchInteraction',['taoQtiItem/qtiItem/core/interactions/ContainerInteraction'], function(ContainerInteraction){\n    var GapMatchInteraction = ContainerInteraction.extend({\n        qtiClass : 'gapMatchInteraction',\n        getGaps : function(){\n            return this.getBody().getElements('gap');\n        }\n    });\n    return GapMatchInteraction;\n});\n\n","define('taoQtiItem/qtiCreator/model/interactions/GapMatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/GapMatchInteraction',\n    'taoQtiItem/qtiCreator/model/choices/GapText',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/helper/response'\n], function(_, Element, editable, editableInteraction, Interaction, Choice, event, responseHelper){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                shuffle : false\n            };\n        },\n        afterCreate : function(){\n            this.body('<p>Lorem ipsum dolor sit amet, consectetur adipisicing ...</p>');\n            this.createChoice();//gapMatchInteraction requires at least one gapMatch to be valid http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10307\n            this.createResponse({\n                baseType : 'directedPair',\n                cardinality : 'multiple'\n            });\n        },\n        createChoice : function(text){\n        \n            var choice = new Choice();\n\n            this.addChoice(choice);\n\n            choice\n                .val(text || 'choice #' + _.size(this.getChoices()))\n                .buildIdentifier('choice');\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            event.choiceCreated(choice, this);\n\n            return choice;\n        },\n        createGap : function(attr, body){\n\n            var choice = new Choice('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('gap');\n            choice.body(body);\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n\n            event.choiceCreated(choice, this);\n\n            return choice;\n        },\n        removeChoice : function(element){\n            var serial = '', c;\n            \n            if(typeof(element) === 'string'){\n                serial = element;\n            }else if(Element.isA(element, 'gap')){\n                serial = element.serial;\n            }else if(Element.isA(element, 'gapText')){\n                serial = element.serial;\n            }\n            \n            if(c = this.getBody().getElement(serial)){\n                //remove choice\n                this.getBody().removeElement(c);\n                \n                //update the response\n                responseHelper.removeChoice(this.getResponseDeclaration(), c);\n                \n                //trigger event\n                event.deleted(c, this);\n            }else if(c = this.getChoice(serial)){\n                //remove choice\n                delete this.choices[serial];\n                \n                //update the response\n                responseHelper.removeChoice(this.getResponseDeclaration(), c);\n                \n                //trigger event\n                event.deleted(c, this);\n            }\n            \n            return this;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/ObjectInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction', 'taoQtiItem/qtiItem/core/Object'], function(QtiBlockInteraction, QtiObject){\n    var QtiObjectInteraction = QtiBlockInteraction.extend({\n        //common methods to object containers (start)\n        initObject : function(object){\n            this.object = object || new QtiObject();\n        },\n        getObject : function(){\n            return this.object;\n        }\n        //common methods to object containers (end)\n    });\n    \n    return QtiObjectInteraction;\n});\n\n\n","define('taoQtiItem/qtiItem/core/interactions/GraphicInteraction',['taoQtiItem/qtiItem/core/interactions/ObjectInteraction', 'lodash', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(QtiObjectInteraction, _, rendererConfig){\n    var QtiGraphicInteraction = QtiObjectInteraction.extend({\n        render : function(){\n            \n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    'backgroundImage' : this.object.getAttributes(),\n                    'object' : this.object.render(renderer)\n                };\n                \n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        }\n    });\n\n    return QtiGraphicInteraction;\n});\n\n\n","define('taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction',['taoQtiItem/qtiItem/core/interactions/GraphicInteraction'], function(GraphicInteraction){\n    var GraphicAssociateInteraction = GraphicInteraction.extend({\n        qtiClass : 'graphicAssociateInteraction'\n    });\n    return GraphicAssociateInteraction;\n});\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/interactions/GraphicAssociateInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction',\n    'taoQtiItem/qtiCreator/model/choices/AssociableHotspot'\n], function($, _, editable, editableInteraction, Interaction, AssociableHotspot){\n    'use strict';\n\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {\n                'maxAssociations' : 0,\n                'minAssociations' : 0\n            };\n        },\n\n        /**\n         * Once the interaction model is created, \n         * we set the responsivness and create a default response \n         */ \n        afterCreate : function(){\n            var relatedItem = this.getRelatedItem();\n            var isResponsive = relatedItem.data('responsive');\n\n            if(isResponsive === true){\n                this.addClass('responsive');\n            }\n            this.createResponse({\n                baseType:'pair',\n                cardinality:'multiple'\n            });\n        },\n\n\n        /**\n         * Create a choice for the interaction\n         * @param {Object} attr - the choice attributes\n         * @returns {Object} the created choice\n         */\n        createChoice : function(attr){\n            var choice = new AssociableHotspot('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('associablehotspot');\n            \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n           \n            return choice;\n        }\n    });\n\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction',['taoQtiItem/qtiItem/core/interactions/GraphicInteraction', 'taoQtiItem/qtiItem/core/Element', 'lodash', 'taoQtiItem/qtiItem/helper/rendererConfig'], function(GraphicInteraction, Element, _, rendererConfig){\n\n    var GraphicGapMatchInteraction = GraphicInteraction.extend({\n        qtiClass : 'graphicGapMatchInteraction',\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.gapImgs = {};\n        },\n        addGapImg : function(gapImg){\n            if(Element.isA(gapImg, 'gapImg')){\n                gapImg.setRelatedItem(this.getRelatedItem() || null);\n                this.gapImgs[gapImg.getSerial()] = gapImg;\n            }\n        },\n        removeGapImg : function(gapImg){\n            var serial = '';\n            if(typeof(gapImg) === 'string'){\n                serial = gapImg;\n            }else if(Element.isA(gapImg, 'gapImg')){\n                serial = gapImg.getSerial();\n            }\n            delete this.gapImgs[serial];\n            return this;\n        },\n        getGapImgs : function(){\n            return _.clone(this.gapImgs);\n        },\n        getGapImg : function(serial){\n            return this.gapImgs[serial];\n        },\n        getComposingElements : function(){\n            var elts = this._super();\n            //recursive to choices:\n            for(var serial in this.gapImgs){\n                elts[serial] = this.gapImgs[serial];\n                elts = _.extend(elts, this.gapImgs[serial].getComposingElements());\n            }\n            return elts;\n        },\n        find : function(serial){\n            var found = this._super(serial);\n            if(!found){\n                if(this.gapImgs[serial]){\n                    found = {'parent' : this, 'element' : this.gapImgs[serial]};\n                }\n            }\n            return found;\n        },\n        render : function(){\n            \n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    'gapImgs' : []\n                };\n\n            //note: no choice shuffling option available for graphic gap match\n            var gapImgs = this.getGapImgs();\n            for(var serial in gapImgs){\n                if(Element.isA(gapImgs[serial], 'choice')){\n                    defaultData.gapImgs.push(gapImgs[serial].render({}, null, '', renderer));\n                }\n            }\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.gapImgs = {};\n            var gapImgs = this.getGapImgs();\n            for(var serial in gapImgs){\n                arr.gapImgs[serial] = gapImgs[serial].toArray();\n            }\n            return arr;\n        }\n    });\n\n    return GraphicGapMatchInteraction;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/interactions/GraphicGapMatchInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction',\n    'taoQtiItem/qtiCreator/model/choices/GapImg',\n    'taoQtiItem/qtiCreator/model/choices/AssociableHotspot'\n], function($, _, editable, editableInteraction, Interaction, GapImg, AssociableHotspot){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        \n\n        /**\n         * Once the interaction model is created, \n         * we set the responsivness and create a default response \n         */ \n        afterCreate : function(){\n            var relatedItem = this.getRelatedItem();\n            var isResponsive = relatedItem.data('responsive');\n\n            if(isResponsive === true){\n                this.addClass('responsive');\n            }\n            \n            this.createResponse({\n                baseType : 'directedPair',\n                cardinality : 'multiple'\n            });\n        },\n\n        /**\n         * Create a new gap image\n         * @param {Object} object - the qti object\n         * @param {String} object.data - the image url\n         * @param {String|Number} object.width - the image width\n         * @param {String|Number} object.height - the image height\n         * @param {String} object.type - the image mime type\n         * @param {String} [label] - the object label (ie. alt)\n         */\n        createGapImg : function(object, label){\n            var gapImg = new GapImg();\n            gapImg.object.attributes = object; \n            if(label){\n                gapImg.attr('objectLabel', label); \n            }\n            if(!this.gapImgs){\n                this.gapImgs = [];\n            }\n            this.addGapImg(gapImg);\n            gapImg.buildIdentifier('gapimg');\n\n            if(this.getRenderer()){\n                gapImg.setRenderer(this.getRenderer());\n            }\n\n            $(document).trigger('choiceCreated.qti-widget', {'choice' : gapImg, 'interaction' : this});\n\n            return gapImg;\n        },\n\n        /**\n         * Create a choice for the interaction\n         * @param {Object} attr - the choice attributes\n         * @returns {Object} the created choice\n         */\n        createChoice : function(attr){\n            var choice = new AssociableHotspot('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('associablehotspot');\n            \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n           \n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction',['taoQtiItem/qtiItem/core/interactions/GraphicInteraction'], function(GraphicInteraction){\n    var GraphicOrderInteraction = GraphicInteraction.extend({\n        qtiClass : 'graphicOrderInteraction'\n    });\n    return GraphicOrderInteraction;\n});\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/interactions/GraphicOrderInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction',\n    'taoQtiItem/qtiCreator/model/choices/HotspotChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n\n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {};\n        },\n\n        /**\n         * Once the interaction model is created, \n         * we set the responsivness and create a default response \n         */ \n        afterCreate : function(){\n            var relatedItem = this.getRelatedItem();\n            var isResponsive = relatedItem.data('responsive');\n\n            if(isResponsive === true){\n                this.addClass('responsive');\n            }\n            this.createResponse({\n                baseType:'identifier',\n                cardinality:'ordered'\n            });\n        },\n\n        /**\n         * Create a choice for the interaction\n         * @param {Object} attr - the choice attributes\n         * @returns {Object} the created choice\n         */\n        createChoice : function(attr){\n            var choice = new Choice('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('hotspot');\n            \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n           \n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/HotspotInteraction',['taoQtiItem/qtiItem/core/interactions/GraphicInteraction'], function(GraphicInteraction){\n    var HotspotInteraction = GraphicInteraction.extend({\n        qtiClass : 'hotspotInteraction'\n    });\n    return HotspotInteraction;\n});\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/interactions/HotspotInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/HotspotInteraction',\n    'taoQtiItem/qtiCreator/model/choices/HotspotChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {\n                'maxChoices' : 0,\n                'minChoices' : 0\n            };\n        },\n\n        /**\n         * Once the interaction model is created, \n         * we set the responsivness and create a default response \n         */ \n        afterCreate : function(){\n            var relatedItem = this.getRelatedItem();\n            var isResponsive = relatedItem.data('responsive');\n\n            if(isResponsive === true){\n                this.addClass('responsive');\n            }\n            this.createResponse({\n                baseType:'identifier',\n                cardinality:'single'\n            });\n        },\n\n        /**\n         * Create a choice for the interaction\n         * @param {Object} attr - the choice attributes\n         * @returns {Object} the created choice\n         */\n        createChoice : function(attr){\n            var choice = new Choice('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('hotspot');\n            \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n           \n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/HottextInteraction',['taoQtiItem/qtiItem/core/interactions/ContainerInteraction', 'taoQtiItem/qtiItem/core/Element'], function(ContainerInteraction, Element){\n    var HottextInteraction = ContainerInteraction.extend({\n        qtiClass : 'hottextInteraction',\n        getChoices : function(){\n            return this.getBody().getElements('hottext');\n        },\n        getChoice : function(serial){\n            var element = this.getBody().getElement(serial);\n            return Element.isA(element, 'choice') ? element : null;\n        }\n    });\n    return HottextInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/HottextInteraction',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/HottextInteraction',\n    'taoQtiItem/qtiCreator/model/choices/Hottext',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/helper/response'\n], function(_, Element, editable, editableInteraction, Interaction, Choice,event, responseHelper){\n    \n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                maxChoices : 0,\n                minChoices : 0\n            };\n        },\n        afterCreate : function(){\n            this.body('<p>Lorem ipsum dolor sit amet, consectetur adipisicing ...</p>');\n            this.createResponse({\n                baseType : 'identifier',\n                cardinality : 'multiple'\n            });\n        },\n        createChoice : function(attr, body){\n\n            var choice = new Choice('', attr);\n\n            this.addChoice(choice);\n            choice.buildIdentifier('hottext');\n            choice.body(body);\n                \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            event.choiceCreated(choice, this);\n\n            return choice;\n        },\n        removeChoice : function(hottext){\n        \n            var serial = '', c;\n            \n            if(typeof(hottext) === 'string'){\n                serial = hottext;\n            }else if(Element.isA(hottext, 'hottext')){\n                serial = hottext.getSerial();\n            }\n            \n            c = this.getBody().getElement(serial);\n            if(c){\n                //remove choice\n                this.getBody().removeElement(c);\n                \n                //update the response\n                responseHelper.removeChoice(this.getResponseDeclaration(), c);\n                \n                //trigger event\n                event.deleted(c, this);\n            }\n            \n            return this;\n        }\n    });\n    \n    return Interaction.extend(methods);\n});\n\n","define('taoQtiItem/qtiItem/core/interactions/InlineInteraction',['taoQtiItem/qtiItem/core/interactions/Interaction'], function(Interaction){\n    return Interaction.extend({});\n});\n\n\n","define('taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction',['taoQtiItem/qtiItem/core/interactions/InlineInteraction'], function(InlineInteraction){\n    var InlineChoiceInteraction = InlineInteraction.extend({\n        'qtiClass' : 'inlineChoiceInteraction'\n    });\n    return InlineChoiceInteraction;\n});\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/InlineChoiceInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction',\n    'taoQtiItem/qtiCreator/model/choices/InlineChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'shuffle' : false,\n                'required' : false\n            };\n        },\n        afterCreate : function(){\n            this.createChoice();\n            this.createChoice();\n            this.createChoice();\n            this.createResponse({\n                baseType:'identifier',\n                cardinality:'single'\n            });\n        },\n        createChoice : function(){\n            var choice = new Choice();\n\n            this.addChoice(choice);\n\n            var rank = _.size(this.getChoices());\n\n            choice\n                .val('choice' + ' #' + rank)\n                .buildIdentifier('choice');\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n\n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n\n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/MatchInteraction',[\n    'taoQtiItem/qtiItem/core/interactions/BlockInteraction',\n    'taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice',\n    'lodash',\n    'taoQtiItem/qtiItem/helper/rendererConfig',\n    'taoQtiItem/qtiItem/helper/util'\n], function(BlockInteraction, SimpleAssociableChoice, _, rendererConfig, util){\n\n    var MatchInteraction = BlockInteraction.extend({\n        qtiClass : 'matchInteraction',\n        init : function(serial, attributes){\n            this._super(serial, attributes);\n            this.choices = [{}, {}];\n        },\n        addChoice : function(choice, matchSet){\n            matchSet = parseInt(matchSet);\n            if(this.choices[matchSet]){\n                choice.setRelatedItem(this.getRelatedItem() || null);\n                this.choices[matchSet][choice.getSerial()] = choice;\n            }\n        },\n        getChoices : function(matchSet){\n            matchSet = parseInt(matchSet);\n            if(this.choices[matchSet]){\n                return _.clone(this.choices[matchSet]);\n            }else{\n                return _.clone(this.choices);\n            }\n        },\n        getChoice : function(serial){\n            return this.choices[0][serial] || this.choices[1][serial] || null;\n        },\n        getComposingElements : function(){\n\n            var elts = this._super();\n            //recursive to both match sets:\n            for(var i = 0; i < 2; i++){\n                var matchSet = this.getChoices(i);\n                for(var serial in matchSet){\n                    if(matchSet[serial] instanceof SimpleAssociableChoice){\n                        elts[serial] = matchSet[serial];\n                        elts = _.extend(elts, matchSet[serial].getComposingElements());\n                    }\n                }\n            }\n\n            return elts;\n        },\n        find : function(serial){\n            var found = this._super(serial);\n            if(!found){\n                found = util.findInCollection(this, ['choices.0', 'choices.1'], serial);\n            }\n            return found;\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                choices,\n                defaultData = {\n                'matchSet1' : [],\n                'matchSet2' : []\n            };\n\n            var interactionData = {'interaction' : {'serial' : this.serial, 'attributes' : this.attributes}};\n\n            if(!renderer){\n                throw 'no renderer found for the interaction ' + this.qtiClass;\n            }\n\n            if(this.attr('shuffle') && renderer.shuffleChoices){\n                choices = renderer.getShuffledChoices(this);\n            }else{\n                choices = this.getChoices();\n            }\n\n            for(var i = 0; i < 2; i++){\n                var matchSet = choices[i];\n                for(var serial in matchSet){\n                    if(matchSet[serial] instanceof SimpleAssociableChoice){\n                        defaultData['matchSet' + (i + 1)].push(matchSet[serial].render(_.clone(interactionData, true), null, 'simpleAssociableChoice.matchInteraction', renderer));\n                    }\n                }\n            }\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        postRender : function(data, altClassName, renderer){\n\n            renderer = renderer || this.getRenderer();\n\n            var choices = this.getChoices();\n\n            for(var i = 0; i < 2; i++){\n                _.forIn(choices[i], function(c){\n                    if(c instanceof SimpleAssociableChoice){\n                        c.postRender({}, 'simpleAssociableChoice.matchInteraction', renderer);\n                    }\n                });\n            }\n\n            return this._super(data, altClassName, renderer);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.choices = {0 : {}, 1 : {}};\n            for(var i = 0; i < 2; i++){\n                var matchSet = this.getChoices(i);\n                for(var serial in matchSet){\n                    if(matchSet[serial] instanceof SimpleAssociableChoice){\n                        arr.choices[i][serial] = matchSet[serial].toArray();\n                    }\n                }\n            }\n            return arr;\n        }\n    });\n\n    return MatchInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/MatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/MatchInteraction',\n    'taoQtiItem/qtiCreator/model/choices/SimpleAssociableChoice',\n    'taoQtiItem/qtiCreator/model/helper/event',\n    'taoQtiItem/qtiCreator/model/helper/response'\n], function(_, Element, editable, editableInteraction, Interaction, Choice, event, responseHelper){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'shuffle' : false,\n                'maxAssociations' : 0,\n                'minAssociations' : 0\n            };\n        },\n        afterCreate : function(){\n            this.createChoice(0);\n            this.createChoice(0);\n            this.createChoice(1);\n            this.createChoice(1);\n            this.createResponse({\n                baseType:'directedPair',\n                cardinality:'multiple'\n            });\n        },\n        createChoice : function(matchSet, attr){\n        \n            var choice = new Choice('', attr);\n            \n            this.addChoice(choice, matchSet);\n            \n            var rank = _.size(this.getChoices(matchSet));\n            \n            choice\n                .body('choice' + ' #' + rank)\n                .buildIdentifier('choice');\n            \n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n            \n            event.choiceCreated(choice, this);\n            \n            return choice;\n        },\n        removeChoice : function(choice){\n            \n            var serial = '', c;\n            \n            if(typeof(choice) === 'string'){\n                serial = choice;\n            }else if(Element.isA(choice, 'choice')){\n                serial = choice.getSerial();\n            }\n            \n            c = this.choices[0][serial] || this.choices[1][serial] || null;\n            \n            if(c){\n                \n                //remove choice\n                delete this.choices[0][serial];\n                delete this.choices[1][serial];\n                \n                //update the response\n                responseHelper.removeChoice(this.getResponseDeclaration(), c);\n                \n                //trigger event\n                event.deleted(c, this);\n            }\n            \n            return this;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/MediaInteraction',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/interactions/ObjectInteraction',\n    'taoQtiItem/qtiItem/helper/rendererConfig'\n], function(_, ObjectInteraction, rendererConfig){\n    var MediaInteraction = ObjectInteraction.extend({\n        qtiClass : 'mediaInteraction',\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    'media' : this.object.render({}, null, '', renderer)\n                };\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n\n        }\n    });\n    return MediaInteraction;\n});\n\n","define('taoQtiItem/qtiCreator/model/interactions/MediaInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/MediaInteraction'\n], function(_, editable, editableInteraction, Interaction){\n\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n\n            //var defAtt = interaction.getDefaultAttributes();\n            //_.extend(interaction.attributes, defAtt);\n            //delete interaction.attributes.media;\n            //_.extend(interaction.object.attributes, defAtt.media);\n            \n            return {\n                /*media: {\n                  //data: 'http://tao.localdomain/filemanager/views/data/media/echo-hereweare.mp4',\n                  data: '',\n                  type: 'video/mp4',\n                  width: 480,\n                  height: 270\n                },*/\n                autostart : false,\n                minPlays : 0,\n                maxPlays : 0,\n                loop : false\n            };\n        },\n        afterCreate : function(){\n            //function that will immediately be called after its creation in the item creator\n            //nothing special to do here ?\n            \n            this.createResponse({\n                baseType:'integer',\n                cardinality:'single'\n            });\n            \n        },\n        createChoice : function(){\n            throw 'mediaInteraction does not have any choices';\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/OrderInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction'], function(BlockInteraction){\n    var OrderInteraction = BlockInteraction.extend({\n        qtiClass : 'orderInteraction'\n    });\n    return OrderInteraction;\n});\n","define('taoQtiItem/qtiCreator/model/interactions/OrderInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/OrderInteraction',\n    'taoQtiItem/qtiCreator/model/choices/SimpleChoice'\n], function($, _, editable, editableInteraction, Interaction, Choice){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                shuffle : false,\n                orientation : 'vertical'\n            };\n        },\n        afterCreate : function(){\n            this.createChoice();\n            this.createChoice();\n            this.createChoice();\n            this.createResponse({\n                baseType:'identifier',\n                cardinality:'ordered'\n            });\n        },\n        createChoice : function(){\n            var choice = new Choice();\n\n            this.addChoice(choice);\n\n            var rank = _.size(this.getChoices());\n\n            choice\n                .body('choice' + ' #' + rank)\n                .buildIdentifier('choice');\n\n            if(this.getRenderer()){\n                choice.setRenderer(this.getRenderer());\n            }\n\n            $(document).trigger('choiceCreated.qti-widget', {'choice' : choice, 'interaction' : this});\n\n            return choice;\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/CustomInteraction',[\n    'taoQtiItem/qtiItem/core/interactions/Interaction',\n    'lodash',\n    'taoQtiItem/qtiItem/helper/rendererConfig'\n], function(Interaction, _, rendererConfig){\n\n    var CustomInteraction = Interaction.extend({\n        qtiClass : 'customInteraction',\n        defaultNsName : 'pci',\n        defaultNsUri : 'http://www.imsglobal.org/xsd/portableCustomInteraction',\n        defaultMarkupNsName : 'html5',\n        defaultMarkupNsUri : 'html5',\n        init : function(serial, attributes){\n\n            this._super(serial, attributes);\n\n            this.typeIdentifier = '';\n            this.markup = '';\n            this.properties = {};\n            this.libraries = [];\n            this.entryPoint = '';\n\n            //note : if the uri is defined, it will be set the uri in the xml on xml serialization,\n            //which may trigger xsd validation, which is troublesome for html5 (use xhtml5 maybe ?)\n            this.markupNs = {};\n\n            this.pciReadyCallbacks = [];\n        },\n        is : function(qtiClass){\n            return (qtiClass === 'customInteraction') || this._super(qtiClass);\n        },\n        render : function(){\n\n            var args = rendererConfig.getOptionsFromArguments(arguments),\n                renderer = args.renderer || this.getRenderer(),\n                defaultData = {\n                    typeIdentifier : this.typeIdentifier,\n                    markup : this.markup,\n                    properties : this.properties,\n                    libraries : this.libraries,\n                    entryPoint : this.entryPoint,\n                    ns : {\n                        pci : this.getNamespace().name + ':'\n                    }\n                };\n\n            return this._super(_.merge(defaultData, args.data), args.placeholder, args.subclass, renderer);\n        },\n        toArray : function(){\n            var arr = this._super();\n            arr.markup = this.markup;\n            arr.properties = this.properties;\n            return arr;\n        },\n        prop : function(name, value){\n            if(name){\n                if(value !== undefined){\n                    this.properties[name] = value;\n                }else{\n                    if(typeof (name) === 'object'){\n                        for(var prop in name){\n                            this.prop(prop, name[prop]);\n                        }\n                    }else if(typeof (name) === 'string'){\n                        if(this.properties[name] === undefined){\n                            return undefined;\n                        }else{\n                            return this.properties[name];\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        removeProp : function(propNames){\n            var _this = this;\n            if(typeof (propNames) === 'string'){\n                propNames = [propNames];\n            }\n            _.each(propNames, function(propName){\n                delete _this.properties[propName];\n            });\n            return this;\n        },\n        getProperties : function(){\n            return _.clone(this.properties);\n        },\n        getNamespace : function(){\n\n            if(this.ns && this.ns.name && this.ns.uri){\n                return _.clone(this.ns);\n            }else{\n\n                var relatedItem = this.getRelatedItem();\n                if(relatedItem){\n                    var namespaces = relatedItem.getNamespaces();\n                    for(var ns in namespaces){\n                        if(namespaces[ns].indexOf('portableCustomInteraction') > 0){\n                            return {\n                                name : ns,\n                                uri : namespaces[ns]\n                            };\n                        }\n                    }\n                    //if no ns found in the item, set the default one!\n                    relatedItem.namespaces[this.defaultNsName] = this.defaultNsUri;\n                    return {\n                        name : this.defaultNsName,\n                        uri : this.defaultNsUri\n                    };\n                }\n            }\n\n            return {};\n        },\n        setNamespace : function(name, uri){\n            this.ns = {\n                name : name,\n                uri : uri\n            };\n        },\n        getMarkupNamespace : function(){\n\n            if(this.markupNs && this.markupNs.name && this.markupNs.uri){\n                return _.clone(this.markupNs);\n            }else{\n                var relatedItem = this.getRelatedItem();\n                if(relatedItem){\n                    //set the default one:\n                    relatedItem.namespaces[this.defaultMarkupNsName] = this.defaultMarkupNsUri;\n                    return {\n                        name : this.defaultMarkupNsName,\n                        uri : this.defaultMarkupNsUri\n                    };\n                }\n            }\n\n            return {};\n        },\n        setMarkupNamespace : function(name, uri){\n            this.markupNs = {\n                name : name,\n                uri : uri\n            };\n        },\n        onPciReady : function(callback){\n\n            this.pciReadyCallbacks.push(callback);\n\n            if(this.data('pci')){\n                //if pci is already ready, call it immediately\n                this.triggerPciReady();\n            }\n        },\n        triggerPciReady : function(){\n\n            var _this = this,\n                pci = this.data('pci');\n\n            if(pci){\n                _.each(this.pciReadyCallbacks, function(fn){\n                    fn.call(_this, pci);\n                });\n\n                this.pciReadyCallbacks = [];\n            }else{\n                throw 'cannot trigger pci ready when no pci is actually attached to the interaction';\n            }\n\n        },\n        onPci : function(event, callback){\n            this.onPciReady(function(pci){\n                if(_.isFunction(pci.on)){\n                    pci.on(event, callback);\n                }else{\n                    throw 'the pci does not implement on() function';\n                }\n            });\n            return this;\n        },\n        offPci : function(event){\n            this.onPciReady(function(pci){\n                if(_.isFunction(pci.off)){\n                    pci.off(event);\n                }else{\n                    throw 'the pci does not implement off() function';\n                }\n            });\n            return this;\n        },\n        triggerPci : function(event, args){\n            this.onPciReady(function(pci){\n                if(_.isFunction(pci.off)){\n                    pci.trigger(event, args);\n                }else{\n                    throw 'the pci does not implement off() function';\n                }\n            });\n            return this;\n        }\n    });\n\n    return CustomInteraction;\n});\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/PortableCustomInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiCreator/model/helper/portableElement',\n    'taoQtiItem/qtiCreator/editor/customInteractionRegistry',\n    'taoQtiItem/qtiItem/core/interactions/CustomInteraction'\n], function(_, editable, editableInteraction, portableElement, ciRegistry, Interaction){\n\n    var _throwMissingImplementationError = function(pci, fnName){\n        throw fnName + ' not available for pci of type ' + pci.typeIdentifier;\n    };\n\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, portableElement.getDefaultMethods(ciRegistry));\n    _.extend(methods, {\n        createChoice : function(){\n\n            var creator = ciRegistry.getCreator(this.typeIdentifier);\n            if(_.isFunction(creator.createChoice)){\n                return creator.createChoice(this);\n            }else{\n                _throwMissingImplementationError(this, 'createChoice');\n            }\n        },\n        getDefaultMarkupTemplateData : function(){\n            return {\n                responseIdentifier : this.attr('responseIdentifier')\n            };\n        }\n    });\n\n    return Interaction.extend(methods);\n});\n","define('taoQtiItem/qtiItem/core/interactions/SelectPointInteraction',['taoQtiItem/qtiItem/core/interactions/GraphicInteraction'], function(GraphicInteraction){\n    var SelectPointInteraction = GraphicInteraction.extend({\n        qtiClass : 'selectPointInteraction'\n    });\n    return SelectPointInteraction;\n});\n\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/model/interactions/SelectPointInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/SelectPointInteraction'\n], function($, _, editable, editableInteraction, Interaction){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        \n        /**\n         * Set the default values for the model\n         * @returns {Object} the default attributes \n         */ \n        getDefaultAttributes : function(){\n            return {\n                'maxChoices' : 0,\n                'minChoices' : 0\n            };\n        },\n\n        /**\n         * Once the interaction model is created, \n         * we set the responsivness and create a default response \n         */ \n        afterCreate : function(){\n            var relatedItem = this.getRelatedItem();\n            var isResponsive = relatedItem.data('responsive');\n\n            if(isResponsive === true){\n                this.addClass('responsive');\n            }\n            this.createResponse({\n                baseType:'point',\n                cardinality:'multiple'\n            }, 'MAP_RESPONSE_POINT');\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/SliderInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction'], function(BlockInteraction){\n    var SliderInteraction = BlockInteraction.extend({\n        qtiClass : 'sliderInteraction'\n    });\n    return SliderInteraction;\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/SliderInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/SliderInteraction',\n], function(_, editable, editableInteraction, Interaction){\n    var methods = {};\n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes : function(){\n            return {\n                'lowerBound': 0.0,\n                'upperBound': 100.0,\n                'orientation': 'horizontal',\n                'reverse': false,\n                'step': 1,\n                'stepLabel': false\n            };\n        },\n        afterCreate : function(){\n            this.createResponse({\n                baseType: 'integer',\n                cardinality: 'single'\n            });\n        },\n        createChoice : function(){\n            throw \"sliderInteraction does not have any choices\";\n        }\n    });\n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiItem/core/interactions/TextEntryInteraction',['taoQtiItem/qtiItem/core/interactions/InlineInteraction'], function(InlineInteraction){\n    var TextEntryInteraction = InlineInteraction.extend({\n        'qtiClass' : 'textEntryInteraction'\n    });\n    return TextEntryInteraction;\n});\n","define('taoQtiItem/qtiCreator/model/interactions/TextEntryInteraction',[\r\n    'lodash',\r\n    'taoQtiItem/qtiCreator/model/mixin/editable',\r\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\r\n    'taoQtiItem/qtiItem/core/interactions/TextEntryInteraction'\r\n], function(_, editable, editableInteraction, Interaction){\r\n    var methods = {};\r\n    _.extend(methods, editable);\r\n    _.extend(methods, editableInteraction);\r\n    _.extend(methods, {\r\n        getDefaultAttributes : function(){\r\n            return {\r\n                base : 10,\r\n                placeholderText : ''\r\n            };\r\n        },\r\n        afterCreate : function(){\r\n            this.createResponse({\r\n                baseType:'string',\r\n                cardinality:'single'\r\n            });\r\n        },\r\n        createChoice : function(){\r\n            throw new Error('text entry interaction has no choice');\r\n        }\r\n    });\r\n    return Interaction.extend(methods);\r\n});\n","define('taoQtiItem/qtiItem/core/interactions/UploadInteraction',['taoQtiItem/qtiItem/core/interactions/BlockInteraction'], function(InlineInteraction){\n    var UploadInteraction = InlineInteraction.extend({\n        'qtiClass' : 'uploadInteraction'\n    });\n    return UploadInteraction;\n});\n\n\n","define('taoQtiItem/qtiCreator/model/interactions/UploadInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCreator/model/mixin/editable',\n    'taoQtiItem/qtiCreator/model/mixin/editableInteraction',\n    'taoQtiItem/qtiItem/core/interactions/UploadInteraction'\n], function(_, editable, editableInteraction, Interaction) {\n    \n    var methods = {};\n    \n    _.extend(methods, editable);\n    _.extend(methods, editableInteraction);\n    _.extend(methods, {\n        getDefaultAttributes: function() {\n            // The QTI uploadInteraction has a unique\n            // attribute 'type', which can be empty.\n            return {\n                'type': ''\n            };\n        },\n        \n        afterCreate: function() {\n            // As per specs, a QTI uploadInteraction\n            // is always bound to a response variable\n            // with base-type file and single cardinality.\n            this.createResponse({\n                baseType:'file',\n                cardinality:'single'\n            });\n        },\n        \n        createChoice: function() {\n            throw 'uploadInteraction does not have any choices';\n        }\n    });\n    \n    return Interaction.extend(methods);\n});\n\n\n\n","define('taoQtiItem/qtiCreator/model/pciCreatorContext',['lodash'], function(_){\n\n    var _pciModels = {};\n    \n    /**\n     * Global object accessible by all PCIs\n     * \n     * @type Object\n     */\n    var pciCreatorContext = {\n        /**\n         * register a custom interaction (its runtime model) in global registery\n         * register a renderer\n         * \n         * @param {Object} pciModel\n         * @returns {undefined}\n         */\n        register : function(pciModel){\n            //@todo check pciModel validity\n            _pciModels[pciModel.getTypeIdentifier()] = pciModel;\n        },\n        /**\n         * Get a cloned object representing the PCI model\n         * \n         * @param {string} pciTypeIdentifier\n         * @returns {Object} clonedPciModel\n         */\n        createPciInstance : function(pciTypeIdentifier){\n            if(_pciModels[pciTypeIdentifier]){\n                return _.cloneDeep(_pciModels[pciTypeIdentifier]);\n            }\n        }\n    };\n\n    return pciCreatorContext;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/container', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, helper, options, functionType=\"function\", self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<div data-html-editable=\\\"true\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.contentModel), \"blockStatic\", options) : helperMissing.call(depth0, \"equal\", (depth0 && depth0.contentModel), \"blockStatic\", options));\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Container',['tpl!taoQtiItem/qtiCreator/tpl/container'], function(tpl){\n    return {\n        qtiClass : '_container',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/img', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"class=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"width=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  return buffer;\n  }\n\n  buffer += \"<img \\n    data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n    data-qti-class=\\\"img\\\" \\n    src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.src)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \\n    alt=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.alt)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    />\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/Img',['tpl!taoQtiItem/qtiCommonRenderer/tpl/img', 'taoQtiItem/qtiCommonRenderer/helpers/Helper'], function(tpl, Helper){\n    return {\n        qtiClass : 'img',\n        template : tpl,\n        getContainer : Helper.getContainer\n    };\n});\n","define('taoQtiItem/qtiCreator/widgets/Widget',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/model/helper/invalidator'\n], function(_, $, Element, invalidator){\n\n    var _pushState = function(widget, stateName){\n        var currentState = new widget.registeredStates[stateName](widget);\n        widget.stateStack.push(currentState);\n        currentState.init();\n    };\n\n    var _popState = function(widget){\n        var state = widget.stateStack.pop();\n        if(state){\n            state.exit();\n        }\n    };\n\n    var Widget = {\n        init : function(element, $original, $form, options){\n            if(element instanceof Element){\n\n                options = options || {};\n\n                this.element = element;\n                this.serial = element.getSerial();\n                this.$original = $original;\n                this.$form = $form;\n                this.stateStack = [];\n\n                this.registeredStates = {};\n\n                //build container from origin element\n                this.buildContainer();\n\n                //attach the widget to widget $container and element:\n                this.$container.data('widget', this);\n                this.$original.data('widget', this);\n\n                this.element.data('widget', this);\n\n                //clean old referenced event\n                this.offEvents();//not sure if still required after state definition\n\n                //pass the options to the initCreator for custom options usage\n                _.each(this.getRequiredOptions(), function(opt){\n                    if(!options[opt]){\n                        throw new Error('missing required option for image creator : ' + opt);\n                    }\n                });\n                this.options = options;\n                this.initCreator(options);\n\n                //init state after creator init\n                if(options.state){\n                    this.changeState(options.state);\n                }else{\n                    this.changeState('sleep');\n                }\n\n                if(_.isFunction(options.ready)){\n                    options.ready.call(this, this);\n                }\n\n            }else{\n                throw new Error('element is not a QTI Element');\n            }\n            return this;\n        },\n        getRequiredOptions : function(){\n            return [];\n        },\n        buildContainer : function(){\n            throw new Error('method buildContainer must be implemented');\n        },\n        build : function(element, $container, $form, options){\n            return this.clone().init(element, $container, $form, options);\n        },\n        clone : function(){\n            return _.clone(this);\n        },\n        initCreator : function(){\n            //prepare all common actions, event handlers and dom for every state of the widget\n        },\n        getCurrentState : function(){\n            return _.last(this.stateStack);\n        },\n        /**\n         * Very important method:\n         * It changes the state of the widget by checking the relation between\n         * the target and the current states.\n         *\n         * @param {string} stateName\n         * @returns {object} this\n         */\n        changeState : function(stateName){\n\n            var _this = this,\n                state,\n                superStateName,\n                currentState = this.getCurrentState();\n\n            if(this.registeredStates[stateName]){\n                state = new this.registeredStates[stateName];\n            }else{\n                throw new Error('unknown target state : ' + stateName);\n                return null;\n            }\n\n            if(currentState){\n\n                if(currentState.name === state.name){\n                    return this;\n                }else if(_.indexOf(state.superState, currentState.name) >= 0){\n\n                    //initialize super states in reverse order:\n                    for(var i = _.indexOf(state.superState, currentState.name) - 1; i >= 0; i--){\n                        superStateName = state.superState[i];\n                        _pushState(this, superStateName);\n                    }\n\n                }else if(_.indexOf(currentState.superState, state.name) >= 0){\n\n                    //just exit as much state as needed to get to it:\n                    for(var i = 0; i <= _.indexOf(currentState.superState, state.name); i++){\n                        _popState(_this);\n                    }\n\n                    return this;\n\n                }else{\n\n                    //first, exit the current state\n                    _popState(_this);\n\n                    //then, exit super states in order:\n                    var exitedStates = _.difference(currentState.superState, state.superState);\n                    _.each(exitedStates, function(){\n                        _popState(_this);\n                    });\n\n                    //finally, init super states in reverse order:\n                    var enteredStates = _.difference(state.superState, currentState.superState);\n                    _.eachRight(enteredStates, function(superStateName){\n                        _pushState(_this, superStateName);\n                    });\n                }\n\n            }else{\n                _.eachRight(state.superState, function(superStateName){\n                    _pushState(_this, superStateName);\n                });\n            }\n\n            _pushState(this, stateName);\n            return this;\n        },\n        registerState : function(name, State){\n            if(name && State){\n                this.registeredStates[name] = State;\n            }else{\n                throw new Error('missing required arguments in state registration');\n            }\n        },\n        registerStates : function(states){\n            var _this = this;\n            _.forIn(states, function(State, name){\n                _this.registerState(name, State);\n            });\n        },\n        afterStateInit : function(callback, ns){\n            var evtName = 'afterStateInit.qti-widget.' + this.serial + (ns ? '.' + ns : '');\n            $(document).on(evtName, callback);\n        },\n        beforeStateInit : function(callback, ns){\n            var evtName = 'beforeStateInit.qti-widget.' + this.serial + (ns ? '.' + ns : '');\n            $(document).on(evtName, callback);\n        },\n        afterStateExit : function(callback, ns){\n            var evtName = 'afterStateExit.qti-widget.' + this.serial + (ns ? '.' + ns : '');\n            $(document).on(evtName, callback);\n        },\n        beforeStateExit : function(callback, ns){\n            var evtName = 'beforeStateExit.qti-widget.' + this.serial + (ns ? '.' + ns : '');\n            $(document).on(evtName, callback);\n        },\n        offEvents : function(ns){\n            var evtName = '.qti-widget.' + this.serial + (ns ? '.' + ns : '');\n            $(document).off(evtName);\n        },\n        destroy : function(){\n\n            //to call exit method and clean up listeners\n            this.changeState('sleep');\n\n            //remove editable widgets\n            this.$container.find('[data-edit]').remove();\n            $('[data-widget-component=' + this.serial + ']').remove();\n\n            //clean old referenced event\n            this.offEvents();\n        },\n        rebuild : function(options){\n\n            options = options || {};\n\n            var element = this.element;\n            var postRenderOpts = {};\n            if(_.isFunction(options.ready)){\n                postRenderOpts.ready = options.ready;\n            }\n\n            var $container = null;\n            if(options.context && options.context.length){\n                //if the context option is provided, the function will fetch the widget container that in this context\n                //mandatory for detached of duplicated DOM element (e.g. ckEditor)\n                $container = options.context.find('.widget-box[data-serial=' + element.serial + ']');\n            }else{\n                $container = this.$container;\n            }\n\n            //once required data ref has been set, destroy it:\n            this.destroy();\n\n            //we assume that the element still has its renderer set, check renderer:\n            var renderer = element.getRenderer();\n\n            if(renderer && renderer.isRenderer){\n                if(renderer.name === 'creatorRenderer'){\n                    element.render($container);\n                    return element.postRender(postRenderOpts);\n                }else{\n                    throw new Error('The renderer is no longer the creatorRenderer');\n                }\n            }else{\n                throw new Error('No renderer found to rebuild the widget');\n            }\n\n            return null;\n        },\n\n        refresh : function(){\n\n            var currentState = this.getCurrentState().name;\n\n            this.rebuild({\n                ready:function(widget){\n                    widget.changeState(currentState);\n                }\n            });\n        },\n\n        //assign an event listener that lives with the state\n        on : function(qtiElementEventName, callback, live){\n\n            var _this = this,\n                eventNames = qtiElementEventName.replace(/\\s+/g, ' ').split(' '),\n                $document = $(document);\n\n            _.each(eventNames, function(eventName){\n\n                var eventNameToken = [eventName, 'qti-widget', _this.serial];\n\n                if(!live){\n                    eventNameToken.push(_this.getCurrentState().name);\n                }\n\n                //bind each individual event listener to the document\n                $document.on(eventNameToken.join('.'), function(e, data){\n                    callback.call(_this, data);\n                });\n\n            });\n\n            return this;//for chaining\n        },\n        /**\n         * Get / Set the validation state\n         * @param {String} [what] - key to identify the validation\n         * @param {Boolean} [valid] - false to invalidate\n         * @param {String} [why] - message\n         */\n        isValid : function(what, valid, why){\n\n            var element = this.element;\n\n            if(what === undefined){\n                //get\n                return invalidator.isValid(element);\n            }else if(valid){\n                invalidator.valid(element, what);\n            }else{\n                invalidator.invalid(element, what, why, this.getCurrentState().name);\n            }\n        }\n    };\n\n    return Widget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/Widget',\n    'taoQtiItem/qtiCreator/editor/widgetToolbar'\n], function($, Widget, toolbar){\n\n    var StaticWidget = Widget.clone();\n\n    StaticWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.createToolbar();\n    };\n\n    StaticWidget.buildContainer = function(){\n        var $wrap = $('<div>', {'data-serial' : this.element.serial, 'class' : 'widget-box'});\n        this.$original.wrap($wrap);\n        this.$container = this.$original.parent();\n    };\n\n    StaticWidget.createToolbar = function(){\n\n        return this;\n    };\n\n    StaticWidget.createOkButton = function(){\n\n        var _this = this;\n\n        //@todo: use handlebars tpl instead?\n        this.$container.append($('<button>', {\n            'class' : 'btn-info small',\n            'type' : 'button',\n            'text' : 'OK',\n            'data-edit' : 'active'\n        }).css({\n            margin : '5px 10px',\n            display : 'none'\n        }).on('click.qti-widget', function(e){\n            e.stopPropagation();\n            _this.changeState('sleep');\n        }));\n    };\n\n    return StaticWidget;\n});\n","define('taoQtiItem/qtiCreator/widgets/states/factory',['jquery', 'lodash'], function($, _){\n\n    var _isValidStateDefinition = function(state){\n\n        if(!_.isFunction(state)){\n            return false;\n        }\n\n        if(!state.prototype.name || !state.prototype.superState){\n            return false;\n        }\n\n        if(!_.isFunction(state.prototype.init) || !_.isFunction(state.prototype.exit)){\n            return false;\n        }\n\n        return true;\n    };\n\n\n    var _create = function(name, superStates, init, exit){\n\n        var State = function(widget){\n            this.widget = widget;\n        };\n\n        State.prototype.name = name;\n\n        State.prototype.superState = superStates || [];\n\n        if(init && exit){\n            State.prototype.init = function(){\n\n                var $container = this.widget.$container;\n\n                if($container.data('edit') === name){\n                    $container.show();\n                }\n\n                var $editableWidgets = $container.find('[data-edit=\"' + name + '\"]').filter(function(){\n                    var $parentWidget = $(this).closest('.widget-box');\n                    if($parentWidget.length && $parentWidget[0] === $container[0]){\n                        return true;\n                    }\n                    return false;\n                });\n                $editableWidgets.show();\n\n                this.widget.$container.addClass('edit-' + name);\n                $(document).trigger('beforeStateInit.qti-widget', [this.widget.element, this]);\n                init.call(this);\n                $(document).trigger('afterStateInit.qti-widget', [this.widget.element, this]);\n            };\n            State.init = init;//store reference for future usage\n\n            State.prototype.exit = function(){\n                if(this.widget.$container.data('edit') === name){\n                    this.widget.$container.hide();\n                }\n                this.widget.$container.find('[data-edit=\"' + name + '\"]').hide();\n                this.widget.$container.removeClass('edit-' + name);\n\n                $(document).trigger('beforeStateExit.qti-widget', [this.widget.element, this]);\n\n                //remove any qti element change event attached during this state lifetime\n                $(document).off(['.qti-widget', name, this.widget.serial].join('.'));\n\n                exit.call(this);\n                $(document).trigger('afterStateExit.qti-widget', [this.widget.element, this]);\n            };\n            State.exit = exit;//store reference for future usage\n        }\n\n        return State;\n    };\n\n    return {\n        /**\n         * Create qti widget state from scratch or by using an existing state as model\n         * When creating a state from scratch, the name, the init() and exit() callback are required.\n         * The optional superStates (array) is optional and is useful only when you need to define a hierarchy between the new state\n         * abd the ones in the superStates array.\n         * When the widget state is changed in this newly created state, the init()\n         *\n         * accepts the following arguments:\n         * (string) stateName, (array) superStates, (function) init, (function) exit\n         * (string) stateName, (function) init, (function) exit\n         * (function) State, (function) init, (function) exit\n         * @returns {State}\n         */\n        create : function(){\n\n            var State, name, superStates, init, exit;\n\n            if(_.isString(arguments[0])){\n                name = arguments[0];\n                if(_.isArray(arguments[1])){\n                    superStates = arguments[1];\n                    if(_.isFunction(arguments[2]) && _.isFunction(arguments[3])){\n                        init = arguments[2];\n                        exit = arguments[3];\n                        State = _create(name, superStates, init, exit);\n                    }else{\n                        throw new Error('the third and fourth arguments are expected to be functions: init() & exit()');\n                    }\n                }else{\n                    superStates = [];\n                    if(_.isFunction(arguments[1]) && _.isFunction(arguments[2])){\n                        init = arguments[1];\n                        exit = arguments[2];\n                        State = _create(name, superStates, init, exit);\n                    }else{\n                        throw new Error('the second and third arguments are expected to be functions: init() & exit()');\n                    }\n                }\n            }else if(_isValidStateDefinition(arguments[0])){\n                name = arguments[0].prototype.name;\n                superStates = arguments[0].prototype.superState;\n                if(_.isFunction(arguments[1]) && _.isFunction(arguments[2])){\n                    init = arguments[1];\n                    exit = arguments[2];\n                    State = _create(name, superStates, init, exit);\n                }else{\n                    throw new Error('the second and third arguments are expected to be functions: init() & exit()');\n                }\n            }else{\n                throw new Error('invalid first argument : expected the state name (string) or a State (function)');\n            }\n\n            return State;\n        },\n        extend : function(State, init, exit){\n\n            var Clone = null, initFn, exitFn;\n\n            if(_isValidStateDefinition(State)){\n\n                if(_.isFunction(init)){\n                    initFn = function(){\n                        State.init.call(this);\n                        init.call(this);\n                    };\n                }\n                if(_.isFunction(exit)){\n                    exitFn = function(){\n                        exit.call(this);\n                        State.exit.call(this);\n                    };\n                }\n\n                Clone = _create(State.prototype.name, State.prototype.superState, initFn, exitFn);\n                _.forIn(State.prototype, function(prop, name){\n                    if(_.isFunction(prop)){\n                        if((initFn && name === 'init') || (exitFn && name === 'exit')){\n                            return true;\n                        }\n                        Clone.prototype[name] = prop;\n                        Clone[name] = prop;\n                    }\n                });\n            }else{\n                throw new Error('invalid state to be cloned');\n            }\n\n            return Clone;\n        },\n        createBundle : function(arg0, arg1, arg2){\n\n            var stateBundle = {},\n                newStates = [],\n                excluded = [];\n\n            if(arguments.length >= 2){\n                stateBundle = _.clone(arguments[0]);\n                newStates = arguments[1];\n                excluded = arguments[2] || excluded;\n            }else{\n                newStates = arguments[0];\n            }\n\n            _.each(newStates, function(state){\n\n                if(_isValidStateDefinition(state)){\n                    stateBundle[state.prototype.name] = state;\n                }\n            });\n\n            _.each(excluded, function(state){\n                delete stateBundle[state];\n            });\n\n            return stateBundle;\n        },\n        throwMissingRequiredImplementationError : function(functionName){\n            throw new Error('Missing required implementation of the function ' + functionName + '()');\n        }\n    };\n});\n\n\n\n","define('taoQtiItem/qtiCreator/widgets/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    \n    return stateFactory.create('sleep', function(){\n        \n        var widget = this.widget,\n            $container = this.widget.$container;\n        \n        //add listener to display proper hover style\n        $container.on('mouseenter.sleep', function(e){\n            $container.addClass('hover');\n            $container.parent().trigger('mouseleave');//note : don't trigger it with namespace otherwise, choice.on(mouseleave.choice) will not be triggered\n        }).on('mouseleave.sleep', function(){\n            $container.removeClass('hover');\n            $container.parent().trigger('mouseenter');//note : same as mouseenter.sleep\n        });\n        \n        if(!widget.isValid()){\n            widget.changeState('invalid');\n        }\n        \n    }, function(){\n\n        this.widget.$container.removeClass('hover').off('.sleep');\n\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/static/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/states/Sleep'], function(stateFactory, SleepState){\n    \n    var StaticStateSleep = stateFactory.extend(SleepState, function(){\n        \n        var _widget = this.widget;\n        \n        _widget.$container.on('click.qti-widget.sleep', function(e){\n            e.stopPropagation();\n            _widget.changeState('active');\n        });\n        \n    }, function(){\n        \n        var _widget = this.widget;\n        \n        //remove hover outline box display\n        _widget.$container.off('.sleep');\n    });\n    \n    return StaticStateSleep;\n});\n","define('taoQtiItem/qtiCreator/widgets/states/Active',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/helpers/content'\n], function($, stateFactory, contentHelper){\n\n    return stateFactory.create('active', function(){\n\n        var _widget = this.widget,\n            container = _widget.$container[0],\n            item = this.widget.element.getRelatedItem();\n\n        //move to sleep state by clicking everywhere outside the interaction \n        $('#item-editor-panel').on('click.active', function(e){\n            if(container !== e.target && !$.contains(container, e.target)){\n                _widget.changeState('sleep');\n            }\n        }).on('beforesave.qti-creator.active', function(){\n            _widget.changeState('sleep');\n        }).on('styleedit.active', function(){\n            _widget.changeState('sleep');\n        });\n\n        if(item && item.data('widget')){\n            //in item editing context:\n            item.data('widget').$container.on('resizestart.gridEdit.active beforedragoverstart.gridEdit.active', function(){\n                _widget.changeState('sleep');\n            });\n        }\n\n    }, function(){\n        \n        contentHelper.changeInnerWidgetState(this.widget, 'sleep');\n        \n        this.widget.$container.off('.active');\n        $('#item-editor-panel').off('.active');\n        \n        var item = this.widget.element.getRelatedItem();\n        if(item && item.data('widget')){\n            item.data('widget').$container.off('.active');\n        }\n        \n    });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/states/Active',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Active'\n], function($, stateFactory, Active){\n\n    return stateFactory.extend(Active, function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container;\n\n        _widget.beforeStateInit(function(e, element, state){\n\n            var serial = element.getSerial();\n            if((state.name === 'active' && serial !== _widget.serial) || state.name === 'choice'){\n\n                if(_widget.element.qtiClass === 'rubricBlock'){\n                    //exclude\n                    var composingElts = _widget.element.getComposingElements();\n                    if(!composingElts[element.serial]){\n                        _widget.changeState('sleep');\n                    }\n                }else{\n                    //call sleep whenever other widget is active\n                    _widget.changeState('sleep');\n                }\n\n            }\n\n        }, 'otherActive');\n\n        $container.on('mouseenter.active', function(e){\n            e.stopPropagation();\n            $container.parent().trigger('mouseleave.sleep');\n        }).on('mouseleave.active', function(e){\n            e.stopPropagation();\n            $container.parent().trigger('mouseenter.sleep');\n        }).on('click.active', function(e){\n            e.stopPropagation();\n        });\n\n    }, function(){\n\n        this.widget.$container.off('.active');\n        $('#item-editor-panel').off('.active');\n\n        this.widget.offEvents('otherActive');\n    });\n\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/Inactive',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n\n    return stateFactory.create('inactive', function(){\n\n    }, function(){\n        \n    });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/Deleting',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/helpers/deletingState',\n    'taoQtiItem/qtiCreator/helper/gridUnits',\n    'taoQtiItem/qtiCreator/editor/gridEditor/helper',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function(_, $, stateFactory, deletingHelper, gridUnits, gridHelper, contentHelper){\n\n    var DeletingState = stateFactory.create('deleting', function(){\n\n        var element = this.widget.element;\n\n        //array to store new col untis\n        this.refactoredUnits = [];\n        this.updateBody = false;\n\n        //reference to the dom element(s) to be remove on delete\n        this.$elementToRemove = this.getElementToRemove();\n\n        this.hideWidget();\n\n        this.showMessage(element);\n\n        element.data('deleting', true);\n\n        //trigger resizing\n        if(this.updateBody){\n            \n            //store reference to the item and its container:\n            this.item = element.getRelatedItem();\n            this.$item = this.item.data('widget').$container.find('.qti-itemBody');\n\n            //call for resize action\n            this.$item.trigger('resize.qti-widget');\n        }\n\n    }, function(){\n\n        this.showWidget();\n        this.widget.element.data('deleting', false);\n        $('body').off('.deleting');\n\n        if(this.updateBody){\n            this.$item.trigger('resize.qti-widget');\n        }\n    });\n\n    /**\n     * @todo move widget specific code to their respective location\n     * \n     * @returns {jQuery} container\n     */\n    DeletingState.prototype.getElementToRemove = function(){\n\n        var $container = this.widget.$container;\n\n        //if is a choice widget:\n        if($container.hasClass('qti-choice')){\n\n            if($container.prop('tagName') === 'TH'){\n\n                //matchInteraction:\n                if($container.parent().parent().prop('tagName') === 'THEAD'){\n\n                    //hide col\n                    var $tbody = $container.closest('table.matrix').children('tbody');\n                    var $tds = $tbody.children('tr').find('td:last');\n                    return $container.add($tds);\n\n                }else if($container.parent().parent().prop('tagName') === 'TBODY'){\n\n                    //hide row\n                    return $container.parent();\n                }\n            }else{\n                return $container;\n            }\n\n        }\n\n        //inline widget:\n        if($container.hasClass('widget-inline')){\n            return $container.add(this.widget.$original);\n        }\n\n        //block widget:\n        var $col = $container.parent();\n        var $row = $col.parent('.grid-row');\n        if($row.length){\n            this.updateBody = true;\n            if($row.children().length === 1){\n                //if it is the only col in the row, hide the entire row\n                return $row;\n            }else{\n                //else, hide the current one ...\n                return $col;\n            }\n        }else if($container.hasClass('grid-row')){\n            //rubric block:\n            this.updateBody = true;\n            return $container;\n        }\n                \n        //other block widgets:\n        if($container.hasClass('widget-block')){\n            return $container;\n        }\n    };\n\n    DeletingState.prototype.hideWidget = function(){\n\n        var $elt = this.$elementToRemove;\n\n        if($elt.length){\n            $elt.hide();\n            if(_isCol($elt)){\n                //it is a column : redistribute the units of the columdn to the others\n                this.refactoredUnits = _redistributeUnits($elt);\n            }\n        }\n    };\n\n    var _isCol = function($col){\n        var attrClass = $col.attr('class');\n        return (attrClass && /col-([\\d]+)/.test(attrClass));\n    };\n\n    var _redistributeUnits = function($col){\n\n        var usedUnits = $col.data('units');\n        var $otherCols = $col.siblings();\n        var cols = [];\n\n        $otherCols.each(function(){\n\n            var $col = $(this),\n                units = $col.data('units');\n\n            cols.push({\n                elt : $col,\n                units : units\n            });\n\n            usedUnits += units;\n        });\n\n        cols = gridUnits.redistribute(cols);\n\n        _.each(cols, function(col){\n            col.elt.removeClass('col-' + col.units).addClass('col-' + col.refactoredUnits);\n            gridHelper.setUnitsFromClass(col.elt);\n        });\n\n        //store results in the element for future ref?\n        $col.data('redistributedUnits', cols);\n\n        return cols;\n    };\n\n    DeletingState.prototype.showWidget = function(){\n\n        var $elt = this.$elementToRemove;\n        if($elt.length && $.contains(document, $elt[0])){\n\n            $elt.show();\n\n            if(_isCol($elt)){\n                //restore the other units:\n                _.each(this.refactoredUnits, function(col){\n                    col.elt.removeClass('col-' + col.refactoredUnits).addClass('col-' + col.units);\n                    gridHelper.setUnitsFromClass(col.elt);\n                });\n            }\n        }\n    };\n\n    DeletingState.prototype.showMessage = function(){\n\n        var _this = this,\n            _widget = this.widget,\n            $messageBox = deletingHelper.createInfoBox([_widget]);\n\n        $messageBox.on('confirm.deleting', function(){\n\n            _this.deleteElement();\n\n        }).on('undo.deleting', function(){\n\n            try{\n                _widget.changeState('question');\n            }catch(e){\n                _widget.changeState('active');\n            }\n        });\n\n        this.messageBox = $messageBox;\n    };\n\n    DeletingState.prototype.deleteElement = function(){\n\n        this.refactoredUnits = [];\n\n        this.$elementToRemove.remove();//remove html from the dom\n        this.widget.destroy();//remove what remains of the widget (almost nothing), call this after element remove\n        this.widget.element.remove();//remove from model\n\n        if(this.updateBody){\n            //need to update item body\n            this.item.body(contentHelper.getContent(this.$item));\n        }\n\n    };\n\n    return DeletingState;\n});\n","define('taoQtiItem/qtiCreator/widgets/static/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCreator/widgets/states/Inactive',\n    'taoQtiItem/qtiCreator/widgets/states/Deleting'\n], function(factory){\n    return factory.createBundle(arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/static/img/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/static/states/Sleep'], function(stateFactory, SleepState){\n    \n    var ImgStateSleep = stateFactory.extend(SleepState, function(){}, function(){});\n    \n    return ImgStateSleep;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/img', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"src\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n    <input type=\\\"text\\\" name=\\\"src\\\" value=\\\"\";\n  if (helper = helpers.src) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.src); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n    <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"alt\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Alt Text\", options) : helperMissing.call(depth0, \"__\", \"Alt Text\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The text to be displayed if the image is not available.\", options) : helperMissing.call(depth0, \"__\", \"The text to be displayed if the image is not available.\", options)))\n    + \"</div>\\n    <input type=\\\"text\\\" name=\\\"alt\\\" value=\\\"\";\n  if (helper = helpers.alt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.alt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty\\\" placeholder=\\\"e.g. House with a garden\\\"/>\\n</div>\\n\\n<div class=\\\"change-alt-modal-feedback modal\\\">\\n    <div class=\\\"modal-body clearfix\\\">\\n        <p>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Would you like to replace the alt text\", options) : helperMissing.call(depth0, \"__\", \"Would you like to replace the alt text\", options)))\n    + \"</p>\\n        <p class=\\\"alt-text\\\"></p>\\n\\n        <div class=\\\"rgt\\\">\\n            <button class=\\\"btn-regular small cancel\\\" type=\\\"button\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"No\", options) : helperMissing.call(depth0, \"__\", \"No\", options)))\n    + \"</button>\\n            <button class=\\\"btn-info small save\\\" type=\\\"button\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Yes\", options) : helperMissing.call(depth0, \"__\", \"Yes\", options)))\n    + \"</button>\\n        </div>\\n    </div>\\n</div>\\n\\n<div data-role=\\\"advanced\\\" style=\\\"display:none\\\">\\n    \\n    <hr/>\\n    \\n<!--    <div class=\\\"panel\\\">\\n        <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Size and position\", options) : helperMissing.call(depth0, \"__\", \"Size and position\", options)))\n    + \"</h3>\\n\\n        <p class=\\\"img-resizer-slider\\\"></p>\\n\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <span id=\\\"item-editor-font-size-manual-input\\\" class=\\\"item-editor-unit-input-box\\\">\\n            <input type=\\\"text\\\" name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty;\\\"/>\\n            <span class=\\\"unit-indicator\\\">px</span>\\n        </span>\\n    </div>\\n    <div class=\\\"panel\\\">\\n\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <span id=\\\"item-editor-font-size-manual-input\\\" class=\\\"item-editor-unit-input-box\\\">\\n            <input type=\\\"text\\\" name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty;\\\"/>\\n            <span class=\\\"unit-indicator\\\">px</span>\\n        </span>\\n    </div>\\n    <div class=\\\"panel\\\">\\n\\n        <label for=\\\"align\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Alignment\", options) : helperMissing.call(depth0, \"__\", \"Alignment\", options)))\n    + \"</label>\\n        <select name=\\\"align\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n            <option value=\\\"default\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"default\", options) : helperMissing.call(depth0, \"__\", \"default\", options)))\n    + \"</option>\\n            <option value=\\\"left\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"left\", options) : helperMissing.call(depth0, \"__\", \"left\", options)))\n    + \"</option>\\n            <option value=\\\"right\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"right\", options) : helperMissing.call(depth0, \"__\", \"right\", options)))\n    + \"</option>\\n        </select>\\n    </div>-->\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Size and position\", options) : helperMissing.call(depth0, \"__\", \"Size and position\", options)))\n    + \"</h3>\\n    <div class=\\\"panel img-resizer\\\"></div>\\n    \\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/validators',[\n    'core/validator/validators',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiItem/core/Element'\n], function(validators, _, __, Element) {\n\n    var _qtiIdPattern = /^[_a-zA-Z]{1}[a-zA-Z0-9\\-._]{0,31}$/i;\n\n    var qtiValidators = [\n        {\n            name: 'qtiIdentifier',\n            message: __('invalid identifier'),\n            validate: function(value, callback) {\n                if (typeof callback === 'function') {\n                    callback(_qtiIdPattern.test(value));\n                }\n            }\n        },\n        //warning: simplistic implementation, allow only one unique identifier in the item no matter the element class/type\n        {\n            name: 'availableIdentifier',\n            message: __('this identifier is already in use'),\n            validate: function(value, callback, options) {\n                if (options.serial) {\n                    var element = Element.getElementBySerial(options.serial);\n                    if (element && typeof callback === 'function') {\n                        var ids = element.getRelatedItem().getUsedIdentifiers();\n                        var available = (!ids[value] || ids[value].serial === element.serial);\n                        callback(available);\n                    }\n                }else{\n                    throw 'missing required option \"serial\"';\n                }\n            }\n        }\n    ];\n\n    _.each(qtiValidators, function(rule) {\n        validators.register(rule.name, rule);\n    });\n\n    return validators;\n});\n\n\n","/* \r\n * The MIT License\r\n *\r\n * Copyright (c) 2012 James Allardice\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), \r\n * to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, \r\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n\r\n// Defines the global Placeholders object along with various utility methods\r\n(function (global) {\r\n\r\n    \"use strict\";\r\n\r\n    // Cross-browser DOM event binding\r\n    function addEventListener(elem, event, fn) {\r\n        if (elem.addEventListener) {\r\n            return elem.addEventListener(event, fn, false);\r\n        }\r\n        if (elem.attachEvent) {\r\n            return elem.attachEvent(\"on\" + event, fn);\r\n        }\r\n    }\r\n\r\n    // Check whether an item is in an array (we don't use Array.prototype.indexOf so we don't clobber any existing polyfills - this is a really simple alternative)\r\n    function inArray(arr, item) {\r\n        var i, len;\r\n        for (i = 0, len = arr.length; i < len; i++) {\r\n            if (arr[i] === item) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Move the caret to the index position specified. Assumes that the element has focus\r\n    function moveCaret(elem, index) {\r\n        var range;\r\n        if (elem.createTextRange) {\r\n            range = elem.createTextRange();\r\n            range.move(\"character\", index);\r\n            range.select();\r\n        } else if (elem.selectionStart) {\r\n            elem.focus();\r\n            elem.setSelectionRange(index, index);\r\n        }\r\n    }\r\n\r\n    // Attempt to change the type property of an input element\r\n    function changeType(elem, type) {\r\n        try {\r\n            elem.type = type;\r\n            return true;\r\n        } catch (e) {\r\n            // You can't change input type in IE8 and below\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // Expose public methods\r\n    global.Placeholders = {\r\n        Utils: {\r\n            addEventListener: addEventListener,\r\n            inArray: inArray,\r\n            moveCaret: moveCaret,\r\n            changeType: changeType\r\n        }\r\n    };\r\n\r\n}(this));\r\n\r\n(function (global) {\r\n\r\n    \"use strict\";\r\n\r\n    var validTypes = [\r\n            \"text\",\r\n            \"search\",\r\n            \"url\",\r\n            \"tel\",\r\n            \"email\",\r\n            \"password\",\r\n            \"number\",\r\n            \"textarea\"\r\n        ],\r\n\r\n        // The list of keycodes that are not allowed when the polyfill is configured to hide-on-input\r\n        badKeys = [\r\n\r\n            // The following keys all cause the caret to jump to the end of the input value\r\n            27, // Escape\r\n            33, // Page up\r\n            34, // Page down\r\n            35, // End\r\n            36, // Home\r\n\r\n            // Arrow keys allow you to move the caret manually, which should be prevented when the placeholder is visible\r\n            37, // Left\r\n            38, // Up\r\n            39, // Right\r\n            40, // Down\r\n\r\n            // The following keys allow you to modify the placeholder text by removing characters, which should be prevented when the placeholder is visible\r\n            8, // Backspace\r\n            46 // Delete\r\n        ],\r\n\r\n        // Styling variables\r\n        placeholderStyleColor = \"#ccc\",\r\n        placeholderClassName = \"placeholdersjs\",\r\n        classNameRegExp = new RegExp(\"(?:^|\\\\s)\" + placeholderClassName + \"(?!\\\\S)\"),\r\n\r\n        // These will hold references to all elements that can be affected. NodeList objects are live, so we only need to get those references once\r\n        inputs, textareas,\r\n\r\n        // The various data-* attributes used by the polyfill\r\n        ATTR_CURRENT_VAL = \"data-placeholder-value\",\r\n        ATTR_ACTIVE = \"data-placeholder-active\",\r\n        ATTR_INPUT_TYPE = \"data-placeholder-type\",\r\n        ATTR_FORM_HANDLED = \"data-placeholder-submit\",\r\n        ATTR_EVENTS_BOUND = \"data-placeholder-bound\",\r\n        ATTR_OPTION_FOCUS = \"data-placeholder-focus\",\r\n        ATTR_OPTION_LIVE = \"data-placeholder-live\",\r\n        ATTR_MAXLENGTH = \"data-placeholder-maxlength\",\r\n\r\n        // Various other variables used throughout the rest of the script\r\n        test = document.createElement(\"input\"),\r\n        head = document.getElementsByTagName(\"head\")[0],\r\n        root = document.documentElement,\r\n        Placeholders = global.Placeholders,\r\n        Utils = Placeholders.Utils,\r\n        hideOnInput, liveUpdates, keydownVal, styleElem, styleRules, placeholder, timer, form, elem, len, i;\r\n\r\n    // No-op (used in place of public methods when native support is detected)\r\n    function noop() {}\r\n\r\n    // Avoid IE9 activeElement of death when an iframe is used.\r\n    // More info:\r\n    // http://bugs.jquery.com/ticket/13393\r\n    // https://github.com/jquery/jquery/commit/85fc5878b3c6af73f42d61eedf73013e7faae408\r\n    function safeActiveElement() {\r\n        try {\r\n            return document.activeElement;\r\n        } catch (err) {}\r\n    }\r\n\r\n    // Hide the placeholder value on a single element. Returns true if the placeholder was hidden and false if it was not (because it wasn't visible in the first place)\r\n    function hidePlaceholder(elem, keydownValue) {\r\n        var type,\r\n            maxLength,\r\n            valueChanged = (!!keydownValue && elem.value !== keydownValue),\r\n            isPlaceholderValue = (elem.value === elem.getAttribute(ATTR_CURRENT_VAL));\r\n\r\n        if ((valueChanged || isPlaceholderValue) && elem.getAttribute(ATTR_ACTIVE) === \"true\") {\r\n            elem.removeAttribute(ATTR_ACTIVE);\r\n            elem.value = elem.value.replace(elem.getAttribute(ATTR_CURRENT_VAL), \"\");\r\n            elem.className = elem.className.replace(classNameRegExp, \"\");\r\n\r\n            // Restore the maxlength value\r\n            maxLength = elem.getAttribute(ATTR_MAXLENGTH);\r\n            if (parseInt(maxLength, 10) >= 0) { // Old FF returns -1 if attribute not set (see GH-56)\r\n                elem.setAttribute(\"maxLength\", maxLength);\r\n                elem.removeAttribute(ATTR_MAXLENGTH);\r\n            }\r\n\r\n            // If the polyfill has changed the type of the element we need to change it back\r\n            type = elem.getAttribute(ATTR_INPUT_TYPE);\r\n            if (type) {\r\n                elem.type = type;\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Show the placeholder value on a single element. Returns true if the placeholder was shown and false if it was not (because it was already visible)\r\n    function showPlaceholder(elem) {\r\n        var type,\r\n            maxLength,\r\n            val = elem.getAttribute(ATTR_CURRENT_VAL);\r\n        if (elem.value === \"\" && val) {\r\n            elem.setAttribute(ATTR_ACTIVE, \"true\");\r\n            elem.value = val;\r\n            elem.className += \" \" + placeholderClassName;\r\n\r\n            // Store and remove the maxlength value\r\n            maxLength = elem.getAttribute(ATTR_MAXLENGTH);\r\n            if (!maxLength) {\r\n                elem.setAttribute(ATTR_MAXLENGTH, elem.maxLength);\r\n                elem.removeAttribute(\"maxLength\");\r\n            }\r\n\r\n            // If the type of element needs to change, change it (e.g. password inputs)\r\n            type = elem.getAttribute(ATTR_INPUT_TYPE);\r\n            if (type) {\r\n                elem.type = \"text\";\r\n            } else if (elem.type === \"password\") {\r\n                if (Utils.changeType(elem, \"text\")) {\r\n                    elem.setAttribute(ATTR_INPUT_TYPE, \"password\");\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    function handleElem(node, callback) {\r\n\r\n        var handleInputsLength, handleTextareasLength, handleInputs, handleTextareas, elem, len, i;\r\n\r\n        // Check if the passed in node is an input/textarea (in which case it can't have any affected descendants)\r\n        if (node && node.getAttribute(ATTR_CURRENT_VAL)) {\r\n            callback(node);\r\n        } else {\r\n\r\n            // If an element was passed in, get all affected descendants. Otherwise, get all affected elements in document\r\n            handleInputs = node ? node.getElementsByTagName(\"input\") : inputs;\r\n            handleTextareas = node ? node.getElementsByTagName(\"textarea\") : textareas;\r\n\r\n            handleInputsLength = handleInputs ? handleInputs.length : 0;\r\n            handleTextareasLength = handleTextareas ? handleTextareas.length : 0;\r\n\r\n            // Run the callback for each element\r\n            for (i = 0, len = handleInputsLength + handleTextareasLength; i < len; i++) {\r\n                elem = i < handleInputsLength ? handleInputs[i] : handleTextareas[i - handleInputsLength];\r\n                callback(elem);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Return all affected elements to their normal state (remove placeholder value if present)\r\n    function disablePlaceholders(node) {\r\n        handleElem(node, hidePlaceholder);\r\n    }\r\n\r\n    // Show the placeholder value on all appropriate elements\r\n    function enablePlaceholders(node) {\r\n        handleElem(node, showPlaceholder);\r\n    }\r\n\r\n    // Returns a function that is used as a focus event handler\r\n    function makeFocusHandler(elem) {\r\n        return function () {\r\n\r\n            // Only hide the placeholder value if the (default) hide-on-focus behaviour is enabled\r\n            if (hideOnInput && elem.value === elem.getAttribute(ATTR_CURRENT_VAL) && elem.getAttribute(ATTR_ACTIVE) === \"true\") {\r\n\r\n                // Move the caret to the start of the input (this mimics the behaviour of all browsers that do not hide the placeholder on focus)\r\n                Utils.moveCaret(elem, 0);\r\n\r\n            } else {\r\n\r\n                // Remove the placeholder\r\n                hidePlaceholder(elem);\r\n            }\r\n        };\r\n    }\r\n\r\n    // Returns a function that is used as a blur event handler\r\n    function makeBlurHandler(elem) {\r\n        return function () {\r\n            showPlaceholder(elem);\r\n        };\r\n    }\r\n\r\n    // Functions that are used as a event handlers when the hide-on-input behaviour has been activated - very basic implementation of the \"input\" event\r\n    function makeKeydownHandler(elem) {\r\n        return function (e) {\r\n            keydownVal = elem.value;\r\n\r\n            //Prevent the use of the arrow keys (try to keep the cursor before the placeholder)\r\n            if (elem.getAttribute(ATTR_ACTIVE) === \"true\") {\r\n                if (keydownVal === elem.getAttribute(ATTR_CURRENT_VAL) && Utils.inArray(badKeys, e.keyCode)) {\r\n                    if (e.preventDefault) {\r\n                        e.preventDefault();\r\n                    }\r\n                    return false;\r\n                }\r\n            }\r\n        };\r\n    }\r\n    function makeKeyupHandler(elem) {\r\n        return function () {\r\n            hidePlaceholder(elem, keydownVal);\r\n\r\n            // If the element is now empty we need to show the placeholder\r\n            if (elem.value === \"\") {\r\n                elem.blur();\r\n                Utils.moveCaret(elem, 0);\r\n            }\r\n        };\r\n    }\r\n    function makeClickHandler(elem) {\r\n        return function () {\r\n            if (elem === safeActiveElement() && elem.value === elem.getAttribute(ATTR_CURRENT_VAL) && elem.getAttribute(ATTR_ACTIVE) === \"true\") {\r\n                Utils.moveCaret(elem, 0);\r\n            }\r\n        };\r\n    }\r\n\r\n    // Returns a function that is used as a submit event handler on form elements that have children affected by this polyfill\r\n    function makeSubmitHandler(form) {\r\n        return function () {\r\n\r\n            // Turn off placeholders on all appropriate descendant elements\r\n            disablePlaceholders(form);\r\n        };\r\n    }\r\n\r\n    // Bind event handlers to an element that we need to affect with the polyfill\r\n    function newElement(elem) {\r\n\r\n        // If the element is part of a form, make sure the placeholder string is not submitted as a value\r\n        if (elem.form) {\r\n            form = elem.form;\r\n\r\n            // If the type of the property is a string then we have a \"form\" attribute and need to get the real form\r\n            if (typeof form === \"string\") {\r\n                form = document.getElementById(form);\r\n            }\r\n\r\n            // Set a flag on the form so we know it's been handled (forms can contain multiple inputs)\r\n            if (!form.getAttribute(ATTR_FORM_HANDLED)) {\r\n                Utils.addEventListener(form, \"submit\", makeSubmitHandler(form));\r\n                form.setAttribute(ATTR_FORM_HANDLED, \"true\");\r\n            }\r\n        }\r\n\r\n        // Bind event handlers to the element so we can hide/show the placeholder as appropriate\r\n        Utils.addEventListener(elem, \"focus\", makeFocusHandler(elem));\r\n        Utils.addEventListener(elem, \"blur\", makeBlurHandler(elem));\r\n\r\n        // If the placeholder should hide on input rather than on focus we need additional event handlers\r\n        if (hideOnInput) {\r\n            Utils.addEventListener(elem, \"keydown\", makeKeydownHandler(elem));\r\n            Utils.addEventListener(elem, \"keyup\", makeKeyupHandler(elem));\r\n            Utils.addEventListener(elem, \"click\", makeClickHandler(elem));\r\n        }\r\n\r\n        // Remember that we've bound event handlers to this element\r\n        elem.setAttribute(ATTR_EVENTS_BOUND, \"true\");\r\n        elem.setAttribute(ATTR_CURRENT_VAL, placeholder);\r\n\r\n        // If the element doesn't have a value and is not focussed, set it to the placeholder string\r\n        if (hideOnInput || elem !== safeActiveElement()) {\r\n            showPlaceholder(elem);\r\n        }\r\n    }\r\n\r\n    Placeholders.nativeSupport = test.placeholder !== void 0;\r\n\r\n    if (!Placeholders.nativeSupport) {\r\n\r\n        // Get references to all the input and textarea elements currently in the DOM (live NodeList objects to we only need to do this once)\r\n        inputs = document.getElementsByTagName(\"input\");\r\n        textareas = document.getElementsByTagName(\"textarea\");\r\n\r\n        // Get any settings declared as data-* attributes on the root element (currently the only options are whether to hide the placeholder on focus or input and whether to auto-update)\r\n        hideOnInput = root.getAttribute(ATTR_OPTION_FOCUS) === \"false\";\r\n        liveUpdates = root.getAttribute(ATTR_OPTION_LIVE) !== \"false\";\r\n\r\n        // Create style element for placeholder styles (instead of directly setting style properties on elements - allows for better flexibility alongside user-defined styles)\r\n        styleElem = document.createElement(\"style\");\r\n        styleElem.type = \"text/css\";\r\n\r\n        // Create style rules as text node\r\n        styleRules = document.createTextNode(\".\" + placeholderClassName + \" { color:\" + placeholderStyleColor + \"; }\");\r\n\r\n        // Append style rules to newly created stylesheet\r\n        if (styleElem.styleSheet) {\r\n            styleElem.styleSheet.cssText = styleRules.nodeValue;\r\n        } else {\r\n            styleElem.appendChild(styleRules);\r\n        }\r\n\r\n        // Prepend new style element to the head (before any existing stylesheets, so user-defined rules take precedence)\r\n        head.insertBefore(styleElem, head.firstChild);\r\n\r\n        // Set up the placeholders\r\n        for (i = 0, len = inputs.length + textareas.length; i < len; i++) {\r\n            elem = i < inputs.length ? inputs[i] : textareas[i - inputs.length];\r\n\r\n            // Get the value of the placeholder attribute, if any. IE10 emulating IE7 fails with getAttribute, hence the use of the attributes node\r\n            placeholder = elem.attributes.placeholder;\r\n            if (placeholder) {\r\n\r\n                // IE returns an empty object instead of undefined if the attribute is not present\r\n                placeholder = placeholder.nodeValue;\r\n\r\n                // Only apply the polyfill if this element is of a type that supports placeholders, and has a placeholder attribute with a non-empty value\r\n                if (placeholder && Utils.inArray(validTypes, elem.type)) {\r\n                    newElement(elem);\r\n                }\r\n            }\r\n        }\r\n\r\n        // If enabled, the polyfill will repeatedly check for changed/added elements and apply to those as well\r\n        timer = setInterval(function () {\r\n            for (i = 0, len = inputs.length + textareas.length; i < len; i++) {\r\n                elem = i < inputs.length ? inputs[i] : textareas[i - inputs.length];\r\n\r\n                // Only apply the polyfill if this element is of a type that supports placeholders, and has a placeholder attribute with a non-empty value\r\n                placeholder = elem.attributes.placeholder;\r\n                if (placeholder) {\r\n                    placeholder = placeholder.nodeValue;\r\n                    if (placeholder && Utils.inArray(validTypes, elem.type)) {\r\n\r\n                        // If the element hasn't had event handlers bound to it then add them\r\n                        if (!elem.getAttribute(ATTR_EVENTS_BOUND)) {\r\n                            newElement(elem);\r\n                        }\r\n\r\n                        // If the placeholder value has changed or not been initialised yet we need to update the display\r\n                        if (placeholder !== elem.getAttribute(ATTR_CURRENT_VAL) || (elem.type === \"password\" && !elem.getAttribute(ATTR_INPUT_TYPE))) {\r\n\r\n                            // Attempt to change the type of password inputs (fails in IE < 9)\r\n                            if (elem.type === \"password\" && !elem.getAttribute(ATTR_INPUT_TYPE) && Utils.changeType(elem, \"text\")) {\r\n                                elem.setAttribute(ATTR_INPUT_TYPE, \"password\");\r\n                            }\r\n\r\n                            // If the placeholder value has changed and the placeholder is currently on display we need to change it\r\n                            if (elem.value === elem.getAttribute(ATTR_CURRENT_VAL)) {\r\n                                elem.value = placeholder;\r\n                            }\r\n\r\n                            // Keep a reference to the current placeholder value in case it changes via another script\r\n                            elem.setAttribute(ATTR_CURRENT_VAL, placeholder);\r\n                        }\r\n                    }\r\n                } else if (elem.getAttribute(ATTR_ACTIVE)) {\r\n                    hidePlaceholder(elem);\r\n                    elem.removeAttribute(ATTR_CURRENT_VAL);\r\n                }\r\n            }\r\n\r\n            // If live updates are not enabled cancel the timer\r\n            if (!liveUpdates) {\r\n                clearInterval(timer);\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    Utils.addEventListener(global, \"beforeunload\", function () {\r\n        Placeholders.disable();\r\n    });\r\n\r\n    // Expose public methods\r\n    Placeholders.disable = Placeholders.nativeSupport ? noop : disablePlaceholders;\r\n    Placeholders.enable = Placeholders.nativeSupport ? noop : enablePlaceholders;\r\n\r\n}(this));\r\n\ndefine(\"polyfill/placeholders\", function(){});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/formElement',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiItem/core/Element',\n    'util/dom',\n    'ui/incrementer',\n    'ui/tooltipster',\n    'ui/selecter',\n    'ui/inplacer',\n    'ui/groupvalidator',\n    'taoQtiItem/qtiCreator/widgets/helpers/validators',\n    'polyfill/placeholders'\n], function($, _, __, Element, dom, spinner, tooltip, select2){\n\n    var formElement = {\n        initWidget : function($form){\n            spinner($form);\n            tooltip($form);\n            select2($form);\n        },\n        /**\n         * register attribute change callback functions when associated form elements has been modified\n         *\n         * @param {Object} $form - the jQuery form element\n         * @param {Object} element - a js qti element (see qtiCreator/model)\n         * @param {Object} attributes - key value attributeName:callback, e.g. {identifier:function(element, value, attrName){ element.attr(attrName, value); }}\n         * @param {Boolean} [options.validateOnInit = false] - define if the validation should be trigger immediately after the callbacks have been set\n         * @param {Boolean} [options.invalidate = false] - define if the validation set the valid/invalidate state to the widget of the element\n         */\n        setChangeCallbacks : function($form, element, attributes, options){\n\n            attributes = attributes || {};\n            options = _.defaults(options || {}, {\n                validateOnInit : false,\n                invalidate : false\n            });\n\n            var _callbackCall = function(name, value, $elt){\n                var cb = attributes[name];\n                if(_.isFunction(cb)){\n                    cb.call($elt[0], element, value, name);\n                }\n            };\n\n            var callback = {\n                simple : function(){\n\n                    var $elt = $(this),\n                        name = $elt.attr('name');\n\n                    if($elt.is(':checkbox')){\n                        _callbackCall(name, $elt.prop('checked'), $elt);\n                    }else{\n                        _callbackCall(name, $elt.val(), $elt);\n                    }\n\n                },\n                withValidation : function(e, valid, elt){\n\n                    if(e.namespace === 'group'){\n\n                        var $elt = $(elt),\n                            name = $elt.attr('name');\n                        \n                        _callbackCall(name, $elt.val(), $elt);\n                        if(options.invalidate){\n                            element.data('widget').isValid(name, valid);\n                        }\n                    }\n                }\n            };\n\n            $form.off('.databinding');\n            $form.on('change.databinding keyup.databinding', ':checkbox, :radio, select, :text:not([data-validate]), :hidden:not([data-validate])', callback.simple);\n            $form.on('keyup.databinding input.databinding propertychange.databinding', 'textarea', callback.simple);\n\n            $form.on('validated.group.databinding', callback.withValidation);\n\n            _.defer(function(){\n                $form.groupValidator({\n                    validateOnInit : options.validateOnInit,\n                    events : ['change', 'blur', {type : 'keyup', length : 0}],\n                    callback : _validationCallback\n                });\n            });\n\n        },\n        initTitle : function($form, element){\n\n            var $title = $form.hasClass('qti-title') ? $form : $form.find('.qti-title');\n\n            $title\n                .inplacer({\n                    target : $('#qti-title')\n                })\n                .attr('title', __('Edit modal feedback title'))\n                .on('change', function(){\n                    element.attr('title', $(this).text());\n                });\n        },\n        /**\n         * the simplest form of save callback used in setChangeCallbacks()\n         * @param {boolean} allowEmpty\n         */\n        getAttributeChangeCallback : function(allowEmpty){\n\n            return function(element, value, name){\n                if(!allowEmpty && value === ''){\n                    element.removeAttr(name);\n                }else{\n                    element.attr(name, value);\n                }\n            }\n        },\n        getMinMaxAttributeCallbacks : function($form, attributeNameMin, attributeNameMax, options){\n\n            var _defaults = {\n                    allowNull : false,\n                    updateCardinality : true,\n                    attrMethodNames : {\n                        remove : 'removeAttr',\n                        set : 'attr'\n                    },\n                    callback : _.noop\n                },\n                $max = $form.find('input[name=' + attributeNameMax + ']'),\n                callbacks = {};\n            \n            //prepare options object\n            options = _.defaults(options || {}, _defaults);\n            \n            callbacks[attributeNameMin] = function(element, value, name){\n\n                var newOptions = {min : 0};\n\n                value = parseInt(value);\n                if(!options.allowNull && (value === 0 || isNaN(value))){\n                    element[options.attrMethodNames.remove](name);\n                }else{\n                    element[options.attrMethodNames.set](name, value);\n                    newOptions.min = value;\n\n                    var max = parseInt($max.val());\n                    if(max < value){\n                        $max.val(value);\n                    }\n                }\n                //set incrementer min value for maxChoices and trigger keyup event to launch validation\n                $max.incrementer('options', newOptions).keyup();\n                \n                options.callback(element, value, name);\n            };\n\n            callbacks[attributeNameMax] = function(element, value, name){\n\n                value = parseInt(value) || 0;\n\n                if(element.is('interaction')){\n                    //update response\n                    _updateResponseDeclaration(element, value, options.updateCardinality);\n                }\n\n                if(!value && (element.is('orderInteraction') || element.is('graphicOrderInteraction'))){\n                    element[options.attrMethodNames.remove](name);//to be removed for order interactions\n                }else{\n                    element[options.attrMethodNames.set](name, value);//required\n                }\n                \n                options.callback(element, value, name);\n            };\n\n            return callbacks;\n        }\n    };\n\n    var _updateResponseDeclaration = function(interaction, maxChoice, updateCardinality){\n\n        if(Element.isA(interaction, 'interaction')){\n            updateCardinality = (updateCardinality === undefined) ? true : !!updateCardinality;\n\n            var responseDeclaration = interaction.getResponseDeclaration();\n            if(updateCardinality){\n                responseDeclaration.attr('cardinality', (maxChoice === 1) ? 'single' : 'multiple');\n            }\n\n            if(maxChoice){\n                //always update the correct response then:\n                var correct = [];\n                _.each(responseDeclaration.getCorrect(), function(c){\n                    if(correct.length < maxChoice){\n                        correct.push(c);\n                    }else{\n                        return false;\n                    }\n                });\n                responseDeclaration.setCorrect(correct);\n            }\n\n        }else{\n            throw new Error('the first argument must be an interaction, the current element is ' + interaction.qtiClass);\n        }\n\n\n    };\n\n    var _validationCallback = function _validationCallback(valid, results){\n\n        var $input = $(this),\n            rule;\n\n        if(dom.contains($input)){\n\n            _createTooltip($input);\n\n            $input.tooltipster('hide');\n\n            if(!valid){\n\n                //invalid input!\n                rule = _.where(results, {type : 'failure'})[0];\n                if(rule && rule.data.message){\n                    $input.tooltipster('content', rule.data.message);\n                    if(!$('#mediaManager').children('.opened').length){\n                        //only show it when the filemanager is hidden\n                        $input.tooltipster('show');\n                    }\n                }\n\n            }\n\n        }\n\n\n\n    };\n\n    var _createTooltip = function($input){\n        if(!$input.hasClass('tooltipstered')){\n            $input.tooltipster({\n                theme : 'tao-error-tooltip',\n                content : '',\n                delay : 350,\n                trigger : 'custom'\n            });\n        }\n    };\n\n    return formElement;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/helpers/inline',[\n    'lodash',\n    'taoQtiItem/qtiCreator/helper/dummyElement',\n    'core/validator/validators'\n], function(_, dummyElement, validators){\n\n    var _qtiClassToDummies = {\n        math : 'maths',\n        img : 'image',\n        object : 'media'\n    };\n\n    //only valid for a state\n    inlineHelper = {\n        checkFileExists : function(widget, fileSrcAttrName, baseUrl){\n\n            var element = widget.element;\n\n            validators.validators.fileExists.validate(\n                element.attr(fileSrcAttrName),\n                function(fileExists){\n                    if(!fileExists){\n                        //clear value:\n                        element.attr(fileSrcAttrName, '');\n                        inlineHelper.togglePlaceholder(widget);\n                    }\n                },\n                {\n                    baseUrl : baseUrl || ''\n                });\n\n        },\n        togglePlaceholder : function(widget, opts){\n\n            var options = _.defaults(opts || {}, {\n                container : widget.$original,\n                type : widget.element.qtiClass\n            });\n\n            var $container = options.container;\n            var $placeholder = $container.siblings('.dummy-element');\n\n            if(widget.element.isEmpty()){\n\n                $container.hide();\n\n                var type = _qtiClassToDummies[options.type] || options.type;\n                if(!$placeholder.length){\n                    $placeholder = dummyElement.get(type);\n                    $container.after($placeholder);\n                }\n                $placeholder.show();\n\n            }else{\n\n                $container.show();\n                $placeholder.hide();\n            }\n\n            widget.$container.trigger('contentChange.qti-widget');\n        },\n        positionFloat : function(widget, position){\n\n            var $container = widget.$container,\n                elt = widget.element;\n\n            //remove class\n            $container.removeClass('rgt lft');\n\n            elt.removeClass('rgt');\n            elt.removeClass('lft');\n            switch(position){\n                case 'right':\n                    $container.addClass('rgt');\n                    elt.addClass('rgt');\n                    break;\n                case 'left':\n                    $container.addClass('lft');\n                    elt.addClass('lft');\n                    break;\n            }\n        }\n    };\n\n    return inlineHelper;\n});\n\n\n","define('taoQtiItem/qtiCreator/widgets/static/img/states/Active',[\n    'jquery',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/img',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'taoQtiItem/qtiItem/helper/util',\n    'lodash',\n    'util/image',\n    'ui/mediasizer',\n    'ui/resourcemgr',\n    'nouislider'\n], function($, __, stateFactory, Active, formTpl, formElement, inlineHelper, itemUtil, _, imageUtil){\n\n    var ImgStateActive = stateFactory.extend(Active, function(){\n\n        this.initForm();\n\n    }, function(){\n\n        this.widget.$form.empty();\n    });\n\n    /**\n     * Extract a default label from a file/path name\n     * @param {String} fileName - the file/path\n     * @returns {String} a label\n     */\n    var _extractLabel = function extractLabel(fileName){\n        return fileName\n            .replace(/\\.[^.]+$/, '')\n            .replace(/^(.*)\\//, '')\n            .replace(/\\W/, ' ')\n            .substr(0, 255);\n    };\n\n    ImgStateActive.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $img = _widget.$original,\n            $form = _widget.$form,\n            img = _widget.element,\n            baseUrl = _widget.options.baseUrl,\n            responsive = true;\n\n        $form.html(formTpl({\n            baseUrl : baseUrl || '',\n            src : img.attr('src'),\n            alt : img.attr('alt'),\n            height : img.attr('height'),\n            width : img.attr('width'),\n            responsive : responsive\n        }));\n\n        //init slider and set align value before ...\n        _initAdvanced(_widget);\n        _initMediaSizer(_widget);\n        _initAlign(_widget);\n        _initUpload(_widget);\n\n        //... init standard ui widget\n        formElement.initWidget($form);\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, img, {\n            src : _.throttle(function(img, value){\n\n                img.attr('src', value);\n\n                $img.attr('src', itemUtil.fullpath(encodeURIComponent(value), baseUrl));\n                $img.trigger('contentChange.qti-widget').change();\n\n                inlineHelper.togglePlaceholder(_widget);\n\n                _initAdvanced(_widget);\n                _initMediaSizer(_widget);\n            }, 1000),\n            alt : function(img, value){\n                img.attr('alt', value);\n            },\n            longdesc : formElement.getAttributeChangeCallback(),\n            align : function(img, value){\n                inlineHelper.positionFloat(_widget, value);\n            }\n        });\n\n    };\n\n    var _initAlign = function(widget){\n\n        var align = 'default';\n\n        //init float positioning:\n        if(widget.element.hasClass('rgt')){\n            align = 'right';\n        }else if(widget.element.hasClass('lft')){\n            align = 'left';\n        }\n\n        inlineHelper.positionFloat(widget, align);\n        widget.$form.find('select[name=align]').val(align);\n    };\n\n\n    var _initMediaSizer = function(widget){\n\n        var img = widget.element,\n            $src = widget.$form.find('input[name=src]'),\n            $mediaResizer = widget.$form.find('.img-resizer'),\n            $mediaSpan = widget.$container;\n\n        if($src.val()){\n\n            //init data-responsive:\n            if(img.data('responsive') === undefined){\n                if(img.attr('width') && !/[0-9]+%/.test(img.attr('width'))){\n                    img.data('responsive', false);\n                }else{\n                    img.data('responsive', true);\n                }\n            }\n\n            //hack to fix the initial width issue:\n            if(img.data('responsive')){\n                $mediaSpan.css('width', img.attr('width'))\n                $mediaSpan.css('height', '')\n            }\n\n            //init media sizer\n            $mediaResizer.mediasizer({\n                responsive : (img.data('responsive') !== undefined) ? !!img.data('responsive') : true,\n                target : widget.$original,\n                applyToMedium : false\n            });\n\n            //bind modification events\n            $mediaResizer\n                .off('.mediasizer')\n                .on('responsiveswitch.mediasizer', function(e, responsive){\n\n                    img.data('responsive', responsive);\n\n                })\n                .on('sizechange.mediasizer', function(e, size){\n\n                \n                _(['width', 'height']).each(function(sizeAttr){\n                    if(size[sizeAttr] === '' || size[sizeAttr] === undefined || size[sizeAttr] === null){\n                        img.removeAttr(sizeAttr);\n                        $mediaSpan.css(sizeAttr, '')\n                    }else{\n                        img.attr(sizeAttr, size[sizeAttr]);\n                        $mediaSpan.css(sizeAttr, size[sizeAttr])\n                    }\n\n                    //trigger choice container size adaptation\n                    widget.$container.trigger('contentChange.qti-widget');\n                });\n\n            });\n        }\n\n    };\n\n    var _initAdvanced = function(widget){\n\n        var $form = widget.$form,\n            src = widget.element.attr('src');\n\n        if(src){\n            $form.find('[data-role=advanced]').show();\n        }else{\n            $form.find('[data-role=advanced]').hide();\n        }\n    };\n\n\n    var _initUpload = function(widget){\n\n        var $form = widget.$form,\n            options = widget.options,\n            img = widget.element,\n            $container = widget.$container,\n            $uploadTrigger = $form.find('[data-role=\"upload-trigger\"]'),\n            $src = $form.find('input[name=src]'),\n            $alt = $form.find('input[name=alt]');\n        if(options.mediaManager.mediaSources.length === 0){\n            mediaSources = ['local'];\n        }\n        else{\n            mediaSources = options.mediaManager.mediaSources;\n        }\n        var _openResourceMgr = function(){\n            $uploadTrigger.resourcemgr({\n                title : __('Please select an image file from the resource manager. You can add files from your computer with the button \"Add file(s)\".'),\n                appendContainer : options.mediaManager.appendContainer,\n                mediaSources : mediaSources,\n                browseUrl : options.mediaManager.browseUrl,\n                uploadUrl : options.mediaManager.uploadUrl,\n                deleteUrl : options.mediaManager.deleteUrl,\n                downloadUrl : options.mediaManager.downloadUrl,\n                fileExistsUrl : options.mediaManager.fileExistsUrl,\n                params : {\n                    uri : options.uri,\n                    lang : options.lang,\n                    filters : 'image/jpeg,image/png,image/gif'\n                },\n                pathParam : 'path',\n                select : function(e, files){\n                    \n                    var file, alt;\n                    \n                    if(files && files.length){\n                        \n                        file = files[0].file;\n                        alt = files[0].alt;\n\n                        imageUtil.getSize(options.baseUrl + encodeURIComponent(file), function(size){\n\n                            if(size && size.width >= 0){\n                                \n                                var w = parseInt(size.width, 10),\n                                    maxW = $container.parents().innerWidth();\n                                    \n                                //always set the image size in % of the container size with a seurity margin of 5%\n                                if(w >= maxW * 0.95){\n                                    img.attr('width', '100%');\n                                }else{\n                                    w = parseInt(100*w/maxW);\n                                    img.attr('width', w+'%');\n                                }\n                                img.removeAttr('height');\n                            }\n\n                            if($.trim($alt.val()) === ''){\n                                if(alt === ''){\n                                    alt = _extractLabel(file);\n                                }\n                                img.attr('alt', alt);\n                                $alt.val(alt).trigger('change');\n                            }\n                            else{\n                                var confirmBox = $('.change-alt-modal-feedback'),\n                                    cancel = confirmBox.find('.cancel'),\n                                    save = confirmBox.find('.save'),\n                                    close = confirmBox.find('.modal-close');\n\n                                $('.alt-text',confirmBox).html('\"' + $alt.val() + '\"<br>with<br>\"' + alt+'\" ?');\n\n                                confirmBox.modal({ width: 500 });\n\n                                save.off('click')\n                                    .on('click', function () {\n                                        img.attr('alt', alt);\n                                        $alt.val(alt).trigger('change');\n                                        confirmBox.modal('close');\n                                    });\n\n                                cancel.off('click')\n                                    .on('click', function () {\n                                        confirmBox.modal('close');\n                                    });\n                            }\n\n                            _.defer(function(){\n                                $src.val(file).trigger('change');\n                            });\n                        });\n                    }\n                },\n                open : function(){\n                    //hide tooltip if displayed\n                    if($src.hasClass('tooltipstered')){\n                        $src.blur().tooltipster('hide');\n                    }\n                },\n                close : function(){\n                    //triggers validation : \n                    $src.blur();\n                }\n            });\n        };\n\n        $uploadTrigger.on('click', _openResourceMgr);\n\n        //if empty, open file manager immediately\n        if(!$src.val()){\n            _openResourceMgr();\n        }\n\n    };\n\n    return ImgStateActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/img/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/img/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/img/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/static/helpers/widget',['jquery', 'lodash'], function($, _){\n\n    var helper = {\n        buildInlineContainer : function(widget){\n            \n            var float = '';\n            if(widget.element.hasClass('lft')){\n                float = ' lft';\n            }else if(widget.element.hasClass('rgt')){\n                float = ' rgt';\n            }\n            \n            var $wrap = $('<span>', {\n                'data-serial' : widget.element.serial,\n                'class' : 'widget-box widget-inline widget-'+widget.element.qtiClass+float,\n                'data-qti-class' : widget.element.qtiClass,\n                'contenteditable' : 'false'\n            });\n            widget.$container = widget.$original.wrap($wrap).parent();\n\n            var textNode = widget.$container[0].nextSibling;\n            if(textNode){\n                //@todo : make text cursor positioning after an inline widget easier\n                textNode.nodeValue = ' '+textNode.nodeValue;\n            }\n        },\n        buildBlockContainer : function(widget){\n            \n            //absolutely need a div here (not span), otherwise mathjax will break\n            var $wrap = $('<div>', {\n                'data-serial' : widget.element.serial,\n                'class' : 'widget-box widget-block widget-'+widget.element.qtiClass,\n                'data-qti-class' : widget.element.qtiClass\n            });\n            widget.$container = widget.$original.wrap($wrap).parent();\n        },\n        createToolbar : function(widget, toolbarTpl){\n        \n            if(_.isFunction(toolbarTpl)){\n\n                var $tlb = $(toolbarTpl({\n                    serial : widget.serial,\n                    state : 'active'\n                }));\n\n                widget.$container.append($tlb);\n\n                $tlb.find('[data-role=\"delete\"]').on('click.widget-box', function(e){\n                    e.stopPropagation();//to prevent direct deleting;\n                    widget.changeState('deleting');\n                });\n\n            }else{\n                throw 'the toolbarTpl must be a handlebars function';\n            }\n        }\n    };\n\n    return helper;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/media', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"rgt tlb-button\\\" title=\\\"Delete\\\" data-role=\\\"delete\\\">\\n        <span class=\\\"icon-bin\\\"></span>\\n    </span>\\n</span>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/img/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/img/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'taoQtiItem/qtiItem/helper/util'\n], function($, Widget, states, helper, toolbarTpl, inlineHelper, itemUtil){\n\n    var ImgWidget = Widget.clone();\n\n    ImgWidget.initCreator = function(options){\n\n        var _this = this,\n            img = _this.element,\n            baseUrl = options.baseUrl;\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n\n        inlineHelper.togglePlaceholder(this);\n\n        //check file exists:\n        inlineHelper.checkFileExists(this, 'src', options.baseUrl);\n        $('#item-editor-scope').on('filedelete.resourcemgr.' + this.element.serial, function(e, src){\n            if(itemUtil.fullpath(img.attr('src'), baseUrl) === itemUtil.fullpath(src, baseUrl)){\n                img.attr('src', '');\n                inlineHelper.togglePlaceholder(_this);\n            }\n        });\n    };\n\n    ImgWidget.destroy = function(){\n        $('#item-editor-scope').off('.' + this.element.serial);\n    };\n\n    ImgWidget.getRequiredOptions = function(){\n        return ['baseUrl', 'uri', 'lang', 'mediaManager'];\n    };\n\n    ImgWidget.buildContainer = function(){\n\n        helper.buildInlineContainer(this);\n\n        this.$container.css({\n            width: this.element.attr('width'),\n            height: this.element.attr('height')\n        });\n        this.$original[0].setAttribute('width', '100%');\n        this.$original[0].setAttribute('height', '100%');\n\n        return this;\n    };\n\n    ImgWidget.createToolbar = function(){\n\n        helper.createToolbar(this, toolbarTpl);\n\n        return this;\n    };\n\n    return ImgWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Img',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Img',\n    'taoQtiItem/qtiCreator/widgets/static/img/Widget'\n], function(_, Renderer, Widget){\n\n    var CreatorImg = _.clone(Renderer);\n\n    CreatorImg.render = function(img, options){\n        \n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return Widget.build(\n            img,\n            Renderer.getContainer(img),\n            this.getOption('bodyElementOptionForm'),\n            options\n        );\n    };\n\n    return CreatorImg;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/item', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \" attributes.id\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" attributes.class\";\n  }\n\n  buffer += \"<div class=\\\"qti-item tao-scope runtime\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n    <div\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" class=\\\"qti-itemBody\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n    <div id=\\\"modalFeedbacks\\\"></div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/helpers/itemStylesheetHandler',[\n    'jquery',\n    'lodash'\n], function($, _){\n    'use strict';\n\n    var itemStylesheetHandler = (function(){\n\n        var informLoaded = _.throttle(function(){\n            $(document).trigger('customcssloaded.styleeditor');\n        }, 10, {leading : false});\n\n        var attach = function(stylesheets) {\n            var $head = $('head'), link;\n\n             $('body').addClass('tao-scope');\n\n             // relative links with cache buster\n            _(stylesheets).forEach(function(stylesheet){\n\n                var $link = $(stylesheet.render());\n                var href = $link.attr('href');\n                var sep  = href.indexOf('?') > -1 ? '&' : '?';\n\n\n\n                if(href.indexOf('/') === 0) {\n                    href = href.slice(1);\n                }\n                \n                href +=  sep + (new Date().getTime()).toString();\n\n                //we need to set the href after the link is appended to the head (for our dear IE)\n                $link.removeAttr('href')\n                     .appendTo($head)\n                     .attr('href', href);\n\n                //wait for the styles to applies\n                _.delay(informLoaded, 10);\n            });\n        };\n\n        return {\n            attach: attach\n        };\n\n    }());\n\n    return itemStylesheetHandler;\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/Item',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/item',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/itemStylesheetHandler'\n], function(tpl, Helper, itemStylesheetHandler) {\n    return {\n        qtiClass: 'assessmentItem',\n        template: tpl,\n        getContainer: Helper.getContainer,\n        render: function(item) {\n            \n            //target blank for all <a>\n            Helper.targetBlank(Helper.getContainer(item));\n            \n            //add stylesheets\n            itemStylesheetHandler.attach(item.stylesheets);\n        }\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/item', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The principle identifier of the item. This identifier must have a corresponding entry in the item's metadata.\", options) : helperMissing.call(depth0, \"__\", \"The principle identifier of the item. This identifier must have a corresponding entry in the item's metadata.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-item_123456\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n    \\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"timeDependent\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.timeDependent), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Time dependent\", options) : helperMissing.call(depth0, \"__\", \"Time dependent\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Define whether the item should be time dependent on delivery.\", options) : helperMissing.call(depth0, \"__\", \"Define whether the item should be time dependent on delivery.\", options)))\n    + \"\\n    </span>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/item/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Active',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/item',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement'\n], function(stateFactory, Active, formTpl, formElement){\n\n    var ItemStateActive = stateFactory.create(Active, function(){\n\n        this.initForm();\n\n    }, function(){\n\n    });\n\n    ItemStateActive.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            item = _widget.element,\n            $form = _widget.$form;\n\n        //build form:\n        $form.html(formTpl({\n            serial : item.getSerial(),\n            identifier : item.id(),\n            timeDependent : !!item.attr('timeDependent')\n        }));\n        \n        //init widget\n        formElement.initWidget($form);\n\n        //init data validation and binding\n        formElement.setChangeCallbacks($form, item, {\n            identifier : formElement.getAttributeChangeCallback(),\n            timeDependent : formElement.getAttributeChangeCallback()\n        });\n    };\n\n    return ItemStateActive;\n});\n","define('taoQtiItem/qtiCreator/widgets/item/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/item/states/Active'\n], function(factory){\n    return factory.createBundle(arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/static/text/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/static/states/Sleep'], function(stateFactory, SleepState){\n    \n    var TextBlockStateSleep = stateFactory.extend(SleepState, function(){}, function(){});\n    \n    return TextBlockStateSleep;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/text', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <em>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"no configuration property needed\", options) : helperMissing.call(depth0, \"__\", \"no configuration property needed\", options)))\n    + \"</em>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/text/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/text'\n], function(stateFactory, Active, htmlEditor, content, formTpl){\n\n    var TextActive = stateFactory.extend(Active, function(){\n\n        this.buildEditor();\n        this.initForm();\n\n    }, function(){\n\n        this.destroyEditor();\n        this.widget.$form.empty();\n    });\n\n    TextActive.prototype.buildEditor = function(){\n\n        var widget = this.widget,\n            $editableContainer = widget.$container,\n            container = widget.element;\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n\n            htmlEditor.buildEditor($editableContainer, {\n                change : content.getChangeCallback(container),\n                blur : function(){\n                    widget.changeState('sleep');\n                },\n                data : {\n                    widget : widget,\n                    container : container\n                }\n            });\n        }\n    };\n\n    TextActive.prototype.destroyEditor = function(){\n        //search and destroy the editor\n        htmlEditor.destroyEditor(this.widget.$container);\n    };\n\n    TextActive.prototype.initForm = function(){\n        this.widget.$form.html(formTpl());\n    };\n\n    return TextActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/text/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/text/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/text/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/textBlock', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <div class=\\\"rgt tlb-button\\\" title=\\\"Delete\\\" data-role=\\\"delete\\\">\\n        <span class=\\\"icon-bin\\\"></span>\\n    </div>\\n    <div class=\\\"rgt tlb-button\\\" data-role=\\\"cke-launcher\\\" title=\\\"Formatting options\\\">\\n        <span class=\\\"icon-font\\\"></span>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/text/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/text/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/textBlock'\n], function($, Widget, states, toolbarTpl){\n\n    var TextWidget = Widget.clone();\n\n    TextWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n\n    };\n\n    TextWidget.buildContainer = function(){\n\n        var $wrap = $('<div>', {'data-serial' : this.element.serial, 'data-qti-class' : '_container', 'class' : 'widget-box widget-block widget-textBlock'})\n            .append($('<div>', {'data-html-editable' : true}));\n\n        this.$original.wrapInner($wrap);\n\n        this.$container = this.$original.children('.widget-box');\n    };\n\n    TextWidget.createToolbar = function(){\n\n        var _this = this,\n            $tlb = $(toolbarTpl({\n            serial : this.serial,\n            state : 'active'\n        }));\n\n        this.$container.append($tlb);\n\n        $tlb.find('[data-role=\"delete\"]').on('click.widget-box', function(e){\n            e.stopPropagation();//to prevent direct deleting;\n            _this.changeState('deleting');\n        });\n\n        return this;\n    };\n    \n    return TextWidget;\n});\n","define('taoQtiItem/qtiCreator/widgets/item/Widget',[\n    'lodash',\n    'i18n',\n    'jquery',\n    'helpers',\n    'taoQtiItem/qtiCreator/widgets/Widget',\n    'taoQtiItem/qtiCreator/widgets/item/states/states',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/helper/creatorRenderer',\n    'taoQtiItem/qtiCreator/model/helper/container',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/helper/xmlRenderer',\n    'taoQtiItem/qtiCreator/helper/devTools',\n    'taoQtiItem/qtiCreator/widgets/static/text/Widget',\n    'taoQtiItem/qtiCreator/editor/styleEditor/styleEditor',\n    'taoQtiItem/qtiCreator/editor/editor',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/genericFeedbackPopup',\n    'taoQtiItem/qtiCreator/editor/jquery.gridEditor'\n], function(\n    _,\n    __,\n    $,\n    helpers,\n    Widget,\n    states,\n    Element,\n    creatorRenderer,\n    containerHelper,\n    contentHelper,\n    xmlRenderer,\n    devTools,\n    TextWidget,\n    styleEditor,\n    itemEditor,\n    genericFeedbackPopup\n    ){\n\n    var ItemWidget = Widget.clone();\n\n    ItemWidget.initCreator = function(config){\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n\n        if(!config || !config.uri){\n            throw new Error('missing required config parameter uri in item widget initialization');\n        }\n\n        this.renderer = config.renderer;\n\n        this.itemUri = config.uri;\n\n        this.initUiComponents();\n\n        this.initTextWidgets(function(){\n\n            //when the text widgets are ready:\n            this.initGridEditor();\n\n            //active debugger\n            this.debug({\n                state : false,\n                xml : false\n            });\n        });\n    };\n\n    ItemWidget.buildContainer = function(){\n\n        this.$container = this.$original;\n    };\n\n    ItemWidget.save = function(){\n        return $.ajax({\n            url : helpers._url('saveItem', 'QtiCreator', 'taoQtiItem', {uri : this.itemUri}),\n            type : 'POST',\n            contentType : 'text/xml',\n            dataType : 'json',\n            data : xmlRenderer.render(this.element)\n        });\n    };\n\n    ItemWidget.initUiComponents = function(){\n\n        var _widget = this,\n            element = _widget.element,\n            $saveBtn = $('#save-trigger'),\n            $previewBtn = $('.preview-trigger');\n\n        //init save button:\n        $saveBtn.on('click', function(e){\n\n            var $saveButton = $(this);\n            \n            //trigger save event\n            $saveButton.trigger('beforesave.qti-creator');\n\n            if($saveButton.hasClass('disabled')){\n                e.preventDefault();\n                return;\n            }\n\n            $saveButton.addClass('active');\n            \n            //defer exceution of save function to give beforesave chance to be executed\n            _.defer(function(){\n\n                $.when(styleEditor.save(), _widget.save()).done(function(){\n\n                    var success = true, \n                        feedbackArgs = {\n                        message : __('Your item has been saved'),\n                        type : 'success'\n                    },\n                    i = arguments.length;\n\n                    $saveButton.removeClass('active');\n\n                    while(i--){\n                        if(arguments[i][1].toLowerCase() !== 'success'){\n                            feedbackArgs = {\n                                message : __('Failed to save item'),\n                                type : 'error'\n                            };\n                            success = false;\n                            break;\n                        }\n                    }\n                    \n                    $saveButton.trigger('aftersave.qti-creator', [success]);\n                    _createInfoBox(feedbackArgs);\n                });\n            });\n            \n        });\n\n        $previewBtn.on('click', function(){\n            itemEditor.initPreview(_widget);\n        });\n\n        //listen to invalid states:\n        _widget.on('metaChange', function(data){\n            if(data.element.getSerial() === element.getSerial() && data.key === 'invalid'){\n                var invalid = element.data('invalid');\n                if(_.size(invalid)){\n                    $saveBtn.addClass('disabled');\n                }else{\n                    $saveBtn.removeClass('disabled');\n                }\n            }\n        }, true);\n\n    };\n\n    ItemWidget.initGridEditor = function(){\n\n        var _this = this,\n            item = this.element,\n            $itemBody = this.$container.find('.qti-itemBody'),\n            $itemEditorPanel = $('#item-editor-panel');\n\n        $itemBody.gridEditor();\n        $itemBody.gridEditor('resizable');\n        $itemBody.gridEditor('addInsertables', $('.tool-list > [data-qti-class]:not(.disabled)'), {\n            helper : function(){\n                return $(this).find('.icon').clone().addClass('dragging');\n            }\n        });\n\n        $itemBody.on('beforedragoverstart.gridEdit', function(){\n\n            $itemEditorPanel.addClass('dragging');\n            $itemBody.removeClass('hoverable').addClass('inserting');\n\n        }).on('dragoverstop.gridEdit', function(){\n\n            $itemEditorPanel.removeClass('dragging');\n            $itemBody.addClass('hoverable').removeClass('inserting');\n\n        }).on('dropped.gridEdit.insertable', function(e, qtiClass, $placeholder){\n\n            //a new qti element has been added: update the model + render\n            $placeholder.removeAttr('id');//prevent it from being deleted\n\n            if(qtiClass === 'rubricBlock'){\n                //qti strange exception: a rubricBlock must be the first child of itemBody, nothing else...\n                //so in this specific case, consider the whole row as the rubricBlock\n                //by the way, in our grid system, rubricBlock can only have a width of col-12\n                $placeholder = $placeholder.parent('.col-12').parent('.grid-row');\n            }\n\n            $placeholder.addClass('widget-box');//required for it to be considered as a widget during container serialization\n            $placeholder.attr({\n                'data-new' : true,\n                'data-qti-class' : qtiClass\n            });//add data attribute to get the dom ready to be replaced by rendering\n\n            var $widget = $placeholder.parent().closest('.widget-box, .qti-item');\n            var $editable = $placeholder.closest('[data-html-editable], .qti-itemBody');\n            var widget = $widget.data('widget');\n            var element = widget.element;\n            var container = Element.isA(element, '_container') ? element : element.getBody();\n\n            if(!element || !$editable.length){\n                throw new Error('cannot create new element');\n            }\n\n            containerHelper.createElements(container, contentHelper.getContent($editable), function(newElts){\n\n                creatorRenderer.get().load(function(){\n\n                    for(var serial in newElts){\n\n                        var elt = newElts[serial],\n                            $widget,\n                            widget,\n                            $colParent = $placeholder.parent();\n\n                        elt.setRenderer(this);\n\n                        if(Element.isA(elt, '_container')){\n                            $colParent.empty();//clear the col content, and leave an empty text field\n                            $colParent.html(elt.render());\n                            widget = _this.initTextWidget(elt, $colParent);\n                            $widget = widget.$container;\n                        }else{\n                            elt.render($placeholder);\n                            widget = elt.postRender();\n                            if(Element.isA(elt, 'blockInteraction')){\n                                $widget = widget.$container;\n                            }else{\n                                //leave the container in place\n                                $widget = widget.$original;\n                            }\n                        }\n\n                        //inform height modification\n                        $widget.trigger('contentChange.gridEdit');\n                        $widget.trigger('resize.gridEdit');\n\n                        //active it right away:\n                        if(Element.isA(elt, 'interaction')){\n                            widget.changeState('question');\n                        }else{\n                            widget.changeState('active');\n                        }\n\n                    }\n                }, this.getUsedClasses());\n            });\n\n        }).on('resizestop.gridEdit', function(){\n\n            item.body($itemBody.gridEditor('getContent'));\n\n        });\n\n    };\n\n    ItemWidget.initTextWidgets = function(callback){\n\n        var _this = this,\n            item = this.element,\n            $originalContainer = this.$container,\n            i = 1,\n            subContainers = [];\n\n        callback = callback || _.noop;\n\n        //temporarily tag col that need to be transformed into \n        $originalContainer.find('.qti-itemBody > .grid-row').each(function(){\n\n            var $row = $(this);\n\n            if(!$row.hasClass('widget-box')){//not a rubricBlock\n                $row.children().each(function(){\n\n                    var $col = $(this),\n                        isTextBlock = false;\n\n                    $col.contents().each(function(){\n                        if(this.nodeType === 3 && this.nodeValue && this.nodeValue.trim()){\n                            isTextBlock = true;\n                            return false;\n                        }\n                    });\n\n                    var $widget = $col.children();\n                    if($widget.length > 1 || !$widget.hasClass('widget-blockInteraction')){//not an immediate qti element\n                        isTextBlock = true;\n                    }\n\n                    if(isTextBlock){\n                        $col.attr('data-text-block-id', 'text-block-' + i);\n                        i++;\n                    }\n                });\n            }\n        });\n\n        //clone the container to create the new container model:\n        var $clonedContainer = $originalContainer.clone();\n        $clonedContainer.find('.qti-itemBody > .grid-row > [data-text-block-id]').each(function(){\n\n            var $col = $(this),\n                textBlockId = $col.data('text-block-id'),\n                $subContainer = $col.clone(),\n                subContainerElements = contentHelper.serializeElements($subContainer),\n                subContainerBody = $subContainer.html();//get serialized body\n\n            $col.removeAttr('data-text-block-id').html('{{_container:new}}');\n\n            subContainers.push({\n                body : subContainerBody,\n                elements : subContainerElements,\n                $original : $originalContainer.find('[data-text-block-id=\"' + textBlockId + '\"]').removeAttr('data-text-block-id')\n            });\n        });\n\n        //create new container model with the created sub containers\n        contentHelper.serializeElements($clonedContainer);\n\n        var serializedItemBody = $clonedContainer.find('.qti-itemBody').html(),\n            itemBody = item.getBody();\n\n        if(subContainers.length){\n\n            containerHelper.createElements(itemBody, serializedItemBody, function(newElts){\n\n                if(_.size(newElts) !== subContainers.length){\n\n                    throw 'number of sub-containers mismatch';\n                }else{\n\n                    _.each(newElts, function(container){\n\n                        var containerData = subContainers.shift();//get data in order\n                        var containerElements = _detachElements(itemBody, containerData.elements);\n\n                        container.setElements(containerElements, containerData.body);\n\n                        _this.initTextWidget(container, containerData.$original);\n\n                    });\n\n                    _.defer(function(){\n                        callback.call(_this);\n                    });\n                }\n            });\n\n        }else{\n\n            callback.call(_this);\n        }\n\n    };\n\n    var _detachElements = function(container, elements){\n\n        var containerElements = {};\n        _.each(elements, function(elementSerial){\n            containerElements[elementSerial] = container.elements[elementSerial];\n            delete container.elements[elementSerial];\n        });\n        return containerElements;\n    };\n\n    ItemWidget.initTextWidget = function(container, $col){\n        return TextWidget.build(container, $col, this.renderer.getOption('textOptionForm'), {});\n    };\n\n    /**\n     * Enable debugging \n     * \n     * @param {Boolean} [options.state = false] - log state change in console\n     * @param {Boolean} [options.xml = false] - real-time qti xml display under the creator\n     */\n    ItemWidget.debug = function(options){\n\n        options = options || {}\n\n        if(options.state){\n            devTools.listenStateChange();\n        }\n\n        if(options.xml){\n            var $code = $('<code>', {'class' : 'language-markup'}),\n                $pre = $('<pre>', {'class' : 'line-numbers'}).append($code);\n\n            $('#item-editor-wrapper').append($pre);\n            devTools.liveXmlPreview(this.element, $code);\n        }\n\n    };\n\n\n    var _createInfoBox = function(data){\n        var $messageBox = $(genericFeedbackPopup(data)),\n            closeTrigger = $messageBox.find('.close-trigger');\n\n        $('body').append($messageBox);\n\n        closeTrigger.on('click', function(){\n            $messageBox.fadeOut(function(){\n                $(this).remove();\n            });\n        });\n\n        setTimeout(function(){\n            closeTrigger.trigger('click');\n        }, 2000);\n\n        return $messageBox;\n    };\n\n    return ItemWidget;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/item', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"tao-scope qti-item item-editor-item clearfix\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n    <div id=\\\"modalFeedbacks\\\"></div>\\n    <div class=\\\"qti-itemBody item-editor-drop-area hoverable\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Item',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Item',\n    'taoQtiItem/qtiCreator/widgets/item/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/item'\n], function($, _, CommonRenderer, Widget, tpl){\n\n    var CreatorItem = _.clone(CommonRenderer);\n\n    var _normalizeItemBody = function _normalizeItemBody($itemBody) {\n\n        $itemBody.children().each(function(){\n            var $child = $(this);\n            //must be a grid-row for editing:\n            if(!$child.hasClass('grid-row') && !$child.hasClass('qti-infoControl')){\n                $child.wrap('<div class=\"grid-row\"><div class=\"col-12\"></div></div>');\n            }\n        });\n\n        return $itemBody;\n    };\n\n    CreatorItem.template = tpl;\n\n    CreatorItem.render = function(item, options){\n\n        var $itemContainer = CommonRenderer.getContainer(item);\n\n        _normalizeItemBody($itemContainer.find('.qti-itemBody'));\n\n        options = options || {};\n        options.state = 'active';//the item widget never sleeps ! <- this sounds very scary!\n        options.renderer = this;\n\n        return Widget.build(\n            item,\n            $itemContainer,\n            this.getOption('itemOptionForm'),\n            options\n        );\n    };\n\n    return CreatorItem;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/math', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n<span data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"math\\\">\\n    <math display = \\\"block\\\">\";\n  if (helper = helpers.raw) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.raw); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</math>\\n</span>\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n<span data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"math\\\">\\n    <math>\";\n  if (helper = helpers.raw) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.raw); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</math>\\n</span>   \\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.block), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/Math',['tpl!taoQtiItem/qtiCommonRenderer/tpl/math', 'taoQtiItem/qtiCommonRenderer/helpers/Helper', 'mathJax', 'lodash'], function(tpl, Helper, MathJax, _){\n    return {\n        qtiClass : 'math',\n        template : tpl,\n        getContainer : Helper.getContainer,\n        render : function(math, data){\n            if(typeof(MathJax) !== 'undefined' && MathJax){\n                _.delay(function(){//defer execution fix some rendering issue in chrome\n                     MathJax.Hub.Queue([\"Typeset\", MathJax.Hub, Helper.getContainer(math).parent()[0]]);\n                },60);\n            }\n        }\n    };\n});\n","define('taoQtiItem/qtiCreator/widgets/static/math/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/static/states/Sleep'], function(stateFactory, SleepState){\n    \n    var MathStateSleep = stateFactory.extend(SleepState, function(){}, function(){});\n    \n    return MathStateSleep;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/math', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"display\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Display\", options) : helperMissing.call(depth0, \"__\", \"Display\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"How the math expression should be displayed.\", options) : helperMissing.call(depth0, \"__\", \"How the math expression should be displayed.\", options)))\n    + \"</div>\\n\\n    <select name=\\\"display\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n        <option value=\\\"inline\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"inline\", options) : helperMissing.call(depth0, \"__\", \"inline\", options)))\n    + \"</option>\\n        <option value=\\\"block\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"block\", options) : helperMissing.call(depth0, \"__\", \"block\", options)))\n    + \"</option>\\n    </select>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"editMode\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Editing Mode\", options) : helperMissing.call(depth0, \"__\", \"Editing Mode\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"How the math expression should be edited\", options) : helperMissing.call(depth0, \"__\", \"How the math expression should be edited\", options)))\n    + \".</div>\\n\\n    <select name=\\\"editMode\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n        <option value=\\\"latex\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"LaTex\", options) : helperMissing.call(depth0, \"__\", \"LaTex\", options)))\n    + \"</option>\\n        <option value=\\\"mathml\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"MathML\", options) : helperMissing.call(depth0, \"__\", \"MathML\", options)))\n    + \"</option>\\n    </select>\\n\\n</div>\\n\\n<div class=\\\"panel\\\" data-role=\\\"latex\\\" style=\\\"display:none;\\\">\\n    <label for=\\\"sidebar-latex-field\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Latex\", options) : helperMissing.call(depth0, \"__\", \"Latex\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Edit math expression using LaTex type setting system, e.g. e^{i \\\\pi} = -1\", options) : helperMissing.call(depth0, \"__\", \"Edit math expression using LaTex type setting system, e.g. e^{i \\\\pi} = -1\", options)))\n    + \"</div>\\n\\n    <input id=\\\"sidebar-latex-field\\\" type=\\\"text\\\" name=\\\"latex\\\" value=\\\"\";\n  if (helper = helpers.latex) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.latex); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" placeholder=\\\"e.g. e^{i \\\\pi} = -1\\\"/>\\n    <a href=\\\"#\\\" data-context=\\\"latex\\\" class=\\\"sidebar-popup-trigger\\\" data-popup=\\\"~ .math-editor-container\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Display larger editor\", options) : helperMissing.call(depth0, \"__\", \"Display larger editor\", options)))\n    + \"</a>\\n\\n    <div class=\\\"sidebar-popup math-editor-container latex two-fifty\\\">\\n        <div class=\\\"sidebar-popup-title\\\">\\n            <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Latex\", options) : helperMissing.call(depth0, \"__\", \"Latex\", options)))\n    + \"</h3>\\n            <a class=\\\"closer\\\" href=\\\"#\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close\", options) : helperMissing.call(depth0, \"__\", \"Close\", options)))\n    + \"\\\"></a>\\n        </div>\\n        <div class=\\\"sidebar-popup-content\\\">\\n            <input data-for=\\\"latex\\\"/>\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"panel sidebar-popup-container-box\\\" data-role=\\\"mathml\\\" style=\\\"display:none;\\\">\\n    <label for=\\\"sidebar-mathml-field\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"MathML\", options) : helperMissing.call(depth0, \"__\", \"MathML\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Edit math expression using MathML\", options) : helperMissing.call(depth0, \"__\", \"Edit math expression using MathML\", options)))\n    + \"</div>\\n\\n    <textarea id=\\\"sidebar-mathml-field\\\" name=\\\"mathml\\\">\";\n  if (helper = helpers.mathml) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.mathml); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</textarea>\\n\\n    <div class=\\\"math-buffer\\\" style=\\\"visibility:hidden;\\\"></div>\\n    <a href=\\\"#\\\" data-context=\\\"mathml\\\" class=\\\"sidebar-popup-trigger\\\" data-popup=\\\"~ .math-editor-container\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Display larger editor\", options) : helperMissing.call(depth0, \"__\", \"Display larger editor\", options)))\n    + \"</a>\\n\\n    <div class=\\\"sidebar-popup math-editor-container mathml two-fifty\\\">\\n        <div class=\\\"sidebar-popup-title\\\">\\n            <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"MathML\", options) : helperMissing.call(depth0, \"__\", \"MathML\", options)))\n    + \"</h3>\\n            <a class=\\\"closer\\\" href=\\\"#\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Close\", options) : helperMissing.call(depth0, \"__\", \"Close\", options)))\n    + \"\\\"></a>\\n        </div>\\n        <div class=\\\"sidebar-popup-content\\\">\\n            <textarea data-for=\\\"mathml\\\"></textarea>\\n        </div>\\n    </div>\\n\\n</div>\\n\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n<div class=\\\"panel\\\">\\n    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"MathJax is not installed.\", options) : helperMissing.call(depth0, \"__\", \"MathJax is not installed.\", options)))\n    + \"\\n</div>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.mathjax), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/math/states/Active',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCreator/editor/MathEditor',\n    'taoQtiItem/qtiCreator/helper/popup',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/math',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'lodash',\n    'i18n',\n    'mathJax'\n], function($, stateFactory, Active, MathEditor, popup, formTpl, formElement, inlineHelper, _, __, mathJax){\n\n    var _throttle = 300;\n    var MathActive = stateFactory.extend(Active, function(){\n\n        this.initForm();\n\n    }, function(){\n\n        this.widget.$form.empty();\n    });\n\n    MathActive.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            math = _widget.element,\n            mathML = math.mathML || '',\n            tex = math.getAnnotation('latex') || '',\n            display = math.attr('display') || 'inline',\n            editMode = 'latex';\n\n        if(!tex.trim() && mathML.trim()){\n            editMode = 'mathml';\n        }\n\n        $form.html(formTpl({\n            mathjax : !!mathJax,\n            editMode : editMode,\n            latex : tex,\n            mathml : mathML\n        }));\n\n        if(mathJax){\n\n            //init select boxes\n            $form.find('select[name=display]').val(display);\n            $form.find('select[name=editMode]').val(editMode);\n\n            $form.children('.panel[data-role=\"' + editMode + '\"]').show();\n            _toggleMode($form, editMode);\n\n            //... init standard ui widget\n            formElement.initWidget($form);\n\n            this.initFormChangeListener();\n\n        }\n\n    };\n\n    MathActive.prototype.initFormChangeListener = function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            $form = _widget.$form,\n            math = _widget.element,\n            mathML = math.mathML,\n            tex = math.getAnnotation('latex'),\n            display = math.attr('display') || 'inline',\n            $fields = {\n                mathml : $form.find('textarea[name=mathml]'),\n                latex : $form.find('input[name=latex]')\n            },\n            $modeSelector = $form.find('select[name=editMode]');\n\n\n        $form.find('.sidebar-popup-trigger').each(function() {\n            var $trigger = $(this),\n                context = $trigger.data('context');\n\n            // basic popup functionality\n            popup.init($trigger);\n\n            // after popup opens\n            $trigger.on('open.popup', function(e, params) {\n                var $largeField = params.popup.find(':input[data-for=\"' + context + '\"]');\n\n                // copy value\n                $largeField.val($fields[context].val());\n\n                $largeField.on('keyup', function(){\n                    $fields[context].val($(this).val());\n                    $fields[context].trigger('keyup');\n                });\n                $largeField.attr('placeholder', $fields[context].attr('placeholder'));\n\n                // disable form\n                $fields[context].prop('disabled', true);\n                $modeSelector.prop('disabled', true);\n\n            });\n\n            // after popup closes\n            $trigger.on('close.popup', function(e, params) {\n                var $largeField = params.popup.find(':input[data-for=\"' + context + '\"]');\n\n                $fields[context].val($largeField.val());\n                $fields[context].prop('disabled', false);\n                $modeSelector.prop('disabled', false);\n\n            });\n        });\n\n\n        var mathEditor = new MathEditor({\n            tex : tex,\n            mathML : mathML,\n            display : display,\n            buffer : $form.find('.math-buffer'),\n            target : _widget.$original\n        });\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, math, {\n            display : function(m, value){\n                if(value === 'block'){\n                    m.attr('display', 'block');\n                }else{\n                    m.removeAttr('display');\n                }\n                _widget.rebuild({\n                    ready : function(widget){\n                        widget.changeState('active');\n                    }\n                });\n            },\n            editMode : function(m, value){\n\n                _toggleMode($form, value);\n            },\n            latex : _.throttle(function(m, value){\n\n                mathEditor.setTex(value).renderFromTex(function(){\n\n                    //saveTex\n                    m.setAnnotation('latex', value);\n\n                    //update mathML\n                    $fields.mathml.html(mathEditor.mathML);\n                    m.setMathML(mathEditor.mathML);\n\n                    inlineHelper.togglePlaceholder(_widget);\n\n                    $container.change();\n                });\n\n            }, _throttle),\n            mathml : _.throttle(function(m, value){\n\n                mathEditor.setMathML(value).renderFromMathML(function(){\n\n                    //save mathML\n                    m.setMathML(value);\n\n                    //clear tex:\n                    $fields.latex.val('');\n                    m.removeAnnotation('latex');\n\n                    inlineHelper.togglePlaceholder(_widget);\n\n                    $container.change();\n                });\n\n            }, _throttle)\n        });\n    };\n\n    var _toggleMode = function($form, mode){\n\n        var $panels = {\n            mathml : $form.children('.panel[data-role=\"mathml\"]'),\n            latex : $form.children('.panel[data-role=\"latex\"]')\n        },\n        $fields = {\n            mathml : $form.find('textarea[name=mathml]'),\n            latex : $form.find('input[name=latex]')\n        },\n        $editMode = $form.find('select[name=editMode]');\n\n        //toggle form visibility\n        $panels.mathml.hide();\n        $panels.latex.hide();\n        if(mode === 'latex'){\n            $panels.latex.show();\n        }else if(mode === 'mathml'){\n            $panels.mathml.show();\n            if($fields.latex.val()){\n                //show a warning here, stating that the content in LaTeX will be removed\n                if(!$fields.mathml.hasClass('tooltipstered')){\n                    _createWarningTooltip($fields.mathml);\n                }\n                $fields.mathml.tooltipster('show');\n                $editMode.off('change.editMode').one('change.editMode', function(){\n                    $fields.mathml.tooltipster('hide');\n                });\n            }\n        }\n    };\n\n\n    var _createWarningTooltip = function($mathField){\n\n        var $content = $('<span>')\n            .html(__('Currently conversion from MathML to LaTeX is not available. Editing MathML here will have the LaTex code discarded.'));\n\n        $mathField.tooltipster({\n            theme : 'tao-warning-tooltip',\n            content : $content,\n            delay : 200,\n            trigger : 'custom'\n        });\n\n        $mathField.on('focus.mathwarning', function(){\n            $mathField.tooltipster('hide');\n        });\n\n        setTimeout(function(){\n            $mathField.tooltipster('hide');\n        }, 3000);\n    };\n\n    return MathActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/math/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/math/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/math/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/static/math/Widget',[\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/math/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline'\n], function(Widget, states, helper, toolbarTpl, inlineHelper) {\n\n    var MathWidget = Widget.clone();\n\n    MathWidget.initCreator = function() {\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n        \n        inlineHelper.togglePlaceholder(this);\n    };\n    \n    MathWidget.buildContainer = function(){\n        \n        if(this.element.attr('display') === 'block'){\n            helper.buildBlockContainer(this);\n        }else{\n            helper.buildInlineContainer(this);\n        }\n        \n        return this;\n    };\n    \n    MathWidget.createToolbar = function() {\n        \n         helper.createToolbar(this, toolbarTpl);\n\n        return this;\n    };\n\n    return MathWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/Math',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Math',\n    'taoQtiItem/qtiCreator/widgets/static/math/Widget'\n], function(_, Renderer, Widget){\n\n    var CreatorMath = _.clone(Renderer);\n\n    CreatorMath.render = function(math, options){\n        \n        //initial rendering:\n        Renderer.render(math);\n        \n        return Widget.build(\n            math,\n            Renderer.getContainer(math),\n            this.getOption('bodyElementOptionForm'),\n            options\n        );\n    };\n\n    return CreatorMath;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/modalFeedback', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div id=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"modal qti-modalFeedback\\\">\\n    <h1 class=\\\"qti-title modal-title\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</h1>\\n    <div class=\\\"modal-body\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/helpers/sizeFinder',[\n    'jquery'\n], function($){\n    'use strict';\n\n    /**\n     * Show elements temporarily\n     *\n     * @param $elements\n     * @private\n     */\n    var _show = function($elements){\n        \n        var $element;\n\n        $elements.each(function(){\n            $element = $(this);\n            $element.data('originalProperties', {\n                display : $element.css('display'),\n                position : $element.css('position'),\n                left : $element.css('left'),\n                width: $element.css('width'),\n                height: $element.css('height')\n            });\n\n            $element.css({\n                position : 'relative',\n                left : '-10000px',\n                width: 'auto',\n                height: 'auto',\n                display: 'inline-block'\n            });\n        });\n    };\n\n\n    /**\n     * Hide elements after size has been taken\n     *\n     * @param $elements\n     * @private\n     */\n    var _hide = function($elements){\n        \n        var $element;\n\n        $elements.each(function(){\n            $element = $(this);\n\n            $element.css($elements.data('originalProperties'));\n\n            $element.removeData('originalProperties');\n        });\n\n    };\n\n\n    /**\n     * Measure the outer size of the container while all elements are displayed\n     *\n     * @param $element\n     * @returns {{width: *, height: *}}\n     * @private\n     */\n    var _measure = function($element){\n        return {\n            width : $element.outerWidth(),\n            height : $element.outerHeight()\n        };\n    };\n\n\n    /**\n     * Return the size value, also trigger an event for convenience\n     *\n     * @param {jQueryElement} $container -\n     * @param {Function} callback - with the size in parameter\n     * @returns {Object} the size {width: *, height: *}\n     */\n    var measure = function($container, callback){\n        var size;\n\n        if($container && $container.length){ \n            _show($container);\n            size = _measure($container);\n            _hide($container);\n\n            callback.call($container[0], size);\n            $container.trigger('measured.sizeFinder', size);\n        }\n        return size;\n    };\n\n    return {\n        measure : measure\n    };\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback',[\n    'jquery',\n    'lodash',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/modalFeedback',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/sizeFinder',\n    'ui/modal'\n], function($, _, tpl, Helper, sizeFinder){\n    'use strict';\n\n    var modalFeedbackRenderer = {\n        qtiClass : 'modalFeedback',\n        template : tpl,\n        getContainer : Helper.getContainer,\n        minHeight : 200,\n        minWidth : 400,\n        maxWidth : 800,\n        render : function(modalFeedback, data){\n\n            data = data || {};\n\n            var $modal = $('#' + modalFeedback.getSerial());\n\n            sizeFinder.measure($modal, function(size){\n                \n                $modal.modal({\n                    startClosed : false,\n                    minHeight : Math.max(size.height , modalFeedbackRenderer.minHeight),\n                    width : Math.max( Math.min(size.width, modalFeedbackRenderer.maxWidth), modalFeedbackRenderer.minWidth)\n                });\n\n                $modal.on('closed.modal', function(){\n                    if(_.isFunction(data.callback)){\n                        data.callback.call(this);\n                    }\n                });\n            });\n        }\n    };\n\n    return modalFeedbackRenderer;\n});\n","define('taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/states/Sleep'], function(stateFactory, SleepState){\n    \n    return stateFactory.create(SleepState, function(){}, function(){});\n    \n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/modalFeedback', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the modal feedback. This identifier must not be used by any other modal feedback or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the modal feedback. This identifier must not be used by any other modal feedback or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. modal-feedback_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback',\n    'taoQtiItem/qtiCommonRenderer/helpers/sizeFinder',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/modalFeedback',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'jquery',\n    'ui/modal'\n], function(stateFactory, Active, commonRenderer, sizeFinder, formTpl, formElement, $){\n\n    /**\n     * handle z-indices of sidebar and ckeditor\n     */\n    var indices = (function(){\n\n        var selectors = {\n            sidebar : '#item-editor-item-widget-bar',\n            cke : '.cke',\n            ckeBase : '.cke_inner',\n            ckeNose : '.cke_nose',\n            ckeToolbar : '.cke_toolbar'\n        };\n\n        var raised = false,\n            selector,\n            elements = {};\n\n        return {\n            raise : function(baseIndex){\n\n                var $elem, index;\n\n                baseIndex = parseInt(baseIndex, 10);\n\n                for(selector in selectors){\n\n                    $elem = $(selectors[selector]);\n\n                    index = parseInt($elem.css('z-index'), 10);\n                    if(isNaN(index)){\n                        index = 100;\n                    }\n\n                    elements[selector] = {\n                        element : $elem,\n                        index : index\n                    };\n\n                    $elem.css('z-index', elements[selector].index + baseIndex);\n                }\n            },\n            reset : function(){\n                if(!raised){\n                    return;\n                }\n                for(selector in elements){\n                    elements[selector].element.css('z-index', elements[selector].index);\n                }\n            }\n        };\n    }());\n\n    var _ckeIsReady = function($editable){\n        \n        var dfd = new $.Deferred(),\n            iteration = 0;\n\n        var poll = function(){\n            \n            var editor = $editable.data('editor');\n            \n            if(iteration > 20){\n                return;\n            }\n            \n            if(editor){\n                dfd.resolve();\n            }else{\n                setTimeout(poll, 200);\n            }\n            \n        };\n        poll();\n\n        return dfd.promise();\n    };\n\n    var ModalFeedbackStateActive = stateFactory.extend(Active, function(){\n\n        var _widget = this.widget,\n            $container = this.widget.$container,\n            $editable = $container.find('[data-html-editable]');\n\n        sizeFinder.measure($container, function(size){\n            \n            $container.modal({\n                startClosed : true,\n                width : Math.max( Math.min(size.width, commonRenderer.maxWidth), commonRenderer.minWidth)\n            });\n            $container.modal('open');\n            $container.css('height', 'auto');\n            \n            $.when(_ckeIsReady($editable)).then(function(){\n                indices.raise($container.css('z-index'));\n            });\n            \n            $container.on('closed.modal', function(){\n                _widget.changeState('sleep');\n            });\n\n        });\n        \n        this.widget.offEvents('otherActive');\n        \n        //show option form\n        this.initForm();\n        this.widget.$form.show();\n        \n    }, function(){\n\n        var $container = this.widget.$container;\n\n        $container.off('opened.modal').off('.active');\n        $container.modal('close');\n\n        // reset ck and sidebar\n        indices.reset();\n        \n        //close ck tlb\n        $container.find('.tlb-button.active[data-role=cke-launcher]').click();\n        \n        //destroy and hide it\n        this.widget.$form.empty().hide();\n    });\n    \n    ModalFeedbackStateActive.prototype.initForm = function(){\n\n        var _widget = this.widget;\n\n        //build form:\n        _widget.$form.html(formTpl({\n            serial : _widget.element.getSerial(),\n            identifier : _widget.element.id()\n        }));\n\n        formElement.initWidget(_widget.$form);\n\n        //init data validation and binding\n        formElement.setChangeCallbacks(_widget.$form, _widget.element, {\n            identifier : function(fb, value){\n                fb.id(value);\n            }\n        });\n    };\n    \n    return ModalFeedbackStateActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/okButton', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<button class=\\\"btn-info small widget-ok\\\" data-edit=\\\"active\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"done\", options) : helperMissing.call(depth0, \"__\", \"done\", options)))\n    + \"</button>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/modalFeedback/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/modalFeedback/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/okButton',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function($, Widget, states, toolbarTpl, okButtonTpl, formElement, htmlEditor, contentHelper){\n\n    var ModalFeedbackWidget = Widget.clone();\n\n    ModalFeedbackWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n\n        this.buildEditor();\n\n        this.createOkButton();\n    };\n\n    ModalFeedbackWidget.buildContainer = function(){\n\n        this.$container = this.$original.addClass('widget-box');\n    };\n\n    ModalFeedbackWidget.createToolbar = function(){\n\n        this.$container.find('.modal-body').append(toolbarTpl({\n            serial : this.serial,\n            state : 'active'\n        }));\n\n        return this;\n    };\n\n    ModalFeedbackWidget.buildEditor = function(){\n\n        var _this = this,\n            $editableContainer = _this.$container.find('.modal-body'),\n            element = _this.element,\n            container = element.getBody();\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n            htmlEditor.buildEditor($editableContainer, {\n                change : contentHelper.getChangeCallback(container),\n                data : {\n                    container : container,\n                    widget : _this\n                }\n            });\n        }\n\n        formElement.initTitle(this.$original.find('.qti-title'), element);\n    };\n\n    ModalFeedbackWidget.createOkButton = function(){\n\n        var _this = this;\n\n        this.$container\n            .append($(okButtonTpl())\n            .on('click.qti-widget', function(e){\n                e.stopPropagation();\n                _this.changeState('sleep');\n            }));\n    };\n\n    return ModalFeedbackWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/ModalFeedback',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback',\n    'taoQtiItem/qtiCreator/widgets/static/modalFeedback/Widget'\n], function(_, Renderer, Widget){\n\n    var ModalFeedback = _.clone(Renderer);\n\n    ModalFeedback.render = function(modalFeedback, options){\n        \n        options = options || {};\n\n        //make content editable\n        var widget = Widget.build(\n            modalFeedback,\n            Renderer.getContainer(modalFeedback),\n            this.getOption('modalFeedbackOptionForm'),\n            options\n        );\n                \n        return widget;\n    };\n\n    return ModalFeedback;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/object', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<video \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" type=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" controls=\\\"controls\\\" preload=\\\"none\\\"></video>\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"width=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<audio \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" type=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"></audio>\";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<object \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" data=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" type=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.alt)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</object>\";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program13(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<iframe \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.id), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.alt)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</iframe>\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"qti-object-container\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" >\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.video), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.audio), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.object), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.html), {hash:{},inverse:self.noop,fn:self.program(13, program13, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiDefaultRenderer/widgets/Object',['jquery' ,'class', 'mediaElement'], function($, Class, MediaElementPlayer){\n\n    var QtiObject = Class.extend({\n        init : function(obj, context){\n            \n            this.playCounter = 0;\n            this.mediaType = obj.getMediaType();\n\n            if(this.mediaType === 'video' || this.mediaType === 'audio'){\n\n                var _this = this;\n\n                this.playerOptions = {\n                    loop : false,\n                    maxPlays : 0,\n                    autostart : false,\n                    pauseOtherPlayers : false,\n                    features : ['playpause', 'current', 'duration', 'progress', 'volume'],\n                    pluginPath : MediaElementPlayer.pluginPath,\n                    audioWidth : 300\n                };\n\n                //set height and width if defined properly\n                var width = parseInt(obj.attr('width'));\n                if(width > 10){\n                    if(this.mediaType === 'video'){\n                        this.playerOptions.videoWidth = width;\n                    }else{\n                        this.playerOptions.audioWidth = width;\n                    }\n                }\n\n                var height = parseInt(obj.attr('height'));\n                if(height > 10){\n                    if(this.mediaType === 'video'){\n                        this.playerOptions.videoHeight = height;\n                    }else{\n                        this.playerOptions.audioHeight = height;\n                    }\n                }\n\n                this.id = obj.getSerial();\n                this.media = null;\n\n                if(context){\n                    \n                    this.pluginPath = context.pluginPath || '';\n                    if(this.pluginPath){\n                        this.playerOptions.pluginPath = this.pluginPath;\n                    }\n                    if(typeof(context.playerOptions) === 'object'){\n\n                        this.playerOptions = $.extend(this.playerOptions, context.playerOptions);\n\n                        //overwrite the success callback:\n                        var successCallback = (typeof(context.playerOptions.success) === 'function') ? context.playerOptions.success : function(){\n                        };\n\n                        this.playerOptions.success = function(mediaElement, domObject){\n\n                            setTimeout(function(){\n\n                                var controlMaxPlays = function(){\n                                    if(_this.playerOptions.maxPlays && _this.playCounter >= _this.playerOptions.maxPlays){\n                                        //completely stop playback:\n                                        _this.stop();\n                                    }\n                                };\n\n                                mediaElement.addEventListener('ended', function(e){\n                                    _this.playCounter++;\n                                    controlMaxPlays();\n                                }, false);\n\n                                mediaElement.addEventListener('play', controlMaxPlays);\n                                mediaElement.addEventListener('pause', function(){\n                                });\n\n\n                                if(_this.playerOptions.autostart){\n                                    mediaElement.play();\n\n                                    //ie8 hack:\n                                    setTimeout(function(){\n                                        $(domObject).parent('div.mejs-mediaelement').siblings('div.mejs-layers').find('div.mejs-overlay-button').click().mousedown();\n                                    }, 1000);\n                                }\n\n                                successCallback(mediaElement, domObject);\n\n                            }, 300);//timeout to fix youtube auto start issue\n\n                        };\n\n                    }\n                }\n\n            }\n\n        },\n        render : function(){\n            if(this.mediaType === 'video' || this.mediaType === 'audio'){\n                this.media = new MediaElementPlayer('#' + this.id, this.playerOptions);\n            }\n        },\n        playCount : function(count){\n            if(isNaN(count)){\n                return this.playCounter;\n            }else{\n                this.playCounter = count;\n            }\n        },\n        pause : function(){\n            this.media.pause();\n        },\n        stop : function(){\n            this.pause();\n            //change play button\n            $('#' + this.id).parent('div.mejs-mediaelement').siblings('div.mejs-layers').find('div.mejs-overlay-button').hide();\n        }\n    });\n    \n    return QtiObject;\n});\n","define('taoQtiItem/qtiCommonRenderer/renderers/Object',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/object',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiDefaultRenderer/widgets/Object'\n], function(tpl, Helper, DefaultRendererObject){\n    return {\n        qtiClass : 'object',\n        template : tpl,\n        getContainer : Helper.getContainer,\n        render : function(obj){\n            var media = new DefaultRendererObject(obj);\n            media.render();\n        }\n    };\n});\n","define('taoQtiItem/qtiCreator/widgets/static/object/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Sleep'\n], function(stateFactory, SleepState){\n    \n    var ObjectStateSleep = stateFactory.create(SleepState, function(){\n        \n    }, function(){\n        \n    });\n    \n    return ObjectStateSleep;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/object', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"src\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the media.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the media.\", options)))\n    + \"</div>\\n    <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n    <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select media\", options) : helperMissing.call(depth0, \"__\", \"Select media\", options)))\n    + \"</button>\\n</div>\\n\\n<div data-role=\\\"advanced\\\" style=\\\"display:none\\\">\\n    <div class=\\\"panel\\\">\\n        <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Size and position\", options) : helperMissing.call(depth0, \"__\", \"Size and position\", options)))\n    + \"</h3>\\n\\n        <!--not available yet-->\\n        <!--    <label>\\n        <input name=\\\"responsive\\\" type=\\\"checkbox\\\" />\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Adapt to item size\", options) : helperMissing.call(depth0, \"__\", \"Adapt to item size\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        Recommended.\\n        Define whether the image size should automatically adapt to item size.\\n        If this option is active, the image width and height will be a percentage of its text container.\\n    </span>-->\\n\\n        <p class=\\\"img-resizer-slider\\\"></p>\\n\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height (optional)\", options) : helperMissing.call(depth0, \"__\", \"Height (optional)\", options)))\n    + \"</label>\\n        <span id=\\\"item-editor-font-size-manual-input\\\" class=\\\"item-editor-unit-input-box\\\">\\n            <input type=\\\"text\\\" name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty;\\\"/>\\n            <span class=\\\"unit-indicator\\\">px</span>\\n        </span>\\n    </div>\\n    <div class=\\\"panel\\\">\\n\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width (optional)\", options) : helperMissing.call(depth0, \"__\", \"Width (optional)\", options)))\n    + \"</label>\\n        <span id=\\\"item-editor-font-size-manual-input\\\" class=\\\"item-editor-unit-input-box\\\">\\n            <input type=\\\"text\\\" name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty;\\\"/>\\n            <span class=\\\"unit-indicator\\\">px</span>\\n        </span>\\n    </div>\\n    <div class=\\\"panel\\\">\\n\\n        <label for=\\\"align\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Alignment (optional)\", options) : helperMissing.call(depth0, \"__\", \"Alignment (optional)\", options)))\n    + \"</label>\\n        <select name=\\\"align\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n            <option value=\\\"default\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"default\", options) : helperMissing.call(depth0, \"__\", \"default\", options)))\n    + \"</option>\\n            <option value=\\\"left\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"left\", options) : helperMissing.call(depth0, \"__\", \"left\", options)))\n    + \"</option>\\n            <option value=\\\"right\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"right\", options) : helperMissing.call(depth0, \"__\", \"right\", options)))\n    + \"</option>\\n        </select>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/object/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/object',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'lodash',\n    'util/image',\n    'helpers',\n    'ui/resourcemgr',\n    'nouislider'\n], function(stateFactory, Active, formTpl, formElement, inlineHelper, _, imageUtil, helpers){\n\n    var ObjectStateActive = stateFactory.extend(Active, function(){\n        \n        this.widget.changeState('sleep');\n        return;\n        \n        this.initForm();\n        \n    }, function(){\n\n        this.widget.$form.empty();\n    });\n\n    var _containClass = function(allClassStr, className){\n        var regex = new RegExp('(?:^|\\\\s)' + className + '(?:\\\\s|$)', '');\n        return allClassStr && regex.test(allClassStr);\n    };\n\n    /**\n     * Greatly throttled callback function\n     * \n     * @param {jQuery} $media\n     * @param {string} propertyName\n     * @returns {function}\n     */\n    var _getImgSizeChangeCallback = function($media, propertyName){\n\n        var _setAttr = _.debounce(function(media, value, name){\n            media.attr(name, value);\n        }, 1000);\n\n        return _.throttle(function(media, value, name){\n\n            if(value){\n                $media[propertyName](value);\n                _setAttr(media, value, name);\n            }else{\n                $media[propertyName]('auto');\n                media.removeAttr(propertyName);\n            }\n            $media.trigger('contentChange.qti-widget');\n\n        }, 100);\n\n    };\n\n    ObjectStateActive.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $media = _widget.$original,\n            $form = _widget.$form,\n            media = _widget.element,\n            baseUrl = _widget.options.baseUrl,\n            responsive = true;\n\n        $form.html(formTpl({\n            baseUrl : baseUrl || '',\n            data : media.attr('data'),\n            height : media.attr('height'),\n            width : media.attr('width'),\n            responsive : responsive\n        }));\n\n        //init slider and set align value before ...\n        _initAdvanced(_widget);\n        _initSlider(_widget);\n        _initAlign(_widget);\n        _initUpload(_widget);\n\n        //... init standard ui widget\n        formElement.initWidget($form);\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, media, {\n            data : function(media, value){\n\n                media.attr('data', value);\n\n                if(!value.match(/^http/i)){\n                    value = baseUrl + '/' + encodeURIComponent(value);\n                }\n                $media.attr('data', value);\n\n                inlineHelper.togglePlaceholder(_widget);\n                _initSlider(_widget);\n                _initAdvanced(_widget);\n            },\n            alt : formElement.getAttributeChangeCallback(),\n            longdesc : formElement.getAttributeChangeCallback(),\n            align : function(media, value){\n                inlineHelper.positionFloat(_widget, value);\n            },\n            height : _getImgSizeChangeCallback($media, 'height'),\n            width : _getImgSizeChangeCallback($media, 'width')\n        });\n    };\n\n    var _initAlign = function(widget){\n\n        var align = 'default';\n\n        //init float positioning:\n        if(widget.element.hasClass('rgt')){\n            align = 'right';\n        }else if(widget.element.hasClass('lft')){\n            align = 'left';\n        }\n\n        inlineHelper.positionFloat(widget, align);\n        widget.$form.find('select[name=align]').val(align);\n    };\n\n    var _initSlider = function(widget){\n\n        var $container = widget.$container,\n            $form = widget.$form,\n            $slider = $form.find('.media-resizer-slider'),\n            media = widget.element,\n            $media = $container.find('media'),\n            $height = $form.find('[name=height]'),\n            $width = $form.find('[name=width]'),\n            original = {\n            h : media.attr('height') || $media.height(),\n            w : media.attr('width') || $media.width()\n        };\n\n        $slider.noUiSlider({\n            range : {\n                min : 10,\n                max : 200\n            },\n            start : 100\n        }, $slider.hasClass('noUi-target'));\n\n        $slider.off('slide').on('slide', _.throttle(function(e, value){\n\n            var ratio = (value / 100),\n                w = parseInt(ratio * original.w),\n                h = parseInt(ratio * original.h);\n\n            $width.val(w).change();\n            $height.val(h).change();\n        }, 100));\n    };\n\n    var _initAdvanced = function(widget){\n\n        var $form = widget.$form,\n            data = widget.element.attr('data');\n\n        if(data){\n            $form.find('[data-role=advanced]').show();\n        }else{\n            $form.find('[data-role=advanced]').hide();\n        }\n    };\n\n\n    var _initUpload = function(widget){\n\n        var $form = widget.$form,\n            options = widget.options,\n            $uploadTrigger = $form.find('[data-role=\"upload-trigger\"]'),\n            $data = $form.find('input[name=data]'),\n            $width = $form.find('input[name=width]'),\n            $height = $form.find('input[name=height]');\n\n        $uploadTrigger.on('click', function(){\n            $uploadTrigger.resourcemgr({\n                appendContainer : options.mediaManager.appendContainer,\n                mediaSources : options.mediaManager.mediaSources,\n                browseUrl : options.mediaManager.browseUrl,\n                uploadUrl : options.mediaManager.uploadUrl,\n                deleteUrl : options.mediaManager.deleteUrl,\n                downloadUrl : options.mediaManager.downloadUrl,\n                fileExistsUrl : options.mediaManager.fileExistsUrl,\n                params : {\n                    uri : options.uri,\n                    lang : options.lang,\n                    filters : 'audio/ogg,audio/mpeg,video/mpeg,video/mp4,video/ogg,video/ogv,video/webm'\n                },\n                pathParam : 'path',\n                select : function(e, files){\n                    var i, l = files.length;\n                    for(i = 0; i < l; i++){\n                        imageUtil.getSize(options.baseUrl + encodeURIComponent(files[i].file), function(size){\n                            if(size && size.width >= 0){\n                                $width.val(size.width).trigger('change');\n                                $height.val(size.height).trigger('change');\n                            }\n                            $data.val(files[i].file).trigger('change');\n                        });\n                        break;\n                    }\n                }\n            });\n        });\n\n    };\n\n    return ObjectStateActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/object/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/object/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/object/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<span class=\\\"message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\n  buffer += \"<span class=\\\"overlay\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.message), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/object/Widget',[\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/object/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n    'taoQtiItem/qtiCreator/widgets/static/helpers/inline',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay',\n    'i18n'\n], function(Widget, states, helper, toolbarTpl, inlineHelper, overlayTpl, __) {\n\n    var ObjectWidget = Widget.clone();\n\n    ObjectWidget.initCreator = function() {\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n        \n        inlineHelper.togglePlaceholder(this);\n        \n        this.notAvailable();\n    };\n    \n    ObjectWidget.getRequiredOptions = function(){\n        return ['baseUrl', 'uri', 'lang', 'mediaManager'];\n    };\n    \n    ObjectWidget.buildContainer = function(){\n        \n        helper.buildBlockContainer(this);\n        \n        return this;\n    };\n    \n    ObjectWidget.createToolbar = function() {\n        \n         helper.createToolbar(this, toolbarTpl);\n\n        return this;\n    };\n    \n    ObjectWidget.notAvailable = function(){\n        \n        \n        this.$container.append(overlayTpl({\n            message : __('Editing this element is not supported currently.')\n        }));\n        this.$container.attr('contenteditable', false);\n         this.$container.css({cursor:'default'});\n        this.$container.on('click, mousedown', function(e){\n            e.stopPropagation();\n        });\n    };\n    \n    return ObjectWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/Object',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/Object',\n    'taoQtiItem/qtiCreator/widgets/static/object/Widget'\n], function(_, Renderer, Widget){\n\n    var CreatorObject = _.clone(Renderer);\n\n    CreatorObject.render = function(object, options){\n        \n        //initial rendering:\n        Renderer.render(object);\n        \n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return Widget.build(\n            object,\n            Renderer.getContainer(object),\n            this.getOption('bodyElementOptionForm'),\n            options\n        );\n    };\n\n    return CreatorObject;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/infoControl', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"qti-infoControl\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  if (helper = helpers.markup) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.markup); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/helpers/PortableElement',['context', 'lodash', 'jquery', 'taoQtiItem/qtiItem/helper/util'], function(context, _, $, util){\n\n    /**\n     * Get the location of the document, useful to define a baseUrl for the required context\n     * @returns {String}\n     */\n    function getDocumentBaseUrl(){\n        return window.location.protocol + '//' + window.location.host + window.location.pathname.replace(/([^\\/]*)$/, '');\n    }\n\n    /**\n     * Get root url of available vendor specific libraries \n     * \n     * @returns {object} - an \"associative\" array object\n     */\n    function getSharedLibrariesPaths(){\n        var requireConfig = window.require.s.contexts._.config;\n        return getAbsolutelyDefinedPaths(requireConfig.baseUrl, requireConfig.paths);\n    }\n\n    /**\n     * Get lists of required OAT delivery engine libs\n     * \n     * @returns {Object}\n     */\n    function getCommonLibraries(){\n        return {\n            css : context.root_url + 'tao/views/js/lib/require-css/css',\n            mathJax : context.root_url + 'taoQtiItem/views/js/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full'\n        };\n    }\n\n    /**\n     * Replace all identified relative media urls by the absolute one\n     * \n     * @param {String} markupStr\n     * @param {Object} the renderer\n     * @returns {String}\n     */\n    function fixMarkupMediaSources(markupStr, renderer){\n\n        //load markup string into a div container\n        var $markup = $('<div>', {'class' : 'wrapper'}).html(markupStr);\n\n        //for each media source\n        $markup.find('img').each(function(){\n\n            var $img = $(this),\n                src = $img.attr('src'),\n                fullPath = renderer.getAbsoluteUrl(src);\n\n            $img.attr('src', fullPath);\n        });\n\n        return $markup.html();\n\n    }\n    \n    /**\n     * Transform relative paths in the \"paths\" argument object into absolute ones\n     * \n     * @param {String} baseUrl\n     * @param {Object} paths\n     * @returns {Object}\n     */\n    function getAbsolutelyDefinedPaths(baseUrl, paths){\n        var ret = {};\n        _.forIn(paths, function(path, alias){\n            //take only namespaced module\n            if(alias.indexOf('/')>0){\n                ret[alias] = baseUrl+path;\n            }\n        });\n        return ret;\n    }\n    \n    /**\n     * Get a local require js with typeIdentifier as specific context\n     * \n     * @param {String} typeIdentifier\n     * @param {String} baseUrl\n     * @param {Object} libs\n     * @returns {Function} - RequireJs instance\n     */\n    function getLocalRequire(typeIdentifier, baseUrl, libs, config){\n\n        config = config || {};\n\n        var runtimeLocation = config.runtimeLocation ? config.runtimeLocation : baseUrl + typeIdentifier;\n        var requireConfig = window.require.s.contexts._.config;\n        \n        if(config.useExtensionAlias){\n            var urlTokens = baseUrl.split('/');\n            var extension = urlTokens[0];\n            \n            var fullpath = requireConfig.baseUrl + requireConfig.paths[extension];\n\n            //update baseUrl:\n            baseUrl = baseUrl.replace(extension, fullpath);\n            \n            if(config.runtimeLocation){\n                runtimeLocation = config.runtimeLocation.replace(extension, fullpath);\n            }\n        }\n\n        libs = libs || {};\n        libs = _.defaults(libs, getCommonLibraries());\n        libs = _.defaults(libs, getSharedLibrariesPaths());\n\n        //add local namespace\n        libs[typeIdentifier] = runtimeLocation;//allow overwrite by config (in test)\n        \n        return window.require.config({\n            context : typeIdentifier, //use unique typeIdentifier as context name\n            baseUrl : baseUrl,\n            paths : libs || {},\n            shim : {\n                mathJax : {\n                    exports : \"MathJax\",\n                    init : function(){\n                        if(window.MathJax){\n                            MathJax.Hub.Config({showMathMenu : false, showMathMenuMSIE : false});//add mathJax config here for now before integrating the amd one\n                            MathJax.Hub.Startup.onload();\n                            return MathJax;\n                        }\n                    }\n                }\n            }\n        });\n    }\n\n    /**\n     * local require js caches\n     * \n     * @type Object\n     */\n    var _localRequires = {};\n\n    /**\n     * Get a cached local require js with typeIdentifier as specific context\n     * If it does not exsits, it creates one.\n     * Warning only the typeIdentifier and baseUrl will be used as key (not libs)\n     * This means that if you want to ensure that the baseUrl and libs are different,\n     * you may want to use getLocalRequire instead\n     * \n     * @param {String} typeIdentifier\n     * @param {String} baseUrl\n     * @param {Object} libs\n     * @returns {Function} - RequireJs instance\n     */\n    function getCachedLocalRequire(typeIdentifier, baseUrl, libs, config){\n\n        _localRequires[typeIdentifier] = _localRequires[typeIdentifier] || {};\n        if(!_localRequires[typeIdentifier][baseUrl]){\n            _localRequires[typeIdentifier][baseUrl] = getLocalRequire(typeIdentifier, baseUrl, libs, config);\n        }\n        return _localRequires[typeIdentifier][baseUrl];\n    }\n\n    return {\n        getSharedLibrariesPaths : getSharedLibrariesPaths,\n        getCommonLibraries : getCommonLibraries,\n        fixMarkupMediaSources : fixMarkupMediaSources,\n        getDocumentBaseUrl : getDocumentBaseUrl,\n        getLocalRequire : getLocalRequire,\n        getCachedLocalRequire : getCachedLocalRequire\n    };\n});\n","define('taoQtiItem/runtime/qtiInfoControlContext',[],function(){\n\n    //need a global reference to have picHooks shared in two different requirejs context (\"default\" and \"portableCustomInteraction\")\n    window._picHooks = window._picHooks || {};\n\n    /**\n     * Global object accessible by all PICs\n     *\n     * @type Object\n     */\n    var taoQtiInfoControlContext = {\n        /**\n         * register a info control (its runtime model) in global registery\n         * register a renderer\n         *\n         * @param {Object} picHook\n         * @returns {undefined}\n         */\n        register : function(picHook){\n            //@todo check picHook validity\n            window._picHooks[picHook.getTypeIdentifier()] = picHook;\n        },\n        /**\n         * notify when a info control is ready for test taker interaction\n         *\n         * @param {string} picInstance\n         * @fires custominteractionready\n         */\n        notifyReady : function(picInstance){\n            //@todo add pciInstance as event data and notify event to delivery engine\n        },\n        /**\n         * Get a cloned object representing the PIC model\n         *\n         * @param {string} typeIdentifier\n         * @returns {Object} clonedPciModel\n         */\n        createPciInstance : function(typeIdentifier){\n\n            if(window._picHooks[typeIdentifier]){\n\n                var instance = {},\n                    proto = window._picHooks[typeIdentifier];\n\n                for(var name in proto){\n                    if(typeof proto[name] === 'function'){\n                        //@todo : delegate function call for better performance ?\n                        instance[name] = proto[name];\n                    }else if(proto[name] !== null && typeof proto[name] === 'object'){\n                        //a plain object:\n                        instance[name] = proto[name].constructor();\n                    }else{\n                        //not an object (nor a function) : e.g. 0, 123, '123', null, undefined\n                        instance[name] = proto[name];\n                    }\n                }\n\n                return instance;\n\n            }else{\n                throw 'no portable info control hook found with the id ' + typeIdentifier;\n            }\n        }\n    };\n\n\n    return taoQtiInfoControlContext;\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/infoControl',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PortableElement',\n    'taoQtiItem/runtime/qtiInfoControlContext',\n    'taoQtiItem/qtiItem/helper/util',\n    'context'\n], function(tpl, Helper, PortableElement, qtiInfoControlContext, util, context){\n\n    /**\n     * Get the PIC instance associated to the infoControl object\n     * If none exists, create a new one based on the PIC typeIdentifier\n     * \n     * @param {Object} infoControl - the js object representing the infoControl\n     * @returns {Object} PIC instance\n     */\n    var _getPic = function(infoControl){\n\n        var typeIdentifier,\n            pic = infoControl.data('pic') || undefined;\n\n        if(!pic){\n\n            typeIdentifier = infoControl.typeIdentifier;\n            pic = qtiInfoControlContext.createPciInstance(typeIdentifier);\n\n            if(pic){\n\n                //binds the PIC instance to TAO infoControl object and vice versa\n                infoControl.data('pic', pic);\n                pic._taoInfoControl = infoControl;\n\n            }else{\n                throw 'no custom infoControl hook found for the type ' + typeIdentifier;\n            }\n        }\n\n        return pic;\n    };\n\n    /**\n     * Execute javascript codes to bring the infoControl to life.\n     * At this point, the html markup must already be ready in the document.\n     * \n     * It is done in 5 steps : \n     * 1. register required libs in the \"portableInfoControl\" context\n     * 2. require all required libs\n     * 3. create a pic instance based on the infoControl model\n     * 4. initialize the rendering \n     * 5. restore full state if applicable\n     * \n     * @param {Object} infoControl\n     */\n    var render = function(infoControl, options){\n\n        options = options || {};\n\n        var id = infoControl.attr('id'),\n            typeIdentifier = infoControl.typeIdentifier,\n            baseUrl = this.getOption('baseUrl') || PortableElement.getDocumentBaseUrl(), //require a base url !\n            config = infoControl.properties,\n            entryPoint = util.fullpath(infoControl.entryPoint, baseUrl),\n            $dom = Helper.getContainer(infoControl).children(),\n            state = {}; //@todo pass state and response to renderer here:\n            \n        //create a new require context to load the libs: \n        var localRequire = PortableElement.getCachedLocalRequire(typeIdentifier, baseUrl, {\n            qtiInfoControlContext : context.root_url + 'taoQtiItem/views/js/runtime/qtiInfoControlContext'\n        });\n        \n        localRequire([entryPoint], function(){\n\n            var pci = _getPic(infoControl);\n            if(pci){\n                //call pci initialize() to render the pci\n                pci.initialize(id, $dom[0], config);\n                //restore context (state + response)\n                pci.setSerializedState(state);\n            }\n\n        });\n    };\n    \n    /**\n     * Reverse operation performed by render()\n     * After this function is executed, only the inital naked markup remains \n     * Event listeners are removed and the state and the response are reset\n     * \n     * @param {Object} infoControl\n     */\n    var destroy = function(infoControl){\n\n        _getPic(infoControl).destroy();\n    };\n\n    /**\n     * Restore the state of the infoControl from the serializedState.\n     * \n     * @param {Object} infoControl\n     * @param {Object} serializedState - json format\n     */\n    var setSerializedState = function(infoControl, serializedState){\n\n        _getPic(infoControl).setSerializedState(serializedState);\n    };\n\n    /**\n     * Get the current state of the infoControl as a string.\n     * It enables saving the state for later usage.\n     * \n     * @param {Object} infoControl\n     * @returns {Object} json format\n     */\n    var getSerializedState = function(infoControl){\n\n        return _getPic(infoControl).getSerializedState();\n    };\n\n    return {\n        qtiClass : 'infoControl',\n        template : tpl,\n        getData : function(infoControl, data){\n            \n            //remove ns + fix media file path\n            var markup = data.markup;\n            markup = util.removeMarkupNamespaces(markup);\n            markup = PortableElement.fixMarkupMediaSources(markup, this);\n            data.markup = markup;\n            \n            return data;\n        },\n        render : render,\n        getContainer : Helper.getContainer,\n        destroy : destroy,\n        getSerializedState : getSerializedState,\n        setSerializedState : setSerializedState\n    };\n});\n","define('taoQtiItem/qtiCreator/renderers/PortableInfoControl',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl',\n    'taoQtiItem/qtiCreator/editor/infoControlRegistry',\n    'taoQtiItem/qtiCreator/helper/commonRenderer'\n], function(_, Renderer, icRegistry, commonRenderer){\n\n    var CreatorPortableInfoControl = _.clone(Renderer);\n\n    CreatorPortableInfoControl.render = function(infoControl, options){\n\n        //initial rendering:\n        Renderer.render.call(commonRenderer.get(), infoControl, {baseUrl : icRegistry.getBaseUrl(infoControl.typeIdentifier)});\n\n        var pciCreator = icRegistry.getCreator(infoControl.typeIdentifier),\n            Widget = pciCreator.getWidget();\n\n        return Widget.build(\n            infoControl,\n            Renderer.getContainer(infoControl),\n            this.getOption('bodyElementOptionForm'),\n            options\n            );\n    };\n\n    return CreatorPortableInfoControl;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/rubricBlock', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"grid-row qti-rubricBlock\\\" data-use=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.use)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"rubricBlock\\\">\\n    <div class=\\\"col-12\\\">\\n        <div class=\\\"qti-rubricBlock-body\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/RubricBlock',['tpl!taoQtiItem/qtiCommonRenderer/tpl/rubricBlock', 'taoQtiItem/qtiCommonRenderer/helpers/Helper'], function(tpl, Helper){\n    return {\n        qtiClass : 'rubricBlock',\n        getContainer : Helper.getContainer,\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/static/states/Sleep'], function(stateFactory, SleepState){\n    \n    var RubriBlockStateSleep = stateFactory.extend(SleepState, function(){}, function(){});\n    \n    return RubriBlockStateSleep;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/static/rubricBlock', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<!--currently only visible to the candidate-->\\n<div class=\\\"panel\\\">\\n    <label for=\\\"view\\\">Visible by</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"A rubric block identifies part of an assessmentItem's itemBody that represents instructions to one or more of the actors that view the item. Although rubric blocks are defined as simpleBlocks they must not contain interactions.\", options) : helperMissing.call(depth0, \"__\", \"A rubric block identifies part of an assessmentItem's itemBody that represents instructions to one or more of the actors that view the item. Although rubric blocks are defined as simpleBlocks they must not contain interactions.\", options)))\n    + \"\\n    </div>\\n    <select name=\\\"view\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n        <option value=\\\"author\\\">author</option>\\n        <option value=\\\"candidate\\\">candidate</option>\\n        <option value=\\\"proctor\\\">proctor</option>\\n        <option value=\\\"scorer\\\">scorer</option>\\n        <option value=\\\"testConstructor\\\">test constructor</option>\\n        <option value=\\\"tutor\\\">tutor</option>\\n    </select>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"use\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Description\", options) : helperMissing.call(depth0, \"__\", \"Description\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The purpose for which the rubric is intended to be used. As a reading passage for multiple items, or instructions for a particular section, for example.\", options) : helperMissing.call(depth0, \"__\", \"The purpose for which the rubric is intended to be used. As a reading passage for multiple items, or instructions for a particular section, for example.\", options)))\n    + \"</div>\\n    <input type=\\\"text\\\" name=\\\"use\\\" value=\\\"\";\n  if (helper = helpers.use) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.use); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/Active',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/static/rubricBlock',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement'\n], function(stateFactory, Active, htmlEditor, content, formTpl, formElement){\n\n    var RubricBlockStateActive = stateFactory.extend(Active, function(){\n\n        this.buildEditor();\n        this.initForm();\n\n    }, function(){\n\n        this.destroyEditor();\n        this.widget.$form.empty();\n    });\n\n    RubricBlockStateActive.prototype.buildEditor = function(){\n\n        var widget = this.widget,\n            $editableContainer = widget.$container,\n            container = widget.element.getBody();\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n\n            htmlEditor.buildEditor($editableContainer, {\n                change : content.getChangeCallback(container),\n                data : {\n                    widget : widget,\n                    container : container\n                }\n            });\n        }\n    };\n\n    RubricBlockStateActive.prototype.destroyEditor = function(){\n        //search and destroy the editor\n        htmlEditor.destroyEditor(this.widget.$container);\n    };\n\n    RubricBlockStateActive.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            view : interaction.attr('view'),\n            use : interaction.attr('use')\n        }));\n\n        formElement.initWidget($form);\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, interaction, {\n            view : formElement.getAttributeChangeCallback(),\n            use : formElement.getAttributeChangeCallback()\n        });\n\n    };\n\n    return RubricBlockStateActive;\n});\n","define('taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/static/rubricBlock/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/static/Widget',\n    'taoQtiItem/qtiCreator/widgets/static/rubricBlock/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/textBlock'\n], function($, Widget, states, toolbarTpl) {\n\n    var RubricBlockWidget = Widget.clone();\n\n    RubricBlockWidget.buildContainer = function() {\n        this.$container = this.$original.addClass('widget-box widget-rubricBlock');\n    };\n\n    RubricBlockWidget.initCreator = function() {\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n    };\n\n    RubricBlockWidget.createToolbar = function() {\n\n        var $tlb = $(toolbarTpl({\n                serial: this.serial,\n                state: 'active'\n            })),\n            _this = this;\n\n        this.$container.find('.qti-rubricBlock-body').append($tlb);\n\n        $tlb.find('[data-role=\"delete\"]').on('click.widget-box', function(e){\n            e.stopPropagation();//to prevent direct deleting;\n            _this.changeState('deleting');\n        });\n\n        return this;\n    };\n\n    return RubricBlockWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/RubricBlock',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/RubricBlock',\n    'taoQtiItem/qtiCreator/widgets/static/rubricBlock/Widget'\n], function(_, Renderer, Widget){\n\n    var CreatorRubricBlock = _.clone(Renderer);\n\n    CreatorRubricBlock.render = function(rubricBlock, options){\n        \n        return Widget.build(\n            rubricBlock,\n            Renderer.getContainer(rubricBlock),\n            this.getOption('bodyElementOptionForm'),\n            options\n        );\n    };\n\n    return CreatorRubricBlock;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gap', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"qti-choice qti-gap\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\r\\n    <span data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"gapmatch-content\\\">&nbsp;</span>\\r\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/choices/Gap',['tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gap', 'taoQtiItem/qtiCommonRenderer/helpers/Helper'], function(tpl, Helper){\n    return {\n        qtiClass : 'gap',\n        getContainer : Helper.getContainer,\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/Widget',['taoQtiItem/qtiCreator/widgets/Widget'], function(Widget){\n\n    var ChoiceWidget = Widget.clone();\n\n    ChoiceWidget.buildContainer = function(){\n        this.$container = this.$original;\n    };\n\n    ChoiceWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.interaction = this.element.getInteraction();\n        if(!this.interaction){\n            throw new Error('cannot find related interaction');\n        }\n\n        this.listenToInteractionStates();\n    };\n\n    ChoiceWidget.listenToInteractionStates = function(){\n\n        var _this = this;\n\n        //follow interaction state change\n        this.beforeStateInit(function(e, element, state){\n            \n            if(element.is('interaction')\n                && element.getSerial() === _this.interaction.getSerial()\n                && state.name !== _this.getCurrentState().name){\n                \n                switch(state.name){\n                    case 'answer':\n                    case 'sleep':\n                    case 'question':\n                        _this.changeState(state.name);\n                        break;\n                    case 'delete':\n                        _this.changeState('sleep');\n                        break;\n                }\n\n            }\n        });\n        \n        this.beforeStateExit(function(e, element, state){\n            if(element.is('interaction')\n                && element.getSerial() === _this.interaction.getSerial()\n                && state.name === 'choice'){\n                \n                _this.changeState('question');\n            }\n            \n        });\n    };\n\n    return ChoiceWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/Answer',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('answer', ['active'], function(){\n        throw new Error('state \"answer\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"answer\" prototype exit method must be implemented');\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/states/Choice',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('choice', ['question', 'active'], function(){\n        throw new Error('state \"choice\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"choice\" prototype exit method must be implemented');\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/states/Correct',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('correct', ['answer', 'active'], function(){\n        throw new Error('state \"correct\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"correct\" prototype exit method must be implemented');\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/states/Map',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('map', ['answer', 'active'], function(){\n        throw new Error('state \"map\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"map\" prototype exit method must be implemented');\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/states/Question',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('question', ['active'], function(){\n        throw new Error('state \"question\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"question\" prototype exit method must be implemented');\n    });\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/notifications/invalidInfoBox', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"feedback-error popup\\\" data-widget-component=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"icon-error\\\"></span>\\n    \";\n  stack1 = (helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"There is an incomplete element in your item : please click on it to complete it.\", options) : helperMissing.call(depth0, \"__\", \"There is an incomplete element in your item : please click on it to complete it.\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/Invalid',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/invalidInfoBox'\n], function($, stateFactory, invalidInfoBoxTpl){\n\n    return stateFactory.create('invalid', ['sleep'], function(){\n\n        this.widget.$container.addClass('invalid');\n\n        this.$messageBox = $(invalidInfoBoxTpl({\n            serial : this.widget.serial\n        }));\n         $('body').append(this.$messageBox);\n\n    },function(){\n\n        this.widget.$container.removeClass('invalid');\n        this.$messageBox.remove();\n    });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Active',\n    'taoQtiItem/qtiCreator/widgets/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/states/Deleting',\n    'taoQtiItem/qtiCreator/widgets/states/Inactive',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/states/Question',\n    'taoQtiItem/qtiCreator/widgets/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/states/Invalid'\n], function(factory){\n    return factory.createBundle(arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/states/Sleep'], function(stateFactory, Sleep){\n    \n    var ChoiceStateSleep = stateFactory.create(Sleep, function(){\n        \n    }, function(){\n        \n    });\n    \n    return ChoiceStateSleep;\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/states/Active',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/states/Active'], function(stateFactory, Active){\n    \n    var ChoiceStateActive = stateFactory.create(Active, function(){\n        \n    },function(){\n        \n    });\n\n    return ChoiceStateActive;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.content', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"display:none;\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"icon-pin\";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"icon-shuffle\";\n  }\n\n  buffer += \"<div class=\\\"mini-tlb\\\" data-edit=\\\"question\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <div class=\\\"rgt tlb-button\\\" title=\\\"Delete\\\" data-role=\\\"delete\\\">\\n        <span class=\\\"icon-bin\\\"></span>\\n    </div>\\n    <div class=\\\"rgt tlb-button\\\" data-role=\\\"shuffle-pin\\\" title=\\\"Shuffle/Pin\\\" style=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.interactionShuffle), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n        <span class=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.fixed), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"></span>\\n    </div>\\n    <div class=\\\"rgt tlb-button\\\" data-role=\\\"cke-launcher\\\" title=\\\"Formatting options\\\">\\n        <span class=\\\"icon-font\\\"></span>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/helpers/formElement',['jquery'], function($) {\n\n    var formElementHelper = {\n        initShufflePinToggle: function(widget) {\n\n            var $container = widget.$container,\n                choice = widget.element,\n                interaction = choice.getInteraction(),\n                $shuffleToggle = $container.find('[data-role=\"shuffle-pin\"]');\n\n            $shuffleToggle.off('mousedown').on('mousedown', function(e) {\n                e.stopPropagation();\n                var $icon = $(this).children();\n                if ($icon.length === 0) {\n                    $icon = $(this);\n                }\n                if ($icon.hasClass('icon-shuffle')) {\n                    $icon.removeClass('icon-shuffle').addClass('icon-pin');\n                    choice.attr('fixed', true);\n                } else {\n                    $icon.removeClass('icon-pin').addClass('icon-shuffle');\n                    choice.attr('fixed', false);\n                }\n            });\n\n            var _toggleVisibility = function(show) {\n                if (show) {\n                    $shuffleToggle.show();\n                } else {\n                    $shuffleToggle.hide();\n                }\n                $('.qti-item').trigger('toolbarchange', {\n                    callee: 'formElementHelper'\n                });\n            };\n\n            _toggleVisibility(interaction.attr('shuffle'));\n\n            //listen to interaction property change\n            widget.on('attributeChange', function(data) {\n                if (data.element.serial === interaction.serial && data.key === 'shuffle') {\n                    _toggleVisibility(data.value);\n                }\n            });\n        },\n        initDelete: function(widget) {\n\n            var $container = widget.$container;\n\n            $container.find('[data-role=\"delete\"]:not([data-html-editable] *)').on('mousedown', function(e) {\n                e.stopPropagation();\n                widget.changeState('deleting');\n            });\n        }\n    };\n\n    return formElementHelper;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.content',\n    'taoQtiItem/qtiCreator/widgets/choices/helpers/formElement'\n], function($, stateFactory, QuestionState, contentToolbarTpl, formElement){\n\n    var ChoiceStateQuestion = stateFactory.create(QuestionState, function(){\n\n        var _widget = this.widget;\n\n        //add some event listeners\n        _widget.$container.on('click.question', function(){\n            //show option form\n            _widget.changeState('choice');\n        }).on('mouseenter.question', function(){\n            //add listener to display proper hover style\n            $(this).addClass('hover');\n        }).on('mouseleave.question', function(){\n            $(this).removeClass('hover');\n        });\n\n        this.createToolbar().show();\n\n    }, function(){\n\n        //remove the question state toolbar properly\n        this.removeToolbar();\n\n        //!! very important, always unbind the event on exit!\n        this.widget.$container.off('.question');\n    });\n\n    ChoiceStateQuestion.prototype.createToolbar = function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            choice = _widget.element,\n            interaction,\n            $toolbar = $container.find('.mini-tlb').not('[data-html-editable] *');\n\n        if(!$toolbar.length){\n\n            interaction = choice.getInteraction();\n\n            //add mini toolbars\n            $toolbar = $(contentToolbarTpl({\n                choiceSerial : choice.getSerial(),\n                interactionSerial : interaction.getSerial(),\n                fixed : choice.attr('fixed'),\n                interactionShuffle : interaction.attr('shuffle')\n            }));\n\n            $container.append($toolbar);\n\n            //set toolbar button behaviour:\n            formElement.initShufflePinToggle(_widget);\n            formElement.initDelete(_widget);\n        }\n\n        return $toolbar;\n    };\n\n    ChoiceStateQuestion.prototype.removeToolbar = function(){\n\n        this.widget.$container.find('.mini-tlb[data-edit=question]').remove()\n    };\n\n    return ChoiceStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Answer'\n], function(stateFactory, Answer){\n\n    var ChoiceStateAnswer = stateFactory.create(Answer, function(){\n        \n    }, function(){\n        \n    });\n        \n    return ChoiceStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Active',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Question',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Answer'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Choice',\n    'taoQtiItem/qtiItem/core/Element'\n], function(stateFactory, Choice, Element){\n\n    var ChoiceStateChoice = stateFactory.create(Choice, function(){\n\n        var _widget = this.widget;\n\n        //focus on the selected choice\n\n        //listener to other siblings choice mode\n        _widget.beforeStateInit(function(e, element, state){\n            \n            if(Element.isA(element, 'choice') && _widget.interaction.getChoice(element.serial)){//@todo hottext an\n                \n                if(state.name === 'choice' && element.serial !== _widget.serial){\n                    _widget.changeState('question');\n                }else if(state.name === 'active'){\n                    _widget.changeState('question');\n                }\n                \n            }else if(element.is('img') || element.is('math') || element.is('object')){\n                \n                if(state.name === 'active'){\n                    _widget.changeState('question');\n                }\n                \n            }\n        }, 'otherActive');\n\n        //add options form\n        this.initForm();\n        this.widget.$form.show();\n\n    }, function(){\n\n        //destroy and hide the form\n        this.widget.$form.empty().hide();\n        \n        this.widget.offEvents('otherActive');\n    });\n\n    ChoiceStateChoice.prototype.initForm = function(){\n        stateFactory.throwMissingRequiredImplementationError('initForm');\n    };\n\n    return ChoiceStateChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gap', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-choice_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"required\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.required), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"required\", options) : helperMissing.call(depth0, \"__\", \"required\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.\", options) : helperMissing.call(depth0, \"__\", \"Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shape position\", options) : helperMissing.call(depth0, \"__\", \"Shape position\", options)))\n    + \"</h3>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"x\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Left\", options) : helperMissing.call(depth0, \"__\", \"Left\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"x\\\" value=\\\"\";\n  if (helper = helpers.x) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.x); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"y\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Top\", options) : helperMissing.call(depth0, \"__\", \"Top\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"y\\\" value=\\\"\";\n  if (helper = helpers.y) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.y); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/identifier',['lodash'], function(_){\n\n    var _updateChoiceIdentifierInResponse = function(response, oldId, newId){\n\n        \n        var escapedOldId = oldId.replace(/([.-])/g, '\\\\$1'),//escape spec characters allowed in the standard and that is meaningful in regex\n            regex = new RegExp('([^\\\\s]*\\\\s+|^)(' + escapedOldId + ')(\\\\s+[^\\\\s]*|$)');//prepare the regex to watch the oldId to be replaced\n\n        for(var i in response.correctResponse){\n            response.correctResponse[i] = response.correctResponse[i].replace(regex, '$1'+newId+'$3');\n        }\n\n        var mapEntries = {};\n        _.forIn(response.mapEntries, function(value, mapKey){\n            mapKey = mapKey.replace(regex, '$1'+newId+'$3');\n            mapEntries[mapKey] = value;\n        });\n        response.mapEntries = mapEntries;\n    };\n\n    var _updateChoiceIdentifier = _.throttle(function(choice, newId, response){\n\n        var oldId = choice.id();\n\n        if(oldId !== newId){\n            //need to update correct response and mapping values too !\n            _updateChoiceIdentifierInResponse(response, oldId, newId);\n\n            //finally, set the new identifier to the choice\n            choice.id(newId);\n\n            //update domi\n            var interaction = _get('interactionFromChoice', choice, function(){\n                return choice.getInteraction();\n            });\n                \n            //FIXME some choices may not have a renderer, so we catch the thrown exception silently\n            try{\n                choice.getContainer(null, choice.qtiClass+'.'+interaction.qtiClass).attr('data-identifier', choice.id());\n            } catch(ex){}\n\n        }\n    }, 500);\n\n\n    var _cache = [];\n\n    var _setCache = function(cache, element, value){\n        if(!_cache[cache]){\n            _cache[cache] = {};\n        }\n        _cache[cache][element.getSerial()] = value;\n    };\n\n    var _getCache = function(cache, element){\n        var serial = element.getSerial();\n        if(serial && _cache[cache] && _cache[cache][serial]){\n            return _cache[cache][serial];\n        }\n        return null;\n    };\n\n    var _get = function(cache, element, callback){\n        var ret = _getCache(cache, element);\n        if(!ret){\n            ret = callback.call(element);\n            _setCache(cache, element, ret);\n        }\n        return ret;\n    };\n\n    return {\n        updateChoiceIdentifier : function(choice, value){\n\n            var response = _get('responseFromChoice', choice, function(){\n                var interaction = _get('interactionFromChoice', choice, function(){\n                    return choice.getInteraction();\n                });\n                return interaction.getResponseDeclaration();\n            });\n\n            _updateChoiceIdentifier(choice, value, response);\n        },\n        updateResponseIdentifier : function(response, value){\n            throw 'to be implemented';\n        }\n    };\n\n});\n\n\n\n","define('taoQtiItem/qtiCreator/widgets/choices/gap/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gap',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'taoQtiItem/qtiItem/core/Element'\n], function(stateFactory, Choice, formTpl, formElement, identifierHelper, Element){\n\n    var GapStateChoice = stateFactory.extend(Choice, function(){\n        \n        var _widget = this.widget;\n        \n        //listener to changes of sibling choices' mode \n        _widget.beforeStateInit(function(e, element, state){\n            \n            if(Element.isA(element, 'gap') && _widget.interaction.getBody().getElement(element.serial)){\n                \n                if(state.name === 'choice' && element.serial !== _widget.serial){\n                    _widget.changeState('question');\n                }else if(state.name === 'active'){\n                    _widget.changeState('question');\n                }\n                \n            }\n        }, 'otherActive');\n        \n    }, function(){\n\n        //add remove the toolbar\n        this.widget.offEvents('otherActive');\n    });\n\n    GapStateChoice.prototype.initForm = function(){\n\n        var $form = this.widget.$form,\n            interaction = this.widget.element;\n\n        //build form:\n        $form.html(formTpl({\n            serial : interaction.getSerial(),\n            identifier : interaction.id(),\n            required : !!interaction.attr('required')\n        }));\n\n        formElement.initWidget($form);\n\n        //init data validation and binding\n        formElement.setChangeCallbacks($form, interaction, {\n            identifier : identifierHelper.updateChoiceIdentifier,\n            required : formElement.getAttributeChangeCallback()\n        });\n    };\n\n    return GapStateChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"rgt tlb-button\\\" title=\\\"Delete\\\" data-role=\\\"delete\\\">\\n        <span class=\\\"icon-bin\\\"></span>\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/gap/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap',\n    'taoQtiItem/qtiCreator/widgets/choices/helpers/formElement'\n], function($, stateFactory, QuestionState, gapTpl, formElement){\n\n    var GapStateQuestion = stateFactory.extend(QuestionState);\n\n    GapStateQuestion.prototype.createToolbar = function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            gap = _widget.element,\n            $toolbar = $container.find('.mini-tlb').not('[data-html-editable] *');\n\n        if(!$toolbar.length){\n\n            //add mini toolbars\n            $toolbar = $(gapTpl({\n                serial : gap.getSerial(),\n                state : 'question'\n            }));\n\n            $container.append($toolbar);\n\n            formElement.initDelete(_widget);\n        }\n\n        return $toolbar;\n    };\n\n    return GapStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/gap/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/gap/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/choices/gap/states/Question'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/gap/Widget',[\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/gap/states/states'\n], function(Widget, states){\n\n    var GapWidget = Widget.clone();\n\n    GapWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n        \n    };\n    \n    GapWidget.buildContainer = function(){\n        this.$container = this.$original.addClass('widget-box');\n        this.$container.attr('contenteditable', false);\n    };\n    \n    return GapWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/choices/Gap',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/Gap',\n    'taoQtiItem/qtiCreator/widgets/choices/gap/Widget'\n], function(_, Gap, GapWidget){\n    \n    var CreatorGap = _.clone(Gap);\n\n    CreatorGap.render = function(choice, options){\n        \n        return GapWidget.build(\n            choice,\n            Gap.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGap;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<li class=\\\"qti-choice\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</li>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/choices/GapText',['tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice', 'taoQtiItem/qtiCommonRenderer/helpers/Helper'], function(tpl, Helper){\n    return {\n        qtiClass : 'gapText',\n        getContainer : Helper.getContainer,\n        template : tpl\n    };\n}); \n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/simpleAssociableChoice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-choice_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <h3 class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of uses\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of uses\", options)))\n    + \"\\n    </h3>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices this choice may be associated with. If matchMax is 0 there is no restriction.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices this choice may be associated with. If matchMax is 0 there is no restriction.\", options)))\n    + \"\\n    </span>\\n\\n    <!--not supported yet-->\\n    <div style=\\\"display:none;\\\">\\n        <label for=\\\"matchMin\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Min\", options) : helperMissing.call(depth0, \"__\", \"Min\", options)))\n    + \"</label>\\n        <input name=\\\"matchMin\\\" value=\\\"\";\n  if (helper = helpers.matchMin) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMin); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div>\\n        <label for=\\\"matchMax\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Max\", options) : helperMissing.call(depth0, \"__\", \"Max\", options)))\n    + \"</label>\\n        <input name=\\\"matchMax\\\" value=\\\"\";\n  if (helper = helpers.matchMax) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMax); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/simpleAssociableChoice',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function(stateFactory, Choice, formTpl, formElement, identifierHelper, htmlEditor, contentHelper){\n\n    var SimpleAssociableChoiceStateChoice = stateFactory.extend(Choice, function(){\n        \n        this.buildEditor();\n        \n    }, function(){\n        \n        this.destroyEditor();\n    });\n    \n    SimpleAssociableChoiceStateChoice.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            choice = _widget.element;\n\n        //build form:\n        $form.html(formTpl({\n            serial : choice.getSerial(),\n            identifier : choice.id(),\n            matchMin : choice.attr('matchMin'),\n            matchMax : choice.attr('matchMax')\n        }));\n\n        formElement.initWidget($form);\n\n        //init data validation and binding\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'matchMin', 'matchMax');\n        callbacks.identifier = identifierHelper.updateChoiceIdentifier;\n        formElement.setChangeCallbacks($form, choice, callbacks);\n    };\n    \n    SimpleAssociableChoiceStateChoice.prototype.buildEditor = function(){\n        \n        var _widget = this.widget,\n            container = _widget.element.getBody(),\n            $editableContainer = _widget.$container;\n\n        //@todo set them in the tpl\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n            \n            htmlEditor.buildEditor($editableContainer, {\n                change : contentHelper.getChangeCallback(container),\n                data : {\n                    container : container,\n                    widget : _widget\n                }\n            });\n        }\n    };\n\n    SimpleAssociableChoiceStateChoice.prototype.destroyEditor = function(){\n        \n        //search and destroy the editor\n        htmlEditor.destroyEditor(this.widget.$container);\n    };\n    \n    return SimpleAssociableChoiceStateChoice;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/gapText/states/Choice',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice',\n    'taoQtiItem/qtiItem/core/Element',\n    'lodash'\n], function($, stateFactory, Choice, SimpleAssociableChoice, Element, _){\n\n    var GapTextStateChoice = stateFactory.extend(Choice, function(){\n\n        var _widget = this.widget;\n\n        //listener to other siblings choice mode\n        _widget.beforeStateInit(function(e, element, state){\n\n            if(Element.isA(element, 'choice') && _widget.interaction.getBody().getElement(element.serial)){//@todo hottext an\n\n                if(state.name === 'choice' && element.serial !== _widget.serial){\n                    _widget.changeState('question');\n                }\n\n            }\n\n        }, 'otherActive');\n\n        this.buildEditor();\n\n    }, function(){\n\n        this.destroyEditor();\n\n        this.widget.offEvents('otherActive');\n    });\n\n    GapTextStateChoice.prototype.initForm = function(){\n        SimpleAssociableChoice.prototype.initForm.call(this);\n    };\n\n    GapTextStateChoice.prototype.buildEditor = function(){\n\n        var _widget = this.widget,\n            $editableContainer = _widget.$container,\n            $tlb = $editableContainer.find('.mini-tlb'),\n            $editable;\n\n        $tlb.detach();\n\n        $editableContainer.wrapInner($('<div>', {'class' : 'inner-wrapper'}));\n        $editableContainer.append($tlb);\n        $editable = $editableContainer.find('.inner-wrapper');\n\n        $editable.attr('contentEditable', true);\n\n        //focus then reset content to have the cursor at the end:\n        _focus($editable);\n\n        $editable.on('keyup.qti-widget', _.throttle(function(){\n\n            //update model\n            _widget.element.val($(this).text());\n\n        }, 200)).on('keypress.qti-widget', function(e){\n\n            if(e.which === 13){\n                e.preventDefault();\n                $(this).blur();\n                _widget.changeState('question');\n            }\n\n        });\n    };\n\n    GapTextStateChoice.prototype.destroyEditor = function(){\n\n        var $container = this.widget.$container;\n\n        $container.find('td').removeAttr('contentEditable');\n        $container.children('td:first').off('keyup.qti-widget');\n    };\n\n    var _focus = function($el){\n\n        var range, sel, el = $el[0];\n\n        el.focus();\n        if(window.getSelection !== undefined && document.createRange !== undefined){\n\n            range = document.createRange();\n            range.selectNodeContents(el);\n            range.collapse(false);\n\n            sel = window.getSelection();\n            sel.removeAllRanges();\n            sel.addRange(range);\n\n        }else if(document.body.createTextRange !== undefined){\n\n            range = document.body.createTextRange();\n            range.moveToElementText(el);\n            range.collapse(false);\n            range.select();\n        }\n\n    };\n    return GapTextStateChoice;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/gapText/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/gapText/states/Choice'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/gapText/Widget',[\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/gapText/states/states'\n], function(Widget, states){\n\n    var GapTextWidget = Widget.clone();\n\n    GapTextWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n        \n    };\n\n    return GapTextWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/choices/GapText',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/GapText',\n    'taoQtiItem/qtiCreator/widgets/choices/gapText/Widget'\n], function(_, GapText, GapTextWidget){\n    \n    var CreatorGapText = _.clone(GapText);\n\n    CreatorGapText.render = function(choice, options){\n        \n        return GapTextWidget.build(\n            choice,\n            GapText.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGapText;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/hottext', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"qti-choice qti-hottext hottext\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\r\\n    <label class=\\\"hottext-checkmark\\\">\\r\\n        <input type=\\\"checkbox\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\r\\n        <span class=\\\"icon-checkbox small\\\"></span>\\r\\n    </label>\\r\\n    <span class=\\\"hottext-content\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span>\\r\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext',['tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/hottext', 'taoQtiItem/qtiCommonRenderer/helpers/Helper'], function(tpl, Helper){\n    return {\n        qtiClass : 'hottext',\n        getContainer : Helper.getContainer,\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/choice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Identifier\", options) : helperMissing.call(depth0, \"__\", \"Identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-choice_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/choice',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content'\n], function(stateFactory, Choice, formTpl, formElement, identifierHelper, htmlEditor, contentHelper){\n\n    var SimpleChoiceStateChoice = stateFactory.extend(Choice, function(){\n        \n        this.buildEditor();\n        \n    }, function(){\n        \n        this.destroyEditor();\n    });\n\n    SimpleChoiceStateChoice.prototype.initForm = function(){\n\n        var _widget = this.widget;\n\n        //build form:\n        _widget.$form.html(formTpl({\n            serial : _widget.element.getSerial(),\n            identifier : _widget.element.id()\n        }));\n\n        formElement.initWidget(_widget.$form);\n\n        //init data validation and binding\n        formElement.setChangeCallbacks(_widget.$form, _widget.element, {\n            identifier : identifierHelper.updateChoiceIdentifier\n        });\n    };\n    \n    SimpleChoiceStateChoice.prototype.buildEditor = function(){\n\n        var _widget = this.widget,\n            container = _widget.element.getBody(),\n            $editableContainer = _widget.$container;\n\n        //@todo set them in the tpl\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n            \n            htmlEditor.buildEditor($editableContainer, {\n                change : contentHelper.getChangeCallback(container),\n                data : {\n                    container : container,\n                    widget : _widget\n                }\n            });\n        }\n    };\n\n    SimpleChoiceStateChoice.prototype.destroyEditor = function(){\n        \n        //search and destroy the editor\n        htmlEditor.destroyEditor(this.widget.$container);\n    };\n\n    return SimpleChoiceStateChoice;\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/hottext/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/Choice'\n], function(stateFactory, Choice, SimpleChoice){\n\n    var HottextStateChoice = stateFactory.extend(Choice);\n\n    HottextStateChoice.prototype.initForm = function(){\n        SimpleChoice.prototype.initForm.call(this);\n    };\n\n    return HottextStateChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"tlb-button\\\" title=\\\"Restore\\\" data-role=\\\"restore\\\">\\n        <span class=\\\"icon-undo\\\"></span>\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/hottext/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext',\n    'taoQtiItem/qtiCreator/widgets/choices/helpers/formElement'\n], function($, stateFactory, QuestionState, gapTpl, formElement){\n\n    var HottextStateQuestion = stateFactory.extend(QuestionState);\n\n    HottextStateQuestion.prototype.createToolbar = function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            hottext = _widget.element,\n            $toolbar = $container.find('.mini-tlb').not('[data-html-editable] *');\n\n        if(!$toolbar.length){\n\n            //add mini toolbars\n            $toolbar = $(gapTpl({\n                serial : hottext.getSerial(),\n                state : 'question'\n            }));\n\n            $container.append($toolbar);\n\n            //init delete:\n            $toolbar.find('[data-role=restore]').on('mousedown.question', function(){\n                $container.replaceWith(hottext.body());\n                _widget.destroy();\n                hottext.remove();\n            });\n        }\n\n        return $toolbar;\n    };\n\n    return HottextStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/hottext/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/hottext/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/choices/hottext/states/Question'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/hottext/Widget',[\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/hottext/states/states'\n], function(Widget, states){\n\n    var HottextWidget = Widget.clone();\n\n    HottextWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n        \n    };\n    \n    HottextWidget.buildContainer = function(){\n        this.$container = this.$original.addClass('widget-box');\n        this.$container.attr('contenteditable', false);\n        this.$original.find('.hottext-checkmark > input').prop('disabled', 'disabled');\n    };\n    \n    return HottextWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/choices/Hottext',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext',\n    'taoQtiItem/qtiCreator/widgets/choices/hottext/Widget'\n], function(_, Hottext, HottextWidget){\n    \n    var CreatorHottext = _.clone(Hottext);\n\n    CreatorHottext.render = function(choice, options){\n        \n        return HottextWidget.build(\n            choice,\n            Hottext.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorHottext;\n});\n","//not used;\ndefine(\"taoQtiItem/qtiCreator/renderers/choices/InlineChoice\", function(){});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction',['tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice', 'taoQtiItem/qtiCommonRenderer/helpers/Helper'], function(tpl, Helper){\n    return {\n        qtiClass : 'simpleAssociableChoice.associateInteraction',\n        getContainer : Helper.getContainer,\n        template : tpl\n    };\n});\n"," define('taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.content',\n    'taoQtiItem/qtiCreator/widgets/choices/helpers/formElement'\n], function($, stateFactory, QuestionState, contentToolbarTpl, formElement){\n\n    var SimpleAssociableChoiceStateQuestion = stateFactory.extend(QuestionState, function(){\n\n    }, function(){\n\n    });\n\n    SimpleAssociableChoiceStateQuestion.prototype.createToolbar = function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            choice = _widget.element,\n            interaction,\n            $toolbar = $container.find('.mini-tlb').not('[data-html-editable] *');\n\n        if(!$toolbar.length){\n\n            interaction = choice.getInteraction();\n\n            //add mini toolbars\n            $toolbar = $(contentToolbarTpl({\n                choiceSerial : choice.getSerial(),\n                interactionSerial : interaction.getSerial(),\n                fixed : choice.attr('fixed'),\n                interactionShuffle : interaction.attr('shuffle')\n            }));\n\n            $container.children('.inner-wrapper').append($toolbar);\n\n            //set toolbar button behaviour:\n            formElement.initShufflePinToggle(_widget);\n            formElement.initDelete(_widget);\n        }\n\n        return $toolbar;\n    };\n\n    return SimpleAssociableChoiceStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Question',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/Choice'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/Widget',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/states/states'\n], function($, Widget, states){\n\n    var SimpleAssociableChoiceWidget = Widget.clone();\n\n    SimpleAssociableChoiceWidget.initCreator = function(){\n\n        this.registerStates(states);\n\n        Widget.initCreator.call(this);\n\n        //matchInteraction:\n        //need to wrap the container + tlb around a div because in mathInteraction, tlb cannot be position absolutely in <th>\n        this.$container.wrapInner($('<div>', {'class' : 'inner-wrapper'}));\n\n        //prevent checkbox from being selectable\n        this.$container.closest('table.matrix').find('input[type=checkbox]:enabled').prop('disabled', 'disabled');\n    };\n\n    return SimpleAssociableChoiceWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.AssociateInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/Widget'\n], function(_, SimpleAssociableChoice, SimpleChoiceWidget){\n    \n    var CreatorSimpleChoice = _.clone(SimpleAssociableChoice);\n\n    CreatorSimpleChoice.render = function(choice, options){\n        \n        return SimpleChoiceWidget.build(\n            choice,\n            SimpleAssociableChoice.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorSimpleChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleAssociableChoice.matchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<th class=\\\"qti-choice qti-associableChoice qti-simpleAssociableChoice\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</th>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction',['tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleAssociableChoice.matchInteraction', 'taoQtiItem/qtiCommonRenderer/helpers/Helper'], function(tpl, Helper){\n    return {\n        qtiClass : 'simpleAssociableChoice.matchInteraction',\n        getContainer : Helper.getContainer,\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiCreator/renderers/choices/SimpleAssociableChoice.MatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleAssociableChoice/Widget'\n], function(_, SimpleAssociableChoice, SimpleAssociableChoiceWidget){\n    \n    var CreatorSimpleAssociableChoice = _.clone(SimpleAssociableChoice);\n\n    CreatorSimpleAssociableChoice.render = function(choice, options){\n        \n        return SimpleAssociableChoiceWidget.build(\n            choice,\n            SimpleAssociableChoice.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorSimpleAssociableChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleChoice.choiceInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <input type=\\\"radio\\\" name=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <span class=\\\"icon-radio\\\"></span>\\n            \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <input type=\\\"checkbox\\\" name=\\\"response-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.interaction)),stack1 == null || stack1 === false ? stack1 : stack1.serial)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" value=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <span class=\\\"icon-checkbox\\\"></span>\\n            \";\n  return buffer;\n  }\n\n  buffer += \"<li class=\\\"qti-choice qti-simpleChoice\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <div class=\\\"pseudo-label-box\\\">\\n        <label class=\\\"real-label\\\">\\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.unique), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </label>\\n        <div class=\\\"label-box\\\">\\n            <div class=\\\"label-content clear\\\" contenteditable=\\\"false\\\">\\n                \";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            </div>\\n        </div>\\n    </div>\\n</li>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction',['tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleChoice.choiceInteraction', 'taoQtiItem/qtiCommonRenderer/helpers/Helper'], function(tpl, Helper){\n    return {\n        qtiClass : 'simpleChoice.choiceInteraction',\n        getContainer : Helper.getContainer,\n        getData:function(choice, data){\n            data.unique = (parseInt(data.interaction.attributes.maxChoices) === 1);\n            return data;\n        },\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/Choice'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/simpleChoice/Widget',[\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleChoice/states/states'\n], function(Widget, states){\n\n    var SimpleChoiceWidget = Widget.clone();\n\n    SimpleChoiceWidget.initCreator = function(){\n\n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n\n        //choiceInteraction:\n        //prevent checkbox/radio from being selectable\n        var $realLabel = this.$container.find('.real-label');\n        $realLabel.children('input').attr('disabled', 'disabled');\n    };\n\n    return SimpleChoiceWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.ChoiceInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleChoice/Widget'\n], function(_, SimpleChoice, SimpleChoiceWidget){\n    \n    var CreatorSimpleChoice = _.clone(SimpleChoice);\n\n    CreatorSimpleChoice.render = function(choice, options){\n        \n        SimpleChoiceWidget.build(\n            choice,\n            SimpleChoice.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorSimpleChoice;\n});\n","define('taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction',['tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice', 'taoQtiItem/qtiCommonRenderer/helpers/Helper'], function(tpl, Helper){\n    return {\n        qtiClass : 'simpleChoice.orderInteraction',\n        getContainer : Helper.getContainer,\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiCreator/renderers/choices/SimpleChoice.OrderInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction',\n    'taoQtiItem/qtiCreator/widgets/choices/simpleChoice/Widget'\n], function(_, SimpleChoice, SimpleChoiceWidget){\n    \n    var CreatorSimpleChoice = _.clone(SimpleChoice);\n\n    CreatorSimpleChoice.render = function(choice, options){\n        \n        return SimpleChoiceWidget.build(\n            choice,\n            SimpleChoice.getContainer(choice),\n            this.getOption('choiceOptionForm'),\n            options\n        );\n    };\n\n    return CreatorSimpleChoice;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-associateInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"associateInteraction\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <ul class=\\\"choice-area clearfix  none block-listing solid horizontal source\\\" data-eyecatcher=\\\">li\\\">\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </ul>\\n    <ul class=\\\"result-area none target clearfix\\\">\\n    </ul>\\n    <div class=\\\"notification-container\\\"></div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction.pair', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"incomplete-pair\";\n  }\n\n  buffer += \"<li class=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.empty), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n    <div class=\\\"target lft\\\"></div>\\n    <div class=\\\"target rgt\\\"></div>\\n</li>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/helpers/PciPrettyPrint',['lodash'], function(_){\n\n    var _formatters = {\n        boolean : function(value){\n            return value ? 'true' : 'false';\n        },\n        integer : function(value){\n            return value;\n        },\n        float : function(value){\n            return value;\n        },\n        string : function(value){\n            return (value === '') ? 'NULL' : ('\"' + value + '\"');\n        },\n        point : function(value){\n            return '[' + value[0] + ', ' + value[1] + ']';\n        },\n        pair : function(value){\n            return '[' + value[0] + ', ' + value[1] + ']';\n        },\n        directedPair : function(value){\n            return '[' + value[0] + ', ' + value[1] + ']';\n        },\n        duration : function(value){\n            return value;\n        },\n        file : function(value){\n            return 'binary data';\n        },\n        uri : function(value){\n            return value;\n        },\n        intOrIdentifier : function(value){\n            return value;\n        },\n        identifier : function(value){\n            return value;\n        }\n    }\n\n    var _prettyPrintBase = function(value, withType){\n\n        var print = '',\n            base = value.base;\n\n        withType = (typeof withType !== 'undefined') ? withType : true;\n\n        if(base){\n\n            _.forIn(_formatters, function(formatter, baseType){\n                if(base[baseType] !== undefined){\n\n                    print += (withType) ? '(' + baseType + ') ' : '';\n                    print += formatter(base[baseType]);\n\n                    return false;\n                }\n            });\n\n            return print;\n        }\n\n    };\n\n    var _prettyPrintList = function(value, withType){\n\n        var print = '',\n            list = value.list;\n\n        withType = (typeof withType !== 'undefined') ? withType : true;\n\n        if(list){\n\n            _.forIn(_formatters, function(formatter, baseType){\n                if(list[baseType] !== undefined){\n\n                    print += (withType) ? '(' + baseType + ') ' : '';\n\n                    print += '[';\n\n                    _.each(list[baseType], function(value){\n                        print += formatter(value) + ', ';\n                    });\n\n                    if(_.size(list[baseType])){\n                        print = print.substring(0, print.length - 2);\n                    }\n\n                    print += ']';\n\n                    return false;\n                }\n            });\n\n            return print;\n        }\n    };\n\n    return {\n        printBase : _prettyPrintBase,\n        printList : _prettyPrintList\n    }\n});\n","define('taoQtiItem/qtiCommonRenderer/helpers/PciResponse',['lodash', 'taoQtiItem/qtiCommonRenderer/helpers/PciPrettyPrint'], function(_, pciPrettyPrint){\n\n    var _qtiModelPciResponseCardinalities = {\n        single : 'base',\n        multiple : 'list',\n        ordered : 'list',\n        record : 'record'\n    };\n\n    return {\n        \n        /**\n         * Parse a response variable formatted according to IMS PCI: http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n         * \n         * @see serialize\n         * @param {Object} response\n         * @param {Object} interaction\n         * @returns {Array}\n         */\n        unserialize : function(response, interaction){\n            \n            var ret = [],\n                responseDeclaration = interaction.getResponseDeclaration(),\n                baseType = responseDeclaration.attr('baseType'),\n                cardinality = responseDeclaration.attr('cardinality'),\n                mappedCardinality;\n            \n            if(_qtiModelPciResponseCardinalities[cardinality]){\n                mappedCardinality = _qtiModelPciResponseCardinalities[cardinality];\n                var responseValues = response[mappedCardinality];\n                \n                if(responseValues === null){\n                    ret = [];\n                }else if(_.isObject(responseValues)){\n                    if(responseValues[baseType] !== undefined){\n                        ret = responseValues[baseType];\n                        ret = _.isArray(ret) ? ret : [ret];\n                    }else{\n                        throw 'invalid response baseType';\n                    }\n                }else{\n                    throw 'invalid response cardinality, expected '+cardinality+' ('+mappedCardinality+')';\n                }\n            }else{\n                throw 'unknown cardinality in the responseDeclaration of the interaction';\n            }\n            \n            return ret;\n        },\n        /**\n         * Serialize the input response array into the format to be send to result server according to IMS PCI recommendation :\n         * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n         * With the only exception for empty response, which is represented by a javascript \"null\" value\n         * \n         * @see http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n         * @param {Array} responseValues\n         * @param {Object} interaction\n         * @returns {Object|null}\n         */\n        serialize : function(responseValues, interaction){\n            \n            if(!_.isArray(responseValues)){\n                throw 'invalid argument : responseValues must be an Array';\n            }\n\n            var response = {},\n                responseDeclaration = interaction.getResponseDeclaration(),\n                baseType = responseDeclaration.attr('baseType'),\n                cardinality = responseDeclaration.attr('cardinality'),\n                mappedCardinality;\n\n            if(_qtiModelPciResponseCardinalities[cardinality]){\n                mappedCardinality = _qtiModelPciResponseCardinalities[cardinality];\n                if(mappedCardinality === 'base'){\n                    if(responseValues.length === 0){\n                        //return empty response:\n                        response.base = null;\n                    }else{\n                        response.base = {};\n                        response.base[baseType] = responseValues[0];\n                    }\n                }else{\n                    response[mappedCardinality] = {};\n                    response[mappedCardinality][baseType] = responseValues;\n                }\n            }else{\n                throw 'unknown cardinality in the responseDeclaration of the interaction';\n            }\n\n            return response;\n        },\n        isEmpty : function(response){\n            return (\n                response === null\n                || _.isEmpty(response)\n                || response.base === null\n                || _.isArray(response.list) && _.isEmpty(response.list)\n                || _.isArray(response.record) && _.isEmpty(response.record)\n            );\n        },\n        \n        /**\n         * Print a PCI JSON response into a human-readable string.\n         * \n         * @param {Object} response A response in PCI JSON representation.\n         * @returns {String} A human-readable version of the PCI JSON representation.\n         */\n        prettyPrint: function(response) {\n            var print = '';\n            \n            if (typeof response.base !== 'undefined') {\n                // -- BaseType.\n                print += pciPrettyPrint.printBase(response, true);\n            }\n            else if (typeof response.list !== 'undefined') {\n                // -- ListType\n                print += pciPrettyPrint.printList(response, true);\n            }\n            else if (typeof response.record !== 'undefined') {\n                // @todo pretty print of records.\n            }\n            else {\n                throw 'Not a valid PCI JSON Response';\n            }\n            \n            return print;\n        } \n    };\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction',[\n    'lodash',\n    'i18n',\n    'jquery',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction.pair',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCreator/helper/adaptSize',\n    'eyecatcher'\n], function(_, __, $, tpl, pairTpl, Helper, pciResponse, adaptSize, eyecatcher){\n\n    /**\n     * Global variable to count number of choice usages:\n     * @type type\n     */\n    var _choiceUsages = {};\n\n    var setChoice = function(interaction, $choice, $target){\n\n        var choiceSerial = $choice.data('serial'),\n            choice = interaction.getChoice(choiceSerial);\n\n        if(!choiceSerial){\n            throw 'empty choice serial';\n        }\n\n        if(!_choiceUsages[choiceSerial]){\n            _choiceUsages[choiceSerial] = 0;\n        }\n        _choiceUsages[choiceSerial]++;\n\n        var _setChoice = function(){\n\n            $target\n                .data('serial', choiceSerial)\n                .html($choice.html())\n                .addClass('filled');\n\n            if(!interaction.responseMappingMode &&\n                choice.attr('matchMax') &&\n                _choiceUsages[choiceSerial] >= choice.attr('matchMax')){\n\n                $choice.addClass('deactivated');\n            }\n\n\n        };\n\n        if($target.siblings('div').hasClass('filled')){\n\n            var $resultArea = Helper.getContainer(interaction).find('.result-area'),\n                $pair = $target.parent(),\n                thisPairSerial = [$target.siblings('div').data('serial'), choiceSerial],\n                $otherRepeatedPair = $();\n\n            //check if it is not a repeating association!\n            $resultArea.children().not($pair).each(function(){\n                var $otherPair = $(this).children('.filled');\n                if($otherPair.length === 2){\n                    var otherPairSerial = [$($otherPair[0]).data('serial'), $($otherPair[1]).data('serial')];\n                    if(_.intersection(thisPairSerial, otherPairSerial).length === 2){\n                        $otherRepeatedPair = $otherPair;\n                        return false;\n                    }\n                }\n            });\n\n            if($otherRepeatedPair.length === 0){\n                //no repeated pair, so allow the choice to be set:\n                _setChoice();\n\n                //trigger pair made event\n                Helper.triggerResponseChangeEvent(interaction, {\n                    type : 'added',\n                    $pair : $pair,\n                    choices : thisPairSerial\n                });\n\n                Helper.validateInstructions(interaction, {choice : $choice, target : $target});\n\n                if(interaction.responseMappingMode || parseInt(interaction.attr('maxAssociations')) === 0){\n\n                    $pair.removeClass('incomplete-pair');\n\n                    //append new pair option?\n                    if(!$resultArea.children('.incomplete-pair').length){\n                        $resultArea.append(pairTpl({empty : true}));\n                        $resultArea.children('.incomplete-pair').fadeIn(600, function(){\n                            $(this).show();\n                        });\n                    }\n                }\n            }else{\n                //repeating pair: show it:\n\n                //@todo add a notification message here in warning\n                $otherRepeatedPair.css('border', '1px solid orange');\n                $target.html(__('identical pair already exists')).css({\n                    color : 'orange',\n                    border : '1px solid orange'\n                });\n                setTimeout(function(){\n                    $otherRepeatedPair.removeAttr('style');\n                    $target.empty().css({color:\"\",border:\"\"});\n                }, 2000);\n            }\n\n        }else{\n            _setChoice();\n        }\n    };\n\n    var unsetChoice = function(interaction, $choice, animate){\n\n        var serial = $choice.data('serial'),\n            $container = Helper.getContainer(interaction);\n\n        $container.find('.choice-area [data-serial=' + serial + ']').removeClass('deactivated');\n\n        _choiceUsages[serial]--;\n\n        $choice\n            .removeClass('filled')\n            .removeData('serial')\n            .empty();\n\n        if(!interaction.swapping){\n\n            //a pair with one single element is not valid, so consider the response to be modified:\n            Helper.triggerResponseChangeEvent(interaction, {\n                type : 'removed',\n                $pair : $choice.parent()\n            });\n            Helper.validateInstructions(interaction, {choice : $choice});\n\n            //completely empty pair: \n            if(!$choice.siblings('div').hasClass('filled') && (parseInt(interaction.attr('maxAssociations')) === 0 || interaction.responseMappingMode)){\n                //shall we remove it?\n                var $parent = $choice.parent();\n                if(!$parent.hasClass('incomplete-pair')){\n                    if(animate){\n                        $parent.addClass('removing').fadeOut(500, function(){\n                            $(this).remove();\n                        });\n                    }else{\n                        $parent.remove();\n                    }\n                }\n            }\n        }\n    };\n\n    var getChoice = function(interaction, identifier){\n\n        //warning: do not use selector data-identifier=identifier because data-identifier may change dynamically\n        var choice = interaction.getChoiceByIdentifier(identifier);\n        if(!choice){\n            throw new Error('cannot find a choice with the identifier : ' + identifier);\n        }\n        return Helper.getContainer(interaction).find('.choice-area [data-serial=' + choice.getSerial() + ']');\n    };\n\n    var renderEmptyPairs = function(interaction){\n\n        var max = parseInt(interaction.attr('maxAssociations')),\n            $resultArea = Helper.getContainer(interaction).find('.result-area');\n\n        if(interaction.responseMappingMode || max === 0){\n            $resultArea.append(pairTpl({empty : true}));\n            $resultArea.children('.incomplete-pair').show();\n        }else{\n            for(var i = 0; i < max; i++){\n                $resultArea.append(pairTpl());\n            }\n        }\n    };\n\n    var _adaptSize = function(interaction){\n        _.delay(function(){\n            adaptSize.height(Helper.getContainer(interaction).find('.result-area .target, .choice-area .qti-choice'));\n        }, 500);//@todo : fix the image loading issues\n    };\n    \n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10291\n     * \n     * @param {object} interaction\n     */\n    var render = function(interaction){\n\n        renderEmptyPairs(interaction);\n\n        var $container = Helper.getContainer(interaction),\n            $choiceArea = $container.find('.choice-area'),\n            $resultArea = $container.find('.result-area'),\n            $activeChoice = null;\n\n\n        var _getChoice = function(serial){\n            return $choiceArea.find('[data-serial=' + serial + ']');\n        };\n\n        /**\n         * @todo Tried to store $resultArea.find[...] in a variable but this fails\n         * @param $choice\n         * @param $target\n         * @private\n         */\n        var _setChoice = function($choice, $target){\n            setChoice(interaction, $choice, $target);\n            _adaptSize(interaction);\n        };\n\n        var _resetSelection = function(){\n            if($activeChoice){\n                $resultArea.find('.remove-choice').remove();\n                $activeChoice.removeClass('active');\n                $container.find('.empty').removeClass('empty');\n                $activeChoice = null;\n            }\n        };\n\n        var _unsetChoice = function($choice){\n            unsetChoice(interaction, $choice, true);\n            _adaptSize(interaction);\n        };\n\n        var _isInsertionMode = function(){\n            return ($activeChoice && $activeChoice.data('identifier'));\n        };\n\n        var _isModeEditing = function(){\n            return ($activeChoice && !$activeChoice.data('identifier'));\n        };\n\n        $container.on('mousedown.commonRenderer', function(e){\n            _resetSelection();\n        });\n\n        $choiceArea.on('mousedown.commonRenderer', '>li', function(e){\n\n            e.stopPropagation();\n\n            if($(this).hasClass('deactivated')){\n                e.preventDefault();\n                return;\n            }\n\n            if(_isModeEditing()){\n                //swapping:\n                interaction.swapping = true;\n                _unsetChoice($activeChoice);\n                _setChoice($(this), $activeChoice);\n                _resetSelection();\n                interaction.swapping = false;\n            }else{\n\n                if($(this).hasClass('active')){\n                    _resetSelection();\n                }else{\n                    _resetSelection();\n\n                    //activate it:\n                    $activeChoice = $(this);\n                    $(this).addClass('active');\n                    $resultArea.find('>li>.target').addClass('empty');\n                }\n            }\n\n        });\n\n        $resultArea.on('mousedown.commonRenderer', '>li>div', function(e){\n\n            e.stopPropagation();\n\n            if(_isInsertionMode()){\n\n                var $target = $(this),\n                    choiceSerial = $activeChoice.data('serial'),\n                    targetSerial = $target.data('serial');\n\n                if(targetSerial !== choiceSerial){\n\n                    if($target.hasClass('filled')){\n                        interaction.swapping = true;//hack to prevent deleting empty pair in infinite association mode\n                    }\n\n                    //set choices:\n                    if(targetSerial){\n                        _unsetChoice($target);\n                    }\n\n                    _setChoice($activeChoice, $target);\n\n                    //always reset swapping mode after the choice is set\n                    interaction.swapping = false;\n                }\n\n                _resetSelection();\n\n            }else if(_isModeEditing()){\n\n                //editing mode:\n                var $target = $(this),\n                    targetSerial = $target.data('serial'),\n                    choiceSerial = $activeChoice.data('serial');\n\n                if(targetSerial !== choiceSerial){\n\n                    if($target.hasClass('filled') || $activeChoice.siblings('div')[0] === $target[0]){\n                        interaction.swapping = true;//hack to prevent deleting empty pair in infinite association mode\n                    }\n\n                    _unsetChoice($activeChoice);\n                    if(targetSerial){\n                        //swapping:\n                        _unsetChoice($target);\n                        _setChoice(_getChoice(targetSerial), $activeChoice);\n                    }\n                    _setChoice(_getChoice(choiceSerial), $target);\n\n                    //always reset swapping mode after the choice is set\n                    interaction.swapping = false;\n                }\n\n                _resetSelection();\n\n            }else if($(this).data('serial')){\n\n                //selecting a choice in editing mode:\n                var serial = $(this).data('serial');\n\n                $activeChoice = $(this);\n                $activeChoice.addClass('active');\n\n                $resultArea.find('>li>.target').filter(function(){\n                    return $(this).data('serial') !== serial;\n                }).addClass('empty');\n\n                $choiceArea.find('>li:not(.deactivated)').filter(function(){\n                    return $(this).data('serial') !== serial;\n                }).addClass('empty');\n\n                //append trash bin:\n                var $bin = $('<span>', {'class' : 'icon-undo remove-choice', 'title' : __('remove')});\n                $bin.on('mousedown', function(e){\n                    e.stopPropagation();\n                    _unsetChoice($activeChoice);\n                    _resetSelection();\n                });\n                $(this).append($bin);\n            }\n\n        });\n\n        //@todo run eyecatcher: fix it\n//        eyecatcher();\n\n        if(!interaction.responseMappingMode){\n            _setInstructions(interaction);\n        }\n        \n        _adaptSize(interaction);\n    };\n\n    var _setInstructions = function(interaction){\n\n        var min = parseInt(interaction.attr('minAssociations')),\n            max = parseInt(interaction.attr('maxAssociations'));\n\n        //infinite association:\n        if(min === 0){\n            if(max === 0){\n                Helper.appendInstruction(interaction, __('You may make as many association pairs as you want.'));\n            }\n        }else{\n            if(max === 0){\n                Helper.appendInstruction(interaction, __('The maximum number of association is unlimited.'));\n            }\n            //the max value is implicit since the appropriate number of empty pairs have already been created\n            var msg = __('You need to make') + ' ';\n            msg += (min > 1) ? __('at least') + ' ' + min + ' ' + __('association pairs') : __('one association pair');\n            Helper.appendInstruction(interaction, msg, function(){\n                if(_getRawResponse(interaction).length >= min){\n                    this.setLevel('success');\n                }else{\n                    this.reset();\n                }\n            });\n        }\n    };\n\n    var resetResponse = function(interaction){\n        Helper.getContainer(interaction).find('.result-area>li>div').each(function(){\n            unsetChoice(interaction, $(this));\n        });\n    };\n\n    var _setPairs = function(interaction, pairs){\n\n        var addedPairs = 0,\n            $emptyPair = Helper.getContainer(interaction).find('.result-area>li:first');\n        if(pairs && interaction.getResponseDeclaration().attr('cardinality') === 'single' && pairs.length){\n            pairs = [pairs];\n        }\n        _.each(pairs, function(pair){\n            if($emptyPair.length){\n                var $divs = $emptyPair.children('div');\n                setChoice(interaction, getChoice(interaction, pair[0]), $($divs[0]));\n                setChoice(interaction, getChoice(interaction, pair[1]), $($divs[1]));\n                addedPairs++;\n                $emptyPair = $emptyPair.next('li');\n            }else{\n                //the number of pairs exceeds the maxium allowed pairs: break;\n                return false;\n            }\n        });\n\n        return addedPairs;\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10291\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        _setPairs(interaction, pciResponse.unserialize(response, interaction));\n    };\n\n    var _getRawResponse = function(interaction){\n        var response = [];\n        Helper.getContainer(interaction).find('.result-area>li').each(function(){\n            var pair = [];\n            $(this).find('div').each(function(){\n                var serial = $(this).data('serial');\n                if(serial){\n                    pair.push(interaction.getChoice(serial).id());\n                }\n            });\n            if(pair.length === 2){\n                response.push(pair);\n            }\n        });\n        return response;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10291\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    var destroy = function(interaction){\n\n        var $container = Helper.getContainer(interaction);\n\n        //destroy seelcted choice:\n        $container.find('.result-area .active').mousedown();\n\n        //remove event\n        $(document).off('.commonRenderer');\n        $container.find('.choice-area, .result-area').andSelf().off('.commonRenderer');\n\n        //destroy response\n        resetResponse(interaction);\n\n        //remove instructions\n        Helper.removeInstructions(interaction);\n\n        Helper.getContainer(interaction).find('.result-area').empty();\n    };\n\n    return {\n        qtiClass : 'associateInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy, //@todo to be renamed into destroy\n        renderEmptyPairs : renderEmptyPairs\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/grip', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"common-tlb\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"tlb-button\\\" title=\\\"move\\\" data-role=\\\"move\\\">\\n        <span class=\\\"icon-grip\\\"></span>\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/movable',[\n    'jquery',\n    'taoQtiItem/qtiCreator/editor/gridEditor/draggable',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/grip'\n], function($, draggable, gripTpl){\n\n    var movable = {\n        create : function(widget){\n\n            var item = widget.element.getRelatedItem(),\n                $container = widget.$container,\n                $itemBody;\n\n            var $grip = $(gripTpl({\n                serial : widget.serial\n            }));\n\n            $container.append($grip);\n\n            $grip.on('mouseenter.qti-widget', function(){\n\n                if(!$itemBody || !$itemBody.length){\n                    $itemBody = item.data('widget').$container;\n                }\n\n                //create movable\n                //enable the new element to be movable\n                draggable.createMovable($container, $itemBody);\n\n            }).on('mouseleave.qti-widget', function(){\n                //destroy movable\n                draggable.destroy($container);\n            });\n        }\n    }\n    \n    return movable;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/interaction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        <div class=\\\"state-switcher\\\">\\n            <span class=\\\"selected\\\" data-state=\\\"question\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Question\", options) : helperMissing.call(depth0, \"__\", \"Question\", options)))\n    + \"</span>\\n            <span class=\\\"separator\\\"> | </span>\\n            <span class=\\\"link\\\" data-state=\\\"answer\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Response\", options) : helperMissing.call(depth0, \"__\", \"Response\", options)))\n    + \"</span>\\n        </div>\\n        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"tlb-wrapper\\\" style=\\\"\\\" data-edit=\\\"active\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <span class=\\\"tlb-title\\\" title=\\\"\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <div class=\\\"tlb\\\">\\n        <div class=\\\"rgt tlb-button\\\" data-role=\\\"delete\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"delete\", options) : helperMissing.call(depth0, \"__\", \"delete\", options)))\n    + \"\\\">\\n            <span class=\\\"icon-bin\\\"></span>\\n        </div>\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.switcher), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/Widget',[\n    'lodash',\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/Widget',\n    'taoQtiItem/qtiCreator/widgets/helpers/movable',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/interaction',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/okButton'\n], function(_, $, Widget, movable, toolbarTpl, okButtonTpl){\n\n    /**\n     * \n     * Create a new widget definition from another prototype.\n     */\n    var InteractionWidget = Widget.clone();\n\n    /**\n     * Optional method to be implemented :\n     * Init the widget\n     * It should never be called directly in normal usage\n     * Here, it is overwriten to accomodate for a new argument \n     * that other widgets does not have: $responseForm\n     */\n    InteractionWidget.init = function(element, $container, $form, $responseForm, options){\n        Widget.init.call(this, element, $container, $form, options);\n        this.$responseForm = $responseForm;\n        return this;\n    };\n\n    /**\n     * Optional method to be implemented :\n     * Build the widget and return an instance ready to be used\n     * Here, it is overwritten to accomodate for a new argument\n     * that other widgets does not have: $responseForm\n     */\n    InteractionWidget.build = function(element, $container, $form, $responseForm, options){\n        return this.clone().init(element, $container, $form, $responseForm, options);\n    };\n\n    /**\n     * Required method to be implemented : \n     * define the states and common structure valid for all states\n     */\n    InteractionWidget.initCreator = function(){\n        \n        Widget.initCreator.call(this);\n        \n        this.createToolbar({});\n        this.createOkButton();\n        this.listenToChoiceStates();\n    };\n\n    /**\n     * Required method to be implemented : \n     * Define the contaieinr where everything is going on. \n     * It normally used this.$original as the start point : from there, you can wrap, innerWrap\n     */\n    InteractionWidget.buildContainer = function(){\n\n        var $wrap = $('<div>', {\n            'data-serial' : this.element.serial,\n            'class' : 'widget-box widget-blockInteraction clearfix',\n            'data-qti-class' : this.element.qtiClass\n        });\n        var $interactionContainer = this.$original.wrap($wrap);\n        this.$container = $interactionContainer.parent();\n\n        //@todo : implement movable interaction here:\n//        movable.create(this);\n\n        return this;\n    };\n\n    function _convertToTitle(str){\n        str = str.replace(/[A-Z]/g, function(match){\n            return ' ' + match.toUpperCase();\n        });\n        return str.charAt(0).toUpperCase() + str.substr(1);\n    }\n\n    /**\n     * Below here, optional ui component init functions\n     */\n\n    /**\n     * Create a toolbar\n     */\n    InteractionWidget.createToolbar = function(options){\n\n        options = _.defaults(options || {}, {\n            title : _convertToTitle(this.element.qtiClass)\n        });\n\n        var _this = this,\n            $toolbar;\n\n        $toolbar = $(toolbarTpl({\n            title : options.title,\n            serial : this.element.serial,\n            switcher : !!this.registeredStates.answer\n        }));\n\n        this.$container.append($toolbar);\n        $toolbar.hide();\n\n        $toolbar.find('[data-role=\"delete\"]').click(function(e){\n            e.stopPropagation();//prevent direct deleting\n            _this.changeState('deleting');\n        });\n\n        //if the answer state has been registered\n        if(this.registeredStates.answer){\n\n            //initialize the state switcher\n            $toolbar.on('click', '.link', function(){\n                var $link = $(this),\n                    state = $link.data('state');\n\n                $link.siblings('.selected').removeClass('selected').addClass('link');\n                $link.removeClass('link').addClass('selected');\n                _this.changeState(state);\n            });\n\n            //add stateChange event listener to auto toggle the question/answer trigger\n            this.beforeStateInit(function(e, element, state){\n                if(element.getSerial() === _this.serial){\n                    var $link = $toolbar.find('.link[data-state=\"' + state.name + '\"]');\n                    if($link.length){\n                        //a known active state:\n                        $link.siblings('.selected').removeClass('selected').addClass('link');\n                        $link.removeClass('link').addClass('selected');\n                    }\n                }\n            });\n        }\n\n        return this;\n\n    };\n\n    InteractionWidget.createOkButton = function(){\n\n        var _this = this,\n            $ok = $(okButtonTpl()).on('click.qti-widget', function(e){\n            e.stopPropagation();\n            _this.changeState('sleep');\n        });\n\n        this.$container.append($ok);\n    };\n\n    InteractionWidget.listenToChoiceStates = function(){\n\n        var _this = this;\n\n        this.afterStateInit(function(e, element, state){\n\n            var currentState = _this.getCurrentState();\n\n            if(element.is('choice')\n                && _this.element.getChoice(element.getSerial())\n                && currentState\n                && state.name !== currentState.name){\n\n                switch(state.name){\n                    case 'choice':\n                        _this.changeState(state.name);\n                        break;\n                }\n\n            }\n        });\n\n    };\n\n    return InteractionWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/states/Sleep'], function(stateFactory, SleepState){\n    \n    var InteractionStateSleep = stateFactory.extend(SleepState, function(){\n        \n        var _widget = this.widget;\n        \n        _widget.$container.on('click.qti-widget.sleep', function(e){\n            e.stopPropagation();\n            //if active == false do this: (else nothing)\n            //show toolbar, prompt widget and choice widgets and property form\n\n            //init default mode: question\n            _widget.changeState('question');\n        });\n        \n    }, function(){\n        \n        var _widget = this.widget;\n        \n        //remove hover outline box display\n        _widget.$container.off('.sleep');\n    });\n    \n    return InteractionStateSleep;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Active',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Active',\n    'lodash'\n], function(stateFactory, Active, _){\n\n    var _containsInModalFeedbackElts = function(response, searchSerial){\n\n        var found = false,\n            modalFeedbacks = [];\n\n        _.each(response.feedbackRules, function(rule){\n            if(rule.feedbackThen && rule.feedbackThen.qtiClass === 'modalFeedback'){\n                modalFeedbacks.push(rule.feedbackThen);\n            }\n            if(rule.feedbackElse && rule.feedbackElse.qtiClass === 'modalFeedback'){\n                modalFeedbacks.push(rule.feedbackElse);\n            }\n        });\n        _.each(modalFeedbacks, function(fb){\n            var elt = fb.getBody().getElement(searchSerial);\n            if(elt){\n                found = true;\n                return false;//break\n            }\n        });\n\n        return found;\n    };\n\n    var InteractionStateActive = stateFactory.extend(Active, function(){\n        \n        var _widget = this.widget,\n            $container = _widget.$container,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        $container.attr('contenteditable', false);\n\n        _widget.beforeStateInit(function(e, element, state){\n            \n            var serial = element.getSerial();\n            \n            if(element.qtiClass === 'modalFeedback'){\n                return false;\n            }\n            \n            if(state.name === 'active' && serial !== _widget.serial){\n                \n                //when it does not click on itself, check if the newly activated element is its own composing element:\n                var composingElts = interaction.getComposingElements();\n                var inModalFeedback = _containsInModalFeedbackElts(response, serial);\n                if(!composingElts[serial] && !inModalFeedback){\n                    _widget.changeState('sleep');\n                }\n            }\n        }, 'otherActive');\n\n        $container.on('mouseenter.active', function(e){\n            e.stopPropagation();\n            $container.parent().trigger('mouseleave.sleep');\n        }).on('mouseleave.active', function(e){\n            e.stopPropagation();\n            $container.parent().trigger('mouseenter.sleep');\n        }).on('click.active', function(e){\n            e.stopPropagation();\n        });\n\n    }, function(){\n\n        this.widget.offEvents('otherActive');\n    });\n\n    return InteractionStateActive;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/addChoice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<li class=\\\"add-option\\\" data-edit=\\\"question\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"add-option\\\">\\n    <span class=\\\"icon-add\\\"></span>\\n    \";\n  if (helper = helpers.text) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.text); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n</li>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/addChoice',\n    'i18n'\n], function($, stateFactory, Question, addChoiceTpl, __){\n\n    var InteractionStateQuestion = stateFactory.create(Question, function(){\n\n        //show option form\n        this.initForm();\n        this.widget.$form.show();\n\n        //allow quick edit of internal element (toggle shuffle/fix, delete choices via minit-toolbar)\n\n        //init add choice button if needed\n        this.addNewChoiceButton(this.widget);\n\n        //switchable to choice(click), answer(toolbar), deleting(toolbar), sleep (OK button)\n\n        //init form:\n\n\n    }, function(){\n\n        //destroy and hide it\n        this.widget.$form.empty().hide();\n\n        //disable/destroy editor, hide mini-toolbar\n    });\n\n\n    InteractionStateQuestion.prototype.addNewChoiceButton = function(){\n\n        var widget = this.widget,\n            $choiceArea = widget.$container.find('.choice-area'),\n            interaction = widget.element;\n\n        //init add choice button if needed\n        if($choiceArea.length && !$choiceArea.children('.add-option').length){\n\n            $choiceArea.append(addChoiceTpl({\n                serial : this.serial,\n                text : __('Add choice')\n            }));\n\n            $choiceArea.children('.add-option').show().on('click.qti-widget', function(e){\n\n                e.stopPropagation();\n\n                //add a new choice\n                var choice = interaction.createChoice(),\n                    $newChoicePlaceholder = $('<li>'),\n                    qtiChoiceClassName = choice.qtiClass + '.' + interaction.qtiClass,\n                    tplData = {\n                    interaction : {\n                        serial : interaction.serial,\n                        attributes : interaction.attributes\n                    }\n                };\n\n                //append placeholder\n                $(this).before($newChoicePlaceholder);\n\n                //render the new choice\n                choice.render(tplData, $newChoicePlaceholder, qtiChoiceClassName);\n                choice.postRender({\n                    ready : function(widget){\n                        //transition state directly back to \"question\"\n                        widget.changeState('choice');\n                    }\n                }, qtiChoiceClassName);\n            });\n\n        }\n    };\n\n    InteractionStateQuestion.prototype.initForm = function(){\n        stateFactory.throwMissingRequiredImplementationError('initForm');\n    };\n\n    return InteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Choice',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/helpers/content'\n], function($, stateFactory, Choice, contentHelper){\n\n    var InteractionStateChoice = stateFactory.create(Choice, function(){\n\n        var _widget = this.widget;\n\n        //move to question state by clicking everywhere in the interaction but outside of the choice\n        _widget.$container.on('click.choice', function(e){\n\n            if(!$(e.target).closest('.qti-choice').length){\n                _widget.changeState('question');\n            }\n        });\n\n        contentHelper.changeInnerWidgetState(this.widget, 'sleep');\n\n    }, function(){\n\n        this.widget.$container.off('.choice');\n    });\n\n    return InteractionStateChoice;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/response/responseForm', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        <option value=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"</option>\\n        \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<hr/>\\n\\n<div class=\\\"panel\\\" data-editx=\\\"map\\\">\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Score range\", options) : helperMissing.call(depth0, \"__\", \"Score range\", options)))\n    + \"\\n    </h3>\\n    <div>\\n        <label for=\\\"lowerBound\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"lowerBound\\\" value=\\\"\";\n  if (helper = helpers.lowerBound) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.lowerBound); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"score\\\" type=\\\"text\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Minimal  score for this interaction.\", options) : helperMissing.call(depth0, \"__\", \"Minimal  score for this interaction.\", options)))\n    + \"</span>\\n    </div>\\n    <div>\\n        <label for=\\\"upperBound\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"upperBound\\\" value=\\\"\";\n  if (helper = helpers.upperBound) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.upperBound); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"score\\\" type=\\\"text\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Maximal score for this interaction.\", options) : helperMissing.call(depth0, \"__\", \"Maximal score for this interaction.\", options)))\n    + \"</span>\\n    </div>\\n</div>\\n\\n<div class=\\\"panel\\\" data-editx=\\\"map\\\">\\n    <label for=\\\"defaultValue\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mapping default\", options) : helperMissing.call(depth0, \"__\", \"Mapping default\", options)))\n    + \"</label>\\n    <input name=\\\"defaultValue\\\" value=\\\"\";\n  if (helper = helpers.defaultValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.defaultValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"score\\\" type=\\\"text\\\" data-validate=\\\"$notEmpty; $numeric;\\\" data-validate-option=\\\"$lazy; $event(type=keyup)\\\" />\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The default value from the target set to be used when no explicit mapping for a source value is given.\", options) : helperMissing.call(depth0, \"__\", \"The default value from the target set to be used when no explicit mapping for a source value is given.\", options)))\n    + \"</span>\\n</div>\\n\\n<div class=\\\"panel\\\" data-editx=\\\"map\\\">\\n    <label>\\n        <input name=\\\"defineCorrect\\\" type=\\\"checkbox\\\" data-role=\\\"defineCorrect\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.defineCorrect), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Define correct response\", options) : helperMissing.call(depth0, \"__\", \"Define correct response\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Define the correct response.\", options) : helperMissing.call(depth0, \"__\", \"Define the correct response.\", options)))\n    + \"</span>\\n</div>\\n\";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  \n  return \" checked=\\\"checked\\\"\";\n  }\n\nfunction program6(depth0,data) {\n  \n  \n  return \"\\n<hr/>\\n\\n<div class=\\\"panel feedbackRule-panel\\\"></div>\\n\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Response identifier\", options) : helperMissing.call(depth0, \"__\", \"Response identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. RESPONSE\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Response processing\", options) : helperMissing.call(depth0, \"__\", \"Response processing\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select the way the response of your interaction should be processed\", options) : helperMissing.call(depth0, \"__\", \"Select the way the response of your interaction should be processed\", options)))\n    + \"</div>\\n\\n    <select name=\\\"template\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.templates), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </select>\\n</div>\\n\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.editMapping), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.editFeedbacks), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiItem/core/Element',\n    'tooltipster'\n], function($, _, formElement, Element){\n\n    var _scoreTooltipContent = {\n        required : 'this is required',\n        invalid : 'the score format is not numeric'\n    };\n\n    var formElementHelper = {\n        init : function(widget){\n            formElement.initWidget(widget.$form);\n        },\n\n        /**\n         * Helps you to synchrnonize min/max widgets so the min isn't greater than the max, etc.\n         * @param {Object} widget - the interacion's widget (where widget.element is the interaction)\n         * @param {String} [attributeNameMin = minChoices] - the name of the min field and attribute\n         * @param {String} [attributeNameMax = maxChoices] - the name of the max field and attribute\n         * @param {Function} [getMax = _.size] - how to get the max value from the choices lists (in attributes)\n         */\n        syncMaxChoices : function(widget, attributeNameMin, attributeNameMax, getMax){\n\n            attributeNameMin = attributeNameMin || 'minChoices';\n            attributeNameMax = attributeNameMax || 'maxChoices';\n            getMax = getMax || _.size;\n            var $min = widget.$form.find('input[name=' + attributeNameMin + ']'),\n                $max = widget.$form.find('input[name=' + attributeNameMax + ']');\n\n            var _syncMaxChoices = function(){\n                var newOptions = {max : getMax(widget.element.getChoices())};\n                $min.incrementer('options', newOptions).keyup();\n                $max.incrementer('options', newOptions).keyup();\n            };\n\n            widget.on('choiceCreated', function(data){\n\n                if(data.interaction.serial === widget.element.serial){\n                    _syncMaxChoices();\n                }\n\n            }).on('deleted', function(data){\n\n                if(data.parent.serial === widget.element.serial &&\n                    Element.isA(data.element, 'choice')){\n\n                    _syncMaxChoices();\n                }\n            });\n\n        },\n\n        //set float (used for score)\n        setScore : function($scoreInput, options){\n\n            options = _.defaults(options || {}, {\n                required : false,\n                empty : function(){\n                },\n                set : function(){\n                },\n                key : function(){\n                    return $(this).attr('name');\n                },\n                tooltipContent : _scoreTooltipContent\n            });\n\n            if(!$scoreInput.hasClass('tooltipstered')){\n                $scoreInput.tooltipster({\n                    theme : 'tao-error-tooltip',\n                    content : options.tooltipContent.invalid,\n                    delay : 350,\n                    trigger : 'custom'\n                });\n            }\n\n            var value = $scoreInput.val(),\n                score = parseFloat(value),\n                key = options.key.call($scoreInput[0]);\n\n            if(value === ''){\n                if(options.required){\n                    //missing required score value!\n                    $scoreInput.tooltipster('content', options.tooltipContent.required);\n                    $scoreInput.tooltipster('show');\n                }else{\n                    $scoreInput.tooltipster('hide');\n                    options.empty(key);\n                }\n            }else if(!isNaN(score)){\n                //is a correct number\n                $scoreInput.tooltipster('hide');\n                options.set(key, score);\n            }else{\n                //invalid input!\n                $scoreInput.tooltipster('content', options.tooltipContent.invalid);\n                $scoreInput.tooltipster('show');\n            }\n\n        }\n        //set text (used for controlled pattern, especially id)\n    };\n\n    return formElementHelper;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/rule', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <option value=\\\"\";\n  if (helper = helpers.name) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.name); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data},helper ? helper.call(depth0, (depth0 && depth0.name), (depth1 && depth1.condition), options) : helperMissing.call(depth0, \"equal\", (depth0 && depth0.name), (depth1 && depth1.condition), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n            \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program4(depth0,data) {\n  \n  \n  return \"style=\\\"display:none\\\"\";\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n    <a title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add else feedback\", options) : helperMissing.call(depth0, \"__\", \"Add else feedback\", options)))\n    + \"\\\" href=\\\"#\\\" class=\\\"adder feedbackRule-add-else\\\">else</a>\\n    \";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n     <div class=\\\"feedbackRule-then-else\\\">\\n            <span class=\\\"feedbackRule-desc i\\\">else</span>\\n            <button class=\\\"btn-info small\\\" type=\\\"button\\\" data-feedback=\\\"else\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Feedback\", options) : helperMissing.call(depth0, \"__\", \"Feedback\", options)))\n    + \"</button>\\n            <span class=\\\"feedbackRule-button-delete icon-bin\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Delete else statement\", options) : helperMissing.call(depth0, \"__\", \"Delete else statement\", options)))\n    + \"\\\" data-role=\\\"else\\\"></span>\\n        </div>\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"feedbackRule-container\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <div class=\\\"feedbackRule-rule-if\\\">\\n        <span class=\\\"feedbackRule-desc i\\\">if</span>\\n        <select class=\\\"feedbackRule-condition select2\\\" data-has-search=\\\"false\\\">\\n            \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.availableConditions), {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </select>\\n        <input class=\\\"feedbackRule-compared-value score\\\" type=\\\"text\\\" value=\\\"\";\n  if (helper = helpers.comparedValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.comparedValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.hideScore), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n    </div>\\n    <div class=\\\"feedbackRule-then-else\\\">\\n        <span class=\\\"feedbackRule-desc i\\\">then</span>\\n        <button class=\\\"btn-info small\\\" type=\\\"button\\\" data-feedback=\\\"then\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Feedback\", options) : helperMissing.call(depth0, \"__\", \"Feedback\", options)))\n    + \"</button>\\n    </div>\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.addElse), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.feedbackElse), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <span class=\\\"feedbackRule-button-delete icon-bin\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Delete this modal feedback\", options) : helperMissing.call(depth0, \"__\", \"Delete this modal feedback\", options)))\n    + \"\\\" data-role=\\\"rule\\\"></span>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/panel', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<h3 class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Modal Feedbacks\", options) : helperMissing.call(depth0, \"__\", \"Modal Feedbacks\", options)))\n    + \"</h3>\\n<span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n<span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Modal feedback is shown to the candidate directly following response processing.\", options) : helperMissing.call(depth0, \"__\", \"Modal feedback is shown to the candidate directly following response processing.\", options)))\n    + \"</span>\\n<div class=\\\"feedbackRules\\\">\\n    <p><i>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"None defined yet.\", options) : helperMissing.call(depth0, \"__\", \"None defined yet.\", options)))\n    + \"</i></p>\\n</div>\\n<a href=\\\"#\\\" class=\\\"adder feedbackRule-add\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add a modal feedback\", options) : helperMissing.call(depth0, \"__\", \"Add a modal feedback\", options)))\n    + \"</a>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/modalFeedbackRule',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'ui/selecter',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/rule',\n    'tpl!taoQtiItem/qtiCreator/tpl/modalFeedback/panel'\n], function(_, $, __, selecter, formElement, ruleTpl, panelTpl){\n\n    var _availableConditions = [\n        {\n            name : 'correct',\n            label : __('correct')\n        },\n        {\n            name : 'incorrect',\n            label : __('incorrect')\n        },\n        {\n            name : 'lt',\n            label : '<'\n        },\n        {\n            name : 'lte',\n            label : '<='\n        },\n        {\n            name : 'equal',\n            label : '='\n        },\n        {\n            name : 'gte',\n            label : '>='\n        },\n        {\n            name : 'gt',\n            label : '>'\n        }\n    ];\n\n    var _renderFeedbackRule = function(feedbackRule){\n        \n        var feedbackElseSerial,\n            addElse,\n            feedbackElse = feedbackRule.feedbackElse,\n            addElse = !feedbackElse;\n\n        if(feedbackElse){\n            feedbackElseSerial = feedbackElse.serial;\n        }\n\n        var rule =  ruleTpl({\n            availableConditions : _availableConditions,\n            serial : feedbackRule.serial,\n            condition : feedbackRule.condition,\n            comparedValue : feedbackRule.comparedValue,\n            feedbackThen : feedbackRule.feedbackThen.serial,\n            feedbackElse : feedbackElseSerial,\n            addElse : addElse,\n            hideScore : (feedbackRule.condition === 'correct' || feedbackRule.condition === 'incorrect')\n        });\n        \n        var $rule = $(rule);\n        selecter($rule);\n        \n        return $rule;\n    };\n\n    var _initFeedbackEventListener = function($feedbacksPanel, response){\n\n        var $feedbacks = $feedbacksPanel.find('.feedbackRules');\n        $feedbacksPanel.on('click', '.feedbackRule-add', function(e){\n            e.preventDefault();\n\n            var feedbackRule = response.createFeedbackRule(),\n                $lastRule = $feedbacks.children('.feedbackRule-container:last');\n\n            if($lastRule.length){\n                $lastRule.after(_renderFeedbackRule(feedbackRule));\n            }else{\n                $feedbacks.html(_renderFeedbackRule(feedbackRule));\n            }\n        }).on('click', '.feedbackRule-add-else', function(e){\n            \n            e.preventDefault();\n            \n            var $fbContainer = $(this).parents('.feedbackRule-container'),\n                fbSerial = $fbContainer.data('serial'),\n                fbRule = response.getFeedbackRule(fbSerial),\n                fbModal = response.createFeedbackElse(fbRule);\n\n            $fbContainer.replaceWith(_renderFeedbackRule(fbRule));\n\n        }).on('click', '.feedbackRule-button-delete', function(){\n\n            var $deleteButton = $(this),\n                $fbContainer = $deleteButton.parents('.feedbackRule-container'),\n                fbSerial = $fbContainer.data('serial'),\n                fbRule = response.getFeedbackRule(fbSerial);\n\n            switch($deleteButton.data('role')){\n                case 'rule':\n                    response.deleteFeedbackRule(fbRule);\n                    $fbContainer.remove();\n                    break;\n                case 'else':\n                    response.deleteFeedbackElse(fbRule);\n                    $fbContainer.replaceWith(_renderFeedbackRule(fbRule));//replace all to display the add \"else\" button\n                    break;\n            }\n        }).on('change', '.feedbackRule-condition', function(){\n\n            var $select = $(this),\n                condition = $select.val(),\n                $comparedValue = $select.siblings('.feedbackRule-compared-value'),\n                fbRule = response.getFeedbackRule($(this).parents('.feedbackRule-container').data('serial'));\n\n            if(fbRule.condition === 'correct' || fbRule.condition === 'incorrect'){\n                $comparedValue.val('0');//initialize the value to 0\n            }\n\n            if(condition === 'correct' || condition === 'incorrect'){\n                $comparedValue.hide();\n            }else{\n                $comparedValue.show();\n            }\n\n            formElement.setScore($comparedValue, {\n                required : true,\n                set : function(key, value){\n                    response.setCondition(fbRule, condition, value);\n                }\n            });\n\n        }).on('keyup', '.feedbackRule-compared-value', function(){\n\n            var fbRule = response.getFeedbackRule($(this).parents('.feedbackRule-container').data('serial'));\n\n            formElement.setScore($(this), {\n                required : true,\n                set : function(key, value){\n                    response.setCondition(fbRule, fbRule.condition, value);\n                }\n            });\n\n        }).on('click', '[data-feedback]', function(){\n\n            var $btn = $(this),\n                fbRule = response.getFeedbackRule($btn.parents('.feedbackRule-container').data('serial')),\n                modalFeedback,\n                modalFeedbackWidget;\n            \n            switch($btn.data('feedback')){\n                case 'then':\n                    modalFeedback = fbRule.feedbackThen;\n                    break;\n                case 'else':\n                    modalFeedback = fbRule.feedbackElse;\n                    break;\n            }\n\n            if(modalFeedback){\n                //show modal feedback editor:\n                modalFeedbackWidget = _getModalFeedbackWidget(modalFeedback);\n                modalFeedbackWidget.changeState('active');\n            }\n\n        });\n\n    };\n    \n    var _widgets = {};\n    \n    var _getModalFeedbackWidget = function(modalFeedback){\n        \n        var $feedbacksContainer = $('#modalFeedbacks');\n        if(!_widgets[modalFeedback.serial]){\n            $feedbacksContainer.append(modalFeedback.render());\n            _widgets[modalFeedback.serial] = modalFeedback.postRender();\n        }\n        \n        return _widgets[modalFeedback.serial];\n    };\n\n    return {\n        initFeedbacksPanel : function($feedbacksPanel, response){\n\n            $feedbacksPanel.html(panelTpl());\n            \n            var $feedbackRules = $feedbacksPanel.find('.feedbackRules'),\n                feedbackRules = response.getFeedbackRules();\n            \n            if(feedbackRules && _.size(feedbackRules)){\n                $feedbackRules.empty();\n                _.each(feedbackRules, function(feedbackRule){\n                    $feedbackRules.append(_renderFeedbackRule(feedbackRule));\n                });\n            }\n\n            _initFeedbackEventListener($feedbacksPanel, response);\n        },\n        renderFeedbackRule : _renderFeedbackRule\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiItem/helper/response',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/response/responseForm',\n    'taoQtiItem/qtiCreator/widgets/helpers/modalFeedbackRule'\n], function($, _, responseHelper, formElement, responseFormTpl, modalFeedbackRule){\n\n    var _saveCallbacks = {\n        mappingAttr : function(response, value, key){\n            if(value === ''){\n                response.removeMappingAttribute(key);\n            }else{\n                response.setMappingAttribute(key, value);\n            }\n        }\n    };\n\n    var answerStateHelper = {\n        //forward to one of the available sub state, according to the response processing template\n        forward : function(widget){\n\n            var response = widget.element.getResponseDeclaration();\n            if(responseHelper.isUsingTemplate(response, 'MATCH_CORRECT')){\n\n                widget.changeState('correct');\n\n            }else if(responseHelper.isUsingTemplate(response, 'MAP_RESPONSE') ||\n                responseHelper.isUsingTemplate(response, 'MAP_RESPONSE_POINT')){\n\n                widget.changeState('map');\n            }else{\n\n                widget.changeState('custom');\n            }\n        },\n        defineCorrect : function(response, define){\n\n            var defineCorrect = false,\n                template = responseHelper.getTemplateNameFromUri(response.template),\n                corrects = response.getCorrect();\n\n            if(define === undefined){\n                //get:\n\n                if(template === 'MAP_RESPONSE' || template === 'MAP_RESPONSE_POINT'){\n                    \n                    if(response.data('defineCorrect') !== undefined){\n                        defineCorrect = !!response.data('defineCorrect');\n                    }else{\n                        //infer it : \n                        defineCorrect = (corrects && _.size(corrects));\n                        response.data('defineCorrect', defineCorrect);//set it\n                    }\n                    \n                }else if(template === 'MATCH_CORRECT'){\n                    defineCorrect = true;\n                }\n\n            }else{\n                //set:\n                if(!define){\n                    //empty correct response\n                    response.correctResponse = [];\n                }\n                response.data('defineCorrect', define);\n            }\n\n            return defineCorrect;\n        },\n        initResponseForm : function(widget){\n\n            var interaction = widget.element,\n                item = interaction.getRelatedItem(),\n                rp = item.responseProcessing,\n                response = interaction.getResponseDeclaration(),\n                template = responseHelper.getTemplateNameFromUri(response.template),\n                editMapping = (_.indexOf(['MAP_RESPONSE', 'MAP_RESPONSE_POINT'], template) >= 0),\n                defineCorrect = answerStateHelper.defineCorrect(response);\n\n            if(!template){\n                if(rp.processingType === 'custom'){\n                    template = 'CUSTOM';\n                }else{\n                    throw 'invalid response template';\n                }\n            }\n\n            widget.$responseForm.html(responseFormTpl({\n                identifier : response.id(),\n                serial : response.getSerial(),\n                defineCorrect : defineCorrect,\n                editMapping : editMapping,\n                editFeedbacks : (template !== 'CUSTOM'),\n                template : template,\n                templates : _getAvailableRpTemplates(interaction),\n                defaultValue : response.getMappingAttribute('defaultValue'),\n                lowerBound : response.getMappingAttribute('lowerBound'),\n                upperBound : response.getMappingAttribute('upperBound')\n            }));\n            widget.$responseForm.find('select[name=template]').val(template);\n\n            var _toggleCorrectWidgets = function(show){\n\n                var $correctWidgets = widget.$container.find('[data-edit=correct]');\n\n                if(show){\n                    $correctWidgets.show();\n                }else{\n                    $correctWidgets.hide();\n                }\n            };\n\n            if(editMapping){\n                _toggleCorrectWidgets(defineCorrect);\n            }\n\n            formElement.setChangeCallbacks(widget.$responseForm, response, {\n                identifier : function(response, value){\n                    response.id(value);\n                    interaction.attr('responseIdentifier', value);\n                },\n                defaultValue : _saveCallbacks.mappingAttr,\n                lowerBound : _saveCallbacks.mappingAttr,\n                upperBound : _saveCallbacks.mappingAttr,\n                template : function(response, value){\n\n                    rp.setProcessingType('templateDriven');\n                    response.setTemplate(value);\n                    answerStateHelper.forward(widget);\n                    answerStateHelper.initResponseForm(widget);\n                },\n                defineCorrect : function(response, value){\n                \n                    _toggleCorrectWidgets(value);\n                    answerStateHelper.defineCorrect(response, !!value);\n                }\n            });\n\n            modalFeedbackRule.initFeedbacksPanel($('.feedbackRule-panel', widget.$responseForm), response);\n\n            formElement.initWidget(widget.$responseForm);\n        },\n        isCorrectDefined : function(widget){\n            var response = widget.element.getResponseDeclaration();\n            return !!_.size(response.getCorrect());\n        }\n    };\n\n    /**\n     * Get available rp templates accoding to interaction type and response processing type\n     * \n     * @todo refactor this : check if \n     * @param {object} interaction\n     * @returns {object} templates\n     */\n    var _getAvailableRpTemplates = function(interaction){\n\n        var templates = {\n            'CUSTOM' : 'custom',\n            'MATCH_CORRECT' : 'match correct',\n            'MAP_RESPONSE' : 'map response',\n            'MAP_RESPONSE_POINT' : 'map response'\n        },\n        rp = interaction.getRelatedItem().responseProcessing;\n\n        switch(interaction.qtiClass){\n            case 'orderInteraction':\n            case 'graphicOrderInteraction':\n            case 'extendedTextInteraction':\n                delete templates.MAP_RESPONSE;\n                delete templates.MAP_RESPONSE_POINT;\n                break;\n            case 'selectPointInteraction':\n            case 'extendedTextInteraction':\n                delete templates.MATCH_CORRECT;\n                delete templates.MAP_RESPONSE;\n                break;\n            case 'sliderInteraction':\n                delete templates.MAP_RESPONSE_POINT;\n                delete templates.MAP_RESPONSE;\n                break;\n            default:\n                delete templates.MAP_RESPONSE_POINT;\n        }\n\n        if(rp.processingType === 'templateDriven'){\n            delete templates.CUSTOM;\n        }else{\n            //consider as custom\n        }\n\n        return templates;\n    };\n\n    return answerStateHelper;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'taoQtiItem/qtiCreator/widgets/helpers/content'\n], function(stateFactory, Answer, answerStateHelper, contentHelper){\n\n    var InteractionStateAnswer = stateFactory.create(Answer, function(){\n\n        //add class runtime to display hover style\n        this.widget.$container.addClass('runtime');\n\n        this.initResponseForm();\n\n        this.widget.$responseForm.show();\n\n        contentHelper.changeInnerWidgetState(this.widget, 'inactive');\n\n    }, function(){\n\n        //remove runtime style\n        this.widget.$container.removeClass('runtime');\n\n        this.widget.$responseForm.empty().hide();\n        \n        contentHelper.changeInnerWidgetState(this.widget, 'sleep');\n    });\n\n    //default initResponseForm will intialize the common form applicable to most of the interactions\n    //some exception might be stringInteractions that require additional baseType selection\n    //therfore, in the case of stringInteractions, please overwrite the prototype function with a new implementation\n    InteractionStateAnswer.prototype.initResponseForm = function(){\n\n        var _widget = this.widget;\n\n        answerStateHelper.initResponseForm(_widget);\n\n        _widget.on('responseTemplateChange', function(){\n            answerStateHelper.forward(_widget);\n        });\n    };\n\n    return InteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct'\n], function(stateFactory, Correct){\n\n    var InteractionStateCorrect = stateFactory.create(Correct, function(){\n        //use default [data-edit=\"correct\"].show();\n    }, function(){\n        //use default [data-edit=\"correct\"].hide();\n    });\n\n    return InteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Map',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Map, answerState){\n\n    var InteractionStateMap = stateFactory.create(Map, function(){\n        \n        //use default [data-edit=\"map\"].show();\n        \n        var $correctWidgets = this.widget.$container.find('[data-edit=\"correct\"]');\n        \n        //check if the interaction response has a correct defined and show correct if so:\n        if(answerState.isCorrectDefined(this.widget)){\n            $correctWidgets.show();\n        }else{\n            $correctWidgets.hide();\n        }\n        \n    }, function(){\n        //use default [data-edit=\"map\"].hide();\n        \n        //plus, hide correct widget\n        this.widget.$container.find('[data-edit=\"correct\"]').hide();\n    });\n\n    return InteractionStateMap;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/states/Custom',['taoQtiItem/qtiCreator/widgets/states/factory'], function(stateFactory){\n    return stateFactory.create('custom', ['answer', 'active'], function(){\n        throw new Error('state \"custom\" prototype init method must be implemented');\n    },function(){\n        throw new Error('state \"custom\" prototype exit method must be implemented');\n    });\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/Custom',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Custom',\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay',\n    'i18n'\n], function(stateFactory, Custom, overlayTpl, __){\n\n    var InteractionStateCustom = stateFactory.create(Custom, function(){\n        //use default [data-edit=\"custom\"].show();\n        this.widget.$container.append(overlayTpl({\n            message : __('Custom Response Processing Mode')\n        }));\n        var $e = this.widget.$container.find('[data-edit=map], [data-edit=correct]').hide();\n        \n        //ok button z-index\n    }, function(){\n        //use default [data-edit=\"custom\"].hide();\n        this.widget.$container.children('.overlay').remove();\n    });\n\n    return InteractionStateCustom;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Active',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Map',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Custom'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger',\n    'i18n'\n], function($, stateFactory, Question, htmlEditor, contentHelper, promptToolbarTpl, __){\n\n    var BlockInteractionStateQuestion = stateFactory.extend(Question, function(){\n\n        this.buildPromptEditor();\n\n    }, function(){\n\n        this.destroyPromptEditor();\n    });\n\n    BlockInteractionStateQuestion.prototype.buildPromptEditor = function(){\n\n        var _widget = this.widget,\n            $editableContainer = _widget.$container.find('.qti-prompt-container'),\n            $editable = $editableContainer.find('.qti-prompt'),\n            container = _widget.element.prompt.getBody();\n\n        //@todo set them in the tpl\n        $editableContainer.attr('data-html-editable-container', true);\n        $editable.attr('data-html-editable', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n\n            var $promptTlb = $(promptToolbarTpl({\n                serial : _widget.serial,\n                state : 'question'\n            }));\n\n            //add toolbar once only:\n            $editableContainer.append($promptTlb);\n            $promptTlb.show();\n\n            htmlEditor.buildEditor($editableContainer, {\n                placeholder : __('define prompt'),\n                change : contentHelper.getChangeCallback(container),\n                data : {\n                    container : container,\n                    widget : _widget\n                }\n            });\n        }\n    };\n\n    BlockInteractionStateQuestion.prototype.destroyPromptEditor = function(){\n\n        var $editableContainer = this.widget.$container.find('.qti-prompt-container');\n        $editableContainer.find('.mini-tlb').remove();\n        htmlEditor.destroyEditor($editableContainer);\n    };\n\n    return BlockInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/associate', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, self=this, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"shuffle\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.shuffle), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shuffle choices\", options) : helperMissing.call(depth0, \"__\", \"Shuffle choices\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be shuffled of fixed individually.\", options) : helperMissing.call(depth0, \"__\", \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be shuffled of fixed individually.\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Number of associations\", options) : helperMissing.call(depth0, \"__\", \"Number of associations\", options)))\n    + \"</h3>\\n\\n    <div>\\n        <label for=\\\"minAssociations\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minAssociations\\\" value=\\\"\";\n  if (helper = helpers.minAssociations) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minAssociations); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n    <div>\\n        <label for=\\\"maxAssociations\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxAssociations\\\" value=\\\"\";\n  if (helper = helpers.maxAssociations) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxAssociations); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper',['taoQtiItem/qtiCreator/helper/adaptSize', 'lodash'], function(adaptSize, _){\n    \n    return {\n        adaptSize : function(widget){\n            _.delay(function(){\n                adaptSize.height(widget.$container.find('.add-option, .result-area .target, .choice-area .qti-choice'));\n            }, 500);\n        }\n    }\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/associate',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper'\n], function(stateFactory, Question, formElement, formTpl, helper){\n\n    var AssociateInteractionStateQuestion = stateFactory.extend(Question);\n\n    AssociateInteractionStateQuestion.prototype.initForm = function(){\n\n       var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            shuffle : !!interaction.attr('shuffle'),\n            minAssociations : parseInt(interaction.attr('minAssociations')),\n            maxAssociations : parseInt(interaction.attr('maxAssociations'))\n        }));\n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'minAssociations', 'maxAssociations');\n        callbacks.shuffle = formElement.getAttributeChangeCallback();\n        formElement.setChangeCallbacks($form, interaction, callbacks);\n        \n        //adapt size\n        helper.adaptSize(_widget);\n        _widget.on('choiceCreated', function(){\n            helper.adaptSize(_widget);\n        });\n    };\n    \n    return AssociateInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper'\n], function(stateFactory, Choice, helper){\n\n    var AssociateInteractionStateChoice = stateFactory.extend(Choice, function(){\n        \n        var widget = this.widget;\n        \n        widget.on('containerBodyChange contentChange choiceCreated', function(){\n            helper.adaptSize(widget);\n        });\n        \n    }, function(){\n        \n    });\n\n    return AssociateInteractionStateChoice;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var AssociateInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        answerStateHelper.forward(this.widget);\n    }, function(){\n        \n    });\n    \n    return AssociateInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/ResponseWidget',[\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'lodash',\n    'i18n'\n], function(commonRenderer, creatorHelper, commonHelper, _, __){\n\n    var ResponseWidget = {\n        create : function(widget, responseMappingMode){\n\n            var interaction = widget.element;\n\n            commonRenderer.destroy(interaction);\n\n            if(responseMappingMode){\n                commonHelper.appendInstruction(widget.element, __('Please define association pairs and their scores below.'));\n                interaction.responseMappingMode = true;\n            }else{\n                commonHelper.appendInstruction(widget.element, __('Please define the correct association pairs below.'));\n            }\n\n            commonRenderer.render(interaction);\n            \n            creatorHelper.adaptSize(widget);\n        },\n        setResponse : function(interaction, response){\n            var responseDeclaration = interaction.getResponseDeclaration();\n            commonRenderer.setResponse(interaction, ResponseWidget.formatResponse(response, responseDeclaration.attr('cardinality')));\n            \n            creatorHelper.adaptSize(interaction.data('widget'));\n            \n        },\n        destroy : function(widget){\n\n            var interaction = widget.element;\n\n            commonRenderer.destroy(interaction);\n\n            delete interaction.responseMappingMode;\n\n            commonRenderer.renderEmptyPairs(interaction);\n            \n            creatorHelper.adaptSize(widget);\n        },\n        getResponseSummary : function(responseDeclaration){\n            \n            var pairs = [],\n                correctResponse = _.values(responseDeclaration.getCorrect()),\n                mapEntries = responseDeclaration.getMapEntries();\n            \n            _.each(correctResponse, function(pair) {\n\n                var sortedIdPair = pair.split(' ').sort(),\n                    sortedIdPairKey = sortedIdPair.join(' ');\n\n                pairs[sortedIdPairKey] = {\n                    pair: sortedIdPair,\n                    correct: true,\n                    score: undefined\n                };\n            });\n\n            _.forIn(mapEntries, function(score, pair) {\n\n                var sortedIdPair = pair.split(' ').sort(),\n                    sortedIdPairKey = sortedIdPair.join(' ');\n\n                if (!pairs[sortedIdPairKey]) {\n                    pairs[sortedIdPairKey] = {\n                        pair: sortedIdPair,\n                        correct: false,\n                        score: score\n                    };\n                } else {\n                    pairs[sortedIdPairKey].score = score;\n                }\n            });\n            \n            return pairs;\n        },\n        formatResponse : function(response, cardinality){\n\n            var formatedRes;\n            if(cardinality === 'single'){\n                formatedRes = {base : { pair : [] }};\n            } else {\n                formatedRes = {list : { pair : [] }};\n            }\n            \n            _.each(response, function(pairString){\n                var pair = pairString.split(' ');\n                if(cardinality === 'single'){\n                    formatedRes.base.pair = pair;\n                } else {\n                    formatedRes.list.pair.push(pair);\n                }\n            });\n\n            return formatedRes;\n        },\n        unformatResponse : function(formatedResponse){\n\n            var res = [];\n\n            if(formatedResponse.list && formatedResponse.list.pair){\n                _.each(formatedResponse.list.pair, function(pair){\n                    res.push(pair.join(' '));\n                });\n            }else if(formatedResponse.base && formatedResponse.base.pair){\n                res.push(formatedResponse.base.pair.join(' '));\n            }\n            return res;\n        }\n    };\n\n    return ResponseWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/ResponseWidget',\n    'lodash'\n], function(stateFactory, Correct, responseWidget, _){\n\n    var AssociateInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        var interaction = this.widget.element,\n            response = interaction.getResponseDeclaration();\n\n        responseWidget.create(this.widget, false);\n        responseWidget.setResponse(interaction, _.values(response.getCorrect()));\n\n        this.widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(responseWidget.unformatResponse(data.response));\n        });\n\n    }, function(){\n\n        this.widget.$container.off('responseChange.qti-widget');\n\n        responseWidget.destroy(this.widget);\n    });\n\n    return AssociateInteractionStateCorrect;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/associableChoice.answer', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"mini-tlb\\\" data-edit=\\\"answer\\\" data-for=\\\"\";\n  if (helper = helpers.choiceSerial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceSerial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <label class=\\\"tlb-button right\\\" title=\\\"This answer is correct\\\" data-edit=\\\"correct\\\">\\n        <input \\n            type=\\\"checkbox\\\" \\n            data-role=\\\"correct\\\"\\n            name=\\\"correct_\";\n  if (helper = helpers.interactionSerial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.interactionSerial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"[]\\\" \\n            value=\\\"\";\n  if (helper = helpers.choiceIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.correct), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n    </label>\\n    <label class=\\\"tlb-button right\\\" title=\\\"Score of this answer\\\" data-edit=\\\"map\\\">\\n        <input value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" data-role=\\\"score\\\" data-for=\\\"\";\n  if (helper = helpers.choiceIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" name=\\\"score\\\" class=\\\"score\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\\n    </label>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Map',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/ResponseWidget',\n    'lodash',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/associableChoice.answer'\n], function($, stateFactory, Map, responseWidget, _, responseToolbarTpl){\n\n    var AssociateInteractionStateCorrect = stateFactory.create(Map, function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //init response widget in responseMapping mode:\n        responseWidget.create(_widget, true);\n\n        //start bind events to detect response changes:\n        this.bindResponseChangeListener();\n\n        //finally, apply defined correct response and response mapping:\n        responseWidget.setResponse(interaction, _.keys(responseWidget.getResponseSummary(response)));\n\n    }, function(){\n\n        this.widget.$container.off('responseChange.qti-widget');\n\n        responseWidget.destroy(this.widget);\n\n        this.widget.$container.find('.mini-tlb').remove();\n    });\n\n    AssociateInteractionStateCorrect.prototype.bindResponseChangeListener = function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //@todo to be mapped to actual value\n        var _defaultMappingValue = 0;\n\n        var _saveCorrect = function(){\n            var correct = [];\n            $('input[name=\"correct_' + _widget.serial + '[]\"]:checked').each(function(){\n                correct.push($(this).data('pairIdentifier'));\n            });\n            response.setCorrect(correct);\n        };\n\n        _widget.$container.on('responseChange.qti-widget', function(e, data, extraData){\n\n            if(extraData.type === 'added'){\n\n                //choice identifier pair:\n                var pair = [],\n                    pairs = [],\n                    $filled = extraData.$pair.children('.filled');\n\n                if($filled.length === 2){\n\n                    pairs = responseWidget.getResponseSummary(response);\n\n                    //the pair is complete:\n                    $filled.each(function(){\n\n                        var serial = $(this).data('serial'),\n                            choice = interaction.getChoice(serial);\n\n                        pair.push(choice.id());\n                    });\n\n                    pair.sort();\n\n                    var pairIdentifier = pair.join(' '),\n                        $miniToolbar = extraData.$pair.children('.mini-tlb');\n\n                    if(!$miniToolbar.length){\n\n                        //if does not exist yet, create it:\n                        extraData.$pair.append(responseToolbarTpl({\n                            interactionSerial : interaction.getSerial(),\n                            choiceSerial : 'n/a',\n                            choiceIdentifier : 'n/a'\n                        }));\n\n                        $miniToolbar = extraData.$pair.children('.mini-tlb');\n                    }\n                    $miniToolbar.show();\n                    $miniToolbar.data('pairIdentifier', pairIdentifier);\n\n                    var $correct = $miniToolbar.find('[data-role=correct]').data('pairIdentifier', pairIdentifier);\n                    if(pairs[pairIdentifier] && pairs[pairIdentifier].correct){\n                        $correct.prop('checked', true);\n                    }else{\n                        $correct.prop('checked', false);\n                    }\n\n                    var $score = $miniToolbar.find('[data-role=score]').data('pairIdentifier', pairIdentifier);\n                    if(pairs[pairIdentifier] && pairs[pairIdentifier].score){\n                        $score.val(pairs[pairIdentifier].score);\n                    }else{\n                        //@todo set _defaultMappingValue as placeholder text:\n                        $score.val(_defaultMappingValue);\n                    }\n                }\n\n            }else{\n\n                //reset and hide toolbar\n                $miniToolbar = extraData.$pair.children('.mini-tlb');\n                $miniToolbar.hide();\n\n                //before resetting the correct and score inputs, remove the current map entry from the response:\n                response.removeMapEntry($miniToolbar.data('pairIdentifier'));\n\n                $miniToolbar.removeData('pairIdentifier');\n                $miniToolbar.find('[data-role=correct]').prop('checked', false).removeData('pairIdentifier');\n                $miniToolbar.find('[data-role=score]').val(_defaultMappingValue).removeData('pairIdentifier');\n\n                //finally update the correct response\n                _saveCorrect();\n            }\n        });\n\n        _widget.$container.find('.result-area')\n            .on('change', '[data-role=correct]', _saveCorrect)\n            .on('keyup', '[data-role=score]', function(){\n            var $score = $(this);\n            response.setMapEntry($score.data('pairIdentifier'), $score.val());\n        });\n    };\n\n    return AssociateInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Choice',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/helper'\n], function(Widget, states, helper){\n\n    var AssociateInteractionWidget = Widget.clone();\n\n    AssociateInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n        \n        helper.adaptSize(this);\n    };\n    \n    return AssociateInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/AssociateInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/Widget'\n], function(_, AssociateInteraction, AssociateInteractionWidget){\n\n    var CreatorAssociateInteraction = _.clone(AssociateInteraction);\n\n    CreatorAssociateInteraction.render = function(interaction, options){\n        \n        AssociateInteraction.renderEmptyPairs(interaction);\n        \n        return AssociateInteractionWidget.build(\n            interaction,\n            AssociateInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorAssociateInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/choiceInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" horizontal\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-choiceInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"choiceInteraction\\\">\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  <div class=\\\"instruction-container\\\"></div>\\n  <ol class=\\\"plain block-listing solid choice-area\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n      \";\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </ol>\\n  <div class=\\\"notification-container\\\"></div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/choiceInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, $, __, tpl, Helper, pciResponse){\n\n    /**\n     * 'pseudo-label' is technically a div that behaves like a label.\n     * This allows the usage of block elements inside the fake label\n     */\n    var pseudoLabel = function(interaction){\n\n        var $container = Helper.getContainer(interaction);\n\n        $container.off('.commonRenderer');\n\n        $container.on('click.commonRenderer', '.qti-choice', function(e){\n\n            e.preventDefault();\n            e.stopPropagation();//required toherwise any tao scoped ,i/form initialization might prevent it from working\n\n            var $box = $(this);\n            var $radios = $box.find('input:radio').not('[disabled]').not('.disabled');\n            var $checkboxes = $box.find('input:checkbox').not('[disabled]').not('.disabled');\n\n            if($radios.length){\n                $radios.not(':checked').prop('checked', true);\n                $radios.trigger('change');\n            }\n\n            if($checkboxes.length){\n                $checkboxes.prop('checked', !$checkboxes.prop('checked'));\n                $checkboxes.trigger('change');\n            }\n\n            Helper.validateInstructions(interaction, {choice : $box});\n            Helper.triggerResponseChangeEvent(interaction);\n\n        });\n\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10278\n     * \n     * @param {object} interaction\n     */\n    var render = function(interaction){\n        pseudoLabel(interaction);\n        _setInstructions(interaction);\n    };\n\n    var _setInstructions = function(interaction){\n\n        var min = interaction.attr('minChoices'),\n            max = interaction.attr('maxChoices'),\n            choiceCount = _.size(interaction.getChoices()),\n            minInstructionSet = false;\n\n        //if maxChoice = 1, use the radio gorup behaviour\n        //if maxChoice = 0, inifinite choice possible\n        if(max > 1 && max < choiceCount){\n\n            var highlightInvalidInput = function($choice){\n                var $input = $choice.find('.real-label > input'),\n                    $li = $choice.css('color', '#BA122B'),\n                    $icon = $choice.find('.real-label > span').css('color', '#BA122B').addClass('cross error');\n\n                setTimeout(function(){\n                    $input.prop('checked', false);\n                    $li.removeAttr('style');\n                    $icon.removeAttr('style').removeClass('cross');\n                    Helper.triggerResponseChangeEvent(interaction);\n                }, 150);\n            };\n\n            if(max === min){\n                minInstructionSet = true;\n                var msg = __('You must select exactly') + ' ' + max + ' ' + __('choices');\n                Helper.appendInstruction(interaction, msg, function(data){\n                    if(_getRawResponse(interaction).length >= max){\n                        this.setLevel('success');\n                        if(this.checkState('fulfilled')){\n                            this.update({\n                                level : 'warning',\n                                message : __('Maximum choices reached'),\n                                timeout : 2000,\n                                start : function(){\n                                    highlightInvalidInput(data.choice);\n                                },\n                                stop : function(){\n                                    this.update({level : 'success', message : msg});\n                                }\n                            });\n                        }\n                        this.setState('fulfilled');\n                    }else{\n                        this.reset();\n                    }\n                });\n            }else if(max > min){\n                Helper.appendInstruction(interaction, __('You can select maximum') + ' ' + max + ' ' + __('choices'), function(data){\n                    if(_getRawResponse(interaction).length >= max){\n                        this.setMessage(__('Maximum choices reached'));\n                        if(this.checkState('fulfilled')){\n                            this.update({\n                                level : 'warning',\n                                timeout : 2000,\n                                start : function(){\n                                    highlightInvalidInput(data.choice);\n                                },\n                                stop : function(){\n                                    this.setLevel('info');\n                                }\n                            });\n                        }\n                        this.setState('fulfilled');\n                    }else{\n                        this.reset();\n                    }\n                });\n            }\n        }\n\n        if(!minInstructionSet && min > 0 && min < choiceCount){\n            Helper.appendInstruction(interaction, __('You must select at least') + ' ' + min + ' ' + __('choices'), function(){\n                if(_getRawResponse(interaction).length >= min){\n                    this.setLevel('success');\n                }else{\n                    this.reset();\n                }\n            });\n        }\n    };\n\n    var resetResponse = function(interaction){\n        Helper.getContainer(interaction).find('.real-label > input').prop('checked', false);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10278\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var $container = Helper.getContainer(interaction);\n\n        try{\n            _.each(pciResponse.unserialize(response, interaction), function(identifier){\n                $container.find('.real-label > input[value=' + identifier + ']').prop('checked', true);\n            });\n            Helper.validateInstructions(interaction);\n        }catch(e){\n            throw new Error('wrong response format in argument : ' + e);\n        }\n    };\n\n    var _getRawResponse = function(interaction){\n        var values = [];\n        Helper.getContainer(interaction).find('.real-label > input[name=response-' + interaction.getSerial() + ']:checked').each(function(){\n            values.push($(this).val());\n        });\n        return values;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10278\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    var getCustomData = function(interaction, data){\n        return _.merge(data || {}, {\n            horizontal : (interaction.attr('orientation') === 'horizontal')\n        });\n    };\n\n    var destroy = function(interaction){\n\n        //remove event\n        $(document).off('.commonRenderer');\n        Helper.getContainer(interaction).off('.commonRenderer');\n\n        //destroy response\n        resetResponse(interaction);\n\n        //remove instructions\n        Helper.removeInstructions(interaction);\n\n    };\n\n    return {\n        qtiClass : 'choiceInteraction',\n        template : tpl,\n        getData : getCustomData,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/choice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, self=this, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"shuffle\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.shuffle), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shuffle choices\", options) : helperMissing.call(depth0, \"__\", \"Shuffle choices\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be \\\"shuffled\\\" of \\\"fixed\\\" individually.\", options) : helperMissing.call(depth0, \"__\", \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be \\\"shuffled\\\" of \\\"fixed\\\" individually.\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of choices\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of choices\", options)))\n    + \"</h3>\\n\\n    <div>\\n        <label for=\\\"minChoices\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minChoices\\\" value=\\\"\";\n  if (helper = helpers.minChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n    <div>\\n        <label for=\\\"maxChoices\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxChoices\\\" value=\\\"\";\n  if (helper = helpers.maxChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n            <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/choice',\n    'lodash'\n], function(stateFactory, Question, formElement, interactionFormElement, formTpl, _){\n\n    var ChoiceInteractionStateQuestion = stateFactory.extend(Question);\n\n    ChoiceInteractionStateQuestion.prototype.initForm = function(updateCardinality){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            shuffle : !!interaction.attr('shuffle'),\n            maxChoices : parseInt(interaction.attr('maxChoices')),\n            minChoices : parseInt(interaction.attr('minChoices')),\n            choicesCount : _.size(_widget.element.getChoices())\n        }));\n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'minChoices', 'maxChoices', {updateCardinality:updateCardinality});\n        callbacks.shuffle = formElement.getAttributeChangeCallback();\n        formElement.setChangeCallbacks($form, interaction, callbacks);\n        \n        interactionFormElement.syncMaxChoices(_widget);\n        \n        //modify the checkbox/radio input appearances\n        _widget.on('attributeChange', function(data){\n            \n            var $checkboxIcons = _widget.$container.find('.real-label > span');\n            \n            if(data.element.serial === interaction.serial && data.key === 'maxChoices'){\n                if(parseInt(data.value) === 1){\n                    //radio\n                    $checkboxIcons.removeClass('icon-checkbox').addClass('icon-radio');\n                }else{\n                    //checkbox\n                    $checkboxIcons.removeClass('icon-radio').addClass('icon-checkbox');\n                }\n            }\n        });\n    };\n\n    return ChoiceInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var ChoiceInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        \n        //forward to one of the available sub state, according to the response processing template\n        answerStateHelper.forward(this.widget);\n        \n    }, function(){\n        \n    });\n    \n    return ChoiceInteractionStateAnswer;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.score', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"mini-tlb\\\" data-edit=\\\"answer\\\" data-for=\\\"\";\n  if (helper = helpers.choiceSerial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceSerial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <label class=\\\"tlb-button right\\\" title=\\\"Score of this answer\\\" data-edit=\\\"map\\\">\\n        <input value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n       title=\\\"Score of this answer\\\" \\n       type=\\\"text\\\" \\n       data-for=\\\"\";\n  if (helper = helpers.choiceIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n       name=\\\"score\\\" \\n       class=\\\"score\\\" \\n       placeholder = \\\"\";\n  if (helper = helpers.placeholder) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.placeholder); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n       data-validate=\\\"$numeric\\\" \\n       data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\\n    </label>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.label', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, self=this, functionType=\"function\", escapeExpression=this.escapeExpression;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"style=\\\"display:block;\\\"\";\n  }\n\n  buffer += \"<div class=\\\"mini-tlb-label\\\" data-edit=\\\"answer\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.show), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    <label class=\\\"right\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</label>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget',[\n    'jquery',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.score',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/simpleChoice.label',\n    'lodash',\n    'i18n',\n    'polyfill/placeholders'\n], function($, commonRenderer, helper, pciResponse, formElement, answerStateHelper, scoreTpl, labelTpl, _, __){\n\n    var _fixInputs = function(widget){\n\n        if(widget.element.attr('maxChoices') === 1){\n            //enforce radios:\n            widget.$container.find('.real-label > :checkbox').replaceWith(function(){\n\n                var $checkbox = $(this);\n\n                return $('<input>', {\n                    type : 'radio',\n                    value : $checkbox.attr('value'),\n                    name : $checkbox.attr('name')\n                });\n\n            });\n\n        }else{\n\n            //enforce radios:\n            widget.$container.find('.real-label > :radio').replaceWith(function(){\n\n                var $radio = $(this);\n\n                return $('<input>', {\n                    type : 'checkbox',\n                    value : $radio.attr('value'),\n                    name : $radio.attr('name')\n                });\n\n            });\n        }\n\n    };\n\n    var ResponseWidget = {\n        create : function(widget, responseMappingMode){\n\n            var interaction = widget.element;\n\n            commonRenderer.destroy(interaction);\n\n            _fixInputs(widget);\n\n            if(responseMappingMode){\n                helper.appendInstruction(widget.element, __('Please define the correct response and the score below.'));\n                interaction.data('responseMappingMode', true);\n                ResponseWidget.createScoreWidgets(widget);\n                ResponseWidget.createCorrectWidgets(widget);\n            }else{\n                helper.appendInstruction(widget.element, __('Please define the correct response below.'));\n                ResponseWidget.createCorrectWidgets(widget);\n            }\n\n            commonRenderer.render(interaction);\n\n        },\n        setResponse : function(interaction, response){\n\n            commonRenderer.setResponse(interaction, pciResponse.serialize(_.values(response), interaction));\n        },\n        destroy : function(widget){\n\n            var interaction = widget.element;\n\n            commonRenderer.destroy(interaction);\n\n            interaction.removeData('responseMappingMode');\n\n            widget.$container.off('responseChange.qti-widget');\n\n            widget.$container.find('.real-label > input').attr('disabled', 'disabled');\n\n            widget.$container.find('.mini-tlb-label[data-edit=answer], .mini-tlb[data-edit=answer]').remove();\n        },\n        createScoreWidgets : function(widget){\n\n            var $container = widget.$container,\n                interaction = widget.element,\n                response = interaction.getResponseDeclaration(),\n                mapEntries = response.getMapEntries(),\n                defaultValue = response.getMappingAttribute('defaultValue');\n\n            var $label = $(labelTpl({\n                label : __('score'),\n                show : true\n            })).css({\n                right : 3,\n                left : 'auto'\n            });\n\n            $container.find('.qti-choice:first .pseudo-label-box').append($label);\n\n            $container.find('.qti-choice').each(function(){\n\n                var $choice = $(this),\n                    id = $choice.data('identifier'),\n                    serial = $choice.data('serial'),\n                    $score;\n\n                $score = $(scoreTpl({\n                    serial : interaction.getSerial(),\n                    choiceSerial : serial,\n                    choiceIdentifier : id,\n                    score : mapEntries[id] ? mapEntries[id] : '',\n                    placeholder : defaultValue\n                }));\n\n                $choice.find('.pseudo-label-box').append($score);\n\n                $score.show().on('click', function(e){\n                    e.stopPropagation();\n                    e.preventDefault();\n                });\n\n            });\n\n            //add placeholder text to show the default value\n            var $scores = $container.find('.score');\n            widget.on('mappingAttributeChange', function(data){\n                if(data.key === 'defaultValue'){\n                    $scores.attr('placeholder', data.value);\n                }\n            });\n\n            formElement.setChangeCallbacks($container, response, {\n                score : function(response, value){\n\n                    var key = $(this).data('for');\n\n                    if(value === ''){\n                        response.removeMapEntry(key);\n                    }else{\n                        response.setMapEntry(key, value, true);\n                    }\n\n                }\n            });\n\n        },\n        createCorrectWidgets : function(widget){\n\n            var $container = widget.$container,\n                interaction = widget.element,\n                response = interaction.getResponseDeclaration(),\n                $corrects = $container.find('.real-label > input');\n\n            $container.find('.qti-choice:first .pseudo-label-box').append(labelTpl({\n                label : __('correct'),\n                show : false\n            }));\n\n            $container.on('responseChange.qti-widget', function(e, data){\n                response.setCorrect(pciResponse.unserialize(data.response, interaction));\n            });\n\n            var _toggleCorrectInputs = function(show){\n                if(show){\n                    $corrects.removeAttr('disabled');\n                }else{\n                    $corrects.attr('disabled', 'disabled').prop('checked', false);\n                }\n            };\n\n            _toggleCorrectInputs(answerStateHelper.defineCorrect(response));\n\n            widget.on('metaChange', function(data){\n                if(data.element.serial === response.serial && data.key === 'defineCorrect'){\n                    _toggleCorrectInputs(data.value);\n                }\n            });\n\n        },\n        formatResponse : function(response){\n            return pciResponse.serialize(_.values(response));\n        },\n        unformatResponse : function(formatedResponse){\n            return pciResponse.unserialize(formatedResponse);\n        }\n    };\n\n    return ResponseWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget',\n    'lodash'\n], function(stateFactory, Correct, responseWidget, _){\n\n    var ChoiceInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //init response widget in responseMapping mode:\n        responseWidget.create(_widget);\n\n        //finally, apply defined correct response and response mapping:\n        responseWidget.setResponse(interaction, _.values(response.getCorrect()));\n\n    }, function(){\n\n        responseWidget.destroy(this.widget);\n\n    });\n\n    return ChoiceInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Map',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/ResponseWidget',\n    'lodash'\n], function(stateFactory, Map, responseWidget, _){\n\n    var ChoiceInteractionStateMap = stateFactory.create(Map, function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //init response widget in responseMapping mode:\n        responseWidget.create(_widget, true);\n\n        //finally, apply defined correct response and response mapping:\n        responseWidget.setResponse(interaction, _.values(response.getCorrect()));\n\n    }, function(){\n\n        responseWidget.destroy(this.widget);\n\n    });\n\n    return ChoiceInteractionStateMap;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/states'\n], function(Widget, states){\n\n    var ChoiceInteractionWidget = Widget.clone();\n\n    ChoiceInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return ChoiceInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/ChoiceInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/Widget'\n], function(_, ChoiceInteraction, ChoiceInteractionWidget){\n    \n    var CreatorChoiceInteraction = _.clone(ChoiceInteraction);\n\n    CreatorChoiceInteraction.render = function(interaction, options){\n        \n        return ChoiceInteractionWidget.build(\n            interaction,\n            ChoiceInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorChoiceInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/extendedTextInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n        \";\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.program(8, program8, data),fn:self.program(4, program4, data),data:data},helper ? helper.call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format), \"xhtml\", options) : helperMissing.call(depth0, \"equal\", ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format), \"xhtml\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \\n        \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxLength), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxWords), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.maxStringLoop), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  return buffer;\n  }\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n                <div class=\\\"text-container text-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" solid\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" name=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"_\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\" contenteditable></div>\\n            \";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  \n  return \" attributes.class\";\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.maxStringLoop), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  return buffer;\n  }\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n                <textarea class=\\\"text-container text-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" solid\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" name=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"_\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.patternMask), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"></textarea>\\n            \";\n  return buffer;\n  }\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"pattern=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.patternMask)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program12(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"We expect about\", options) : helperMissing.call(depth0, \"__\", \"We expect about\", options)))\n    + \" \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"chars\", depth0, options) : helperMissing.call(depth0, \"__\", \"chars\", depth0, options)))\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"It's just an indication.\", options) : helperMissing.call(depth0, \"__\", \"It's just an indication.\", options)))\n    + \"\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"You are now at\", options) : helperMissing.call(depth0, \"__\", \"You are now at\", options)))\n    + \" <span class=\\\"count-chars\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"char(s)\", options) : helperMissing.call(depth0, \"__\", \"char(s)\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"You can enter a maximum of\", options) : helperMissing.call(depth0, \"__\", \"You can enter a maximum of\", options)))\n    + \" \";\n  if (helper = helpers.maxLength) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxLength); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"chars\", depth0, options) : helperMissing.call(depth0, \"__\", \"chars\", depth0, options)))\n    + \"\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"You are now at\", options) : helperMissing.call(depth0, \"__\", \"You are now at\", options)))\n    + \" <span class=\\\"count-chars\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"char(s)\", options) : helperMissing.call(depth0, \"__\", \"char(s)\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\nfunction program16(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n            <div class=\\\"text-counter\\\">\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"You can enter a maximum of\", options) : helperMissing.call(depth0, \"__\", \"You can enter a maximum of\", options)))\n    + \" \";\n  if (helper = helpers.maxWords) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxWords); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \" \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"words\", depth0, options) : helperMissing.call(depth0, \"__\", \"words\", depth0, options)))\n    + \"\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"You are now at\", options) : helperMissing.call(depth0, \"__\", \"You are now at\", options)))\n    + \" <span class=\\\"count-words\\\">0</span> \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"words(s)\", options) : helperMissing.call(depth0, \"__\", \"words(s)\", options)))\n    + \".\\n            </div>\\n        \";\n  return buffer;\n  }\n\nfunction program18(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n        \";\n  stack1 = (helper = helpers.equal || (depth0 && depth0.equal),options={hash:{},inverse:self.program(21, program21, data),fn:self.program(19, program19, data),data:data},helper ? helper.call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format), (depth0 && depth0.xhtml), options) : helperMissing.call(depth0, \"equal\", ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format), (depth0 && depth0.xhtml), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \\n        \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.expectedLength), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxLength), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxWords), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program19(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <div class=\\\"text-container text-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" solid\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" contenteditable></div>\\n        \";\n  return buffer;\n  }\n\nfunction program21(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <textarea class=\\\"text-container text-\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.format)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" solid\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class']), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.patternMask), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"></textarea>\\n        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-extendedTextInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"extendedTextInteraction\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.multiple), {hash:{},inverse:self.program(18, program18, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',[\n    'lodash',\n    'jquery',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/extendedTextInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'i18n',\n    'ckeditor',\n    'taoQtiItem/qtiCreator/editor/ckEditor/ckConfigurator',\n    'polyfill/placeholders'\n], function(_, $, tpl, Helper, __, ckEditor ,ckConfigurator){\n\n    'use strict';\n    /**\n     * Setting the pattern mask for the input, for browsers which doesn't support this feature\n     * @param {jQuery} $element\n     * @param {string} pattern\n     * @returns {undefined}\n     */\n    var _setPattern = function($element, pattern){\n        var patt = new RegExp('^'+pattern+'$');\n\n        //test when some data is entering in the input field\n        //@todo plug the validator + tooltip\n        $element.on('keyup', function(){\n            $element.removeClass('field-error');\n            if(!patt.test($element.val())){\n                $element.addClass('field-error');\n            }\n        });\n    };\n\n    /**\n     * Whether or not multiple strings are expected from the candidate to\n     * compose a valid response.\n     *\n     * @param {object} interaction\n     * @returns {boolean}\n     */\n    var _isMultiple = function(interaction) {\n        var attributes = interaction.getAttributes();\n        var response = interaction.getResponseDeclaration();\n        return !!(attributes.maxStrings && (response.attr('cardinality') === 'multiple' || response.attr('cardinality') === 'ordered'));\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     *\n     * @param {object} interaction\n     */\n    var render = function(interaction){\n        var attributes = interaction.getAttributes();\n        var $container = interaction.getContainer();\n        var response = interaction.getResponseDeclaration();\n        var multiple = _isMultiple(interaction);\n\n        var $el, expectedLength, expectedLines, placeholderType;\n\n        // ckEditor config event.\n        ckEditor.on('instanceCreated', function(event) {\n            var editor = event.editor,\n                toolbarType = 'extendedText';\n\n            editor.on('configLoaded', function(e) {\n                editor.config = ckConfigurator.getConfig(editor, toolbarType, ckeOptions);\n                editor.disableAutoInline = false; // NOT A GOOD IDEA, JUST TRY\n            });\n\n            editor.on('change', function(e) {\n                Helper.triggerResponseChangeEvent(interaction, {});\n            });\n        });\n\n\n        // if the input is textarea\n        if (!multiple) {\n            $el = $container.find('textarea');\n            var ckeOptions = {\n               extraPlugins: 'confighelper',\n               resize_enabled: true\n            };\n            //setting the placeholder for the textarea\n            if (attributes.placeholderText) {\n                $el.attr('placeholder', attributes.placeholderText);\n            }\n            // Enable ckeditor only if text format is 'xhtml'.\n            if (_getFormat(interaction) === 'xhtml') {\n                //replace the textarea with ckEditor\n                var editor = ckEditor.replace($container.find('.text-container')[0], ckeOptions);\n                $container.data('editor', editor);\n\n            }\n            else {\n                $el.bind('keyup change', function(e) {\n                    Helper.triggerResponseChangeEvent(interaction, {});\n                });\n            }\n            if (attributes.expectedLength || attributes.expectedLines || attributes.patternMask) {\n                var $textarea = $('.text-container', $container),\n                    $charsCounter = $('.count-chars',$container),\n                    $wordsCounter = $('.count-words',$container);\n\n                if (attributes.patternMask !== \"\") {\n                    var maxWords = _parsePattern(attributes.patternMask, 'words'),\n                        maxLength = _parsePattern(attributes.patternMask, 'chars');\n                    maxWords = (isNaN(maxWords)) ? undefined : maxWords;\n                    maxLength = (isNaN(maxLength) ? undefined : maxLength);\n                }\n\n                var counter = function(){\n                    var regex = /\\s+/gi,\n                    editor = $container.data('editor'),\n                    value = (_getFormat(interaction) === \"xhtml\") ?  $('<div>' + editor.getData() + '</div>').text() : $textarea.val(),\n                    wordCount = value.trim().replace(regex, ' ').split(' ').length,\n                    charCount = value.trim().length;\n                    // var charCountNoSpaces = value.trim().replace(regex,'').length;\n                    $charsCounter.text(charCount);\n                    $wordsCounter.text(wordCount);\n\n                    if ((maxWords && wordCount > maxWords) || (maxLength && charCount > maxLength)){\n                        value = (_getFormat(interaction) === \"xhtml\") ?  editor.getData() : $textarea.val();\n                        value = value.replace(/\\s{2,}/g, ' ').substring(0,value.length -1);\n                        if(attributes.format === \"xhtml\"){\n                            editor.setData(value);\n                            var range = editor.createRange();\n                            range.moveToPosition( range.root, CKEDITOR.POSITION_BEFORE_END );\n                            editor.getSelection().selectRanges( [ range ] );\n                        }else{\n                            $textarea.val(value);\n                        }\n                    }\n                };\n\n\n                if (_getFormat(interaction) === \"xhtml\") {\n                    $container.data('editor').on('change',function(){counter();});\n                }else{\n                    $textarea.on('change keydown keypressed keyup blur focus',function(){counter();});\n                }\n\n            }\n\n        }\n        else {\n            $el = $container.find('input');\n\n            //setting the checking for minimum number of answers\n            if (attributes.minStrings) {\n\n                //get the number of filled inputs\n                var _getNumStrings = function($element) {\n\n                    var num = 0;\n\n                    $element.each(function() {\n                        if ($(this).val() !== '') {\n                            num++;\n                        }\n                    });\n\n                    return num;\n                };\n\n                var minStrings = parseInt(attributes.minStrings);\n\n                if (minStrings > 0) {\n\n                    $el.on('blur', function() {\n                        setTimeout(function() {\n                            //checking if the user was clicked outside of the input fields\n                            if (!$el.is(':focus') && _getNumStrings($el) < minStrings) {\n                                Helper.appendNotification(interaction, __('The minimum number of answers is ') + ' : ' + minStrings, 'warning');\n                            }\n                        }, 100);\n                    });\n                }\n            }\n\n            //set the fields width\n            if (attributes.expectedLength) {\n                expectedLength = parseInt(attributes.expectedLength, 10);\n\n                if (expectedLength > 0) {\n                    $el.each(function() {\n                        $(this).css('width', expectedLength + 'em');\n                    });\n                }\n            }\n\n            //set the fileds pattern mask\n            if (attributes.patternMask) {\n                $el.each(function() {\n                    _setPattern($(this), attributes.patternMask);\n                });\n            }\n\n            //set the fileds placeholder\n            if (attributes.placeholderText) {\n                /**\n                 * The type of the fileds placeholder:\n                 * multiple - set placeholder for each field\n                 * first - set placeholder only for first field\n                 * none - dont set placeholder\n                 */\n                placeholderType = 'first';\n\n                if (placeholderType === 'multiple') {\n                    $el.each(function() {\n                        $(this).attr('placeholder', attributes.placeholderText);\n                    });\n                }\n                else if (placeholderType === 'first') {\n                    $el.first().attr('placeholder', attributes.placeholderText);\n                }\n            }\n        }\n    };\n\n    var resetResponse = function(interaction) {\n        interaction.getContainer().find('input, textarea').val('');\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     *\n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response) {\n\n        var _setMultipleVal = function(identifier, value) {\n            interaction.getContainer().find('#'+identifier).val(value);\n        };\n\n        var _setVal = function(value) {\n            interaction.getContainer().find('textarea').val(value);\n        };\n\n        var baseType = interaction.getResponseDeclaration().attr('baseType');\n\n        if (response.base && response.base[baseType] !== undefined) {\n            _setVal(response.base[baseType]);\n        }\n        else if (response.list && response.list[baseType]) {\n\n            for (var i in response.list[baseType]) {\n                var serial = (response.list.serial === undefined) ? '' : response.list.serial[i];\n                _setMultipleVal(serial + '_' + i, response.list[baseType][i]);\n            }\n\n        }\n        else {\n            throw new Error('wrong response format in argument.');\n        }\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     *\n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     *\n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     *\n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction) {\n\n        var $container = interaction.getContainer();\n        var attributes = interaction.getAttributes();\n        var responseDeclaration = interaction.getResponseDeclaration();\n        var baseType = responseDeclaration.attr('baseType');\n        var numericBase = attributes.base || 10;\n        var multiple = !!(attributes.maxStrings && (responseDeclaration.attr('cardinality') === 'multiple' || responseDeclaration.attr('cardinality') === 'ordered'));\n        var ret = multiple ? {list:{}} : {base:{}};\n\n        if (multiple) {\n\n            var values = [];\n\n            $container.find('input').each(function(i) {\n\n                var $el = $(this);\n\n                if (attributes.placeholderText && $el.val() === attributes.placeholderText) {\n                    values[i] = '';\n                }\n                else {\n                    if (baseType === 'integer') {\n                        values[i] = parseInt($el.val(), numericBase);\n                        values[i] = isNaN(values[i]) ? '' : values[i];\n                    }\n                    else if(baseType === 'float') {\n                        values[i] = parseFloat($el.val());\n                        values[i] = isNaN(values[i]) ? '' : values[i];\n                    }\n                    else if(baseType === 'string') {\n                        values[i] = $el.val();\n                    }\n                }\n            });\n\n            ret.list[baseType] = values;\n        }\n        else {\n\n            var value = '';\n\n            if (attributes.placeholderText && _getTextareaValue(interaction) === attributes.placeholderText) {\n                value = '';\n            }\n            else {\n\n                if (baseType === 'integer') {\n                    value = parseInt(_getTextareaValue(interaction), numericBase);\n                }\n                else if (baseType === 'float') {\n                    value = parseFloat(_getTextareaValue(interaction));\n                }\n                else if (baseType === 'string') {\n                    value = _getTextareaValue(interaction);\n                }\n            }\n\n            ret.base[baseType] = isNaN(value) && typeof value === 'number' ? '' : value;\n        }\n\n        return ret;\n    };\n\n    var _getTextareaValue = function(interaction) {\n        if (_getFormat(interaction) === 'xhtml') {\n            return _ckEditorData(interaction);\n        }\n        else {\n            return Helper.getContainer(interaction).find('textarea').val();\n        }\n    };\n\n    var _ckEditorData = function(interaction) {\n        return Helper.getContainer(interaction).data('editor').getData();\n    };\n\n    var _getFormat = function(interaction) {\n        var format = interaction.attr('format');\n\n        switch (format) {\n            case 'plain':\n            case 'xhtml':\n            case 'preformatted':\n                return format;\n\n            default:\n                return 'plain';\n        }\n    };\n\n    /**\n     * parse the pattern (idealy from patternMask) and return the max words / chars from the pattern\n     * @param  {String} pattern String from patternMask\n     * @param  {String} type    the type of information you want : words / chars\n     * @return {Number|null}    the number extracted of the pattern, or null if not found\n     */\n    var _parsePattern = function(pattern,type){\n        if (pattern === undefined){return null;}\n\n        var regexChar = /\\^\\[\\\\s\\\\S\\]\\{\\d+\\,(\\d+)\\}\\$/,\n        regexWords =  /\\^\\(\\?\\:\\(\\?\\:\\[\\^\\\\s\\\\:\\\\!\\\\\\?\\\\\\;\\\\\\\\\\\\\\]\\+\\)\\[\\\\s\\\\:\\\\!\\\\\\?\\\\;\\\\\\\\\\\\\\]\\*\\)\\{\\d+\\,(\\d+)\\}\\$/,\n        result;\n\n        if (type === \"words\") {\n            result = pattern.match(regexWords);\n            if (result !== null && result.length > 1) {\n                return parseInt(result[1],10);\n            }else{\n                return null;\n            }\n        }else if (type === \"chars\"){\n            result = pattern.match(regexChar);\n\n            if (result !== null && result.length > 1) {\n                return parseInt(result[1],10);\n            }else{\n                return null;\n            }\n        }else{\n            return null;\n        }\n    };\n\n    var updateFormat = function(interaction, from) {\n        var ckeOptions = {};\n        var $container = Helper.getContainer(interaction);\n\n        if ( _getFormat(interaction) === 'xhtml') {\n            var editor = ckEditor.replace($container.find('.text-container')[0], ckeOptions);\n            $container.data('editor', editor);\n        }\n        else {\n            // preFormatted or plain\n            if (from === 'xhtml') {\n                $container.data('editor').destroy();\n            }\n        }\n    };\n\n    var enable = function(interaction) {\n        var ckeOptions = {};\n        var $container = Helper.getContainer(interaction);\n        $container.find('input, textarea').removeAttr('disabled');\n\n        if ( _getFormat(interaction) === 'xhtml') {\n            $container.data('editor').destroy();\n            var editor = ckEditor.replace($container.find('.text-container')[0], ckeOptions);\n            $container.data('editor', editor);\n        }\n    };\n\n    var disable = function(interaction) {\n        var $container = Helper.getContainer(interaction);\n        $container.find('input, textarea').attr('disabled', 'disabled');\n\n        if ( _getFormat(interaction) === 'xhtml' && $container.data('editor')) {\n            $container.data('editor').destroy();\n        }\n    };\n\n    var clearText = function(interaction) {\n        setText(interaction, '');\n    };\n\n    var setText = function(interaction, text) {\n        var $container = Helper.getContainer(interaction);\n\n        if ( _getFormat(interaction) === 'xhtml') {\n            $container.data('editor').setData(text);\n        }\n        else {\n            $container.find('textarea').val(text);\n        }\n    };\n\n    var getCustomData = function(interaction, data){\n        var pattern = interaction.attr('patternMask'),\n            maxWords = parseInt(_parsePattern(pattern,'words')),\n            maxLength = parseInt(_parsePattern(pattern, 'chars')),\n            expectedLength = parseInt(interaction.attr('expectedLines'),10);\n        return _.merge(data || {}, {\n            maxWords : (! isNaN(maxWords)) ? maxWords : undefined,\n            maxLength : (! isNaN(maxLength)) ? maxLength : undefined,\n            attributes : (! isNaN(expectedLength)) ? { expectedLength :  expectedLength * 72} : undefined\n        });\n\n    };\n\n    return {\n        qtiClass : 'extendedTextInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        getData : getCustomData,\n        resetResponse : resetResponse,\n        updateFormat : updateFormat,\n        enable : enable,\n        disable : disable,\n        clearText : clearText,\n        setText : setText\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/extendedText', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    \t\t<option value=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n    \t\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <option value=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n        \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  \n  return \"style=\\\"display:none\\\"\";\n  }\n\nfunction program8(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.patternMask) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.patternMask); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  return escapeExpression(stack1);\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"value=\\\"\";\n  if (helper = helpers.maxLength) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxLength); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program12(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"value=\\\"\";\n  if (helper = helpers.maxWords) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxWords); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.expectedLength) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.expectedLength); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  return escapeExpression(stack1);\n  }\n\nfunction program16(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.expectedLines) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.expectedLines); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  return escapeExpression(stack1);\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label for=\\\"format\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Format\", options) : helperMissing.call(depth0, \"__\", \"Format\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Used to control the format of the text entered by the candidate.\", options) : helperMissing.call(depth0, \"__\", \"Used to control the format of the text entered by the candidate.\", options)))\n    + \"</span>\\n    <select name=\\\"format\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n    \t\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.formats), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </select>\\n</div>\\n<hr>\\n<div class=\\\"panel\\\">\\n    <h3 class=\\\"full-width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Contraints\", options) : helperMissing.call(depth0, \"__\", \"Contraints\", options)))\n    + \"</h3>\\n    <select name=\\\"constraint\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.constraints), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </select>\\n</div>\\n<div class=\\\"panel\\\">\\n    \\n    <div id=\\\"constraint-pattern\\\" \";\n  stack1 = helpers.unless.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.constraints)),stack1 == null || stack1 === false ? stack1 : stack1.pattern)),stack1 == null || stack1 === false ? stack1 : stack1.selected), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n        <label>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"pattern\", options) : helperMissing.call(depth0, \"__\", \"pattern\", options)))\n    + \"\\n        </label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid\", options) : helperMissing.call(depth0, \"__\", \"If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid\", options)))\n    + \"</span>\\n        <input type=\\\"text\\\" name=\\\"patternMask\\\" value=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.patternMask), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"/>\\n    </div>\\n    \\n    <div id=\\\"constraint-maxLength\\\" \";\n  stack1 = helpers.unless.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.constraints)),stack1 == null || stack1 === false ? stack1 : stack1.maxLength)),stack1 == null || stack1 === false ? stack1 : stack1.selected), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n        <label class=\\\"spinner\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Max length\", options) : helperMissing.call(depth0, \"__\", \"Max length\", options)))\n    + \"\\n        </label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"We will use the patternMask to do this, to be compliant with the IMS standard\", options) : helperMissing.call(depth0, \"__\", \"We will use the patternMask to do this, to be compliant with the IMS standard\", options)))\n    + \"</span>\\n        <input type=\\\"text\\\" data-min=\\\"0\\\" data-increment=\\\"1\\\" class=\\\"incrementer\\\" name=\\\"maxLength\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxLength), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\\n    </div>\\n    \\n    <div id=\\\"constraint-maxWords\\\" \";\n  stack1 = helpers.unless.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.constraints)),stack1 == null || stack1 === false ? stack1 : stack1.maxWords)),stack1 == null || stack1 === false ? stack1 : stack1.selected), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n        <label class=\\\"spinner\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Max words\", options) : helperMissing.call(depth0, \"__\", \"Max words\", options)))\n    + \"\\n        </label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"We will use the patternMask to do this, to be compliant with the IMS standard\", options) : helperMissing.call(depth0, \"__\", \"We will use the patternMask to do this, to be compliant with the IMS standard\", options)))\n    + \"</span>\\n        <input type=\\\"text\\\" data-min=\\\"0\\\" data-increment=\\\"1\\\" class=\\\"incrementer\\\" name=\\\"maxWords\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.maxWords), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n    </div>\\n</div>\\n<hr>\\n<div class=\\\"panel\\\">\\n    <h3 class=\\\"full-width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Expectations\", options) : helperMissing.call(depth0, \"__\", \"Expectations\", options)))\n    + \"</h3>\\n    <label class=\\\"spinner\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Length\", options) : helperMissing.call(depth0, \"__\", \"Length\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters.\", options) : helperMissing.call(depth0, \"__\", \"Provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters.\", options)))\n    + \"</span>\\n    <input type=\\\"text\\\" data-min=\\\"0\\\" data-increment=\\\"1\\\" class=\\\"incrementer\\\" name=\\\"expectedLength\\\" value=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.expectedLength), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"/>\\n    <label for=\\\"\\\" class=\\\"spinner\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Lines\", options) : helperMissing.call(depth0, \"__\", \"Lines\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Provides a hint to the candidate as to the expected number of lines of input required. A line is expected to have about 72 characters.\", options) : helperMissing.call(depth0, \"__\", \"Provides a hint to the candidate as to the expected number of lines of input required. A line is expected to have about 72 characters.\", options)))\n    + \"</span>\\n    <input type=\\\"text\\\" class=\\\"incrementer\\\" data-min=\\\"0\\\" data-increment=\\\"1\\\" name=\\\"expectedLines\\\" value=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.expectedLines), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/extendedText'\n], function($, _, __, stateFactory, Question, formElement, renderer, formTpl){\n    'use strict';\n    var initState = function initState(){\n        // Disable inputs until response edition.\n        this.widget.$container.find('input, textarea').attr('disabled', 'disabled');\n    };\n\n    var exitState = function exitState(){\n        // Enable inputs until response edition.\n        this.widget.$container.find('input, textarea').removeAttr('disabled');\n    };\n    var regexChar = /\\^\\[\\\\s\\\\S\\]\\{\\d+\\,(\\d+)\\}\\$/,\n        regexWords =  /\\^\\(\\?\\:\\(\\?\\:\\[\\^\\\\s\\\\:\\\\!\\\\\\?\\\\\\;\\\\\\\\\\\\\\]\\+\\)\\[\\\\s\\\\:\\\\!\\\\\\?\\\\;\\\\\\\\\\\\\\]\\*\\)\\{\\d+\\,(\\d+)\\}\\$/;\n\n    var ExtendedTextInteractionStateQuestion = stateFactory.extend(Question, initState, exitState);\n\n    function parsePattern(pattern,type){\n        if (pattern === undefined || pattern === null){\n            return null;\n        }\n        if (type === \"words\") {\n            //expre = /^(?:(?:[^\\s\\:\\!\\?\\;\\\\]+)[\\s\\:\\!\\?\\;\\\\]*){0,3}$/;\n            var result = pattern.match(regexWords);\n\n            if (result !== null && result.length > 1) {\n                return result[1];\n            }else{\n                return null;\n            }\n        }else if (type === \"chars\"){\n            // This is the original regExp generated by our code\n            // expre = /^[\\s\\S]{0,10}$/;\n            // and we will try to extract the top limit from it with this regexp\n            // wich is mostly just escaped version of the first one.\n            var result = pattern.match(regexChar);\n\n            if (result !== null && result.length > 1) {\n                return result[1];\n            }else{\n                return null;\n            }\n        }else{\n            return null;\n        }\n    }\n\n    ExtendedTextInteractionStateQuestion.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element,\n            format = interaction.attr('format'),\n            patternMask = interaction.attr('patternMask'),\n            expectedLength = parseInt(interaction.attr('expectedLength'), 10),\n            expectedLines = parseInt(interaction.attr('expectedLines'),10),\n            maxWords = parseInt(parsePattern(patternMask,'words'),10),\n            maxChars = parseInt(parsePattern(patternMask,'chars'),10);\n\n        var formats = {\n            plain : {label : __(\"Plain text\"), selected : false},\n            preformatted : {label : __(\"Pre-formatted text\"), selected : false},\n            xhtml : {label : __(\"XHTML\"), selected : false}\n        };\n\n        var constraints = {\n            none : {label : __(\"None\"), selected : true},\n            maxLength : {label : __(\"Max Length\"), selected : false},\n            maxWords : {label : __(\"Max Words\"), selected : false},\n            pattern : {label : __(\"Pattern\"), selected : false}\n        };\n\n        /**\n         * Set the selected on the right items before sending it to the view for constraints\n         */\n        if ( !isNaN(maxWords) && maxWords > 0) {\n            constraints.none.selected = false;\n            constraints.maxWords.selected = true;\n        }else if (!isNaN(maxChars) && maxChars > 0) {\n            constraints.none.selected = false;\n            constraints.maxLength.selected = true;\n        }else if( patternMask !== null && patternMask !== undefined && patternMask !== \"\"){\n            constraints.none.selected = false;\n            constraints.pattern.selected = true;\n        }\n        /**\n         * Set the selected on the right items before sending it to the view for formats\n         */\n        if(formats[format]){\n            formats[format].selected = true;\n        }\n\n\n\n        $form.html(formTpl({\n            formats : formats,\n            patternMask : patternMask,\n            maxWords : maxWords,\n            maxLength : maxChars,\n            expectedLength : expectedLength,\n            expectedLines : expectedLines,\n            constraints : constraints\n\n        }));\n\n        formElement.initWidget($form);\n        //  init data change callbacks\n        var callbacks = {};\n\n        // -- format Callback\n        callbacks.format = function(interaction, attrValue){\n            var response = interaction.getResponseDeclaration();\n            var correctResponse = _.values(response.getCorrect());\n            var previousFormat = interaction.attr('format');\n\n            interaction.attr('format', attrValue);\n            renderer.updateFormat(interaction, previousFormat);\n\n            if(previousFormat === 'xhtml'){\n                if(typeof correctResponse[0] !== 'undefined'){\n                    // Get a correct response with all possible html tags removed.\n                    // (Why not let jquery do that :-) ?)\n                    response.setCorrect($('<p>' + correctResponse[0] + '</p>').text());\n                }\n            }\n        };\n        callbacks.constraint = function(interaction,attrValue){\n            $('[id|=\"constraint\"]').hide('500');\n            $('#constraint-' + attrValue).show('1000');\n            if (attrValue === \"none\") {\n                interaction.attr('patternMask',null);\n                $('[name=\"maxWords\"]').val('');\n                $('[name=\"maxLength\"]').val('');\n            }\n        };\n        callbacks.maxWords = function(interaction, attrValue){\n            // 1. Reset maxLength\n            $('[name=\"maxLength\"]').val('');\n            $('[name=\"patternMask\"]').val('');\n\n            var newValue = parseInt(attrValue,10);\n            if (! isNaN(newValue)) {\n                var newPattern = '/^(?:(?:[^\\\\s\\\\:\\\\!\\\\?\\\\;\\\\\\\\]+)[\\\\s\\\\:\\\\!\\\\?\\\\;\\\\\\\\]*){0,' + newValue.toString() + '}$/';\n                interaction.attr('patternMask', newPattern);\n            }\n        };\n        callbacks.maxLength = function(interaction, attrValue){\n            // 1. Reset maxWords\n            $('[name=\"maxWords\"]').val('');\n            $('[name=\"patternMask\"]').val('');\n\n            var newValue = parseInt(attrValue,10);\n            if(! isNaN(newValue)){\n                var newPattern ='/^[\\\\s\\\\S]{0,' + newValue.toString() + '}$/';\n                interaction.attr('patternMask', newPattern);\n            }\n        };\n        callbacks.patternMask = function(interaction, attrValue){\n            interaction.attr('patternMask', attrValue);\n            /**\n             * If anything is entered inside the patternMask, reset maxWords / maxLength(interaction, attrValue)\n             */\n            $('[name=\"maxWords\"]').val('');\n            $('[name=\"maxLength\"]').val('');\n        };\n\n        callbacks.expectedLength = function(interaction, attrValue){\n            var newValue = parseInt(attrValue,10);\n            if(! isNaN(newValue)){\n                interaction.attr('expectedLength', attrValue);\n            }else{\n                interaction.attr('expectedLength', 0);\n            }\n        };\n\n        callbacks.expectedLines = function(interactions, attrValue){\n            var newValue = parseInt(attrValue,10);\n            if(! isNaN(newValue)){\n                interaction.attr('expectedLines', attrValue);\n            }else{\n                interaction.attr('expectedLines',0);\n            }\n        };\n\n        formElement.setChangeCallbacks($form, interaction, callbacks);\n    };\n\n    return ExtendedTextInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Answer',[\n'taoQtiItem/qtiCreator/widgets/states/factory',\n'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n    'use strict';\n    var ExtendedTextInteractionStateAnswer = stateFactory.extend(Answer, function(){\n\n        // By default, select the correct state when entering response edition.\n        this.widget.changeState('correct');\n\n    }, function(){\n\n    });\n    return ExtendedTextInteractionStateAnswer;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'lodash',\n    'i18n'\n], function(stateFactory, Correct, renderer, helper, _, __){\n    'use strict';\n    var ExtendedTextInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        _createResponseWidget(this.widget);\n\n    }, function(){\n\n        _destroyResponseWidget(this.widget);\n\n    });\n\n    var _createResponseWidget = function(widget){\n\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var correctResponse = _.values(response.getCorrect());\n\n        renderer.enable(interaction);\n        renderer.setText(interaction, correctResponse[0]);\n\n        helper.appendInstruction(interaction, __('Please type the correct response below.'));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect([renderer.getResponse(interaction).base.string]);\n        });\n    };\n\n    var _destroyResponseWidget = function(widget){\n\n        var interaction = widget.element;\n        renderer.clearText(interaction);\n\n        helper.removeInstructions(widget.element);\n        widget.$container.off('responseChange.qti-widget');\n    };\n\n    return ExtendedTextInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/states',[\n'taoQtiItem/qtiCreator/widgets/states/factory',\n'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n'taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Question',\n'taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Answer',\n'taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/Correct',\n\n], function(factory, states){\n    'use strict';\n    return factory.createBundle(states, arguments);\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/Widget',[\n'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n'taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/states/states'\n], function(Widget, states){\n    'use strict';\n    var ExtendedTextInteractionWidget = Widget.clone();\n\n    ExtendedTextInteractionWidget.initCreator = function(){\n        this.registerStates(states);\n        Widget.initCreator.call(this);\n    };\n\n    return ExtendedTextInteractionWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/ExtendedTextInteraction',[\n'lodash',\n'taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction',\n'taoQtiItem/qtiCreator/widgets/interactions/extendedTextInteraction/Widget'\n], function(_, ExtendedTextInteraction,ExtendedTextInteractionWidget){\n    \n    var CreatorExtendedTextInteraction = _.clone(ExtendedTextInteraction);\n    \n    CreatorExtendedTextInteraction.render = function(interaction, options) {\n        \n        ExtendedTextInteraction.render(interaction);\n        \n        return ExtendedTextInteractionWidget.build(\n                interaction,\n                ExtendedTextInteraction.getContainer(interaction),\n                this.getOption('interactionOptionForm'),\n                this.getOption('responseOptionForm'),\n                options\n        );\n    };\n    \n    return CreatorExtendedTextInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/gapMatchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-gapMatchInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"gapMatchInteraction\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <ul class=\\\"choice-area none block-listing solid horizontal source\\\" data-eyecatcher=\\\">li\\\">\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </ul>\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"qti-flow-container\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',[\n    'lodash',\n    'i18n',\n    'jquery',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/gapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'eyecatcher'\n], function(_, __, $, tpl, Helper, pciResponse, eyecatcher){\n\n    /**\n     * Global variable to count number of choice usages:\n     * @type {object}\n     */\n    var _choiceUsages = {};\n\n    var setChoice = function(interaction, $choice, $target){\n\n        var choiceSerial = $choice.data('serial'),\n            choice = interaction.getChoice(choiceSerial);\n\n        if(!_choiceUsages[choiceSerial]){\n            _choiceUsages[choiceSerial] = 0;\n        }\n        _choiceUsages[choiceSerial]++;\n\n        $target\n            .data('serial', choiceSerial)\n            .html($choice.html())\n            .addClass('filled');\n\n        if(!interaction.responseMappingMode &&\n            choice.attr('matchMax') &&\n            _choiceUsages[choiceSerial] >= choice.attr('matchMax')){\n\n            $choice.attr(\"class\", \"deactivated\");\n        }\n\n        Helper.triggerResponseChangeEvent(interaction);\n    };\n\n    var unsetChoice = function(interaction, $choice, animate){\n\n        var serial = $choice.data('serial'),\n            $container = Helper.getContainer(interaction);\n\n        $container.find('.choice-area [data-serial=' + serial + ']').removeClass();\n\n        _choiceUsages[serial]--;\n\n        $choice\n            .removeClass('filled')\n            .removeData('serial')\n            .empty();\n\n        if(!interaction.swapping){\n            //set correct response\n            Helper.triggerResponseChangeEvent(interaction);\n        }\n    };\n\n    var getChoice = function(interaction, identifier){\n        return Helper.getContainer(interaction).find('.choice-area [data-identifier=' + identifier + ']');\n    };\n\n    var getGap = function(interaction, identifier){\n        return Helper.getContainer(interaction).find('.qti-flow-container [data-identifier=' + identifier + ']');\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10291\n     * \n     * @param {object} interaction\n     */\n    var render = function(interaction){\n\n        var $container = Helper.getContainer(interaction),\n            $choiceArea = $container.find('.choice-area'),\n            $flowContainer = $container.find('.qti-flow-container'),\n            $activeChoice = null;\n\n        var _getChoice = function(serial){\n            return $choiceArea.find('[data-serial=' + serial + ']');\n        };\n\n        var _setChoice = function($choice, $target){\n            return setChoice(interaction, $choice, $target);\n        };\n\n        var _resetSelection = function(){\n            if($activeChoice){\n                $flowContainer.find('.remove-choice').remove();\n                $activeChoice.removeClass('deactivated active');\n                $container.find('.empty').removeClass('empty');\n                $activeChoice = null;\n            }\n        };\n\n        var _unsetChoice = function($choice){\n            return unsetChoice(interaction, $choice);\n        };\n\n        var _isInsertionMode = function(){\n            return ($activeChoice && !$activeChoice.hasClass('filled'));\n        };\n\n        var _isModeEditing = function(){\n            return ($activeChoice && $activeChoice.hasClass('filled'));\n        };\n\n        $container.on('mousedown.commonRenderer', function(e){\n            _resetSelection();\n        });\n\n        $choiceArea.on('mousedown.commonRenderer', '>li', function(e){\n\n            e.stopPropagation();\n\n            if ( ($activeChoice && $(this).hasClass('active')) || $(this).hasClass('deactivated') ) {\n                e.preventDefault();\n                return;\n            }\n\n            _resetSelection();\n\n            $activeChoice = $(this).addClass('active');\n            $flowContainer.find('.gapmatch-content').addClass('empty');\n        });\n\n        $flowContainer.on('mousedown.commonRenderer', '.gapmatch-content', function(e){\n\n            e.stopPropagation();\n\n            if(_isInsertionMode()){\n\n                var $target = $(this),\n                    choiceSerial = $activeChoice.data('serial'),\n                    targetSerial = $target.data('serial');\n                    \n                if(targetSerial !== choiceSerial){\n\n                    //set choices:\n                    if(targetSerial){\n                        _unsetChoice($target);\n                    }\n\n                    _setChoice($activeChoice, $target);\n                }\n\n                $activeChoice.removeClass('active');\n                $container.find('.empty').removeClass('empty');\n                $activeChoice = null;\n\n            }else if(_isModeEditing()){\n\n                //editing mode:\n                var $target = $(this),\n                    targetSerial = $target.data('serial'),\n                    choiceSerial = $activeChoice.data('serial');\n\n                if(targetSerial !== choiceSerial){\n                    _unsetChoice($activeChoice);\n                    if(targetSerial){\n                        //swapping:\n                        _unsetChoice($target);\n                        _setChoice(_getChoice(targetSerial), $activeChoice);\n                    }\n                    _setChoice(_getChoice(choiceSerial), $target);\n                }\n\n                _resetSelection();\n\n            }else if($(this).data('serial') && $(this).hasClass('filled')){\n\n                //selecting a choice in editing mode:\n                var serial = $(this).data('serial');\n\n                $activeChoice = $(this);\n                $activeChoice.addClass('active');\n\n                $flowContainer.find('>li>div').filter(function(){\n                    return $(this).data('serial') !== serial;\n                }).addClass('empty');\n\n                $choiceArea.find('>li:not(.deactivated)').filter(function(){\n                    return $(this).data('serial') !== serial;\n                }).addClass('empty');\n\n                //append trash bin:\n                var $bin = $('<span>', {'class' : 'icon-undo remove-choice', 'title' : __('remove')});\n                $bin.on('mousedown', function(e){\n                    e.stopPropagation();\n                    _unsetChoice($activeChoice);\n                    _resetSelection();\n                });\n                $(this).append($bin);\n            }\n\n        });\n\n        //run eyecatcher:\n        //eyecatcher();\n    };\n\n    var resetResponse = function(interaction){\n        Helper.getContainer(interaction).find('.gapmatch-content').each(function(){\n            unsetChoice(interaction, $(this));\n        });\n    };\n\n    var _setPairs = function(interaction, pairs){\n\n        _.each(pairs, function(pair){\n            if(pair){\n                setChoice(interaction, getChoice(interaction, pair[0]), getGap(interaction, pair[1]).find('.gapmatch-content'));\n            }\n        });\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10291\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        resetResponse(interaction);\n        _setPairs(interaction, pciResponse.unserialize(response, interaction));\n    };\n\n    var _getRawResponse = function(interaction){\n\n        var response = [];\n        Helper.getContainer(interaction).find('.gapmatch-content').each(function(){\n            var choiceSerial = $(this).data('serial'),\n                pair = [];\n\n            if(choiceSerial){\n                pair.push(interaction.getChoice(choiceSerial).attr('identifier'));\n            }\n            pair.push($(this).data('identifier'));\n\n            if(pair.length === 2){\n                response.push(pair);\n            }\n        });\n        return response;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10307\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    var destroy = function(interaction){\n\n        var $container = Helper.getContainer(interaction);\n\n        //restore selected choices:\n        $container.find('.gapmatch-content .active').trigger('mousedown.commonRenderer');\n\n        //remove event\n        $(document).off('.commonRenderer');\n        $container.off('.commonRenderer');\n        $container.find('.choice-area').off('.commonRenderer');\n        $container.find('.qti-flow-container').off('.commonRenderer');\n\n        //restore response\n        resetResponse(interaction);\n        \n        //restore selection\n        $container.find('.gapmatch-content').empty();\n        $container.find('.active').removeClass('active');\n        $container.find('.remove-choice').remove();\n        $container.find('.empty').removeClass('empty');\n    };\n\n    return {\n        qtiClass : 'gapMatchInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/helpers/textWrapper',['jquery'], function($){\n\n    function getSelection(){\n\n        var selection;\n\n        if(window.getSelection){\n            selection = window.getSelection();\n        }else if(document.selection){\n            selection = document.selection.createRange();\n        }\n\n        return selection;\n    }\n\n    function containElement(selection, range){\n\n        if(range.commonAncestorContainer.nodeType === 1){\n            var selectedChildNodes = range.cloneContents().childNodes;\n            for (var i = 0; i < selectedChildNodes.length; i++){\n                if(selectedChildNodes[i].className && \n                   selectedChildNodes[i].className.indexOf(\"qti-choice\") > -1){\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    function wrapSelection(wrap){\n\n        var sel = getSelection();\n        if(sel.rangeCount){\n            var range = sel.getRangeAt(0).cloneRange();\n            if(range.startOffset !== range.endOffset && //prevent empty selection\n                range.toString().trim() && //prevent empty selection\n                !containElement(sel, range)\n                ){\n                        \n                range.surroundContents(wrap);\n                sel.removeAllRanges();\n                sel.addRange(range);\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    function unwrapSelection($editable){\n\n        $editable.trigger('beforeunwrap');\n\n        $editable.find('#selection-wrapper').replaceWith(function(){\n            return $(this).html();\n        });\n\n        $editable.trigger('unwrapped');\n    }\n\n    var textWrapper = {\n        create : function($editable){\n\n            //reset it first:\n            textWrapper.destroy($editable);\n\n            //add listeners:\n            $editable.on('mouseup.textwrapper', function(e){\n\n                var $target = $(e.target);\n                if($target.hasClass('html-editable-shield') || $target.hasClass('widget-box')){\n                    return;\n                }\n\n                var $wrapper = $('<span>', {id : 'selection-wrapper', 'class' : 'inline-text-wrapper'});\n                if(wrapSelection($wrapper[0])){\n                    var wrappedText = $wrapper.text().trim();\n                    $editable.trigger('wrapped', [$wrapper, wrappedText]);\n                }\n\n            }).on('mousedown.textwrapper', function(){\n\n                unwrapSelection($editable);\n\n            });\n\n        },\n        destroy : function($editable){\n\n            unwrapSelection($editable);\n            $editable.off('.textwrapper');\n        },\n        unwrap : function($editable){\n            unwrapSelection($editable);\n        }\n    };\n\n    return textWrapper;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/editor/ckEditor/htmlEditor',\n    'taoQtiItem/qtiCreator/editor/gridEditor/content',\n    'taoQtiItem/qtiCreator/widgets/helpers/content',\n    'taoQtiItem/qtiCreator/widgets/helpers/textWrapper',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/htmlEditorTrigger'\n], function($, stateFactory, Question, htmlEditor, gridContentHelper, htmlContentHelper, textWrapper, toolbarTpl){\n\n    var ContainerInteractionStateQuestion = stateFactory.extend(Question, function(){\n\n        this.buildEditor();\n\n    }, function(){\n\n        this.destroyTextWrapper();\n        this.destroyEditor();\n    });\n\n    ContainerInteractionStateQuestion.prototype.buildEditor = function(){\n\n        var _this = this,\n            _widget = this.widget,\n            container = _widget.element.getBody(),\n            $container = _widget.$container,\n            $editableContainer = $container.find('.qti-flow-container');\n\n        $editableContainer.attr('data-html-editable-container', true);\n\n        if(!htmlEditor.hasEditor($editableContainer)){\n\n            var $bodyTlb = $(toolbarTpl({\n                serial : _widget.serial,\n                state : 'question'\n            }));\n\n            //add toolbar once only:\n            $editableContainer.append($bodyTlb);\n            $bodyTlb.show();\n\n            //init text wrapper\n            _this.initTextWrapper();\n\n            //hack : prevent ckeditor from removing empty spans\n            $container.find('.gapmatch-content').html('...');\n\n            //create editor\n            htmlEditor.buildEditor($editableContainer, {\n                shieldInnerContent : false,\n                change : gridContentHelper.getChangeCallbackForBlockStatic(container),\n                markupChange : function(){\n                    textWrapper.unwrap(this);\n                },\n                data : {\n                    container : container,\n                    widget : _widget\n                }\n            });\n            \n            //restore gaps\n            $container.find('.gapmatch-content').empty();\n        }\n    };\n\n    ContainerInteractionStateQuestion.prototype.destroyEditor = function(){\n\n        var $container = this.widget.$container,\n            $flowContainer = $container.find('.qti-flow-container');\n\n        //hack : prevent ckeditor from removing empty spans\n        $container.find('.gapmatch-content').html('...');\n\n        //search and destroy the editor\n        htmlEditor.destroyEditor($flowContainer);\n        \n        //restore gaps\n        $container.find('.gapmatch-content').empty();\n\n        //remove toolbar\n        $flowContainer.find('.mini-tlb[data-role=cke-launcher-tlb]').remove();\n    };\n\n    ContainerInteractionStateQuestion.prototype.initTextWrapper = function(){\n\n        var widget = this.widget,\n            interaction = widget.element,\n            $editable = widget.$container.find('.qti-flow-container [data-html-editable]'),\n            gapModel = this.getGapModel(),\n            $gapTlb = $(gapModel.toolbarTpl()).show();\n\n        $gapTlb.on('mousedown', function(e){\n\n            e.stopPropagation();//prevent rewrapping\n\n            var $wrapper = $gapTlb.parent(),\n                text = $wrapper.text().trim();\n\n            //detach it from the DOM for another usage in the next future\n            $gapTlb.detach();\n\n            //create gap:\n            $wrapper\n                .removeAttr('id')\n                .addClass('widget-box')\n                .attr('data-new', true)\n                .attr('data-qti-class', gapModel.qtiClass);\n\n            textWrapper.destroy($editable);\n\n            htmlContentHelper.createElements(interaction.getBody(), $editable, htmlEditor.getData($editable), function(newGapWidget){\n\n                newGapWidget.changeState('question');\n                textWrapper.create($editable);\n                gapModel.afterCreate(widget, newGapWidget, text);\n            });\n            \n        }).on('mouseup', function(e){\n            e.stopPropagation();//prevent rewrapping\n        });\n\n        //init text wrapper:\n        $editable.on('editorready.wrapper', function(){\n            textWrapper.create($(this));\n        }).on('wrapped.wrapper', function(e, $wrapper){\n            $wrapper.append($gapTlb);\n        }).on('beforeunwrap.wrapper', function(){\n            $gapTlb.detach();\n        });\n    };\n\n    ContainerInteractionStateQuestion.prototype.destroyTextWrapper = function(){\n\n        //destroy text wrapper:\n        var $editable = this.widget.$container.find('.qti-flow-container [data-html-editable]');\n        textWrapper.destroy($editable);\n        $editable.off('.wrapper');\n\n    };\n\n    ContainerInteractionStateQuestion.prototype.getGapModel = function(){\n\n        this.throwMissingRequiredImplementationError('getModel');\n    };\n\n    return ContainerInteractionStateQuestion;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/gapMatch', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, self=this, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"shuffle\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.shuffle), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shuffle choices\", options) : helperMissing.call(depth0, \"__\", \"Shuffle choices\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be \\\"shuffled\\\" of \\\"fixed\\\" individually.\", options) : helperMissing.call(depth0, \"__\", \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be \\\"shuffled\\\" of \\\"fixed\\\" individually.\", options)))\n    + \"\\n    </span>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap-create', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<span class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"create-gap-tlb\\\">\\n    <span class=\\\"rgt tlb-button\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Create gap\", options) : helperMissing.call(depth0, \"__\", \"Create gap\", options)))\n    + \"\\\" data-role=\\\"create-gap\\\">\\n        <span class=\\\"icon-magicwand\\\"></span>\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/gapMatch',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/gap-create',\n    'lodash'\n], function(stateFactory, Question, formElement, formTpl, gapTpl, _){\n\n    var GapMatchInteractionStateQuestion = stateFactory.extend(Question, function(){\n\n        //ensure that the cardinality of the interaction response is consistent with thte number of gaps\n        this.syncCardinality();\n        this.preventSingleChoiceDeletion();\n\n    }, function(){\n        \n        this.widget.offEvents('question');\n    });\n\n    GapMatchInteractionStateQuestion.prototype.syncCardinality = function(){\n\n        var interaction = this.widget.element,\n            response = interaction.getResponseDeclaration();\n\n        var updateCardinality = function(data){\n\n            var cardinality,\n                choice = data.element || data.choice;\n\n            if(choice.qtiClass === 'gap'){\n                cardinality = _.size(interaction.getGaps()) === 1 ? 'single' : 'multiple';\n                response.attr('cardinality', cardinality);\n            }\n        };\n\n        this.widget\n            .on('elementCreated', updateCardinality)\n            .on('deleted', updateCardinality);\n    };\n\n    GapMatchInteractionStateQuestion.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            shuffle : !!interaction.attr('shuffle')\n        }));\n\n        formElement.initWidget($form);\n\n        formElement.setChangeCallbacks($form, interaction, {\n            shuffle : formElement.getAttributeChangeCallback()\n        });\n\n    };\n\n    GapMatchInteractionStateQuestion.prototype.getGapModel = function(){\n\n        return {\n            toolbarTpl : gapTpl,\n            qtiClass : 'gap',\n            afterCreate : function(interactionWidget, newGapWidget, text){\n\n                //after the gap is created, delete it\n                var choice = interactionWidget.element.createChoice(text);\n                interactionWidget.$container.find('.choice-area .add-option').before(choice.render());\n                choice.postRender().changeState('question');\n                \n                newGapWidget.changeState('choice');\n            }\n        };\n    };\n\n    GapMatchInteractionStateQuestion.prototype.preventSingleChoiceDeletion = function(){\n\n        var interaction = this.widget.element,\n            $container = this.widget.$container;\n\n        var _toggleDeleteButtonVisibility = function(){\n            \n            var choiceCount = 0,\n                $deleteButtons = $container.find('.choice-area .qti-choice [data-role=delete]');\n            \n            _.each(interaction.getChoices(), function(choice){\n                if(!choice.data('deleting')){\n                    choiceCount++;\n                }\n            });\n            \n            if(choiceCount <= 1){\n                $deleteButtons.hide();\n            }else{\n                $deleteButtons.show();\n            }\n        };\n        \n        _toggleDeleteButtonVisibility();\n        \n        this.widget\n            .on('deleted', _toggleDeleteButtonVisibility)\n            .on('choiceCreated', _toggleDeleteButtonVisibility);\n        \n        this.widget.afterStateInit(function(e, element, state){\n            if(state.name === 'deleting' && element.is('gapText')){\n                _toggleDeleteButtonVisibility();\n            }\n        }, 'question');\n        \n        this.widget.afterStateExit(function(e, element, state){\n            if(state.name === 'deleting' && element.is('gapText')){\n                _toggleDeleteButtonVisibility();\n            }\n        }, 'question');\n        \n    };\n\n    return GapMatchInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var GapMatchInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        \n        //forward to one of the available sub state, according to the response processing template\n        answerStateHelper.forward(this.widget);\n        \n    }, function(){\n        \n    });\n    \n    return GapMatchInteractionStateAnswer;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __,stateFactory, Correct, GapMatchInteraction, helper, PciResponse){\n\n    var GapMatchInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n\n        var corrects  = _.values(response.getCorrect());\n        \n        GapMatchInteraction.destroy(interaction);\n        \n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please fill the gap with the correct choices.'));\n       \n        //use the common Renderer\n        GapMatchInteraction.render.call(interaction.getRenderer(), interaction);\n   \n        GapMatchInteraction.setResponse(\n            interaction, \n            PciResponse.serialize(_.invoke(corrects, String.prototype.split, ' '), interaction)\n        );\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n           var type = response.attr('cardinality') === 'single' ? 'base' : 'list';\n           if(data.response && data.response[type]){\n                if(type === 'base'){\n                    response.setCorrect(data.response.base.directedPair.join(' '));\n                } else {\n                    response.setCorrect(   \n                        _.map(data.response.list.directedPair, function(pair){\n                            return pair.join(' ');\n                        })\n                    ); \n                }\n           }\n        });\n\n    }, function(){\n        var widget = this.widget;\n        var interaction = this.widget.element;\n        \n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n\n        GapMatchInteraction.destroy(interaction);\n        helper.removeInstructions(interaction);\n    });\n\n    return GapMatchInteractionStateCorrect;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreMappingForm', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n                    <option value=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</option> \\n                    \";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"style=\\\"display:block\\\"\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            \";\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  return buffer;\n  }\n\n  buffer += \"    <div class=\\\"form-container\\\">\\n        <h1>\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h1>\\n\\n        <hr />\\n        <div class=\\\"panel grid-row\\\">\\n            <h2>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add new pairs\", options) : helperMissing.call(depth0, \"__\", \"Add new pairs\", options)))\n    + \":</h2>\\n        </div> \\n        <div class=\\\"panel grid-row\\\">\\n            <div class=\\\"col-4\\\">\\n                <select class=\\\"select2 new-pair-left\\\" data-placeholder=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select a \", options) : helperMissing.call(depth0, \"__\", \"Select a \", options)));\n  if (helper = helpers.leftTitle) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.leftTitle); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n                    <option></option>\\n                    \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.pairLeft), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                </select>\\n             </div>\\n             <div class=\\\"col-4\\\">\\n                <select class=\\\"select2 new-pair-right\\\"  data-placeholder=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select a \", options) : helperMissing.call(depth0, \"__\", \"Select a \", options)));\n  if (helper = helpers.rightTitle) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.rightTitle); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n                    <option></option>\\n                    \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.pairRight), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                </select>\\n             </div>\\n             <div class=\\\"col-1\\\">\\n                &nbsp;\\n            </div>\\n             <div class=\\\"col-2\\\">\\n                <button class=\\\"pair-adder btn-info small\\\"><span class=\\\"icon-add\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add\", options) : helperMissing.call(depth0, \"__\", \"Add\", options)))\n    + \"</button>\\n            </div> \\n        </div>\\n        <hr />\\n        <div class=\\\"panel grid-row heading\\\">\\n             <div class=\\\"col-4\\\">\";\n  if (helper = helpers.leftTitle) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.leftTitle); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</div>\\n             <div class=\\\"col-3\\\">\";\n  if (helper = helpers.rightTitle) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.rightTitle); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</div>\\n            \\n            <div class=\\\"col-2\\\" data-edit=\\\"correct\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.defineCorrect), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n                <span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Correct\", options) : helperMissing.call(depth0, \"__\", \"Correct\", options)))\n    + \"</span>\\n                <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n                <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Is this pair the correct response?\", options) : helperMissing.call(depth0, \"__\", \"Is this pair the correct response?\", options)))\n    + \"</span>\\n            </div>\\n\\n            <div class=\\\"col-2\\\">\\n                <span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Score\", options) : helperMissing.call(depth0, \"__\", \"Score\", options)))\n    + \"</span>\\n                <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n                <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Set the score for this response\", options) : helperMissing.call(depth0, \"__\", \"Set the score for this response\", options)))\n    + \"</span>\\n            </div>\\n            <div class=\\\"col-1\\\"></div>\\n        </div>\\n\\n        <div class=\\\"panel pairs\\\">\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.pairs), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </div>\\n\\n        <hr />\\n\\n        <span class=\\\"arrow\\\"></span>\\n        <span class=\\\"arrow-cover\\\"></span>\\n    </div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreForm', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", self=this, escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"style=\\\"display:block\\\"\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" checked=\\\"checked\\\"\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"data-default=\\\"true\\\"\";\n  }\n\n  buffer += \"<div class=\\\"grid-row\\\">\\n    <div class=\\\"col-4\\\">\\n       \";\n  if (helper = helpers.left) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.left); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </div>\\n    <div class=\\\"col-3\\\">\\n       \";\n  if (helper = helpers.right) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.right); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </div>\\n    \\n    <div class=\\\"col-2\\\" data-edit=\\\"correct\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.defineCorrect), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n        <label>\\n            <input name=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-correct\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.correct), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\\n            <span class=\\\"icon-checkbox\\\"></span>\\n        </label>\\n    </div>\\n\\n    <div class=\\\"col-2\\\">\\n        <input type=\\\"text\\\" \\n               value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n               name=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-score\\\" \\n               class=\\\"score\\\" \\n               \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.defaultScore), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"  \\n               data-validate=\\\"$numeric\\\" \\n               data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" \\n        />\\n    </div>\\n    <div class=\\\"col-1\\\">\\n        <a href=\\\"#\\\" class=\\\"pair-deleter\\\" id=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"-delete\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove pair\", options) : helperMissing.call(depth0, \"__\", \"Remove pair\", options)))\n    + \"\\\"><span class=\\\"icon-bin\\\"></span></a>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm',[\n    'jquery', \n    'lodash' ,\n    'i18n',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreMappingForm',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/response/pairScoreForm',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'ui/tooltipster',\n    'ui/selecter'\n], function($, _, __, Helper, formTpl, pairTpl, answerStateHelper, formElementHelper, tooltipster, selecter){\n\n    //to bind html element to a pair, we use this separator to replace spaces in the pair name.\n    //The colons char isn't allowed by QTI but it is in HTML, so no change to encounter this separator into the pairs id.\n    var separator = {\n        html : '::',\n        qti  : ' '\n    };\n\n    /**\n     * Create a new instance of PairScoringForm\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm\n     * @param {Object} widget - the interaction widget \n     * @param {Object} [options]\n     * @returns {PairScoringForm} the form compoenent, loaded by default.\n     */\n    return function formFactory(widget, options){\n\n        var $container  = widget.$container;\n        var interaction = widget.element;\n        var response    = interaction.getResponseDeclaration();\n        var $popup      = [];\n        var pairs       = [];\n        var $form;\n\n        /**\n         * The form compoenent\n         * @typedef PairScoringForm\n         */\n        var pairScoringForm = {\n\n            /**\n             * Load / reload the compoenent\n             * @memberof PairScoringForm\n             * @returns {PairScoringForm} for chaining\n             */\n            load : function load(){\n                var self            = this;\n                var callbacks       = {};\n                var corrects        = _.values(response.getCorrect());\n                var mapEntries      = response.getMapEntries();\n           \n                //create / update the HTML element\n                if(!$popup.length){\n                    $popup = createPopup($container);\n                } else {\n                    $popup.empty();\n                }\n                \n                if(options){\n\n                    //prepare content for the form, using either current map entries or data given in options.\n                    if(options.entries){\n                        pairs = preparePairs(options.entries);\n\n                        //update the current map entries according to what we got in entry\n                        response.removeMapEntries();\n                        _.forEach(pairs , function(pair){\n                            if(typeof pair.score === 'undefined' || pair.score === null){\n                                pair.score = response.mappingAttributes.defaultValue || 0;\n                            }\n                            response.setMapEntry(pair.id.replace(separator.html, separator.qti), pair.score);\n                        });\n                    } else {\n                        pairs = preparePairs(mapEntries);\n                    }\n\n                    //run the template with the data\n                    $form = $(formTpl({\n                        'title'             : options.title      || __('Pair scoring'),\n                        'leftTitle'         : options.leftTitle  || __('Choices'),\n                        'rightTitle'        : options.rightTitle || __('Gaps'),\n                        'defineCorrect'     : answerStateHelper.defineCorrect(response),\n                        'scoreMin'          : response.getMappingAttribute('lowerBound'),\n                        'scoreMax'          : response.getMappingAttribute('upperBound'),\n                        'pairs'             : _.map(pairs, pairTpl),\n                        'pairLeft'          : _.isFunction(options.pairLeft) ? options.pairLeft() : _.values(interaction.getChoices()), \n                        'pairRight'         : _.isFunction(options.pairRight) ? options.pairRight() : _.values(interaction.getChoices()) \n                    }));\n                    \n                    updateFormBindings();\n\n                    $popup.append($form);\n\n                    //initialize UI componenets manually \n                    selecter($popup);\n                    tooltipster($popup);\n                    deleter($popup);\n                    adder($popup);\n                }\n\n                return this;\n            },\n\n            /**\n             * Add a new pair\n             * @memberof PairScoringForm\n             * @param {String} key - the pair key\n             * @returns {PairScoringForm} for chaining\n             */\n            addPair : function addPair(key){\n                \n                var score = response.mappingAttributes.defaultValue;\n                var pair  = formatPair(score, key, true);\n                \n                //update internal model\n                pairs.push(pair);\n\n                //update the response\n                response.setMapEntry(key, score);\n\n                $('.pairs', $popup).append(pairTpl(pair));\n\n                updateFormBindings();\n               \n                if(_.isFunction(options.add)){\n                    options.add(key);\n                }\n\n                return this;\n            },\n\n            /**\n             * Remove a pair\n             * @memberof PairScoringForm\n             * @param {String} key - the pair key to remove\n             * @returns {PairScoringForm} for chaining\n             */\n            removePair : function removePair(key){\n\n                //update internal model\n                _.remove(pairs, {id : key.replace(separator.qti, separator.html)});\n\n                //update the response\n                response.removeMapEntry(key);\n   \n                if(_.isFunction(options.remove)){\n                    options.remove(key);\n                }\n        \n                return this;\n            },\n\n            /**\n             * Destroy the compoenent\n             * @memberof PairScoringForm\n             */\n            destroy : function(){\n                if($popup.length){\n                    $popup.remove();\n                }\n                \n                //reset overflow\n                $('#item-editor-panel').css('overflow', '');\n            }\n        };\n\n        /**\n         * Set up the pair adder. \n         * Disable list options according to the current values. \n         * \n         * @private\n         * @param {jQueryElement} $container - to scope element finding\n         */\n        function adder($container){\n           var $panel   = $('.panel-new-pair', $container); \n           var $adder   = $('.pair-adder', $container);\n           var $left    = $('.new-pair-left', $container);\n           var $right   = $('.new-pair-right', $container);\n           var $options = $('.select2 > option', $container); \n\n           //disable options based on existing pairs\n           $left.on('change', function(){\n                var currentLeft = $left.select2('val'),\n                    currentRight = $right.select2('val');\n                \n                $options.removeProp('disabled'); \n                \n                _(pairs).where({leftId : currentLeft}).forEach(function(pair){\n                    $right.find('option[value=\"' + pair.rightId+ '\"]').prop('disabled', true);\n                });\n                _(pairs).where({rightId : currentRight}).forEach(function(pair){\n                    $left.find('option[value=\"' + pair.leftId+ '\"]').prop('disabled', true);\n                });\n                if(options.type === 'pair'){\n                    _(pairs).where({rightId : currentLeft}).forEach(function(pair){\n                        $right.find('option[value=\"' + pair.leftId+ '\"]').prop('disabled', true); \n                    });\n                }\n           });\n           $right.on('change', function(){\n                var currentRight = $right.select2('val'),\n                    currentLeft = $left.select2('val');\n                \n                $options.removeProp('disabled'); \n                \n                _(pairs).where({rightId : currentRight}).forEach(function(pair){\n                    $left.find('option[value=\"' + pair.leftId+ '\"]').prop('disabled', true);\n                });\n                _(pairs).where({leftId : currentLeft}).forEach(function(pair){\n                    $right.find('option[value=\"' + pair.rightId+ '\"]').prop('disabled', true);\n                });\n                if(options.type === 'pair'){\n                    _(pairs).where({leftId : currentRight}).forEach(function(pair){\n                        $left.find('option[value=\"' + pair.rightId+ '\"]').prop('disabled', true); \n                    });\n                }\n           });\n\n           //create a new pair\n           $adder.on('click', function(e){\n               $options.removeProp('disabled');\n               e.preventDefault();\n               var key;\n               var lval = $left.select2('val');\n               var rval = $right.select2('val');\n               if(lval && rval){\n                   //update the form component\n                   key      = lval + separator.qti + rval;\n                   pairScoringForm.addPair(key);\n\n                   //reset the select lists\n                   $left.select2('val', '');\n                   $right.select2('val', '');\n                }\n           }); \n        }\n\n        /**\n         * Set up the pair remover.\n         * @private\n         * @param {jQueryElement} $container - to scope element finding\n         */\n        function deleter($container){\n            $container\n              .off('click', '.pair-deleter')\n              .on('click', '.pair-deleter', function(e){\n                e.preventDefault();\n\n                var $elt = $(this);\n                var key = $elt.attr('id')\n                              .replace(/-delete$/, '')\n                              .replace(separator.html, separator.qti);\n    \n                pairScoringForm.removePair(key);\n                \n                $elt.closest('.grid-row').remove();\n           });\n        }\n\n        /**\n         * Transform entries to pair object that contains the property required by the template.\n         * @private\n         * @param {Array} entries - using the response.mapEntries format pair:score, ie.  <pre>{ \"choice1 choice2\" : 3  }</pre>\n         * @returns {Array} the pairs as a collection of objects.\n         */\n        function preparePairs(entries){\n            var defaultScore = parseFloat(response.mappingAttributes.defaultValue);\n            return _.map(entries, function(value, key){\n                return formatPair(value, key, parseFloat(value) === defaultScore);\n            });\n        }\n\n\n        /**\n         * Format a key/score mapping to a pair object used by the template and by this scoring component.\n         * @private\n         * @param {Number} score - the value mapped to the pair\n         * @param {String} key - the pair key\n         * @param {Boolean} [default = false] - is the score the default value\n         * @returns {Object} the pair \n         */\n        function formatPair(score, key, defaultScore){\n            var pair = key.split(separator.qti);\n            return {\n                id              : key.replace(separator.qti, separator.html),\n                score           : score,\n                defaultScore    : !!defaultScore, \n                leftId          : pair[0],\n                rightId         : pair[1],\n                left            : _.isFunction(options.formatLeft) ? options.formatLeft(pair[0]) : pair[0],\n                right           : _.isFunction(options.formatRight) ? options.formatRight(pair[1]) : pair[1],\n                defineCorrect   : answerStateHelper.defineCorrect(response),\n                correct         : _.contains(_.values(response.getCorrect()), key) \n            };\n        }\n\n        /**\n         * Update the form bindings callbacks.\n         * @private\n         */\n        function updateFormBindings(){\n            var callbacks = {};\n            var corrects  = _.values(response.getCorrect());\n    \n            if($form.length){\n\n               //the default value changes\n                widget.on('mappingAttributeChange', function(data){\n                    if(data.key === 'defaultValue'){\n                        _.forEach(pairs, function(pair){\n                            var $score = $('[name=\"' +  pair.id + '-score\"]', $form);\n                            if($score.data('default')){\n                                $score.val(data.value);\n                                response.setMapEntry( pair.id.replace(separator.html, separator.qti), data.value);\n                            } \n                        });\n                    }\n                });\n\n                //creates callbacls for score and correct, for each pair\n                _.forEach(pairs, function(pair){\n                    var id = pair.id.replace(separator.html, separator.qti);\n                    callbacks[pair.id + '-score'] = function(response, value){\n                        $('[name=\"' +  pair.id + '-score\"]', $form).removeAttr('data-default').removeData('default');\n                        response.setMapEntry(id, value);\n                    };\n                    callbacks[pair.id + '-correct'] = function(response, value){\n                        if(value === true){\n                            if(!_.contains(corrects, id)){\n                                corrects.push(id);\n                            }\n                        } else {\n                            corrects = _.without(corrects, id);\n                        }\n                        response.setCorrect(corrects);\n                    };\n                });\n                \n                //set up the form data binding\n                formElementHelper.setChangeCallbacks($form, response, callbacks);\n            }\n        }\n        \n        return pairScoringForm.load();\n    };\n\n    /**\n     * Creates a popup relative to container\n     * @private\n     * @returns {jQueryElement} the popup\n     */\n    function createPopup($container){\n        var $element    = $('<div class=\"mapping-editor arrow-top-left\"></div>'); \n        var width       = $container.innerWidth();\n        var height      = $container.innerHeight();\n\n        //only one \n        $('.mapping-editor', $container).remove();\n\n        //style and attach the form\n        $element.css({       \n            'top'       : height - 30,\n            'width'     : width - 100\n        }).appendTo($container);\n\n        return $element;\n    }\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse', \n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm' \n], function($, _, __, stateFactory, Map, GapMatchInteraction, helper, PciResponse, scoringFormFactory){\n\n    /**\n     * Initialize the state.\n     */\n    function initMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n        var currentResponses =  _.size(response.getMapEntries()) === 0 ? corrects : _.keys(response.getMapEntries());\n\n        \n        //really need to destroy before ? \n        GapMatchInteraction.destroy(interaction);\n        \n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please fill the gap with the texts below, then edit the score for each pair.'));\n        \n        //set the current mapping mode, needed by the common renderer\n        interaction.responseMappingMode = true;\n \n        //use the common Renderer\n        GapMatchInteraction.render.call(interaction.getRenderer(), interaction);\n    \n        //change the display of the gaps\n        displayGaps(widget.$container);\n\n        //and initialize the scoring form\n        if(_.size(response.getMapEntries()) === 0){\n            updateForm(widget, corrects);\n        } else {\n            updateForm(widget);\n        }\n        \n        //each response change leads to an update of the scoring form\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            var type  = response.attr('cardinality') === 'single' ? 'base' : 'list';\n            var pairs, entries;\n            if(data && data.response &&  data.response[type]){\n               pairs = _.invoke(data.response[type].directedPair, Array.prototype.join, ' ');\n               entries = _.keys(response.getMapEntries());\n                \n               //add new pairs from  the difference between the current entries and the given data\n               _(pairs).difference(entries).forEach(interaction.pairScoringForm.addPair, interaction.pairScoringForm);\n            }\n\n            displayGaps(widget.$container);\n        });\n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        widget.$container.off('responseChange.qti-widget');\n\n        if(interaction.pairScoringForm){\n            interaction.pairScoringForm.destroy();\n        }\n\n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n        GapMatchInteraction.destroy(interaction); \n    }\n\n    /**\n     * The gap in this states show their identifier, to visually identify them.\n     * @param {jQueryElement} $container - the interaction container\n     */\n    function displayGaps($container){\n        $('.gapmatch-content', $container)\n          .removeClass('filled')            //this disable gap selection\n          .addClass('gap-info')\n          .each(function(){\n            var $elt = $(this);\n            $elt.text($elt.data('identifier'));\n        });\n    }\n\n    /**\n     * Update the scoring form\n     * @param {Object} widget - the current widget\n     * @param {Array} [entries] - to force the use of this collection instead of the mapEntries\n     */\n    function updateForm(widget, entries){\n\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var mapEntries = response.getMapEntries();\n\n        //keep a map of choices descriptions for the formatLeft callback\n        var formatedChoices = _.transform(interaction.getChoices(), function(acc, choice){\n            acc[choice.id()] = choice.val();\n        }, {});\n\n        var mappingChange = function mappingChange(){\n            //set the current responses, either the mapEntries or the corrects if nothing else\n            GapMatchInteraction.setResponse(\n                interaction, \n                PciResponse.serialize(_.invoke(_.keys(response.getMapEntries()), String.prototype.split, ' '), interaction)\n            );\n        };\n\n        //set up the scoring form options\n        var options = {\n            leftTitle : __('Choice'),\n            rightTitle : __('Gap'),\n            type : 'directedPair',\n            pairLeft : function(){\n                return _.map(interaction.getChoices(), function(choice){\n                    return {\n                        id : choice.id(),\n                        value : choice.val()\n                    };\n                });\n            },\n            pairRight : function(){\n                return _.map(interaction.getGaps(), function(gap){\n                    return {\n                        id : gap.id(),\n                        value : gap.id()\n                    };\n                });\n            },\n            formatLeft : function(value){\n                return formatedChoices[value] || value;\n            }\n        };\n\n        //format the entries to match the needs of the scoring form\n        if(entries){\n            options.entries = _.transform(entries, function(result, value){\n                result[value] = mapEntries[value] !== undefined ? mapEntries[value] : response.mappingAttributes.defaultValue;\n            }, {}); \n        }\n\n        //initialize the scoring form \n        interaction.pairScoringForm = scoringFormFactory(widget, options);\n    }\n\n    /**\n     * The map answer state for the graphicGapMatch interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/states/states'\n], function(Widget, states){\n\n    var GapMatchInteractionWidget = Widget.clone();\n\n    GapMatchInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return GapMatchInteractionWidget;\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/GapMatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/gapMatchInteraction/Widget'\n], function(_, GapMatchInteraction, GapMatchInteractionWidget){\n    \n    var CreatorGapMatchInteraction = _.clone(GapMatchInteraction);\n\n    CreatorGapMatchInteraction.render = function(interaction, options){\n        \n        return GapMatchInteractionWidget.build(\n            interaction,\n            GapMatchInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGapMatchInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicAssociateInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicAssociateInteraction clearfix \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"image-editor solid\\\">\\n        <div id='graphic-paper-\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class=\\\"main-image-box\\\"></div>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine(\"json!taoQtiItem/qtiCommonRenderer/renderers/graphic-style.json\", function(){ return {    \n    \"basic\" : {\n        \"stroke\" : \"#8D949E\",\n        \"stroke-width\" : 2,\n        \"stroke-dasharray\": \"\",\n        \"stroke-linejoin\" : \"round\",\n        \"fill\" : \"#cccccc\",\n        \"fill-opacity\" : 0.5,\n        \"cursor\" : \"pointer\"\n    },\n    \"hover\"  : {\n        \"stroke\" : \"#3E7DA7\",\n        \"fill\" :  \"#0E5D91\", \n        \"fill-opacity\" : 0.3\n    },\n    \"selectable\"  : {\n        \"stroke-dasharray\": \"-\",\n        \"stroke\" : \"#3E7DA7\",\n        \"fill\" : \"#cccccc\",\n        \"fill-opacity\" : 0.5\n    },\n    \"active\" : {\n        \"stroke\" : \"#3E7DA7\",\n        \"stroke-dasharray\": \"\",\n        \"fill\" :  \"#0E5D91\",\n        \"fill-opacity\" : 0.5\n    },\n    \"error\" : {\n        \"stroke\" : \"#C74155\",\n        \"stroke-dasharray\": \"\",\n        \"fill-opacity\" : 0.5,\n        \"fill\" :  \"#661728\"  \n    },\n    \"success\" : {\n        \"stroke\" : \"#C74155\",\n        \"stroke-dasharray\": \"\",\n        \"fill\" :  \"#0E914B\",\n        \"fill-opacity\" : 0.5\n    },\n    \"layer\" : {\n        \"fill\" :  \"#ffffff\", \n        \"opacity\" : 0, \n        \"cursor\": \"pointer\"\n    },\n    \"creator\" : {\n        \"fill-opacity\" : 0.5,\n        \"stroke\" : \"#3E7DA7\",\n        \"stroke-dasharray\": \"\",\n        \"fill\" :  \"#0E5D91\", \n        \"cursor\" : \"pointer\"\n    },\n    \"imageset-rect-stroke\" : {\n            \"fill\" : \"#ffffff\",\n            \"stroke\" : \"#666666\",\n            \"stroke-width\" : 1,\n            \"stroke-linejoin\" : \"round\",\n            \"cursor\" : \"pointer\"\n    },\n    \"imageset-rect-no-stroke\" : {\n            \"fill\" : \"#ffffff\",\n            \"stroke\" : \"#ffffff\",\n            \"stroke-width\" : 2,\n            \"stroke-linejoin\" : \"round\",\n            \"cursor\" : \"pointer\"\n    },\n    \"imageset-img\" : {\n        \"cursor\" : \"pointer\"\n    },\n    \"order-text\" : {\n        \"fill\" : \"#ffffff\",\n        \"stroke\": \"#000000\",\n        \"stroke-width\" : 0.7,\n        \"font-family\" : \"sans-serif\",\n        \"font-weight\": \"bold\", \n        \"font-size\" : 22,\n        \"cursor\" : \"pointer\"\n    },\n    \"score-text-default\" : {\n        \"stroke\": \"#444444\",\n        \"stroke-width\" : 0.5,\n        \"font-family\" : \"sans-serif\",\n        \"font-weight\": \"normal\", \n        \"font-size\" : 20,\n        \"cursor\" : \"pointer\"\n    },\n    \"score-text\" : {\n        \"stroke\": \"#000000\",\n        \"stroke-width\" : 0.5,\n        \"font-family\" : \"sans-serif\",\n        \"font-weight\": \"normal\", \n        \"font-size\" : 20,\n        \"cursor\" : \"pointer\"\n    },\n    \"small-text\" : {\n        \"stroke\": \"#000000\",\n        \"stroke-width\" : 0.5,\n        \"font-family\" : \"sans-serif\",\n        \"font-weight\": \"normal\", \n        \"font-size\" : 16,\n        \"cursor\" : \"pointer\"\n    },\n    \"layer-pos-text\" : {\n        \"stroke\": \"#333\",\n        \"stroke-width\" : 0.5,\n        \"font-family\" : \"sans-serif\",\n        \"font-weight\": \"normal\", \n        \"font-size\" : 14\n    },\n    \"target\" : {\n        \"path\" : \"m 18,8.4143672 -1.882582,0 C 15.801891,4.9747852 13.071059,2.2344961 9.63508,1.9026738 L 9.63508,0 8.2305176,0 l 0,1.9026387 C 4.7947148,2.2343027 2.0637246,4.9746621 1.7481973,8.4143672 l -1.7481973,0 0,1.4045625 1.754877,0 c 0.3460429,3.4066753 3.0632871,6.1119843 6.4756406,6.4413813 l 0,1.739689 1.4045624,0 0,-1.739725 c 3.412547,-0.329537 6.129633,-3.034793 6.475641,-6.4413453 l 1.889279,0 z m -8.36492,6.5188648 0,-4.064673 -1.4045624,0 0,4.063882 C 5.5511016,14.612555 3.4232695,12.494619 3.0864551,9.8189297 l 4.0449512,0 0,-1.4045625 -4.0546368,0 C 3.3788672,5.6984941 5.5228887,3.5393379 8.2305176,3.2161113 l 0,3.9153125 1.4045624,0 0,-3.9160859 c 2.711162,0.3203965 4.858576,2.4808887 5.160955,5.1990293 l -3.927441,0 0,1.4045625 3.917773,0 C 14.449289,12.496957 12.318363,14.616158 9.63508,14.933232 z\",\n        \"fill\" : \"#0E914B\",\n        \"width\" : 1,\n        \"stroke-width\" : 0,\n        \"cursor\" : \"pointer\"\n    },\n    \"target-hover\" : {\n        \"fill\" : \"#3E7DA7\", \n        \"fill-opacity\" : 1\n    },\n    \"target-success\" : {\n        \"fill\" : \"#0E914B\", \n        \"fill-opacity\" : 1\n   },\n   \"assoc\" : {\n        \"stroke-width\" : 2, \n        \"stroke-linecap\" : \"round\", \n        \"cursor\" : \"pointer\"\n   },\n   \"assoc-layer\" : {\n        \"stroke-width\" : 12, \n        \"cursor\" : \"pointer\", \n        \"stroke-opacity\" : 0\n   },\n   \"assoc-bullet\" : {\n        \"fill\": \"#000000\"\n   },\n    \"close\" : {\n        \"path\" : \"m 8.9997236,18.000001 c -4.9703918,0 -8.99972284217367,-4.02901 -8.99972284217367,-9 C 7.5782633e-7,4.029011 4.0293108,9.8531742e-7 8.9997236,9.8531742e-7 13.970691,9.8531742e-7 18.000001,4.029011 18.000001,9.000001 c 0,4.97099 -4.02931,9 -9.0002774,9 z m 0.0045,-16.37151 c -4.06191,0 -7.35492,3.29635 -7.35492,7.36251 0,4.06562 3.292989,7.36255 7.35492,7.36255 4.0630384,0 7.3554334,-3.29693 7.3554334,-7.36255 0,-4.06614 -3.292969,-7.36251 -7.3554334,-7.36251 v 0 z m 3.1314894,9.31167 -1.953823,-1.94014 1.953843,-1.94018 c 0.08964,-0.089 0.134622,-0.19099 0.135073,-0.30584 4.31e-4,-0.11488 -0.04383,-0.21712 -0.132838,-0.30681 l -0.54267,-0.54685 c -0.08898,-0.0897 -0.190903,-0.13473 -0.305719,-0.13514 -0.114837,-4.4e-4 -0.217064,0.0439 -0.306703,0.1329 l -1.9623724,1.94865 -1.962395,-1.94865 c -0.08964,-0.089 -0.191845,-0.13336 -0.306702,-0.1329 -0.114837,4.3e-4 -0.216736,0.0455 -0.305719,0.13514 l -0.54265,0.54685 c -0.08902,0.0897 -0.133269,0.19193 -0.132838,0.30681 4.3e-4,0.11485 0.04543,0.21681 0.135073,0.30584 l 1.953823,1.94018 -1.953782,1.94014 c -0.0896,0.089 -0.134684,0.19094 -0.135114,0.3058 -4.31e-4,0.11486 0.04386,0.21716 0.132838,0.30681 l 0.542671,0.54687 c 0.08896,0.0897 0.190923,0.13467 0.305718,0.13516 0.114857,3.9e-4 0.217105,-0.0439 0.306724,-0.13288 l 1.962332,-1.94863 1.9623324,1.94863 c 0.08962,0.089 0.191886,0.13323 0.306744,0.13288 0.114836,-4.5e-4 0.216736,-0.0455 0.305698,-0.13516 l 0.542691,-0.54687 c 0.089,-0.0897 0.133227,-0.19193 0.132838,-0.30681 -3.9e-4,-0.1149 -0.0455,-0.21683 -0.135073,-0.3058 z\",\n        \"fill\" : \"#0E5D91\",\n        \"width\" : 1,\n        \"opacity\" : 0,\n        \"stroke-width\" : 0,\n        \"cursor\" : \"pointer\"\n   },\n   \"close-bg\" : {\n        \"fill\" : \"#ffffff\",\n        \"stroke\" : \"none\",\n        \"cursor\" : \"pointer\",\n        \"opacity\" : 0  \n    },\n    \"touch-circle\" : {\n        \"fill\" : \"none\", \n        \"stroke\" : \"#3E7DA7\",\n        \"stroke-width\" : 2\n    }\n}\n;});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/helpers/Graphic',[\n    'jquery', \n    'lodash', \n    'raphael', \n    'scale.raphael', \n    'json!taoQtiItem/qtiCommonRenderer/renderers/graphic-style.json'\n], function($, _, raphael, scaleRaphael, gstyle){\n\n    //maps the QTI shapes to Raphael shapes\n    var shapeMap = {\n        'default' : 'rect',\n        'poly'    : 'path'\n    };\n\n    //length constraints to validate coords\n    var coordsValidator = {\n        'rect' : 4,\n        'ellipse' : 4,\n        'circle' : 3,\n        'poly' : 6,\n        'default' : 0\n    };\n\n    //transform the coords from the QTI system to Raphael system\n    var qti2raphCoordsMapper = {\n\n        /**\n         * Rectangle coordinate mapper:  from left-x,top-y,right-x-bottom-y to x,y,w,h\n         * @param {Array} coords - QTI coords\n         * @returns {Array} raphael coords\n         */\n        'rect' : function(coords){\n           return [\n                coords[0],\n                coords[1],\n                coords[2] - coords[0],\n                coords[3] - coords[1]\n            ];\n        },\n        \n        /**\n         * Creates the coords for a default shape (a rectangle that covers all the paper)\n         * @param {Raphael.Paper} paper - the paper\n         * @returns {Array} raphael coords\n         */\n        'default' : function(paper){\n           return [ 0, 0, paper.width, paper.height ];\n        },\n        \n        /**\n         * polygone coordinate mapper:  from x1,y1,...,xn,yn to SVG path format\n         * @param {Array} coords - QTI coords\n         * @returns {Array} path desc\n         */\n        'poly' : function(coords){\n            var a;\n            var size = coords.length;\n\n            // autoClose if needed\n            if((coords[0] !== coords[size - 2]) && (coords[1] !== coords[size - 1])){\n                coords.push(coords[0]);\n                coords.push(coords[1]);\n            }\n            \n            // move to first point\n            coords[0] = \"M\" + coords[0];\n            for(a = 1; a < size; a++){\n                if(a % 2 === 0){\n                    coords[a] = \"L\" + coords[a];\n                }\n            }\n            return [coords.join(\" \")];\n        }\n    };\n\n    //transform the coords from a raphael shape to the QTI system\n    var raph2qtiCoordsMapper = {\n\n        /**\n         * Rectangle coordinate mapper: from x,y,w,h to left-x,top-y,right-x-bottom-y\n         * @param {Object} attr - Raphael Element's attributes\n         * @returns {Array} qti based coords\n         */\n        'rect' : function(attr){\n           return [\n                attr.x,\n                attr.y,\n                attr.x + attr.width,\n                attr.y + attr.height\n            ];\n        },\n\n        /**\n         * Circle coordinate mapper\n         * @param {Object} attr - Raphael Element's attributes\n         * @returns {Array} qti based coords\n         */\n        'circle' : function(attr){\n           return [\n                attr.cx,\n                attr.cy,\n                attr.r      \n           ];\n        },\n        \n        /**\n         * Ellispe coordinate mapper\n         * @param {Object} attr - Raphael Element's attributes\n         * @returns {Array} qti based coords\n         */\n        'ellipse' : function(attr){\n           return [\n                attr.cx,\n                attr.cy,\n                attr.rx,\n                attr.ry\n            ];\n        },\n\n        /**\n         * Get the coords for a default shape (a rectangle that covers all the paper)\n         * @param {Object} attr - Raphael Element's attributes\n         * @returns {Array} qti based coords\n         */\n        'default' : function(attr){\n           return this.rect(attr);\n        },\n        \n        /**\n         * polygone coordinate mapper:  from SVG path (available as segments) to x1,y1,...,xn,yn format\n         * @param {Raphael.Paper} paper - the paper\n         * @returns {Array} raphael coords\n         */\n        'path' : function(attr){\n            var poly = [];\n            var i;\n            if(_.isArray(attr.path)){\n               for(i = 1; i < attr.path.length; i++){\n                    if(attr.path[i].length === 3){\n                        poly.push(attr.path[i][1]);\n                        poly.push(attr.path[i][2]);\n                    }\n               }\n            }\n            return poly;\n        }\n    };\n\n\n\n    /**\n     * Graphic interaction helper\n     * @exports qtiCommonRenderer/helpers/Graphic\n     */\n    var GraphicHelper = {\n   \n        /**\n         * Raw access to the styles\n         * @type {Object}\n         */\n        _style : gstyle,\n\n\n        /**\n         * Apply the style defined by name to the element\n         * @param {Raphael.Element} element - the element to change the state\n         * @param {String} state - the name of the state (from states) to switch to\n         */\n        setStyle : function(element, name){\n            if(element && gstyle[name]){\n                element.attr(gstyle[name]);\n            }\n        },\n\n\n        /**\n         * Create a Raphael paper with a bg image, that is width responsive\n         * @param {String} id - the id of the DOM element that will contain the paper\n         * @param {String} serial - the interaction unique indentifier\n         * @param {Object} options - the paper parameters\n         * @param {String} options.img - the url of the background image\n         * @param {jQueryElement} [options.container] - the parent of the paper element (got the closest parent by default)\n         * @param {Number} [options.width] - the paper width\n         * @param {Number} [options.height] - the paper height\n         * @param {String} [options.imgId] - an identifier for the image element\n         * @returns {Raphael.Paper} the paper\n         */ \n        responsivePaper : function(id, serial, options){\n\n            var paper, image;\n\n            var $container = options.container || $('#' + id).parent();\n            var $editor    = $('.image-editor', $container);\n            var $body  = $container.closest('.qti-itemBody');\n            var factory = raphael.type === 'SVG' ? scaleRaphael : raphael; \n\n            var width = options.width || $container.innerWidth();\n            var height = options.height || $container.innerHeight();\n\n            var resizer = _.throttle(resizePaper, 10);\n\n            //padding and border diff. always add 1px to cover the rounded value in scalling\n\n\n            paper = factory.call(null ,id, width, height);\n            image = paper.image(options.img, 0, 0, width, height);\n            if(options.imgId){\n                image.id = options.imgId;\n            } \n\n            //retry to resize once the SVG is loaded \n            $(image.node)\n              .attr('externalResourcesRequired','true')\n              .on(\"load\", function() {\n            \n                resizePaper(); \n            });\n\n            if(raphael.type === 'SVG'){ \n           \n                //scale on creation\n                resizePaper();\n\n                $(window).on('resize.qti-widget.'  + serial, resizer);\n                $(document).on('customcssloaded.styleeditor', function(){\n                    _.delay(resizer, 200);\n                });\n                $container.on('resize.qti-widget.' + serial , function(e, givenWidth){\n                    resizer(e, givenWidth);\n                });\n\n            } else {\n                paper.canvas.setAttribute('viewBox', '0 0 ' + width + ' ' + height);\n                $container.find('.main-image-box').width(width);\n                if(typeof options.resize === 'function'){\n                    options.resize(width, 1);\n                }\n            }\n            \n            /**\n             * scale the raphael paper\n             * @private\n             */\n            function resizePaper(e, givenWidth){\n                if(e){\n                    e.stopPropagation();\n                }\n\n                var factor          = 1;\n                var diff            = ($editor.outerWidth() - $editor.width()) + ($container.outerWidth() - $container.width()) + 1;\n                var maxWidth        = $body.width();\n                var containerWidth  = $container.innerWidth();\n\n                if(containerWidth > 0 || givenWidth > 0){\n\n                    if(!givenWidth && $container.children('.image-sidebar').length){\n                        diff += $container.children('.image-sidebar').outerWidth(true);\n                    }                    \n\n                    if(givenWidth < containerWidth && givenWidth < maxWidth){\n                        containerWidth = givenWidth - diff;\n                    } else if(containerWidth > maxWidth){\n                        containerWidth = maxWidth - diff;\n                    } else {\n                        containerWidth -= diff;\n                    }\n     \n                    if($container.hasClass('responsive')){\n                        factor = containerWidth / width;\n\n                        paper.changeSize(containerWidth, height * factor, false, false);\n                        paper.scaleAll( factor );\n                    } else {\n                        paper.changeSize(containerWidth, height, false, false);\n                    }\n                    if(typeof options.resize === 'function'){\n                        options.resize(containerWidth, factor);\n                    }\n                    $container.trigger('resized.qti-widget');\n                }\n            }\n\n            return paper;\n        },\n \n        /**\n         * Create a new Element into a raphael paper\n         * @param {Raphael.Paper} paper - the interaction paper\n         * @param {String} type - the shape type\n         * @param {String|Array.<Number>} coords - qti coords as a string or an array of number\n         * @param {Object} [options] - additional creation options\n         * @param {String} [options.id] - to set the new element id\n         * @param {String} [options.title] - to set the new element title\n         * @param {String} [options.style = basic] - to default style \n         * @param {Boolean} [options.hover = true] - to disable the default hover state\n         * @param {Boolean} [options.touchEffect = true] - a circle appears on touch\n         * @param {Boolean} [options.qtiCoords = true] - if the coords are in QTI format\n         * @returns {Raphael.Element} the created element\n         */\n        createElement : function(paper, type, coords, options){\n            var self = this;\n            var element;\n            var bbox; \n            var shaper = shapeMap[type] ? paper[shapeMap[type]] : paper[type];\n            var shapeCoords = options.qtiCoords !== false ? self.raphaelCoords(paper, type, coords) : coords;\n\n            if(typeof shaper === 'function'){\n               element = shaper.apply(paper, shapeCoords);\n               if(element){\n                    if(options.id){\n                        element.id = options.id;\n                    }\n                    if(options.title){\n                        element.attr('title', options.title);\n                    }\n                    element.attr(gstyle[options.style || 'basic'])\n                            .toFront();\n                    if(options.hover !== false){\n                      element.hover(function(){\n                            if(!element.flashing){\n                                self.updateElementState(this, 'hover'); \n                            }\n                      }, function(){\n                            if(!element.flashing){\n                                self.updateElementState(this, this.active ? 'active' : this.selectable ? 'selectable' : 'basic');\n                            }\n                      });\n                    }\n                        \n                   if(options.touchEffect !== false){\n                       element.touchstart(function(){\n                            self.createTouchCircle(paper, element.getBBox());\n                       });\n                   }\n               }\n    \n            } else {\n                throw new Error('Unable to find method ' + type + ' on paper');\n            }\n            return element; \n        },\n\n        /**\n         * Create target point\n         * @param {Raphael.Paper} paper - the paper\n         * @param {Object} [options]\n         * @param {Object} [options.id] - and id to identify the target\n         * @param {Object} [options.point] - the point to add to the paper\n         * @param {Number} [options.point.x = 0] - point's x coord\n         * @param {Number} [options.point.y = 0] - point's y coord \n         * @param {Boolean} [options.hover] = true - the target has an hover effect\n         * @param {Function} [options.create] - call once created\n         * @param {Function} [options.remove] - call once removed\n         */\n        createTarget : function createTarget(paper, options){\n            var self    = this;\n            options     = options || {};\n            var point   = options.point || {x : 0, y : 0};\n            var baseSize= 18;\n            var factor  = (paper.w && paper.width) ? paper.width / paper.w : 1; \n            var size    = factor !== 1 ? Math.floor(18 / factor) + 1 : baseSize;\n            var half    = size / 2;\n            var x       = point.x >= half ? point.x - half : 0;\n            var y       = point.y >= half ? point.y - half : 0;\n            var hover   = typeof options.hover === 'undefined' ? true : !!options.hover;\n            var tBBox;\n        \n            //create the target from a path\n            var target = paper\n                .path(gstyle.target.path)\n                .transform('T' + x + ',' + y + 's' + size / baseSize)\n                .attr(gstyle.target)\n                .attr('title', _('Click again to remove'));\n\n            //generate an id if not set in options\n            if(options.id){\n                target.id = options.id;\n            } else {\n                var count = 0;\n                paper.forEach(function(element){\n                    if(element.data('target')){\n                        count++;\n                    }   \n                });\n                target.id = 'target-' + count;\n            }\n\n            tBBox = target.getBBox();\n\n            //create an invisible rect over the target to ensure path selection\n            var layer = paper\n                .rect(tBBox.x, tBBox.y, tBBox.width, tBBox.height)\n                .attr(gstyle.layer)\n                .click(function(){\n                    var id = target.id;\n                    var point = this.data('point');\n                    if(_.isFunction(options.select)){\n                        options.select(target, point, this);\n                    }\n                    if(_.isFunction(options.remove)){\n                        this.remove();\n                        target.remove();\n                        options.remove(id, point);\n                    }\n                });\n            if(hover){\n                layer.hover(function(){\n                    if(!target.flashing){\n                        self.setStyle(target, 'target-hover');\n                    }\n                }, function(){\n                    if(!target.flashing){\n                        self.setStyle(target, 'target-success');\n                    }\n                });\n            }\n\n            layer.id = 'layer-' + target.id;\n            layer.data('point', point);\n            target.data('target', point);\n\n            if(_.isFunction(options.create)){\n                options.create(target);\n            }\n    \n            return target;\n        },\n\n\n        /**\n         * Get the Raphael coordinate from QTI coordinate\n         * @param {Raphael.Paper} paper - the interaction paper\n         * @param {String} type - the shape type\n         * @param {String|Array.<Number>} coords - qti coords as a string or an array of number\n         * @returns {Array} the arguments array of coordinate to give to the approriate raphael shapre creator\n         */\n        raphaelCoords :  function raphaelCoords(paper, type, coords){\n            var shapeCoords;\n            if(_.isString(coords)){\n                coords = _.map(coords.split(','), function(coord){\n                    return parseInt(coord, 10);\n                });\n            }\n            if(!_.isArray(coords) || coords.length < coordsValidator[type]){\n                throw new Error('Invalid coords ' + JSON.stringify(coords) + '  for type ' + type);\n            } \n            switch(type){\n                case 'rect' : shapeCoords = qti2raphCoordsMapper.rect(coords); break; \n                case 'default' : shapeCoords = qti2raphCoordsMapper['default'].call(null, paper); break; \n                case 'poly' : shapeCoords = qti2raphCoordsMapper.poly(coords); break; \n                default : shapeCoords = coords; break;\n            }\n            return shapeCoords;\n        },\n\n        /**\n         * Get the QTI coordinates from a Raphael Element\n         * @param {Raphael.Element} element - the shape to get the coords from\n         * @returns {String} the QTI coords\n         */\n        qtiCoords : function qtiCoords(element){\n            var mapper = raph2qtiCoordsMapper[element.type];\n            var result = '';\n            if(_.isFunction(mapper)){\n                result = _.map(mapper.call(raph2qtiCoordsMapper, element.attr()), function(coord){\n                            return _.parseInt(coord);\n                        }).join(',');\n            }\n            return result;\n        },\n \n        /**\n         * Create a circle that animate and disapear from a shape.\n         * \n         * @param {Raphael.Paper} paper - the paper\n         * @param {Raphael.Element} element - used to get the bbox from\n         */\n        createTouchCircle : function(paper, bbox){\n            var radius = bbox.width > bbox.height ? bbox.width : bbox.height;\n            var tCircle = paper.circle( (bbox.x + (bbox.width / 2)),  (bbox.y + (bbox.height / 2)), radius);\n            tCircle.attr(gstyle['touch-circle']);\n            _.defer(function(){\n                tCircle.animate({'r' : radius + 5, opacity: 0.7}, 300, function(){\n                    tCircle.remove();\n                });     \n            });\n        },\n\n        /**\n         * Create a text, that scales.\n         * \n         * @param {Raphael.Paper} paper - the paper\n         * @param {Object} options - the text options\n         * @param {Number} options.left - x coord\n         * @param {Number} options.top - y coord\n         * @param {String} [options.content] - the text content\n         * @param {String} [options.id] - the element identifier\n         * @param {String} [options.style = 'small-text'] - the style name according to the graphic-style.json keys\n         * @param {String} [options.title] - the text tooltip content\n         * @param {Boolean} [options.hide = false] - if the text starts hidden\n         * @returns {Raphael.Element} the created text\n         */\n        createText : function(paper, options){\n            var fontSize, scaledFontSize;\n            var top     = options.top || 0;\n            var left    = options.left || 0;\n            var content = options.content || '';\n            var style   = options.style || 'small-text';\n            var title   = options.title || '';\n            var factor  = 1;\n        \n            if(paper.width && paper.w){\n                factor = paper.width / paper.w;\n            }\n\n            var text = paper.text(left , top, content).toFront();\n            if(options.id){\n                text.id = options.id;\n            }\n            if(options.hide){\n                text.hide();\n            }\n                \n            text.attr(gstyle[style]);\n \n            if(typeof factor !== 'undefined' && factor !== 1){\n                fontSize = parseInt(text.attr('font-size'), 10);\n                scaledFontSize   = Math.floor(fontSize / factor) + 1;\n        \n                text.attr('font-size', scaledFontSize);\n            }\n  \n            if(title){\n                this.updateTitle(text, title);\n            }\n            return text; \n        },\n\n        /**\n         * Create a text in the middle of the related shape.\n         * \n         * @param {Raphael.Paper} paper - the paper\n         * @param {Raphael.Element} shape - the shape to add the text to\n         * @param {Object} options - the text options\n         * @param {String} [options.content] - the text content\n         * @param {String} [options.id] - the element identifier\n         * @param {String} [options.style = 'small-text'] - the style name according to the graphic-style.json keys\n         * @param {String} [options.title] - the text tooltip content\n         * @param {Boolean} [options.hide = false] - if the text starts hidden\n         * @param {Boolean} [options.shapeClick = false] - clicking the text delegates to the shape\n         * @returns {Raphael.Element} the created text\n         */\n        createShapeText : function(paper, shape, options){\n            var self    = this;\n            var fontSize, scaledFontSize;\n            var bbox    = shape.getBBox();\n       \n            var text = this.createText(paper, _.merge({\n                left : bbox.x + (bbox.width / 2),\n                top  : bbox.y + (bbox.height / 2)\n            }, options));\n \n            if(options.shapeClick){\n                text.click(function(){\n                    self.trigger(shape, 'click');\n                });\n            }   \n            return text; \n        },\n\n        /**\n         * Create an image with a padding and a border, using a set.\n         * \n         * @param {Raphael.Paper} paper - the paper\n         * @param {Object} options - image options\n         * @param {Number} options.left - x coord\n         * @param {Number} options.top - y coord\n         * @param {Number} options.width - image width\n         * @param {Number} options.height - image height\n         * @param {Number} options.url - image ulr\n         * @param {Number} [options.padding = 6] - a multiple of 2 is welcomed\n         * @param {Boolean} [options.border = false] - add a border around the image\n         * @param {Boolean} [options.shadow = false] - add a shadow back the image\n         * @returns {Raphael.Element} the created set, augmented of a move(x,y) method\n         */\n        createBorderedImage : function(paper, options){\n            var padding = options.padding >= 0 ? options.padding : 6;\n            var halfPad = padding / 2;\n \n            var rx = options.left,\n                ry = options.top, \n                rw = options.width + padding, \n                rh = options.height + padding;\n\n            var ix = options.left + halfPad,\n                iy = options.top + halfPad,\n                iw = options.width, \n                ih = options.height;\n\n            var set = paper.set();\n    \n            //create a rectangle with a padding and a border.\n            var rect = paper\n                .rect(rx, ry, rw, rh)\n                .attr(options.border ? gstyle['imageset-rect-stroke'] : gstyle['imageset-rect-no-stroke']);\n\n            //and an image centered into the rectangle.\n            var image = paper\n                .image(options.url, ix, iy, iw, ih)\n                .attr(gstyle['imageset-img']);\n\n            if(options.shadow){\n                set.push(rect.glow({ \n                    width   : 2,\n                    offsetx : 1,\n                    offsety : 1\n                }));\n            }\n            set.push(rect, image);\n\n            /**\n             * Add a move method to set that keep the given coords during an animation\n             * @private\n             * @param {Number} x - destination\n             * @param {Number} y - destination\n             * @param {Number} [duration = 400] - the animation duration\n             * @returns {Raphael.Element} the set for chaining\n             */\n            set.move = function move(x, y, duration){\n                var animation = raphael.animation({x: x, y : y}, duration || 400);\n                var elt = rect.animate(animation);\n                image.animateWith(elt, animation, {x : x + halfPad, y : y + halfPad}, duration || 400);\n                return set;\n            };\n        \n            return set;\n        },\n        \n        /**\n         * Update the visual state of an Element\n         * @param {Raphael.Element} element - the element to change the state\n         * @param {String} state - the name of the state (from states) to switch to\n         * @param {String} [title] - a title linked to this step\n         */\n        updateElementState : function(element, state, title){\n            if(element && element.animate){\n                element.animate(gstyle[state], 200, 'linear', function(){\n                    element.attr(gstyle[state]); //for attr that don't animate\n                });\n        \n                if(title){\n                    this.updateTitle(element, title);\n                }\n            }\n        },\n\n        /**\n         * Update the title of an element (the attr method of Raphael adds only new node instead of updating exisitings).\n         * @param {Raphael.Element} element - the element to update the title\n         * @param {String} [title] - the new title\n         */\n        updateTitle : function(element, title){\n            if(element && element.node){\n                //removes all remaining titles nodes\n                _.forEach(element.node.children, function(child){\n                    if(child.nodeName.toLowerCase() === 'title'){\n                        element.node.removeChild(child);\n                    }\n                });\n                \n                //then set the new title\n                element.attr('title', title);\n            }\n        },\n\n        /**\n         * Highlight an element with the error style\n         * @param {Raphael.Element} element - the element to hightlight\n         * @param {String} [restorState = 'basic'] - the state to restore the elt into after flash\n         */\n        highlightError : function(element, restoredState){\n            var self = this;\n            if(element){\n               element.flashing = true; \n               self.updateElementState(element, 'error');\n                _.delay(function(){\n                    self.updateElementState(element, restoredState || 'basic');\n                    element.flashing = false; \n                }, 800);\n           }\n        },\n\n        /**\n         * Trigger an event already bound to a raphael element\n         * @param {Raphael.Element} element\n         * @param {String} event - the event name\n         *\n         */\n        trigger : function(element, event){\n\n            var evt = _.where(element.events, { name : event});\n            if(evt.length && evt[0] && typeof evt[0].f === 'function'){\n                evt[0].f.apply(element, Array.prototype.slice.call(arguments, 2));\n            }\n        },\n\n\n        /**\n         * Get an x/y point from a MouseEvent\n         * @param {MouseEvent} event - the source event\n         * @param {Raphael.Paper} paper - the interaction paper\n         * @param {jQueryElement} $container - the paper container\n         * @param {Boolean} isResponsive - if the paper is scaling\n         * @returns {Object} x,y point\n         */\n        getPoint : function getPoint(event, paper, $container, isResponsive){\n            var rwidth, rheight, wfactor;\n\n            //get the click coords\n            var point = this.clickPoint($container, event);\n\n            //recalculate point coords in case of scaled image.\n            if(paper.w && paper.w !== paper.width){\n                if(isResponsive){\n                    wfactor = paper.w / paper.width;\n                    point.x = Math.round(point.x * wfactor);\n                    point.y = Math.round(point.y * wfactor);\n                } else if(paper.width > paper.w){\n                    rwidth = (paper.width - paper.w) / 2;\n                    point.x = Math.round(point.x - rwidth);\n                } else {  \n                    wfactor = paper.w / paper.width;\n                    point.x = Math.round(point.x * wfactor);\n\n                    rheight = (paper.height - (paper.height * (2 - wfactor))) / 2;\n                    point.y = Math.round((point.y * wfactor) - rheight);\n                } \n            }\n    \n            return point;\n        },\n\n        /**\n         * Get paper position relative to the container \n         * @param {jQueryElement} $container - the paper container\n         * @param {Raphael.Paper} paper - the interaction paper\n         * @returns {Object} position with top and left\n         */\n        position : function($container, paper){\n            var pw = parseInt(paper.w || paper.width, 10);\n            var cw = parseInt($container.width(), 10);\n            var ph = parseInt(paper.w || paper.width, 10);\n            var ch = parseInt($container.height(), 10);\n\n            return {\n                left : ((cw - pw) / 2), \n                top : ((ch - ph) / 2) \n            };\n        },\n\n        /**\n         * Get a point from a click event\n         * @param {jQueryElement} $container - the element that contains the paper\n         * @param {MouseEvent} event - the event triggered by the click\n         * @returns {Object} the x,y point\n         */ \n        clickPoint : function($container, event){\n            var x, y; \n            var offset = $container.offset();\n             if (event.pageX || event.pageY) {\n                x = event.pageX - offset.left;\n                y = event.pageY - offset.top;\n            } else if (event.clientX || event.clientY) {\n                x = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft - offset.left;\n                y = event.clientY + document.body.scrollTop + document.documentElement.scrollTop - offset.top;\n            }\n\n            return { x : x, y : y };\n        }\n    };\n\n    return GraphicHelper;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'raphael',\n    'scale.raphael',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicAssociateInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper'\n], function($, _, __, raphael, scaleRaphael, tpl, graphic,  pciResponse, Helper){\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     */\n    var render = function render(interaction){\n        \n        var $container = Helper.getContainer(interaction);\n        var background = interaction.object.attributes;\n        var baseUrl = this.getOption('baseUrl') || '';\n        var $imageBox  = $('.main-image-box', $container);\n        interaction._vsets = [];\n \n        interaction.paper = graphic.responsivePaper( 'graphic-paper-' + interaction.serial, interaction.serial, {\n            width       : background.width, \n            height      : background.height,\n            img         : baseUrl + background.data,\n            imgId       : 'bg-image-' + interaction.serial,\n            container   : $container\n        });\n\n        //call render choice for each interaction's choices\n        _.forEach(interaction.getChoices(), _.partial(_renderChoice, interaction));\n\n        //make the paper clear the selection by clicking it\n        _paperUnSelect(interaction);\n\n        //set up the constraints instructions\n        Helper.minMaxChoiceInstructions(interaction, {\n            min: interaction.attr('minAssociations'),\n            max: interaction.attr('maxAssociations'),\n            getResponse : _getRawResponse,\n            onError : function(data){\n                if(data && data.target){\n                    graphic.highlightError(data.target);\n                }\n            }\n        }); \n    };\n\n\n    /**\n     * Render a choice inside the paper. \n     * Please note that the choice renderer isn't implemented separately because it relies on the Raphael paper instead of the DOM.\n     * @param {Paper} paper - the raphael paper to add the choices to\n     * @param {Object} interaction\n     * @param {Object} choice - the hotspot choice to add to the interaction\n     */\n    var _renderChoice  =  function _renderChoice(interaction, choice){\n        var shape = choice.attr('shape');\n        var coords = choice.attr('coords');\n        var maxAssociations = interaction.attr('maxAssociations');\n\n        var rElement = graphic.createElement(interaction.paper, shape, coords, {\n            id : choice.serial,\n            title : __('Select this area to start an association')\n        })\n        .data('max', choice.attr('matchMax')) \n        .data('matching', 0) \n        .removeData('assocs')\n        .click(function(){\n            var self = this;\n            var active, assocs;\n\n            //can't create more associations than the maxAssociations attr\n            if(maxAssociations > 0 && _getRawResponse(interaction).length >= maxAssociations){\n                _shapesUnSelectable(interaction);\n                Helper.validateInstructions(interaction, { choice : choice, target : this });\n                return;\n            } \n\n            if(this.selectable) {\n                active = _getActiveElement(interaction);\n                if(active){\n\n                    //increment the matching counter\n                    active.data('matching', active.data('matching') + 1);\n                    this.data('matching', this.data('matching') + 1);\n\n                    //attach the response to the active (not the dest)\n                    assocs = active.data('assocs') || [];\n                    assocs.push(choice.id());\n                    active.data('assocs', assocs);\n\n                    //and create the path\n                    _createPath(interaction, active, this, function onRemove(){\n\n                        //decrement the matching counter\n                        active.data('matching', active.data('matching') - 1);\n                        self.data('matching', self.data('matching') - 1);\n\n                        //detach the response from the active\n                        active.data('assocs', _.remove(active.data('assocs') || [], choice.id()));\n\n                        Helper.triggerResponseChangeEvent(interaction);\n                        Helper.validateInstructions(interaction, { choice : choice, target : self });\n                    });\n                }\n                _shapesUnSelectable(interaction);\n \n            } else if(this.active) {\n                graphic.updateElementState(this, 'basic', __('Select another area to complete the association'));\n                this.active = false;\n                _shapesUnSelectable(interaction);\n            } else if(_isMatchable(this)){\n                graphic.updateElementState(this, 'active', __('Select this area to start an association'));\n                this.active = true;\n                _shapesSelectable(interaction, this);\n            }\n           \n            Helper.triggerResponseChangeEvent(interaction);\n            Helper.validateInstructions(interaction, { choice : choice, target : this });\n        });\n    };\n\n    /**\n     * By clicking the paper image the shapes are restored to their default state\n     * @private\n     * @param {Object} interaction\n     */\n    var _paperUnSelect = function _paperUnSelect(interaction){\n        var $container = Helper.getContainer(interaction);\n        var image = interaction.paper.getById('bg-image-' + interaction.serial);\n        if(image){\n            image.click(function(){\n                _shapesUnSelectable(interaction);\n                $container.trigger('unselect.graphicassociate');\n            });\n        }\n    };\n\n    /**\n     * Get the element that has the active state\n     * @private\n     * @param {Object} interaction\n     * @returns {Raphael.Element} the active element\n     */\n    var _getActiveElement = function _getActiveElement(interaction){\n        var active;\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element && element.active === true){\n                active = element;\n                return false;\n            }\n        });\n        return active;\n    };\n\n    /**\n     * Create a path from a src element to a destination. \n     * The path is selectable and can be removed by itself\n     * @private\n     * @param {Object} interaction\n     * @param {Raphael.Element} srcElement - the path starts from this shape\n     * @param {Raphael.Element} destElement - the path ends to this shape\n     * @param {Function} onRemove - called back on path remove\n     */\n    var _createPath = function _createPath(interaction, srcElement, destElement, onRemove){\n        var $container = Helper.getContainer(interaction);   \n \n        //virtual set, not a raphael one, just to group the elements\n        var vset = [];\n        \n        //get the middle point of the source shape\n        var src = srcElement.getBBox();\n        var sx = src.x + (src.width / 2);\n        var sy = src.y + (src.height / 2);\n\n        //get the middle point of the source shape\n        var dest = destElement.getBBox();\n        var dx = dest.x + (dest.width / 2);\n        var dy = dest.y + (dest.height / 2);\n\n        //create a path with bullets at the beginning and the end \n        var srcBullet = interaction.paper.circle(sx, sy, 3)\n            .attr(graphic._style['assoc-bullet']);\n\n        var destBullet = interaction.paper.circle(dx, dy, 3)\n            .attr(graphic._style['assoc-bullet']);\n        \n        var path = interaction.paper.path('M' + sx + ',' + sy + 'L' + sx + ',' + sy)\n            .attr(graphic._style.assoc)\n            .animate({path : 'M' + sx + ',' + sy + 'L' + dx + ',' + dy}, 300);\n        \n        //create an overall layer that make easier the path selection\n        var layer = interaction.paper.path('M' + sx + ',' + sy + 'L' + dx + ',' + dy)\n            .attr(graphic._style['assoc-layer']);\n\n        //get the middle of the path\n        var midPath = layer.getPointAtLength(layer.getTotalLength() / 2);\n        \n        //create an hidden background for the closer\n        var closerBg = interaction.paper.circle(midPath.x, midPath.y, 9)\n            .attr(graphic._style['close-bg'])\n            .toBack();\n \n        //create an hidden closer\n        var closer = interaction.paper.path(graphic._style.close.path)\n            .attr(graphic._style.close)\n            .transform('T' + (midPath.x - 9 ) + ',' + (midPath.y - 9))\n            .attr('title', _('Click again to remove'))\n            .toBack();\n\n        //the path is below the shapes        \n        srcElement.toFront();\n        destElement.toFront();\n\n        //add the path into a set\n        vset = [srcBullet, path, destBullet, layer, closerBg, closer];\n        interaction._vsets.push(vset);\n\n        //to identify the element of the set outside the context\n        _.invoke(vset, 'data', 'assoc-path', true);\n\n        //enable to select the path by clicking the invisible layer \n        layer.click(function selectLigne (){\n            if(closer.attrs.opacity === 0){\n                showCloser();\n            } else {\n                hideCloser();\n            }\n        });\n\n        $container.on('unselect.graphicassociate', function(){\n            hideCloser();\n        });\n\n        function showCloser(){\n            closerBg\n                .toFront()\n                .animate({opacity: 0.8}, 300)\n                .click(removeSet);\n            closer \n                .toFront()\n                .animate({opacity: 1}, 300)\n                .click(removeSet);\n        }\n\n        function hideCloser(){\n           if(closerBg && closerBg.type){ \n                closerBg\n                    .animate({opacity: 0}, 300, function(){\n                        closerBg.toBack();\n                    })\n                    .unclick();\n                closer \n                    .animate({opacity: 0}, 300, function(){\n                        closer.toBack();\n                    })\n                    .unclick();\n            }\n        }\n    \n        //remove set handler\n        function removeSet(){\n            _.invoke(vset, 'remove');\n            interaction._vsets = _.without(interaction._vsets, vset);\n            if(typeof onRemove === 'function'){\n                onRemove();\n            }\n        } \n    };\n    \n    /**\n     * Makes the shapes selectable\n     * @private\n     * @param {Object} interaction\n     * @param {Raphael.Element} active - the active shape\n     */\n    var _shapesSelectable = function _shapesSelectable(interaction, active){\n    \n        var assocs = active.data('assocs') || [];       \n \n        //update the shape state\n        _.forEach(interaction.getChoices(), function(choice){\n            var element;\n            if(!_.contains(assocs, choice.id())){\n                element = interaction.paper.getById(choice.serial);\n                if(!element.active && element.id !== active.id &&  _isMatchable(element, active)){\n                    element.selectable = true;\n                    graphic.updateElementState(element, 'selectable');\n                }\n            }\n        });\n    };\n\n    /**\n     * Makes all the shapes UNselectable\n     * @private\n     * @param {Object} interaction\n     */\n    var _shapesUnSelectable = function _shapesUnSelectable(interaction){\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                element.selectable = false;\n                element.active = false;\n                graphic.updateElementState(element, 'basic');\n            }\n        });\n    };\n\n    /**\n     * Check if a shape can accept matches\n     * @private\n     * @param {Raphael.Element} element - the shape\n     * @returns {Boolean} true if the element is matchable\n     */\n    var _isMatchable = function(element){\n        var matchable = false;\n        var matching, matchMax;\n        if(element){\n            matchMax = element.data('max') || 0;\n            matching = element.data('matching') || 0;\n            matchable = (matchMax === 0 || matchMax > matching);\n        }\n        return matchable;\n    };\n\n    /**\n     * Get the response from the interaction\n     * @private\n     * @param {Object} interaction\n     * @returns {Array} the response in raw format\n     */ \n    var _getRawResponse = function _getRawResponse(interaction){\n        var responses = []; \n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            var assocs = element.data('assocs'); \n            if(element && assocs){\n               responses = responses.concat(_.map(assocs, function(id){\n                    return [choice.id(), id];\n               }));\n            }\n        });\n        return responses;\n    };\n \n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        \n        var responseValues;\n        if(response && interaction.paper){\n\n            try{\n                responseValues = pciResponse.unserialize(response, interaction);\n            } catch(e){}\n            \n            if(_.isArray(responseValues)){\n                //create an object with choiceId => shapeElement\n                var map =  _.transform(interaction.getChoices(), function(res, choice){\n                    res[choice.id()] = interaction.paper.getById(choice.serial);\n                });\n               _.forEach(responseValues, function(responseValue){\n                    var el1, el2;\n                    if(_.isArray(responseValue) && responseValue.length === 2){\n                        el1 = map[responseValue[0]];\n                        el2 = map[responseValue[1]];\n                        if(el1 && el2){\n                           graphic.trigger(el1, 'click'); \n                           graphic.trigger(el2, 'click'); \n                        }\n                    }\n               }); \n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction){\n        var toRemove = [];        \n\n        //reset response and state bound to shapes\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                element.data({\n                    'max' : choice.attr('matchMax'),\n                    'matching' : 0, \n                    'assocs' : []\n                });\n            }\n        });\n        \n        //remove the paths, but outside the forEach as it is implemented as a linked list\n        interaction.paper.forEach(function(elt){\n            if(elt.data('assoc-path')){\n                toRemove.push(elt);\n            }\n        });\n        _.invoke(toRemove, 'remove');\n    };\n\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var raw = _getRawResponse(interaction);\n        var response =  pciResponse.serialize(_getRawResponse(interaction), interaction);\n        return response;\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container;\n        if(interaction.paper){\n            $container = Helper.getContainer(interaction);\n        \n            $(window).off('resize.qti-widget.' + interaction.serial);\n            $container.off('resize.qti-widget.' + interaction.serial);\n\n            interaction.paper.clear();\n            Helper.removeInstructions(interaction);\n            \n            $container.off('.graphicassociate');\n\n            $('.main-image-box', $container).empty().removeAttr('style');            \n            $('.image-editor', $container).removeAttr('style'); \n            $('ul', $container).empty();\n        }\n    };\n  \n    /**\n     * Expose the common renderer for the hotspot interaction\n     * @exports qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction\n     */\n    return {\n        qtiClass : 'graphicAssociateInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy\n    };\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/helper/dummyElement'\n], function($, _, __, graphic, dummyElement){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the Hotspot Interaction\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/Widget\n     */      \n    var GraphicInteractionWidget = {\n\n        /**\n         * Create a basic Raphael paper or a placeholder of no bg is defined.\n         * @param {Function} resize - called back on resize with the width and factor\n         * @returns {Raphael.Paper} the raphael paper if initialized?\n         */ \n        createPaper : function(resize){\n            var paper;\n            var $container  = this.$original;\n            var $item       = $container.parents('.qti-item');\n            var background  = this.element.object.attributes;\n            var serial      = this.element.serial;\n     \n            if(!background.data){\n                this._createPlaceholder();\n            } else {\n                paper = graphic.responsivePaper( 'graphic-paper-' + serial, serial, {\n                    width       : background.width, \n                    height      : background.height,\n                    img         : this.baseUrl + encodeURIComponent(background.data),\n                    imgId       : 'bg-image-' + serial,\n                    container   : $container,\n                    resize      : resize\n                });\n\n                //listen for internal size change\n                $item.on('resize.gridEdit.' + serial, function(){\n                    $container.trigger('resize.qti-widget.' + serial);\n                });\n\n            }\n\n            return paper;\n        },\n\n        /**\n         * Creates a dummy placeholder for background.\n         * @private\n         */\n        _createPlaceholder : function(){\n            var self       = this;\n            var $container = this.$original;\n            var $imageBox  = $container.find('.main-image-box');\n            var $editor    = $container.find('.image-editor');\n            var diff       = ($editor.outerWidth() - $editor.width()) + ($container.outerWidth() - $container.width()) + 1;\n            dummyElement.get({\n                icon: 'image',\n                css: {\n                    width  : $container.innerWidth() - diff,\n                    height : 200\n                },\n                title : __('Select an image first.')\n            })\n            .click(function(){\n                var $upload  = $('[data-role=\"upload-trigger\"]', self.$form);\n                if($upload.length){\n                    $upload.trigger('click');\n                }\n            })\n            .appendTo($imageBox);\n        },\n\n        /**\n         * call render choice for each interaction's choices\n         */ \n        createChoices : function(){\n            _.forEach(this.element.getChoices(), this._currentChoices, this);\n        },\n        \n        /**\n         * Add shape to the Raphel paper for a QTI choice\n         * @private\n         * @param {Object} choice - the QTI choice \n         */ \n        _currentChoices : function(choice){\n            graphic.createElement(this.element.paper, choice.attr('shape'), choice.attr('coords'), {\n                id          : choice.serial,\n                touchEffect : false\n            });\n        }\n   };\n\n    return GraphicInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\n], function(stateFactory, SleepState){\n   \n    var initSleepState = function initSleepState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        widget.on('metaChange', function(data){\n            if(data.key === 'responsive'){\n                if(data.value === true){\n                    interaction.addClass('responsive');\n                } else {\n                    interaction.removeClass('responsive');\n                }\n                widget.rebuild();\n            }\n        });\n    };\n\n    var exitSleepState = function exitSleepState(){};\n \n    return stateFactory.extend(SleepState, initSleepState, exitSleepState); \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/graphicInteraction/sidebar', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"tall\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n        <li class=\\\"separator\\\"></li>\\n        <li data-type=\\\"target\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Drop the target to select a point\", options) : helperMissing.call(depth0, \"__\", \"Drop the target to select a point\", options)))\n    + \"\\\" class=\\\"icon-target\\\"></span></li>\\n        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"image-sidebar lft  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.showTarget), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n    <ul class=\\\"none forms solid\\\">\\n        <li data-type=\\\"rect\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Draw a rectangle on the image\", options) : helperMissing.call(depth0, \"__\", \"Draw a rectangle on the image\", options)))\n    + \"\\\" class=\\\"icon-rectangle\\\"></span></li>\\n        <li data-type=\\\"circle\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Draw a circle on the image\", options) : helperMissing.call(depth0, \"__\", \"Draw a circle on the image\", options)))\n    + \"\\\" class=\\\"icon-circle\\\"></span></li>\\n        <li data-type=\\\"ellipse\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Draw an ellipsis on the image\", options) : helperMissing.call(depth0, \"__\", \"Draw an ellipsis on the image\", options)))\n    + \"\\\" class=\\\"icon-ellipsis\\\"></span></li>\\n        <li data-type=\\\"path\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Draw a free form on the image\", options) : helperMissing.call(depth0, \"__\", \"Draw a free form on the image\", options)))\n    + \"\\\" class=\\\"icon-free-form\\\"></span></li>\\n    \\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.showTarget), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n        <li class=\\\"separator\\\"></li>\\n        <li class=\\\"bin disabled\\\"><span title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Remove the selected shape\", options) : helperMissing.call(depth0, \"__\", \"Remove the selected shape\", options)))\n    + \"\\\" class=\\\"icon-bin\\\"></span></li>\\n    </ul>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeSideBar',[\n    'jquery', 'lodash', \n    'tpl!taoQtiItem/qtiCreator/tpl/graphicInteraction/sidebar'\n], function($, _, sidebarTmpl){\n\n    /**\n     * Helps you to create the side bar used to select shapes to draw in the QTI Create\n     * @exports qtiCreator/widgets/interaction/helpers/shapeSideBar\n     */\n    var shapeSideBar  = {\n\n        /**\n         * Create the side bar and add it the container.\n         * It will resize the container accordingly.\n         * @param {jQueryElement} $container - a graphic interaction container\n         * @param {Boolean} [showTarget = false] - if the target data type has to be shown\n         * @returns {jQueryElement} the side bar element\n         * @fires shapeSideBar#shapeactive.qti-widget \n         * @fires shapeSideBar#shapedeactive.qti-widget \n         * @fires resize.qti-widget\n         */\n        create : function create($container, showTarget){\n\n            var $imageEditor = $container.find('.image-editor');\n            var serial = $container.data('serial');\n            var $imageBox = $('.main-image-box', $imageEditor);\n            var $sideBar = $(sidebarTmpl({\n                    showTarget : !!showTarget \n                 })).insertBefore($imageEditor);\n            var $forms = $('li[data-type]', $sideBar);\n            var $bin = $('li.bin', $sideBar);\n            //var newWidth = $container.width() - $sideBar.outerWidth(true) - 2; //-2 is a security to prevent the element to dislpay below the sidebar\n           \n            /**\n             * Set a form/shape into an active state\n             * @param {jQueryElement} $form - the form/shape button\n             */ \n            var activate = function activate($form){\n                $forms.filter('.active').each(function(){\n                    deactivate($(this));\n                });\n                $form.addClass('active');\n\n                /**\n                 * When a shape is activated \n                 * @event shapeSideBar#shapeactive.qti-widget\n                 * @param {jQueryElement} $form - the shape element\n                 * @param {String} type - the shape type\n                 */\n                $sideBar.trigger('shapeactive.qti-widget', [$form, $form.data('type')]);\n            }; \n            \n            /**\n             * Set a form/shape into an inactive state\n             * @param {jQueryElement} $form - the form/shape button \n             */ \n            var deactivate = function deactivate($form){\n                $form.removeClass('active');\n                \n                /**\n                 * A shape is deactivated \n                 * @event shapeSideBar#shapedeactive.qti-widget \n                 * @param {jQueryElement} $form - the shape element\n                 * @param {String} type - the shape type\n                 */\n                $sideBar.trigger('shapedeactive.qti-widget', [$form, $form.data('type')]);\n            }; \n\n            /**\n             * To enable the bin \n             * @event shapeSideBar#enabalebin.qti-widget \n             */\n            $sideBar.on('enablebin.qti-widget', function(){\n               $bin.removeClass('disabled')\n                    .on('click', function(e){\n                        e.preventDefault();\n                        $sideBar.trigger('bin.qti-widget');\n                    });\n            });\n            \n            /**\n             * To disable the bin \n             * @event shapeSideBar#disabalebin.qti-widget \n             */\n            $sideBar.on('disablebin.qti-widget', function(){\n               $bin.addClass('disabled')\n                   .off('click'); \n            });\n\n            $forms.click(function(e){\n                e.preventDefault();\n                var $form = $(this);\n                if(!$form.hasClass('active')){\n                    activate($form);\n                } else {\n                    deactivate($form);\n                }\n            }); \n             \n            $container.on('resize.qti-widget.' + serial, function(){\n                _.defer(function(){\n                    $sideBar.find('.forms').height($imageEditor.innerHeight());\n                });\n            });\n            $container.trigger('resize.qti-widget.' + serial); \n            return $sideBar;\n        },\n\n        remove : function remove($container){\n            var $sideBar = $('.image-sidebar', $container);\n            var $imageEditor = $container.find('.image-editor');\n            var $imageBox = $('.main-image-box', $imageEditor);\n            if($sideBar.length){\n                $sideBar.remove();\n                //$imageBox.css('width', 'auto');\n                //$imageEditor.css('width', 'auto');\n\n                $container.off('resize.qti-widget.sidebar');\n                $container.trigger('resize.qti-widget'); \n            }\n        }\n    };\n\n\n    return shapeSideBar;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeHandlers',[\n    'jquery', 'lodash', 'raphael'\n], function($, _, Raphael){\n\n    /**\n     * Creates handlers around a shape\n     * @exports qtiCreator/widgets/interaction/helpers/shapeHandlers\n     * @param {Raphael.Paper} paper - the raphael paper\n     * @param {Raphael.Element} element - the shape\n     * @returns {Array<Raphael.Element>} the handlers \n     */\n    var shapeHandlers = function (paper, element){\n\n        var getCoords = function getHandlingCoords(element){\n            var coords;\n            var bbox        = element.getBBox();\n            var size        = bbox.width > 25 ? 6 : 4;\n            var half        = size / 2;\n            var halfWidth   = bbox.width / 2;\n            var halfHeight  = bbox.height / 2;\n\n            switch(element.type){\n                case 'circle' :\n                    coords = {\n                        midTop      : [bbox.x + halfWidth - half, bbox.y - size, size, size],\n                        midRight    : [bbox.x + bbox.width, bbox.y + halfHeight - half, size, size],\n                        midBot      : [bbox.x + halfWidth - half, bbox.y + bbox.height, size, size],\n                        midLeft     : [bbox.x - size, bbox.y + halfHeight - half, size, size]\n                    };\n                    break;\n                case 'path' :\n                    coords =  {};\n                    _.forEach(Raphael.parsePathString(element.attr('path')), function(segment, index){\n                        if(segment.length === 3){\n                            coords['point' + index] = segment.slice(1).concat(half);\n                        }\n                    });\n                    break;\n                case 'rect' :\n                case 'ellipse' :\n                    coords = {\n                        topLeft     : [bbox.x - size, bbox.y - size, size, size],\n                        midTop      : [bbox.x + halfWidth - half, bbox.y - size, size, size],\n                        topRight    : [bbox.x + bbox.width, bbox.y - size, size, size],\n                        midRight    : [bbox.x + bbox.width, bbox.y + halfHeight - half, size, size],\n                        botRight    : [bbox.x + bbox.width, bbox.y + bbox.height, size, size],\n                        midBot      : [bbox.x + halfWidth - half, bbox.y + bbox.height, size, size],\n                        botLeft     : [bbox.x - size, bbox.y + bbox.height, size, size],\n                        midLeft     : [bbox.x - size, bbox.y + halfHeight - half, size, size]\n                    };\n                    break;\n            }\n            return coords;\n        };\n\n        return _.map(getCoords(element), function(handlerCoords, name){\n            var handler, cursor, constraints, hshape;\n            if(element.type === 'path'){\n                cursor = 'move';\n                hshape = 'circle'; \n            } else {\n                hshape = 'rect'; \n                switch(name){\n                    case 'topLeft' :\n                        cursor = 'nw-resize';\n                        constraints = { ix : true, iy : true };\n                        break;\n                    case 'midTop' :\n                        cursor = 'ns-resize';\n                        constraints = { iy : true };\n                        break;\n                    case 'topRight' :\n                        cursor = 'ne-resize';\n                        constraints = { x : true, iy : true };\n                        break;\n                    case 'midRight' :\n                        cursor = 'ew-resize';\n                        constraints = { x : true };\n                        break;\n                    case 'botRight' :\n                        cursor = 'se-resize';\n                        break;\n                    case 'midBot' :\n                        cursor = 'ns-resize';\n                        constraints = { y : true };\n                        break;\n                    case 'botLeft' :\n                        cursor = 'sw-resize';\n                        constraints = { ix : true, y : true };\n                        break;\n                    case 'midLeft' :\n                        cursor = 'ew-resize';\n                        constraints = { ix : true };\n                        break;\n                }\n            }\n            return paper[hshape].apply(paper, handlerCoords)\n                        .attr({\n                            'fill' : '#eeeeee',\n                            'cursor' : cursor\n                        })\n                        .data('constraints', constraints);\n        });\n    };\n\n    return shapeHandlers;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer',[\n    'jquery', 'lodash', \n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic'\n], function($, _, commonGraphicHelper){\n\n\n    /**\n     * Resize a Raphael shape.\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer\n     * @param {Raphael.Element} element - the element to resize\n     * @param {Object} options - the sizing options\n     * @param {Object} [options.start] - the x,y starting point of the shape (prior to the resize)\n     * @param {Object} options.stop - the x,y stop point of the shape (the size is the difference between start and stop)\n     * @param {Object} [options.constraints] - define sizing constraints, ie. {x : true} for horizontal only sizing\n     * @param {Number} [options.pointIndex] - for a path, this is the index of the point into the path\n     * @param {Function} [options.resized] - called back on resized\n     */\n    var resize =  function resize (element, options){\n        var resizer;\n        \n        if(element && element.type && options.stop){\n            resizer = _.bind(shapeResizer[element.type], shapeResizer);\n            \n            if(!options.start){\n                options.start = getStartPoint(element);\n            }\n\n            if(_.isFunction(resizer)){\n                element.animate(\n                    resizer(options),\n                    100,    \n                    'linear',\n                    _.isFunction(options.resized) ? options.resized : _.noop\n                );\n            }\n        }\n\n        /**\n         * Get the start point of a shape\n         * @returns {Object} the start point\n         */\n        function getStartPoint(){\n            var startPoint;\n            switch(element.type){\n                case 'circle'   : startPoint = { x : element.attrs.cx, y : element.attrs.cy }; break;\n                case 'ellipse'  : \n                case 'rect'     : startPoint = element.getBBox(); break;\n            }\n            return startPoint;\n        }        \n    };\n    \n    /**\n     * Provides resizing implementation based on the shape type\n     */ \n    var shapeResizer = {\n        \n        /**\n         * Resize a rectangle\n         * @param {Object} options - see resize\n         * @returns {Object} attributes with the new size the Raphael.Element accepts\n         */\n        rect : function resizeRectangle(options){\n            var start = options.start;\n            var stop = options.stop;\n            var constraints = options.constraints;\n            var dest = {};\n            \n            if(!constraints || constraints.x){\n                dest.width = stop.x - start.x;\n                if(dest.width < 0){\n                    dest.x = stop.x;\n                    dest.width = dest.width * -1;\n                } \n            }\n\n            if(!constraints || constraints.y){\n                dest.height = stop.y - start.y;\n                if(dest.height < 0){\n                    dest.y = stop.y;\n                    dest.height = dest.height * -1;\n                }\n            }\n            if(constraints && constraints.ix){\n                dest.x = stop.x;\n                dest.width = start.width - (stop.x - start.x);\n                if(dest.width < 0){\n                    dest.x = stop.x;\n                    dest.width = dest.width * -1;\n                } \n            }\n\n            if(constraints && constraints.iy){\n                dest.y = stop.y;\n                dest.height = start.height - (stop.y - start.y);\n                if(dest.height < 0){\n                    dest.y = stop.y;\n                    dest.height = dest.height * -1;\n                }\n            }\n            \n            //we keep a minimal size\n            if(dest.width < 10){\n                dest.width = 10;\n            }\n            if(dest.height < 10){\n                dest.height = 10;\n            }\n            return dest;\n        },\n        \n        /**\n         * Resize a circle\n         * @param {Object} options - see resize\n         * @returns {Object} attributes with the new size the Raphael.Element accepts\n         */\n        circle : function resizeCircle(options){\n            var start = options.start;\n            var stop = options.stop;\n            var rw = (stop.x > start.x) ? stop.x - start.x  : start.x - stop.x;\n            var rh = (stop.y > start.y) ? stop.y - start.y  : start.y - stop.y;\n            //thanks pythagore \n            var r =  Math.floor( Math.sqrt(Math.pow(rw, 2) + Math.pow(rh, 2)));\n\n            return {\n                r : r < 5 ? 5 : r\n            };\n        },\n\n        /**\n         * Resize an ellispe\n         * @param {Object} options - see resize\n         * @returns {Object} attributes with the new size the Raphael.Element accepts\n         */\n        ellipse : function resizeEllipse(options){\n            var dest = {};\n            var boxDest = this.rect(options); \n\n            if(boxDest.x){\n                dest.x = boxDest.x;\n            }\n\n            if(boxDest.y){\n                dest.y = boxDest.y;\n            }\n            \n            if(boxDest.width){\n                dest.rx = boxDest.width / 2;\n            }\n            \n            if(boxDest.height){\n                dest.ry = boxDest.height / 2;\n            }\n            return dest;\n        },\n\n        /**\n         * Resize a path\n         * @param {Object} options - see resize (pointIndex is required here)\n         * @returns {Object} attributes with the new size the Raphael.Element accepts\n         */\n        path : function resizePath(options){\n            var dest = {};\n            if(options.path && options.start){\n                dest.path = '';\n               _.forEach(options.path, function(point, index){\n                   dest.path += point[0];\n                   if(point.length === 3){\n                       if (index === options.pointIndex || options.pointIndex === 0 && index === 1){\n                            dest.path += options.stop.x + ',' + options.stop.y;\n                       } else {\n                            dest.path += point[1] + ',' + point[2];\n                       }\n                   }                 \n               }); \n            }\n            return dest;\n        }\n    };\n    \n    return resize;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover',['jquery', 'lodash'], function($, _){\n\n    /**\n     * Move a Raphael shape.\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover\n     * @param {Raphael.Element} element - the element to move\n     * @param {Object} start - the original position\n     * @param {Object} stop - the destination position\n     */\n    var move =  function move (element, start, stop){\n        var mover;\n        if(element && element.type){\n            mover = _.bind(shapeMover[element.type], shapeMover);\n          \n            if(_.isFunction(mover)){\n                element.animate(\n                    mover(start, stop)\n                );\n            }\n        }\n    };\n    \n    /**\n     * Provides moving implementation based on the shape type\n     */ \n    var shapeMover = {\n        \n        /**\n         * Move a rectangle;\n         * @param {Raphael.Element} element - the element to move\n         * @param {Object} start - the original position\n         * @param {Object} stop - the destination position\n         * @returns {Object} attributes with the new position, that the Raphael.Element accepts\n         */\n        rect : function moveRectangle(start, stop){\n            return {\n                x : stop.x - start.x,\n                y : stop.y - start.y\n            };\n        },\n        \n        /**\n         * Move a circle.\n         * @param {Raphael.Element} element - the element to move\n         * @param {Object} start - the original position\n         * @param {Object} stop - the destination position\n         * @returns {Object} attributes with the new position, that the Raphael.Element accepts\n         */\n        circle : function moveCircle(start, stop){\n            return  {\n                cx : stop.x,\n                cy : stop.y\n            };\n        },\n\n        /**\n         * Move an ellipse.\n         * @param {Raphael.Element} element - the element to move\n         * @param {Object} start - the original position\n         * @param {Object} stop - the destination position\n         * @returns {Object} attributes with the new position, that the Raphael.Element accepts\n         */\n        ellipse : function moveEllipse(start, stop){\n            return {\n                cx : stop.x,\n                cy : stop.y\n            };\n        },\n\n        /**\n         * Move a path.\n         * @param {Raphael.Element} element - the element to move\n         * @param {Object} start - the original position\n         * @param {Object} stop - the destination position\n         * @returns {Object} attributes with the new position, that the Raphael.Element accepts\n         */\n        path : function movePath(start, stop){\n                \n            //do not use Raphael.transformPath to prevent using Curves for translation\n            var dest = { \n                path :  '' \n            };\n            _.forEach(start.path, function(point){\n                dest.path += point[0];\n                if(point.length === 3){\n                    dest.path += (point[1] + stop.x - start.x) + ',' + (point[2] + stop.y - start.y);\n                }                 \n            });\n            return dest;\n        }\n    };\n    \n    return move;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/helpers/pathBuilder',[\n    'jquery', 'lodash', \n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic'\n], function($, _, graphicHelper){\n\n\n    var pathBuilder = function(paper){\n\n        var path = {\n\n            _path : null,\n\n            closed : false,\n\n            set : null,\n\n            points : [],\n\n            getPath : function(){\n                return this._path;\n            },\n\n            start : function(point){\n                this.points = [];\n                return this.add(point);\n            },\n\n            add : function(point){\n                var self = this;\n                var stop; \n                var closeMe = false;\n\n                stop = paper.circle(point.x, point.y, 3)\n                            .attr({'stroke' : 'black', 'stroke-width': 1, 'fill' : 'white', 'opacity' : 0.7, 'cursor' : 'pointer'})\n                            .click(function(e){\n                                e.preventDefault();\n                                e.stopPropagation();             \n                                if(self.points.length > 2){\n                                    this.attr('fill', 'green');\n                                    self.close();\n                                }\n                            });\n                \n                if(this.points.length === 0){\n\n                    stop.attr('fill', 'red');\n\n                    this.set = paper.set();\n\n                    this._path = paper.path('M' + point.x + ',' + point.y).attr(graphicHelper._style.active).attr('opacity', 0.3); \n                    this.set.push(this._path);\n                }\n\n                this.points.push(point);\n                this.set.push(stop);\n                this._path.animate({ path : this._path.attr('path') + 'L' +  point.x + ',' + point.y});\n     \n                return this;\n            },\n\n            close : function(){\n                this._path.attr({ path : this._path.attr('path') + 'Z'}).attr(graphicHelper._style.active).attr('opacity', 1); \n                this.set.forEach(function(elt){\n                    if(elt.type === 'circle'){\n                        elt.remove();         \n                    }\n                });\n                this.closed = true;\n                if(_.isFunction(this.closeCb)){\n                    this.closeCb();\n                }\n                \n                return this;\n            },\n\n            onClose : function(closeCb){\n                this.closeCb = closeCb;\n                return this;\n            }\n        };\n        return path;\n    };\n\n    return pathBuilder;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeFactory',[\n    'jquery', 'lodash',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeHandlers',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/pathBuilder'\n], function($, _, graphicHelper, shapeHandlers, shapeResizer, shapeMover, pathBuilder){\n\n    var shapeFactory = function shapeFactory(options){\n        var paper = options.paper;\n        var background = options.background;\n        var $container = options.$container;\n        var isResponsive = options.isResponsive || false;\n        var type = options.type || 'rect';\n\n        var creator = {\n            \n            states : {\n                drawing : false\n            },\n\n            _events : {},\n\n            on : function on(eventName, cb){\n                if(_.isFunction(cb)){\n                    this._events[eventName] = cb;\n                }\n            },\n\n            is : function is(state){\n                return this.states[state] === true;\n            },\n            \n            setState : function setState(state, value){\n                this.states[state] = value;\n            },\n\n            /**\n             * Start the shape creation\n             */ \n            start : function(){\n                switch(type){\n                    case 'path'     : this.startDrawingPath(); break;\n                    case 'target'   : this.startPositionTarget(); break;\n                    default         : this.startWithMouse(); break;\n                }\n            },\n\n            startPositionTarget : function startPositionTarget(){\n                var self = this;\n                self.setState('drawing', true);\n\n                background.click(function(e){\n                    e.preventDefault();\n                    e.stopPropagation();\n \n                    //get the current mouse point, even on a responsive paper\n                    var point = graphicHelper.getPoint(e, paper, $container, isResponsive);\n                    \n                    //add the point to the paper\n                    graphicHelper.createTarget(paper, {\n                        point : point, \n                        create : function created(target){\n                            self.setState('drawing', false);\n                            background.unclick();\n                            if(self._events['created.qti-widget']){\n                               self._events['created.qti-widget'].call(this, target); \n                            }\n                        },\n                        remove : false,\n                        hover  : false\n                    });\n                });\n            },\n\n            startDrawingPath : function startDrawingPath(){\n                var self = this;\n                var builder = pathBuilder(paper);\n                \n                self.setState('drawing', true);\n                \n                builder.onClose(created);\n                background.click(function(e){\n                    e.preventDefault();\n                    e.stopPropagation();             \n                    if(self.is('drawing')){\n                        builder.add(\n                            graphicHelper.getPoint(e, paper, $container, isResponsive)\n                        );\n                    }\n                });\n\n                function created(){\n                    self.setState('drawing', false);\n                    background.unclick();\n                    if(self._events['created.qti-widget']){\n                       self._events['created.qti-widget'].call(this, builder.getPath()); \n                    }\n                }\n            },\n          \n            startWithMouse : function startWithMouse(){            \n                var self = this;\n                var smoothResize = _.throttle(resize, 10);\n                var startPoint;\n                var shape;\n                \n                background.mousedown( function startDrawing(event){\n                    event.preventDefault();\n\n                    if(!self.is('drawing')){\n                        self.setState('drawing', true);\n\n                        startPoint = graphicHelper.getPoint(event, paper, $container, isResponsive);\n\n                        //create a base shape\n                        shape = graphicHelper.createElement(paper, type, [startPoint.x, startPoint.y, 25, 25], { \n                                style       : 'creator',\n                                hover       : false, \n                                touchEffect : false, \n                                qtiCoords   : false\n                            });\n    \n                        shape.mouseup(created);\n                        background.mouseup(created);\n                        \n                        //resize it now\n                        shape.mousemove(smoothResize);\n                        background.mousemove(smoothResize);    \n                    }\n                });\n\n                function created(){\n                    self.setState('drawing', false);\n                    background\n                        .unmousedown()\n                        .unmousemove()\n                        .unmouseup();\n                    shape\n                        .unmousedown()\n                        .unmouseup()\n                        .unmousemove();\n                    if(self._events['created.qti-widget']){\n                       self._events['created.qti-widget'].call(this, shape); \n                    }\n                }\n\n                function resize(event){\n                    if(self.is('drawing')){\n                        shapeResizer(shape, {\n                            start   : startPoint,\n                            stop    : graphicHelper.getPoint(event, paper, $container, isResponsive)\n                        });\n                    }\n                }\n            },\n\n            stop : function(){\n\n                    background\n                        .unmousedown()\n                        .unmousemove()\n                        .unmouseup()\n                        .unclick();\n            }\n        };\n\n        return creator;\n    };\n\n    return shapeFactory;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeEditor',[\n    'jquery', 'lodash',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeHandlers',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeResizer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeMover',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/pathBuilder'\n], function($, _, graphicHelper, shapeHandlers, shapeResizer, shapeMover, pathBuilder){\n\n    /**\n     * Enables you to edit a shape: handling, resizing, moving.\n     * This function is a factory that gives you a new instance of editor.\n     * \n     * @exports taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeEditor\n     *\n     * @param {Raphael.Element} shape - the shape to edit\n     * @param {Object} options - the contextual options\n     * @param {Raphael.Paper} options.paper - the raphael paper\n     * @param {Raphael.Element} options.background - the paper's background image element\n     * @param {jQueryElement} options.$container - the paper container\n     * @param {Boolean} [options.isResponsive = false] - if we are in responsive mode (auto scalling)\n     * @returns {shapeEditor.editor} the shape editor instance\n     */\n    var shapeEditor = function(shape, options){\n\n        var paper = options.paper;\n        var background = options.background;\n        var $container = options.$container;\n        var isResponsive = options.isResponsive || false;\n\n        /**\n         * The editor linked to a shape \n         * @type shapeEditor.editor\n         */\n        var editor = {\n\n            shape : null,\n\n            handlers : [],\n\n            states : {\n                drawing : false,\n                handling : false,\n                resizing : false,\n                moving : false\n            },\n\n            _events : {},\n\n            /**\n             * Listen for an event bound to the editor\n             * @param {String} eventName - the name of the event to listen\n             * @param {Function} cb - event callback \n             * @returns {shapeEditor.editor} for chaining\n             */\n            on : function on(eventName, cb){\n                if(_.isFunction(cb)){\n                    this._events[eventName] = cb;\n                }\n                return this;\n            },\n\n            /**\n             * Trigger an event on the editor\n             * @param {String} eventName - the name of the event to trigger\n             * @param {...*} args - additional args to pass to the bound callbacks\n             * @returns {shapeEditor.editor} for chaining\n             */\n            trigger : function(eventName){\n                if(_.isFunction(this._events[eventName])){\n                    this._events[eventName].apply(this, Array.prototype.slice.call(arguments, 1));\n                }\n                return this;\n            },\n\n            /**\n             * Check if the editor is in the given state\n             * @param {String} state - the state name\n             * @returns {Boolean} is in the state or not \n             */\n            is : function is(state){\n                return this.states[state] === true;\n            },\n            \n            /**\n             * Set the editor in a particular state\n             * @param {String} state - the state name\n             * @param {Boolean} value -\n             * @returns {shapeEditor.editor} for chaining\n             */\n            setState : function setState(state, value){\n                this.states[state] = value;\n                return this;\n            },\n\n\n            /**\n             * Set up the editor \n             * @constructor\n             * @private \n             * @param {Raphael.Element} shape - the shape to edit\n             * @returns {shapeEditor.editor} the shape editor instance\n             */ \n            _init : function(shape){\n                var self = this;\n                if(shape && shape.type){\n                    self.shape = shape;\n                    background.click(function(){\n                         if(!self.is('resizing') && self.is('handling')){\n                            self.quitHandling();  \n                         }\n                    });\n                    self.shape.click(function(){\n                         if(!self.is('resizing')){\n                            if(!self.is('handling')){\n                                self.enterHandling();  \n                            } else {\n                                self.quitHandling();  \n                            }    \n                        }\n                    });\n                }\n                return this;\n            },\n\n            /**\n             * Start the shape handling \n             * @returns {shapeEditor.editor} the shape editor instance\n             */ \n            enterHandling : function enterHandling(){\n                var self = this;\n                \n                //enter handling\n                self.setState('handling', true)\n                    .trigger('enterhandling.qti-widget');\n    \n                //do not move set\n                if(self.shape.type === 'set'){\n                    return;\n                }                   \n\n                //create handlers to resize the shape\n                self.handlers = shapeHandlers(paper, self.shape);\n                _.forEach(self.handlers, function(handler){\n                    //drag the handlers to resize the shape\n                    handler.drag(resize, startResize, resized);\n                });\n\n                //drag the shape to move it\n                self.shape.drag(move, startMove, moved);\n\n                var keyResizer = _.throttle(keyResize, 20);\n  \n                //bind keys \n                $(document).on('keydown.qti-widget', function(e){\n                    var code = e.which;\n                    //arrows\n                    if(code >= 37 && code <= 40){\n                        e.preventDefault();\n                        keyResizer(code);\n                    }\n                    //delete and backspace\n                    //if(e.which === 8 || e.which === 46){\n                        //e.preventDefault();\n                        //self.quitHandling();\n                        //self.removeShape();\n                    //}\n                });\n\n                /**\n                 * Start the resizing from an handler, create the layer, the start point, etc.\n                 * Used as handler dragstart callback\n                 * @private\n                 */ \n                function startResize (){ \n                    var handler  = this; \n                    var bbox;\n                    self.setState('resizing', true)\n                        .trigger('shapechanging.qti-widget');\n                    \n                    //create a layer to be reiszed\n                    self.layer = self.shape.clone();\n                    self.layer.attr(graphicHelper._style.basic);\n                    self.layer.attr('cursor', handler.attrs.cursor);\n\n                    bbox = self.layer.getBBox();\n                    self.layerTxt = graphicHelper.createShapeText(paper, self.layer, { \n                        style   : 'layer-pos-text',\n                        content : parseInt(bbox.width, 10) + ' x ' + parseInt(bbox.height, 10) \n                    });\n\n                    if(self.shape.type === 'path'){\n                       _.forEach(self.shape.attr('path'), function(point, index){\n                           if(point.length === 3 && point[1] === this.attr('cx') && point[2] === this.attr('cy')){\n                                this.pointIndex = index;\n                                return false; \n                           }                 \n                       }, handler); \n                    }\n\n                    //hide others\n                    _.invoke(_.reject(_.clone(self.handlers), function(elt){\n                        return elt === handler;\n                    }), 'hide');                              \n                }\n                 \n                /**\n                 * Resize a shape (in fact only the layer)\n                 * Used as handler drag callback\n                 * @private\n                 */ \n               function resize(dx, dy, x, y, event){\n                    var stopPoint, options;\n                    if(self.is('resizing')){\n\n                        stopPoint = graphicHelper.getPoint(event, paper, $container, isResponsive);\n                        options =  {\n                            stop        : stopPoint,\n                            constraints : this.data('constraints'),\n                            resized     : _.throttle(function(){\n                                var bbox = this.getBBox();\n                                self.layerTxt.attr('text',  parseInt(bbox.width, 10) + ' x ' + parseInt(bbox.height, 10) );\n                            }, 100)\n                        };\n\n                        if(self.shape.type === 'path'){\n                            options.start = _.pick(this.attrs, ['cx', 'cy']); \n                            options.path = self.layer.attr('path');\n                            options.pointIndex = this.pointIndex;\n                        }\n\n                        shapeResizer(self.layer, options);\n                         \n\n                        \n                        if(this.type === 'circle'){\n                            this.animate({\n                                cx : stopPoint.x,\n                                cy : stopPoint.y\n                            });\n                        } else {\n                            this.animate(stopPoint);\n                        }\n                    }\n                }\n               \n                /**\n                 * Finish resize: sync the shape to the resized layer\n                 * Used as handler dragend callback\n                 * @private\n                 */ \n                function resized(){\n\n                    self.shape.animate(\n                        _.pick(self.layer.attrs, ['x', 'y', 'cx', 'cy', 'r', 'rx', 'ry', 'width', 'height', 'path']),\n                        200,\n                        function animationEnd(){\n                            self.setState('resizing', false)\n                                .trigger('shapechange.qti-widget');\n                        }\n                    );\n                    self.layer.remove();\n                    self.layerTxt.remove();\n                    \n                    _.invoke(self.handlers, 'remove');\n                    self.handlers = [];\n                } \n               \n                /**\n                 * Resize a shape from keyboard\n                 * @param {Number} code - the HTMLEvent's key code\n                 * @private\n                 */ \n                function keyResize(code){ \n                    var attr, stop, start;\n                    if(!self.is('moving')){\n                        self.setState('moving', true);\n                        _.invoke(self.handlers, 'remove');\n                        \n                        attr = shape.attr();\n\n                        switch(self.shape.type){\n\n                            case 'rect' : \n                                start = { x: 0, y: 0 }; \n                                stop  = {\n                                    x : (code === 39) ? attr.x + 1 : (code === 37) ? attr.x - 1 : attr.x,\n                                    y : (code === 40) ? attr.y + 1 : (code === 38) ? attr.y - 1 : attr.y,\n                                };\n                                break;\n                            case 'ellipse' : \n                            case 'circle' : \n                                start = { x: 0, y: 0 }; \n                                stop  = {\n                                    x : (code === 39) ? attr.cx + 1 : (code === 37) ? attr.cx - 1 : attr.cx,\n                                    y : (code === 40) ? attr.cy + 1 : (code === 38) ? attr.cy - 1 : attr.cy,\n                                };\n                                break;\n                            case 'path' : \n                                start = { path : attr.path }; \n                                stop  = {\n                                };\n                                break;\n                        }\n\n                        shapeMover(\n                            self.shape, start, stop\n                        );\n                        self.setState('moving', false)\n                            .trigger('shapechange.qti-widget');\n                    }\n                }\n\n                /**\n                 * Start the moving the shape.\n                 * Used as handler dragstart callback\n                 * @private\n                 */ \n                function startMove(x, y , event){\n                    self.setState('moving', true)\n                        .trigger('shapechanging.qti-widget');\n                    \n                    var mousePoint = graphicHelper.getPoint(event, paper, $container, isResponsive);\n                    this.startPoint = {\n                        x : mousePoint.x - this.attr('x'),\n                        y : mousePoint.y - this.attr('y')\n                    };\n                    if(this.type === 'path'){\n                        this.startPoint.path = this.attr('path');\n                    }\n                    self.shape.attr('cursor', 'move');\n                    background.attr('cursor', 'move');\n                    _.invoke(self.handlers, 'remove');                              \n                }        \n                \n                /**\n                 * Move a shape\n                 * Used as handler drag callback\n                 * @private\n                 */ \n                function move(dx, dy, x, y, event){\n                    var dest;\n                    if(self.is('moving')){\n                        shapeMover(\n                            this, \n                            this.startPoint, \n                            graphicHelper.getPoint(event, paper, $container, isResponsive)\n                        );\n                    }\n                }\n\n                /**\n                 * Finish moving\n                 * Used as shape dragend callback\n                 * @private\n                 */ \n                function moved(){\n                    delete this.startPoint;\n                    self.shape.attr('cursor', 'pointer');\n                    background.attr('cursor', 'default');\n\n                    self.setState('moving', false)\n                        .trigger('shapechange.qti-widget');\n                }\n\n                return this;\n            },\n            \n            /**\n             * Stop the shape handling \n             * @returns {shapeEditor.editor} the shape editor instance\n             */ \n            quitHandling : function quitHandling(){\n                $(document).off('keydown.qti-widget');\n\n                this.shape.undrag();\n                _.invoke(this.handlers, 'remove');\n                this.handlers = [];\n\n                this.setState('moving', false)\n                    .setState('resizing', false)\n                    .setState('handling', false)\n                    .trigger('quithandling.qti-widget'); \n                \n                return this;\n            },\n\n            /**\n             * Removes the editor's shape \n             * @returns {shapeEditor.editor} the shape editor instance\n             */ \n            removeShape : function removeShape(){\n                var id, data;\n                if(this.shape){\n                    this.quitHandling();\n                    id = this.shape.id;\n                    data = this.shape.data;\n                    this.shape.remove();\n                    this.trigger('remove.qti-widget', id, data); \n                }\n                \n                return this;\n            },\n\n            /**\n             * Clean up editor in case of reference keeping \n             * @returns {shapeEditor.editor} the shape editor instance\n             */ \n            destroy : function destroy(){\n                if(this.is('handling')){\n                    this.quitHandling();\n                }\n                if(this.shape){\n                    this.shape.unclick();\n                    background.unclick();\n                }\n                this.shape = null;\n                this.handlers  = [];\n                this._events  = {};\n                return this;\n            }\n        };\n        \n        return editor._init(shape);\n    };\n\n    return shapeEditor;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeSideBar',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeFactory',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/shapeEditor',\n], function($, _, GraphicHelper, shapeSideBar, shapeFactory, shapeEditor){\n\n    /**\n     * This factory creates an new shape editor. \n     * The editor manages to create the side bar to add, move, resize and delete the interaction shapes.\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor\n     * @param {Object} widget - the graphic interaction widget\n     * @param {Object} [options]\n     * @param {Array<String>} [options.currents] - the list of current shapes ids (use interaction's choices serial by default)\n     * @param {Boolean} [options.target = false]  - if the side bar contains a target type (to select a point)\n     * @param {shapeCreated} [options.shapeCreated]\n     * @param {shapeRemoved} [options.shapeRemoved]\n     * @param {shapeChange} [options.shapeChange]\n     * @param {shapeChanging} [options.shapeChanging]\n     * @param {enterHandling} [options.enterHandling]\n     * @param {quitHandling} [options.quitHandling]\n     * @returns {InteractionShapeEditor}\n     */\n    return function factory(widget, options){\n\n        /**\n         * One by interaction, but itthat contains multipe shapeEditor (one by shape).\n         * @typedef InteractionShapeEditor\n         */\n        var interactionShapeEditor = {\n\n            //keep the ref to the editor to be able to destroy them later\n            editors :  [],\n\n            /**\n             * Create the editor\n             */\n            create : function(){\n                var editors     = this.editors;\n                var factories   = {};\n                var $container  = widget.$container;\n                var $original   = widget.$original;\n                var interaction = widget.element;\n                var paper       = interaction.paper;\n                var image       = paper.getById('bg-image-' + interaction.serial);\n                var currents    = options.currents || _.pluck(interaction.getChoices(), 'serial');\n\n                //set up shape cnotextual options\n                var shapeOptions = {\n                    paper : interaction.paper, \n                    background : image, \n                    $container : $container.find('.main-image-box'), \n                    isResponsive : $original.hasClass('responsive')\n                };\n            \n                //create the side bar \n                var $sideBar = shapeSideBar.create($original, !!options.target); \n\n                //once a shape type is selected\n                $sideBar.on('shapeactive.qti-widget', function(e, $form, type){\n                \n                    //enable to create a shape of the given type\n                    createShape(type, function shapeCreated (shape){\n                        \n                        if(_.isFunction(options.shapeCreated)){\n                        \n                            /**\n                             * Called back when a shape is created\n                             * @callback shapeCreated\n                             * @param {Raphael.Element} shape - the new shape\n                             * @param {String} type - the new shape type \n                             */\n                            options.shapeCreated(shape, type);\n                        }                \n                        \n                        //deactivate the form in the sidebar\n                        $form.removeClass('active');\n\n                        //start the shape editor (hnadling, resize, move)\n                        editCreatedShape(type, shape);\n                    });\n                });\n\n                $sideBar.on('shapedeactive.qti-widget', function(e, $form, type){\n                       if(factories && factories[type]){\n                            factories[type].stop();\n                       }\n                });\n\n                //retrieve the current shapes and make them editable\n                _.forEach(currents, function(id){\n                    var element = paper.getById(id);\n                    if(element){\n                        element\n                            .attr(GraphicHelper._style.creator)\n                            .unmouseover()\n                            .unmouseout();\n                        if(/^target/.test(element.id)){\n                            editCreatedShape('target', element);\n                        } else {\n                            editCreatedShape(element.type, element, false);\n                        }\n                    }\n                });\n\n                /**\n                 * Make a shape editable\n                 * @private\n                 * @param {Raphael.Element} shape - the shape to make editable\n                 * @param {Boolean} [enterHandling = false]  - wether to enter handling directly\n                 */\n                function editShape(shape, enterHandling){\n\n                    var editor = shapeEditor(shape, shapeOptions); \n                    editor.on('enterhandling.qti-widget', function(){\n\n                        //only one shape handling at a time\n                        _.invoke(_.reject(editors, editor), 'quitHandling');\n\n                        //enable to bin the shape\n                        $sideBar\n                            .trigger('enablebin.qti-widget')\n                            .on('bin.qti-widget', function(){\n                                \n                                //remove the shape and the editor\n                                editor.removeShape();\n                                editor.destroy();\n                                editors = _.reject(editors, editor);\n                                editor = undefined;\n                            });\n                         \n                        if(_.isFunction(options.enterHandling)){\n                            \n                            /**\n                             * Called back when a shape is being handled\n                             * @callback enterHandling\n                             * @param {Raphael.Element} shape - the shape\n                             */\n                            options.enterHandling(shape);\n                        }                \n                    }).on('shapechanging.qti-widget', function(){\n\n                        if(_.isFunction(options.shapeChanging)){\n                            \n                            /**\n                             * Called back when a shape is being changed\n                             * @callback shapeChanging\n                             * @param {Raphael.Element} shape - the shape\n                             */\n                            options.shapeChanging(shape);\n                        }                \n\n                    }).on('shapechange.qti-widget', function(){\n\n                        if(_.isFunction(options.shapeChange)){\n                            \n                            /**\n                             * Called back when a shape has changed\n                             * @callback shapeChange\n                             * @param {Raphael.Element} shape - the shape\n                             */\n                            options.shapeChange(shape);\n                        }                \n\n                    }).on('quithandling.qti-widget', function(){\n\n                        if(_.isFunction(options.quitHandling)){\n                            \n                            /**\n                             * Called back when the handling is left on a shape\n                             * @callback quitHandling\n                             * @param {Raphael.Element} shape - the shape\n                             */\n                            options.quitHandling(shape);\n                        }                \n\n                        //update the side bar\n                        $sideBar\n                            .trigger('disablebin.qti-widget')\n                            .off('click')\n                            .off('bin.qti-widget');\n\n                    }).on('remove.qti-widget', function(id, data){\n                        if(_.isFunction(options.shapeRemoved)){\n                            \n                            /**\n                             * Called back when a shape is removed\n                             * @callback shapeRemoved\n                             * @param {String} id - the id of the passed away shape\n                             */\n                            options.shapeRemoved(id, data);\n                        }                \n                        _.remove(currents, id);\n                    });\n\n                    editors.push(editor);\n                    if(enterHandling){\n                        editor.enterHandling();\n                    }\n                }\n\n                /**\n                 * Enables to create a shape of the given type\n                 * @private\n                 * @param {String} type - the shape type (rect, circle, ellipse or path)\n                 * @param {Function} created - call back once a new shape is created\n                 */\n                function createShape(type, created){\n                    var factory = factories[type];\n                    if(!factories[type]){\n                        factory = shapeFactory(_.merge({type : type}, shapeOptions));\n                        factories[type] = factory;\n                    } \n                    \n                    factory.on('created.qti-widget', created); \n                    factory.start();\n                }\n\n                /**\n                 * Make the created shape editable\n                 * @private\n                 * @param {String} type - the shape type (rect, circle, ellipse or path)\n                 * @param {Raphael.Element} shape - the new shape\n                 * @param {Boolean} enterHandling - if the shape start in handling mode\n                 */\n                function editCreatedShape(type, shape, enterHandling){\n                    var layer, set;\n                    if(type !== 'target'){\n                        editShape(shape, enterHandling);\n                    } else {\n                        //for the target, we group the elements into a set\n                        layer    = paper.getById('layer-' + shape.id);\n                        set      = paper.set(shape, layer);\n                        set.id   = shape.id;\n                        set.data = shape.data(); \n                        editShape(set, enterHandling);\n                    }\n                }\n            },\n\n            /**\n             * Destroy the editor\n             */\n            destroy : function(){\n\n                var $container  = widget.$original;\n                var interaction = widget.element;\n                var paper       = interaction.paper;\n                var currents    = options.currents || _.pluck(interaction.getChoices(), 'serial');\n\n                shapeSideBar.remove($container);\n                \n                _.invoke(this.editors, 'destroy');\n\n                //reset the shape style\n                _.forEach(currents, function(id){\n                    var element = paper.getById(id);\n                    if(element){\n                        element\n                            .attr(GraphicHelper._style.basic)\n                            .hover(function(){\n                                if(!element.flashing){\n                                    GraphicHelper.updateElementState(this, 'hover'); \n                                }\n                          }, function(){\n                                if(!element.flashing){\n                                    GraphicHelper.updateElementState(this, this.active ? 'active' : this.selectable ? 'selectable' : 'basic');\n                                }\n                          });\n                    }\n                });\n            }\n        };\n    \n        return interactionShapeEditor;\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'util/image',\n    'ui/resourcemgr'\n], function($, _, __, imageUtil){\n\n    return function($form, options){\n\n        var _ns = '.imageSelector',\n            $upload = $('[data-role=\"upload-trigger\"]', $form),\n            $src = $('input[name=data]', $form),\n            $width = $('input[name=width]', $form),\n            $height = $('input[name=height]', $form),\n            $type = $('input[name=type]', $form),\n            title = options.title ? options.title : __('Please select a background picture for your interaction from the resource manager. You can add new files from your computer with the button \"Add file(s)\".');\n        var _openResourceMgr = function(){\n            $upload.resourcemgr({\n                title : title,\n                appendContainer : options.mediaManager.appendContainer,\n                mediaSources : options.mediaManager.mediaSources,\n                browseUrl : options.mediaManager.browseUrl,\n                uploadUrl : options.mediaManager.uploadUrl,\n                deleteUrl : options.mediaManager.deleteUrl,\n                downloadUrl : options.mediaManager.downloadUrl,\n                fileExistsUrl : options.mediaManager.fileExistsUrl,\n                params : {\n                    uri : options.uri,\n                    lang : options.lang,\n                    filters : 'image/jpeg,image/png,image/gif'\n                },\n                pathParam : 'path',\n                select : function(e, files){\n                    var selected;\n                    if(files.length > 0){\n                        selected = files[0];\n                        imageUtil.getSize(options.baseUrl + encodeURIComponent(files[0].file), function(size){\n                            if(size && size.width >= 0){\n                                $width.val(size.width).trigger('change');\n                                $height.val(size.height).trigger('change');\n                            }\n                            $type.val(selected.mime).trigger('change');\n                            _.defer(function(){\n                                $src.val(selected.file).trigger('change');\n                            });\n                        });\n                    }\n                },\n                open : function(){\n                    $src.trigger('open.'+_ns);\n                    //hide tooltip if displayed\n                    if($src.hasClass('tooltipstered')){\n                        $src.blur().tooltipster('hide');\n                    }\n                },\n                close : function(){\n                    $src.trigger('close.'+_ns);\n                }\n            });\n        };\n\n        $upload.on('click', _openResourceMgr);\n\n        //if empty, open file manager immediately\n        if(!$src.val()){\n            _openResourceMgr();\n        }\n    };\n\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicAssociate', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Interaction Background\", options) : helperMissing.call(depth0, \"__\", \"Interaction Background\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"type\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mime Type\", options) : helperMissing.call(depth0, \"__\", \"Mime Type\", options)))\n    + \"</label>\\n        <input name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n    \\n     <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of associations\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of associations\", options)))\n    + \"\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of associations that the candidate is required to make to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of associations that the candidate is required to make to form a valid response.\", options)))\n    + \"<br>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"he maximum number of associations that the candidate is allowed to make.\", options) : helperMissing.call(depth0, \"__\", \"he maximum number of associations that the candidate is allowed to make.\", options)))\n    + \"\\n        </span>\\n    </h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"minAssociations\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minAssociations\\\" value=\\\"\";\n  if (helper = helpers.minAssociations) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minAssociations); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"maxAssociations\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxAssociations\\\" value=\\\"\";\n  if (helper = helpers.maxAssociations) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxAssociations); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/associableHotspot', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"\\n<div class=\\\"panel\\\">\\n    <label for=\\\"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"identifier\", options) : helperMissing.call(depth0, \"__\", \"identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-hotspot_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\\n<h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of matches\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of matches\", options)))\n    + \"\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices this choice must be associated with to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices this choice must be associated with to form a valid response.\", options)))\n    + \"<br>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices this choice may be associated with.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices this choice may be associated with.\", options)))\n    + \"\\n    </span>\\n</h3>\\n\\n<div>\\n    <label for=\\\"matchMin\\\" class=\\\"spinner\\\">Min</label>\\n    <input name=\\\"matchMin\\\" value=\\\"\";\n  if (helper = helpers.matchMin) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMin); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n</div>\\n<div>\\n    <label for=\\\"matchMax\\\" class=\\\"spinner\\\">Max</label>\\n    <input name=\\\"matchMax\\\" value=\\\"\";\n  if (helper = helpers.matchMax) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMax); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n</div>\\n\\n<h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shape position\", options) : helperMissing.call(depth0, \"__\", \"Shape position\", options)))\n    + \"</h3>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"x\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Left\", options) : helperMissing.call(depth0, \"__\", \"Left\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"x\\\" value=\\\"\";\n  if (helper = helpers.x) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.x); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"y\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Top\", options) : helperMissing.call(depth0, \"__\", \"Top\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"y\\\" value=\\\"\";\n  if (helper = helpers.y) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.y); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicAssociate',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/associableHotspot',\n    'taoQtiItem/qtiCreator/helper/dummyElement',\n    'taoQtiItem/qtiCreator/helper/panel'\n], function($, _, __, GraphicHelper, stateFactory, Question, shapeEditor, imageSelector, formElement, interactionFormElement,  identifierHelper, formTpl, choiceFormTpl, dummyElement, panel){\n\n    /**\n     * Question State initialization: set up side bar, editors and shae factory\n     */\n    var initQuestionState = function initQuestionState(){\n\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var options     = widget.options; \n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n\n        var $choiceForm  = widget.choiceForm;\n        var $formInteractionPanel = $('#item-editor-interaction-property-bar');\n        var $formChoicePanel = $('#item-editor-choice-property-bar');\n\n        var $left, $top, $width, $height;\n\n        //instantiate the shape editor, attach it to the widget to retrieve it during the exit phase\n        widget._editor = shapeEditor(widget, {\n            shapeCreated : function(shape, type){\n                var newChoice = interaction.createChoice({\n                    shape  : type === 'path' ? 'poly' : type,\n                    coords : GraphicHelper.qtiCoords(shape) \n                });\n\n                //link the shape to the choice\n                shape.id = newChoice.serial;\n            },\n            shapeRemoved : function(id){\n                interaction.removeChoice(id);\n            },\n            enterHandling : function(shape){\n                enterChoiceForm(shape.id);\n            },\n            quitHandling : function(){\n                leaveChoiceForm();\n            },\n            shapeChange : function(shape){\n                var bbox;\n                var choice = interaction.getChoice(shape.id);\n                if(choice){\n                    choice.attr('coords', GraphicHelper.qtiCoords(shape));\n    \n                    if($left && $left.length){\n                        bbox = shape.getBBox();\n                        $left.val(parseInt(bbox.x, 10)); \n                        $top.val(parseInt(bbox.y, 10));\n                        $width.val(parseInt(bbox.width, 10));\n                        $height.val(parseInt(bbox.height, 10));                         \n                    }         \n                }\n            }\n        });\n    \n        //and create an instance\n        widget._editor.create();\n\n        /**\n         * Set up the choice form\n         * @private\n         * @param {String} serial - the choice serial\n         */\n        function enterChoiceForm(serial){\n            var choice = interaction.getChoice(serial);\n            var element, bbox;\n\n            if(choice){\n                \n                //get shape bounding box\n                element = interaction.paper.getById(serial);\n                bbox = element.getBBox();\n\n                $choiceForm.empty().html(\n                    choiceFormTpl({\n                        identifier  : choice.id(),\n                        fixed       : choice.attr('fixed'),\n                        serial      : serial,\n                        matchMin    : choice.attr('matchMin'),\n                        matchMax    : choice.attr('matchMax'),\n                        choicesCount: _.size(interaction.getChoices()),\n                        x           : parseInt(bbox.x, 10), \n                        y           : parseInt(bbox.y, 10),\n                        width       : parseInt(bbox.width, 10),\n                        height      : parseInt(bbox.height, 10)                         \n                    })\n                );\n\n                formElement.initWidget($choiceForm);\n\n                //init data validation and binding\n                var callbacks = formElement.getMinMaxAttributeCallbacks($choiceForm, 'matchMin', 'matchMax');\n                callbacks.identifier = identifierHelper.updateChoiceIdentifier;\n                callbacks.fixed = formElement.getAttributeChangeCallback();\n\n                formElement.setChangeCallbacks($choiceForm, choice, callbacks);\n\n                $formChoicePanel.show();\n                panel.openSections($formChoicePanel.children('section'));\n                panel.closeSections($formInteractionPanel.children('section'));\n                \n                //change the nodes bound to the position fields\n                $left   = $('input[name=x]', $choiceForm);\n                $top    = $('input[name=y]', $choiceForm);\n                $width  = $('input[name=width]', $choiceForm);\n                $height = $('input[name=height]', $choiceForm);\n            }\n        }\n        \n        /**\n         * Leave the choice form\n         * @private\n         */\n        function leaveChoiceForm(){\n            if($formChoicePanel.css('display') !== 'none'){\n                panel.openSections($formInteractionPanel.children('section'));\n                $formChoicePanel.hide();\n                $choiceForm.empty();\n            }\n        }\n    };\n\n    /**\n     * Exit the question state, leave the room cleaned up\n     */\n    var exitQuestionState = function initQuestionState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n        \n        $(window).off('resize.changestate');\n\n        if(widget._editor){\n            widget._editor.destroy();\n        }\n    };\n    \n    /**\n     * The question state for the graphicAssociate interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Question\n     */\n    var GraphicAssociateInteractionStateQuestion = stateFactory.extend(Question, initQuestionState, exitQuestionState);\n\n    /**\n     * Initialize the form linked to the interaction\n     */\n    GraphicAssociateInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var options = widget.options;\n        var interaction = widget.element;\n        var $form = widget.$form;\n\n        /**\n         * Get the maximum number of pairs regarding the number of choices: f(n) = n(n-1)/2\n         * @param {Number} choices - the number of choices\n         * @returns {Number} the number of possible pairs\n         */ \n        var getMaxPairs = function getMaxPairs(choices){\n            var pairs = 0;\n            if(choices > 0){\n                return Math.round((choices * (choices - 1)) / 2);\n            } \n            return pairs;\n        };\n\n        $form.html(formTpl({\n            baseUrl         : options.baseUrl,\n            maxAssociations : parseInt(interaction.attr('maxAssociations'), 10),\n            minAssociations : parseInt(interaction.attr('minAssociations'), 10),\n            choicesCount    : getMaxPairs(_.size(interaction.getChoices())),\n            data            : interaction.object.attr('data'),\n            width           : interaction.object.attr('width'),\n            height          : interaction.object.attr('height'),\n            type            : interaction.object.attr('type')\n        }));\n\n        imageSelector($form, options); \n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks($form, 'minAssociations', 'maxAssociations');\n        callbacks.data = function(inteaction, value){\n            interaction.object.attr('data', value);\n            widget.rebuild({\n                ready:function(widget){\n                    widget.changeState('question');\n                }\n            });\n        };\n        callbacks.width = function(inteaction, value){\n            interaction.object.attr('width', value);\n        };\n        callbacks.height = function(inteaction, value){\n            interaction.object.attr('height', value);\n        };\n        callbacks.type = function(inteaction, value){\n            if(!value || value === ''){\n                interaction.object.removeAttr('type');\n            } else {\n                interaction.object.attr('type', value);\n            }\n        };\n        formElement.setChangeCallbacks($form, interaction, callbacks, { validateOnInit : false });\n        \n        interactionFormElement.syncMaxChoices(widget, 'minAssociations', 'maxAssociations');\n    };\n\n    return GraphicAssociateInteractionStateQuestion;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    /**\n     * Just forward to the correct/map states\n     */\n    function initAnswerState(){\n        answerStateHelper.forward(this.widget);\n    }\n    \n    \n    function exitAnswerState(){\n        //needed an exit callback even empty\n    }\n    \n    \n    /**\n     * The answer state for the graphicAssociate interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/states/Answer\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Answer\n     */\n    return stateFactory.extend(Answer, initAnswerState, exitAnswerState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, stateFactory, Correct, GraphicAssociateInteraction, helper, PciResponse){\n\n    /**\n     * Initialize the state: use the common renderer to set the correct response.\n     */\n    function initCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n\n        GraphicAssociateInteraction.destroy(interaction);\n\n        if(!interaction.paper){\n            return;\n        }\n        \n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please set the correct associations by linking the choices.'));\n        \n        //use the common Renderer\n        GraphicAssociateInteraction.render.call(interaction.getRenderer(), interaction);\n\n        GraphicAssociateInteraction.setResponse(\n            interaction, \n            PciResponse.serialize(_.invoke(corrects, String.prototype.split, ' '), interaction)\n        );\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n           if(data.response && data.response.list){\n                response.setCorrect(\n                    _.map(data.response.list.pair, function(pair){\n                        return pair.join(' ');\n                    })\n                ); \n           }\n        });\n\n    }\n\n    /**\n     * Exit the correct state\n     */\n    function exitCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n        \n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n        GraphicAssociateInteraction.destroy(interaction); \n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper();\n        widget.createChoices();\n    }\n\n    /**\n     * The correct answer state for the graphicAssociate interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Correct\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Correct\n     */\n    return stateFactory.create(Correct, initCorrectState, exitCorrectState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse', \n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm'\n], function($, _, __, stateFactory, Map, GraphicAssociateInteraction, helper, graphicHelper, PciResponse, scoringFormFactory){\n\n    /**\n     * Initialize the state.\n     */\n    function initMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n        var currentResponses =  _.size(response.getMapEntries()) === 0 ? corrects : _.keys(response.getMapEntries());\n\n        //really need to destroy before ? \n        GraphicAssociateInteraction.destroy(interaction);\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Create assocations and fill the score in the form below'));\n        interaction.responseMappingMode = true;\n\n        //use the common Renderer\n        GraphicAssociateInteraction.render.call(interaction.getRenderer(), interaction);    \n\n\t\t//display the choices ids\n        showChoicesId(interaction);\n\n        //and initialize the scoring form\n        if(_.size(response.getMapEntries()) === 0){\n            updateForm(widget, corrects);\n        } else {\n            updateForm(widget);\n        }\n        \n        //each response change leads to an update of the scoring form\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            var type  = response.attr('cardinality') === 'single' ? 'base' : 'list';\n            var pairs, entries;\n            if(data && data.response &&  data.response[type]){\n               pairs = _.invoke(data.response[type].pair, Array.prototype.join, ' ');\n               entries = _.keys(response.getMapEntries());\n                \n               //add new pairs from  the difference between the current entries and the given data\n               _(pairs).difference(entries).forEach(interaction.pairScoringForm.addPair, interaction.pairScoringForm);\n\n                \n               removePaths(interaction);\n            }\n        });\n    }\n\n    function removePaths(interaction){\n        _.delay(function(){\n           _.forEach(interaction._vsets, function(vset){\n                _.invoke(vset, 'remove');\n            });\n            interaction._vsets = [];\n        }, 500);\n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n        \n        widget.$container.off('responseChange.qti-widget');\n\n        if(interaction.pairScoringForm){\n            interaction.pairScoringForm.destroy();\n        }\n\n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n        GraphicAssociateInteraction.destroy(interaction); \n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper();\n        widget.createChoices();\n    }\n\n    function showChoicesId(interaction){\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                graphicHelper.createShapeText(interaction.paper, element, {\n                    shapeClick: true,\n                    content : choice.id()\n                }).transform('t0,-10').toFront();\n            }\n        });\n    }\n\n\t/**\n     * Update the scoring form\n     * @param {Object} widget - the current widget\n     * @param {Array} [entries] - to force the use of this collection instead of the mapEntries\n     */\n    function updateForm(widget, entries){\n\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var mapEntries = response.getMapEntries();\n\n        var mappingChange = function mappingChange(){\n            //set the current responses, either the mapEntries or the corrects if nothing else\n            GraphicAssociateInteraction.setResponse(\n                interaction, \n                PciResponse.serialize(_.invoke(_.keys(response.getMapEntries()), String.prototype.split, ' '), interaction)\n            );\n        };\n\n        var getPairValues = function getPairValues(){\n            return _.map(interaction.getChoices(), function(choice){\n                return {\n                    id : choice.id(),\n                    value : choice.id()\n                };\n            });\n        };\n\n        //set up the scoring form options\n        var options = {\n            leftTitle : __('left'),\n            rightTitle : __('right'),\n            type : 'pair',\n            pairLeft : getPairValues,\n            pairRight : getPairValues\n        };\n\n        //format the entries to match the needs of the scoring form\n        if(entries){\n            options.entries = _.transform(entries, function(result, value){\n                result[value] = mapEntries[value] !== undefined ? mapEntries[value] : response.mappingAttributes.defaultValue;\n            }, {}); \n        }\n\n        //initialize the scoring form \n        interaction.pairScoringForm = scoringFormFactory(widget, options);\n    }\n\n    /**\n     * The map answer state for the graphicAssociate interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/Map'\n], function(factory, states){\n\n    //creates a state bundle for the interaction\n    return factory.createBundle(states, arguments);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/states/states'\n], function($, _, __, Widget, GraphicWidget, states){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the GraphicAssociate Interaction.\n     * \n     * @extends taoQtiItem/qtiCreator/widgets/interactions/Widget\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/GraphicInteraction/Widget\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/Widget\n     */      \n    var GraphicAssociateInteractionWidget = _.extend(Widget.clone(), GraphicWidget, {\n\n        /**\n         * Set up the widget\n         * @see {taoQtiItem/qtiCreator/widgets/interactions/Widget#initCreator}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        initCreator : function(options){\n            var paper;\n            this.baseUrl = options.baseUrl;\n            this.choiceForm = options.choiceForm;\n            \n            this.registerStates(states);\n            \n            //call parent initCreator\n            Widget.initCreator.call(this);\n           \n            paper = this.createPaper(); \n            if(paper){\n                this.element.paper = paper;\n                this.createChoices();    \n            }\n        },\n\n        /**\n         * Gracefull destroy the widget\n         * @see {taoQtiItem/qtiCreator/widgets/Widget#destroy}\n         */\n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.gridEdit.' + this.element.serial);\n            $(window).off('resize.qti-widget.' + this.element.serial);\n            $container.off('resize.qti-widget.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        }\n   });\n\n    return GraphicAssociateInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicAssociateInteraction/Widget'\n], function(_, GraphicAssociateInteraction, GraphicAssociateInteractionWidget){\n        \n    /**\n     * The CreatorGraphicAssociateInteraction  Renderer \n     * @extends taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction\n     * @exports taoQtiItem/qtiCreator/renderers/interactions/GraphicAssociateInteraction\n     */\n    var CreatorGraphicAssociateInteraction = _.clone(GraphicAssociateInteraction);\n\n    /**\n     * Render the interaction for authoring.\n     * It delegates the rendering to the widget layer.\n     * @param {Object} interaction - the model\n     * @param {Object} [options] - extra options\n     */\n    CreatorGraphicAssociateInteraction.render = function(interaction, options){\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return GraphicAssociateInteractionWidget.build(\n            interaction,\n            GraphicAssociateInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGraphicAssociateInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicGapMatchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicGapMatchInteraction \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" clearfix\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"image-editor solid\\\">\\n        <div id='graphic-paper-\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class=\\\"main-image-box\\\"></div>\\n        <div class=\\\"clearfix\\\"></div>\\n        <ul class=\\\"none block-listing solid horizontal source\\\">\\n            \";\n  options={hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}\n  if (helper = helpers.gapImgs) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.gapImgs); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.gapImgs) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </ul>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicGapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper'\n], function($, _, __, tpl, graphic,  pciResponse, Helper){\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     */\n    var render = function render(interaction){\n        var $container = Helper.getContainer(interaction);\n        var $gapList = $('ul.source', $container);\n        var $imageBox  = $('.main-image-box', $container);\n        var background = interaction.object.attributes;\n        var baseUrl = this.getOption('baseUrl') || '';\n        //var diff = $('.image-editor', $container).outerWidth() - $imageBox.outerWidth(true);\n\n        interaction.gapFillers = [];\n\n        //create the paper\n        interaction.paper = graphic.responsivePaper( 'graphic-paper-' + interaction.serial, interaction.serial, {\n            width       : background.width, \n            height      : background.height,\n            img         : baseUrl + background.data,\n            imgId       : 'bg-image-' + interaction.serial,\n            container   : $container,\n            resize      : function(newSize, factor){\n               $gapList.css('max-width', newSize + 'px'); \n               if(factor !== 1){\n                    $gapList.find('img').each(function(){\n                        var $img = $(this);\n                        $img.width( $img.attr('width') * factor );\n                        $img.height( $img.attr('height') * factor );\n                    });\n               } \n            }\n        });\n\n        //call render choice for each interaction's choices\n        _.forEach(interaction.getChoices(), _.partial(_renderChoice, interaction));\n\n        //create the list of gap images\n        _renderGapList(interaction, $gapList);\n\n        //clicking the paper to reset selection\n        _paperUnSelect(interaction);\n    };\n\n\n    /**\n     * Render a choice inside the paper. \n     * Please note that the choice renderer isn't implemented separately because it relies on the Raphael paper instead of the DOM.\n     *\n     * @private\n     * @param {Paper} paper - the raphael paper to add the choices to\n     * @param {Object} interaction\n     * @param {Object} choice - the hotspot choice to add to the interaction\n     */\n    var _renderChoice  =  function _renderChoice(interaction, choice){\n       \n        //create the shape \n        var rElement = graphic.createElement(interaction.paper, choice.attr('shape'), choice.attr('coords'), {\n            id : choice.serial,\n            title : __('Select an image first'),\n            hover : false\n        })\n        .data('max', choice.attr('matchMax') )\n        .data('matching', []) \n        .click(function onClickShape(){\n        \n            // check if can make the shape selectable on click\n            if(_isMatchable(this) && this.selectable === true){ \n                _selectShape(interaction, this);\n            }\n        });\n    };\n\n    /**\n     * Render the list of gap choices\n     * @private\n     * @param {Object} interaction\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     */\n    var _renderGapList = function _renderGapList(interaction, $gapList){\n\n        //activate the gap filling \n        $gapList.children('li').click(function onClickGapImg (e){\n            e.preventDefault();\n            var $elt = $(this);\n            if(!$elt.hasClass('disabled')){\n            \n                //toggle tha active state of the gap images\n                if($elt.hasClass('active')){\n                    $elt.removeClass('active');\n                    _shapesUnSelectable(interaction);\n                } else {                \n                    $gapList.children('li').removeClass('active'); \n                    $elt.addClass('active');\n                    _shapesSelectable(interaction);\n                }\n            }\n        });\n    };\n\n    /**\n     * By clicking the paper image the shapes are restored to their default state\n     * @private\n     * @param {Object} interaction\n     */\n    var _paperUnSelect = function _paperUnSelect(interaction){\n        var $container = Helper.getContainer(interaction);\n        var $gapImages = $('ul > li', $container);\n        var image = interaction.paper.getById('bg-image-' + interaction.serial);\n        if(image){\n            image.click(function(){\n                _shapesUnSelectable(interaction);\n                $gapImages.removeClass('active');\n            });\n        }\n    };\n    /**\n     * Select a shape (a gap image must be active)\n     * @private\n     * @param {Object} interaction\n     * @param {Raphael.Element} element - the selected shape\n     * @param {Boolean} [trackResponse = true] - if the selection trigger a response chane\n     */\n    var _selectShape = function _selectShape(interaction, element, trackResponse){\n        var $img,\n            $clone, \n            gapFiller, \n            id, \n            bbox,\n            shapeOffset,\n            activeOffset,\n            matching, \n            currentCount;\n\n        if(typeof trackResponse === 'undefined'){\n            trackResponse = true;\n        }\n            \n        //lookup for the active element\n        var $container = Helper.getContainer(interaction);\n        var $gapList = $('ul', $container);\n        var $active = $gapList.find('.active:first');\n        var $imageBox = $('.main-image-box', $container);\n        var boxOffset   = $imageBox.offset();\n\n        if($active.length){\n            \n            //the macthing elements are linked to the shape\n            id = $active.data('identifier');\n            matching = element.data('matching') || [];\n            matching.push(id); \n            element.data('matching', matching); \n            currentCount = matching.length;\n\n            //the image to clone\n            $img = $active.find('img');    \n\n            //then reset the state of the shapes and the gap images\n            _shapesUnSelectable(interaction);\n            $gapList.children().removeClass('active');\n\n            $clone = $img.clone();\n            shapeOffset  = $(element.node).offset();\n            activeOffset   = $active.offset();\n            \n            $clone.css({\n                'position' : 'absolute',\n                'display'  : 'block',\n                'z-index'  : 10000,\n                'opacity'  : 0.8,\n                'top'      : activeOffset.top - boxOffset.top,\n                'left'     : activeOffset.left - boxOffset.left\n            });\n\n            $clone.appendTo($imageBox);\n            $clone.animate({\n                'top'       : shapeOffset.top - boxOffset.top,\n                'left'      : shapeOffset.left - boxOffset.left\n            }, 400, function animationEnd(){\n\n                $clone.remove();\n            \n                //extract some coords for positioning\n                bbox = element.getBBox();\n\n                //create an image into the paper and move it to the selected shape\n                gapFiller = graphic.createBorderedImage(interaction.paper, {\n                    url     :  $img.attr('src'),\n                    left    : bbox.x + (3 * (currentCount - 1)), \n                    top     : bbox.y + (3 * (currentCount - 1)),\n                    width   : parseInt($img.attr('width'), 10),\n                    height  : parseInt($img.attr('height'), 10),\n                    padding : 0,\n                    border  : false,\n                    shadow  : true\n                })\n                .data('identifier', id)\n                .toFront()\n                .unclick()\n                .click(function(e){\n                    e.preventDefault();\n                    e.stopPropagation();\n                    if($gapList.find('.active').length > 0){\n\n                        //simulate a click on the shape\n                        graphic.trigger(element, 'click');\n\n                    } else {\n                        //update the element matching array\n                        element.data('matching', _.without(element.data('matching') || [], this.data('identifier')));\n                        \n                        //delete interaction.gapFillers[interaction.gapFillers.indexOf(gapFiller)];\n                        interaction.gapFillers = _.without(interaction.gapFillers, gapFiller);\n                        \n                        //and remove the filler\n                        gapFiller.remove();\n                       \n                        Helper.triggerResponseChangeEvent(interaction);\n                    }\n                });\n\n                interaction.gapFillers.push(gapFiller);\n                 \n                Helper.triggerResponseChangeEvent(interaction);\n            });\n        }\n    };\n\n    /**\n     * Makes the shapes selectable (at least thos who can still accept matches)\n     * @private\n     * @param {Object} interaction\n     */\n    var _shapesSelectable = function _shapesSelectable(interaction){\n\n        var tooltip = __('Select the area to add an image');\n        \n        //update the shape state\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(_isMatchable(element)){\n                element.selectable = true;\n                graphic.updateElementState(element, 'selectable', tooltip);\n            }\n        });\n        \n        //update the gap images tooltip\n        _.forEach(interaction.gapFillers, function(gapFiller){\n            gapFiller.forEach(function(element){\n                graphic.updateTitle(element, tooltip);\n            });\n        });\n    };\n\n    /**\n     * Makes all the shapes UNselectable\n     * @private\n     * @param {Object} interaction\n     */\n    var _shapesUnSelectable = function _shapesUnSelectable(interaction){\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                element.selectable = false;\n                graphic.updateElementState(element, 'basic', __('Select an image first'));\n            }\n        });\n       \n        //update the gap images tooltip\n        _.forEach(interaction.gapFillers, function(gapFiller){\n            gapFiller.forEach(function(element){\n                graphic.updateTitle(element, __('Remove'));\n            });\n        });\n    };\n\n    /**\n     * Check if a shape can accept matches\n     * @private\n     * @param {Raphael.Element} element - the shape\n     * @returns {Boolean} true if the element is matchable\n     */\n    var _isMatchable = function(element){\n        var matchable = false;\n        var matching, matchMax;\n        if(element){\n            matchMax = element.data('max') || 0;\n            matching = element.data('matching') || [];\n            matchable = (matchMax === 0 || matchMax > matching.length);\n        }\n        return matchable;\n    }; \n\n    /**\n     * Get the responses from the interaction\n     * @private \n     * @param {Object} interaction\n     * @returns {Array} of matches\n     */\n    var _getRawResponse = function _getRawResponse(interaction){\n        var pairs = [];    \n    \n       _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element && _.isArray(element.data('matching'))){\n                _.forEach(element.data('matching'), function(match){\n                    pairs.push([choice.id(), match]);\n                });\n            } \n       });\n       return pairs;\n    };\n \n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        var $container = Helper.getContainer(interaction);\n        var responseValues;\n        if(response && interaction.paper){\n            try{\n                responseValues = pciResponse.unserialize(response, interaction);\n            } catch(e){ }\n            \n            if(_.isArray(responseValues)){\n    \n                _.forEach(interaction.getChoices(), function(choice){\n                    var element = interaction.paper.getById(choice.serial);\n                    if(element){\n                        _.forEach(responseValues, function(pair){\n                            var index = _.indexOf(pair, choice.id());\n                            if(index > -1 && pair.length === 2){\n\n                                $(\"[data-identifier=\" + pair[index === 0 ? 1 : 0] + \"]\", $container).addClass('active');\n                                _selectShape(interaction, element, false); \n                            }\n                        });\n                    }\n                });\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction){\n        var $container = Helper.getContainer(interaction);\n        \n        _shapesUnSelectable(interaction);\n\n        _.forEach(interaction.gapFillers, function(gapFiller){\n            graphic.trigger(gapFiller.items[0], 'click');\n        }); \n    };\n\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var raw = _getRawResponse(interaction);\n        var response =  pciResponse.serialize(_getRawResponse(interaction), interaction);\n        return response;\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container;\n        if(interaction.paper){\n            $container = Helper.getContainer(interaction);\n        \n            $(window).off('resize.qti-widget.' + interaction.serial);\n            $container.off('resize.qti-widget.' + interaction.serial);\n\n            interaction.paper.clear();\n            Helper.removeInstructions(interaction);\n            \n            $('.main-image-box', $container).empty().removeAttr('style');            \n            $('.image-editor', $container).removeAttr('style'); \n            $('ul', $container).empty();\n        }\n    };\n  \n    /**\n     * Expose the common renderer for the hotspot interaction\n     * @exports qtiCommonRenderer/renderers/interactions/HotspotInteraction\n     */\n    return {\n        qtiClass        : 'graphicGapMatchInteraction',\n        template        : tpl,\n        render          : render,\n        getContainer    : Helper.getContainer,\n        setResponse     : setResponse,\n        getResponse     : getResponse,\n        resetResponse   : resetResponse,\n        destroy         : destroy\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\n], function(stateFactory, SleepState){\n   \n    var initSleepState = function initSleepState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        widget.on('metaChange', function(data){\n            if(data.key === 'responsive'){\n                if(data.value === true){\n                    interaction.addClass('responsive');\n                } else {\n                    interaction.removeClass('responsive');\n                }\n                widget.rebuild();\n            }\n        });\n    };\n\n    var exitSleepState = function exitSleepState(){};\n \n    return stateFactory.extend(SleepState, initSleepState, exitSleepState); \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicGapMatch', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Interaction Background\", options) : helperMissing.call(depth0, \"__\", \"Interaction Background\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"type\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mime Type\", options) : helperMissing.call(depth0, \"__\", \"Mime Type\", options)))\n    + \"</label>\\n        <input name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gapImg', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"identifier\", options) : helperMissing.call(depth0, \"__\", \"identifier\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n        <input type=\\\"text\\\" \\n               name=\\\"identifier\\\" \\n               value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n               placeholder=\\\"e.g. my-hotspot_1\\\" \\n               data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n    </div>\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Choice Image\", options) : helperMissing.call(depth0, \"__\", \"Choice Image\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div>\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div>\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div>\\n        <label for=\\\"type\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mime type\", options) : helperMissing.call(depth0, \"__\", \"Mime type\", options)))\n    + \"</label>\\n        <input name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <hr>\\n\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of matches\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of matches\", options)))\n    + \"\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices this choice may be associated with.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices this choice may be associated with.\", options)))\n    + \"<br>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices this choice must be associated with to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices this choice must be associated with to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </h3>\\n\\n    <div>\\n        <label for=\\\"matchMin\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"matchMin\\\" value=\\\"\";\n  if (helper = helpers.matchMin) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMin); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n    <div>\\n        <label for=\\\"matchMax\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"matchMax\\\" value=\\\"\";\n  if (helper = helpers.matchMax) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.matchMax); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicGapMatch',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/associableHotspot',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/gapImg',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/media',\n    'taoQtiItem/qtiCreator/helper/dummyElement',\n    'taoQtiItem/qtiCreator/helper/panel'\n], function($, _, __, GraphicHelper, stateFactory, Question, shapeEditor, imageSelector, formElement, identifierHelper, formTpl, choiceFormTpl, gapImgFormTpl, mediaTlbTpl, dummyElement, panel){\n\n    /**\n     * Question State initialization: set up side bar, editors and shae factory\n     */\n    var initQuestionState = function initQuestionState(){\n\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var options     = widget.options; \n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n\n        var $choiceForm  = widget.choiceForm;\n        var $formInteractionPanel = $('#item-editor-interaction-property-bar');\n        var $formChoicePanel = $('#item-editor-choice-property-bar');\n\n        var $left, $top, $width, $height;\n\n        //instantiate the shape editor, attach it to the widget to retrieve it during the exit phase\n        widget._editor = shapeEditor(widget, {\n            shapeCreated : function(shape, type){\n                var newChoice = interaction.createChoice({\n                    shape  : type === 'path' ? 'poly' : type,\n                    coords : GraphicHelper.qtiCoords(shape) \n                });\n\n                //link the shape to the choice\n                shape.id = newChoice.serial;\n            },\n            shapeRemoved : function(id){\n                interaction.removeChoice(id);\n            },\n            enterHandling : function(shape){\n                enterChoiceForm(shape.id);\n            },\n            quitHandling : function(){\n                leaveChoiceForm();\n            },\n            shapeChange : function(shape){\n                var bbox;\n                var choice = interaction.getChoice(shape.id);\n                if(choice){\n                    choice.attr('coords', GraphicHelper.qtiCoords(shape));\n    \n                    if($left && $left.length){\n                        bbox = shape.getBBox();\n                        $left.val(parseInt(bbox.x, 10)); \n                        $top.val(parseInt(bbox.y, 10));\n                        $width.val(parseInt(bbox.width, 10));\n                        $height.val(parseInt(bbox.height, 10));                         \n                    }         \n                }\n            }\n        });\n    \n        //and create an instance\n        widget._editor.create();\n\n        _.forEach(interaction.getGapImgs(), setUpGapImg);\n        \n        createGapImgPlaceholder();\n\n        //we need to stop the question mode on resize, to keep the coordinate system coherent, \n        //even in responsive (the side bar introduce a biais)\n        $(window).on('resize.changestate', function(){\n            widget.changeState('sleep');\n        });\n\n        function createGapImgPlaceholder(){\n            var $gapList     = $('ul.source', widget.$original);\n            var $placeholder = \n                $('<li class=\"empty add-option\">' +\n                     '<div><span class=\"icon-add\"></span></div>' +\n                   '</li>') ;\n            $placeholder.on('click', function(){\n                var gapImg = interaction.createGapImg({});\n                gapImg.object.removeAttr('type');\n                setUpGapImg(gapImg);    \n            }); \n            $placeholder.appendTo($gapList);\n        }\n\n        function setUpGapImg(gapImg, update){\n            var $dummy;\n            var $gapList        = $('ul.source', widget.$original);\n            var $placeholder    = $('.empty', $gapList);\n            var $gapImg         = $('[data-serial=\"' + gapImg.serial + '\"]', $gapList);\n\n            if(!$gapImg.length){\n                $gapImg = $(\"<li></li>\").insertBefore($placeholder);\n                $gapImg.data('serial', gapImg.serial)\n                       .attr('data-serial', gapImg.serial);\n            }\n\n            if(gapImg.object && gapImg.object.attributes.data){\n                gapImg.object.attributes.data = encodeURIComponent(gapImg.object.attributes.data);\n                if(update === true){\n                     \n                    $gapImg.replaceWith( gapImg.render() );\n                    $gapImg = $('[data-serial=\"' + gapImg.serial + '\"]', $gapList);\n                }\n            } else {\n                $dummy = dummyElement.get({\n                            icon: 'image',\n                            css: {\n                                width  : 58,\n                                height : 58\n                            },\n                            title : __('Select an image.')\n                        });\n                $gapImg.addClass('placeholder qti-choice qti-gapImg')\n                       .empty()\n                       .append($dummy);\n            }\n\n            //prevent the creator to resize them\n            $gapImg.addClass('widget-box');\n\n            //manage gap deletion\n            $(mediaTlbTpl())\n              .appendTo($gapImg)\n              .show()\n              .click(function(e){\n                    e.preventDefault();\n                    e.stopPropagation();\n                    $gapImg.remove();\n                    interaction.removeGapImg(gapImg);\n            });\n\n            $gapImg.off('click').on('click', function(){\n                if($gapImg.hasClass('active')){\n                    $gapImg.removeClass('active');\n                    leaveChoiceForm();\n                } else {\n                    $('.active', $gapList).removeClass('active');\n                    $gapImg.addClass('active');\n                    enterGapImgForm(gapImg.serial);\n    \n                    //gap placeholders delegate to the upload button (opens the resource mgr)\n                    if($gapImg.hasClass('placeholder')){ \n                        var $upload  = $('[data-role=\"upload-trigger\"]', $choiceForm);\n                        if($upload.length){\n                            $upload.trigger('click');\n                        }\n                    }\n                }\n            });\n        }\n\n        /**\n         * Set up the choice form\n         * @private\n         * @param {String} serial - the choice serial\n         */\n        function enterChoiceForm(serial){\n            var choice = interaction.getChoice(serial);\n            var element, bbox;\n\n            if(choice){\n                \n                //get shape bounding box\n                element = interaction.paper.getById(serial);\n                bbox = element.getBBox();\n\n                $choiceForm.empty().html(\n                    choiceFormTpl({\n                        identifier  : choice.id(),\n                        fixed       : choice.attr('fixed'),\n                        serial      : serial,\n                        matchMin    : choice.attr('matchMin'),\n                        matchMax    : choice.attr('matchMax'),\n                        choicesCount: _.size(interaction.getChoices()),\n                        x           : parseInt(bbox.x, 10), \n                        y           : parseInt(bbox.y, 10),\n                        width       : parseInt(bbox.width, 10),\n                        height      : parseInt(bbox.height, 10)                         \n                    })\n                );\n\n                formElement.initWidget($choiceForm);\n\n                //init data validation and binding\n                var callbacks = formElement.getMinMaxAttributeCallbacks($choiceForm, 'matchMin', 'matchMax');\n                callbacks.identifier = identifierHelper.updateChoiceIdentifier;\n                callbacks.fixed = formElement.getAttributeChangeCallback();\n\n                formElement.setChangeCallbacks($choiceForm, choice, callbacks);\n\n                $formChoicePanel.show();\n                panel.openSections($formChoicePanel.children('section'));\n                panel.closeSections($formInteractionPanel.children('section'));\n                \n                //change the nodes bound to the position fields\n                $left   = $('input[name=x]', $choiceForm);\n                $top    = $('input[name=y]', $choiceForm);\n                $width  = $('input[name=width]', $choiceForm);\n                $height = $('input[name=height]', $choiceForm);\n            }\n        }\n        \n        /**\n         * Leave the choice form\n         * @private\n         */\n        function leaveChoiceForm(){\n            if($formChoicePanel.css('display') !== 'none'){\n                panel.openSections($formInteractionPanel.children('section'));\n                $formChoicePanel.hide();\n                $choiceForm.empty();\n            }\n        }\n        \n        /**\n         * Set up the gapImg form\n         * @private\n         * @param {String} serial - the gapImg serial\n         */\n        function enterGapImgForm(serial){\n            \n            var callbacks,\n                gapImgSelectorOptions,\n                gapImg = interaction.getGapImg(serial);\n            \n            if(gapImg){\n                \n                $choiceForm.empty().html(\n                    gapImgFormTpl({\n                        identifier      : gapImg.id(),\n                        fixed           : gapImg.attr('fixed'),\n                        serial          :  serial,\n                        matchMin        : gapImg.attr('matchMin'),\n                        matchMax        : gapImg.attr('matchMax'),\n                        choicesCount    : _.size(interaction.getChoices()),\n                        baseUrl         : options.baseUrl,\n                        data            : gapImg.object.attr('data'),\n                        width           : gapImg.object.attr('width'),\n                        height          : gapImg.object.attr('height'),\n                        type            : gapImg.object.attr('type')\n                    })\n                );\n                \n                gapImgSelectorOptions = _.clone(options);\n                gapImgSelectorOptions.title = __('Please select the picture from the resource manager. You can add new files from your computer with the button \"Add file(s)\".');\n                imageSelector($choiceForm, gapImgSelectorOptions);\n\n                formElement.initWidget($choiceForm);\n\n                //init data validation and binding\n                callbacks = formElement.getMinMaxAttributeCallbacks($choiceForm, 'matchMin', 'matchMax');\n                callbacks.identifier = identifierHelper.updateChoiceIdentifier;\n                callbacks.fixed = formElement.getAttributeChangeCallback();\n                callbacks.data = function(element, value){\n                    gapImg.object.attr('data', value);\n                    setUpGapImg(gapImg, true);\n                };\n                callbacks.width = function(element, value){\n                    gapImg.object.attr('width', value);\n                };\n                callbacks.height = function(element, value){\n                    gapImg.object.attr('height', value);\n                };\n                callbacks.type = function(element, value){\n                    if(!value || value === ''){\n                        interaction.object.removeAttr('type');\n                    } else {\n                        gapImg.object.attr('type', value);\n                    }\n                };\n                formElement.setChangeCallbacks($choiceForm, gapImg, callbacks);\n\n                $formChoicePanel.show();\n                panel.openSections($formChoicePanel.children('section'));\n                panel.closeSections($formInteractionPanel.children('section'));\n\n                if(typeof window.scroll === 'function'){\n                    window.scroll(0, $choiceForm.offset().top);\n                }   \n            }\n        }\n    };\n\n    /**\n     * Exit the question state, leave the room cleaned up\n     */\n    var exitQuestionState = function initQuestionState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n        \n        $(window).off('resize.changestate');\n\n        if(widget._editor){\n            widget._editor.destroy();\n        }\n\n        //remove gapImg placeholder\n        $('ul.source .empty', widget.$original).remove();\n        \n        //restore gapImg appearance\n        widget.$container.find('.qti-gapImg').removeClass('active')\n                         .find('.mini-tlb').remove();\n    };\n    \n    /**\n     * The question state for the graphicGapMatch interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Question\n     */\n    var GraphicGapMatchInteractionStateQuestion = stateFactory.extend(Question, initQuestionState, exitQuestionState);\n\n    /**\n     * Initialize the form linked to the interaction\n     */\n    GraphicGapMatchInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var options = widget.options;\n        var interaction = widget.element;\n        var $form = widget.$form;\n\n        $form.html(formTpl({\n            baseUrl         : options.baseUrl,\n            data            : interaction.object.attr('data'),\n            width           : interaction.object.attr('width'),\n            height          : interaction.object.attr('height'),\n            type            : interaction.object.attr('type')\n        }));\n\n        imageSelector($form, options); \n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks  =  {};        \n        callbacks.data = function(inteaction, value){\n            interaction.object.attr('data', value);\n            widget.rebuild({\n                ready:function(widget){\n                    widget.changeState('question');\n                }\n            });\n        };\n        callbacks.width = function(inteaction, value){\n            interaction.object.attr('width', value);\n        };\n        callbacks.height = function(inteaction, value){\n            interaction.object.attr('height', value);\n        };\n        callbacks.type = function(inteaction, value){\n            if(!value || value === ''){\n                interaction.object.removeAttr('type');\n            } else {\n                interaction.object.attr('type', value);\n            }\n        };\n        formElement.setChangeCallbacks($form, interaction, callbacks, { validateOnInit : false });\n    };\n\n    return GraphicGapMatchInteractionStateQuestion;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    /**\n     * Just forward to the correct/map states\n     */\n    function initAnswerState(){\n        answerStateHelper.forward(this.widget);\n    }\n    \n    \n    function exitAnswerState(){\n        //needed an exit callback even empty\n    }\n    \n    \n    /**\n     * The answer state for the graphicGapMatch interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/states/Answer\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Answer\n     */\n    return stateFactory.extend(Answer, initAnswerState, exitAnswerState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, stateFactory, Correct, GraphicGapMatchInteraction, helper, PciResponse){\n\n    /**\n     * Initialize the state: use the common renderer to set the correct response.\n     */\n    function initCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n        \n        GraphicGapMatchInteraction.destroy(interaction);\n\n        if(!interaction.paper){\n            return;\n        }\n        \n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please fill the gap with the correct choices below.'));\n       \n        widget.createGapImgs(); \n \n        //use the common Renderer\n        GraphicGapMatchInteraction.render.call(interaction.getRenderer(), interaction);\n\n\n        GraphicGapMatchInteraction.setResponse(\n            interaction, \n            PciResponse.serialize(_.invoke(corrects, String.prototype.split, ' '), interaction)\n        );\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n           if(data.response && data.response.list){\n                response.setCorrect(\n                    _.map(data.response.list.directedPair, function(pair){\n                        return pair.join(' ');\n                    })\n                ); \n           }\n        });\n    }\n\n    /**\n     * Exit the correct state\n     */\n    function exitCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n        \n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n        GraphicGapMatchInteraction.destroy(interaction); \n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper(_.bind(widget.scaleGapList, widget));\n        widget.createChoices();\n        widget.createGapImgs();\n    }\n\n    /**\n     * The correct answer state for the graphicGapMatch interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Correct\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Correct\n     */\n    return stateFactory.create(Correct, initCorrectState, exitCorrectState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse', \n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/pairScoringForm'\n], function($, _, __, stateFactory, Map, GraphicGapMatchInteraction, helper, graphicHelper, PciResponse, scoringFormFactory){\n\n    /**\n     * Initialize the state.\n     */\n    function initMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n        var currentResponses =  _.size(response.getMapEntries()) === 0 ? corrects : _.keys(response.getMapEntries());\n        \n        //really need to destroy before ? \n        GraphicGapMatchInteraction.destroy(interaction);\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please fill the gap with the images below, then edit the score for each gap/image pair.'));\n        interaction.responseMappingMode = true;\n\n        widget.createGapImgs(); \n \n        //use the common Renderer\n        GraphicGapMatchInteraction.render.call(interaction.getRenderer(), interaction);\n    \n        //change the display of the gaps\n        showChoicesId(interaction);\n\n        //and initialize the scoring form\n        if(_.size(response.getMapEntries()) === 0){\n            updateForm(widget, corrects);\n        } else {\n            updateForm(widget);\n        }\n        \n        //each response change leads to an update of the scoring form\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            var type  = response.attr('cardinality') === 'single' ? 'base' : 'list';\n            var pairs, entries;\n            if(data && data.response &&  data.response[type]){\n               pairs = _.invoke(data.response[type].directedPair, Array.prototype.join, ' ');\n               entries = _.keys(response.getMapEntries());\n                \n               //add new pairs from  the difference between the current entries and the given data\n               _(pairs).difference(entries).forEach(interaction.pairScoringForm.addPair, interaction.pairScoringForm);\n            }\n            removeGapFillers(interaction);\n        });\n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n        \n        widget.$container.off('responseChange.qti-widget');\n\n        if(interaction.pairScoringForm){\n            interaction.pairScoringForm.destroy();\n        }\n\n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n        GraphicGapMatchInteraction.destroy(interaction); \n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper(_.bind(widget.scaleGapList, widget));\n        widget.createChoices();\n        widget.createGapImgs();\n    }\n\n    function removeGapFillers(interaction){\n        _.forEach(interaction.gapFillers, function(gapFiller){\n            gapFiller.remove();\n        });\n        interaction.gapFillers = [];\n    }\n\n    function showChoicesId(interaction){\n       \n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                graphicHelper.createShapeText(interaction.paper, element, {\n                    shapeClick: true,\n                    content : choice.id()\n                });\n            }\n        });\n    }\n\n     /**\n     * Update the scoring form\n     * @param {Object} widget - the current widget\n     * @param {Array} [entries] - to force the use of this collection instead of the mapEntries\n     */\n    function updateForm(widget, entries){\n\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var mapEntries = response.getMapEntries();\n\n        var mappingChange = function mappingChange(){\n            //set the current responses, either the mapEntries or the corrects if nothing else\n            GraphicGapMatchInteraction.setResponse(\n                interaction, \n                PciResponse.serialize(_.invoke(_.keys(response.getMapEntries()), String.prototype.split, ' '), interaction)\n            );\n        };\n        var gapSrcs  = {};\n        _.forEach(interaction.getGapImgs(), function(gapImg){\n            if(gapImg.object && gapImg.object.attr('data')){\n                gapSrcs[gapImg.id()] = widget.options.baseUrl + encodeURIComponent(gapImg.object.attr('data'));\n            }\n        });       \n\n        //set up the scoring form options\n        var options = {\n            leftTitle : __('Choice'),\n            rightTitle : __('Gap'),\n            type : 'directedPair',\n            pairLeft : function(){\n                return _.map(interaction.getChoices(), function(choice){\n                    return {\n                        id : choice.id(),\n                        value : choice.id()\n                    };\n                });\n            },\n            pairRight : function(){\n                return _.map(interaction.getGapImgs(), function(gap){\n                    return {\n                        id : gap.id(),\n                        value : gap.id()\n                    };\n                });\n            },\n            formatRight : function(id){\n                var formated = id;\n                if(gapSrcs[id]){\n                    formated += \"<br><img height='24px' src='\" + gapSrcs[id] + \"' />\"; \n                }\n                return formated;\n            }\n        };\n\n        //format the entries to match the needs of the scoring form\n        if(entries){\n            options.entries = _.transform(entries, function(result, value){\n                result[value] = mapEntries[value] !== undefined ? mapEntries[value] : response.mappingAttributes.defaultValue;\n            }, {}); \n        }\n\n        //initialize the scoring form \n        interaction.pairScoringForm = scoringFormFactory(widget, options);\n    }\n\n    /**\n     * The map answer state for the graphicGapMatch interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Sleep',    \n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/Map'\n], function(factory, states){\n\n    //creates a state bundle for the interaction\n    return factory.createBundle(states, arguments);\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gapImg', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"alt=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.objetLabel)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \";\n  return buffer;\n  }\n\n  buffer += \"<li class=\\\"qti-choice qti-gapImg selectable\\\" data-identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <img src=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.data)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" \\n         width=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\\n         height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"\\n         \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.objectLabel), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    />\\n</li>\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/states/states',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gapImg'\n], function($, _, __, Widget, GraphicWidget, states, gapImgTpl){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the GraphicGapMatch Interaction\n     *\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/Widget\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/GraphicInteraction/Widget\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/Widget\n     */      \n    var GraphicGapMatchInteractionWidget = _.extend(Widget.clone(), GraphicWidget, {\n\n        /**\n         * Initialize the widget\n         * @see {taoQtiItem/qtiCreator/widgets/interactions/Widget#initCreator}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        initCreator : function(options){\n            var paper;\n            this.baseUrl = options.baseUrl;\n            this.choiceForm = options.choiceForm;\n            \n            this.registerStates(states);\n            \n            //call parent initCreator\n            Widget.initCreator.call(this);\n          \n            paper = this.createPaper(_.bind(this.scaleGapList, this)); \n            if(paper){\n                this.element.paper = paper;\n                this.createChoices();\n                this.createGapImgs();\n            }\n        },\n\n        /**\n         * Gracefull destroy the widget\n         * @see {taoQtiItem/qtiCreator/widgets/Widget#destroy}\n         */\n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.gridEdit.' + this.element.serial);\n            $(window).off('resize.qti-widget.' + this.element.serial);\n            $container.off('resize.qti-widget.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        },\n\n        /**\n         * Called back on paper resize to scale the gap list\n         * @param {Number} newSize - the interaction size\n         * @param {Number} [factor = 1] - scaling factor\n         */\n        scaleGapList : function(newSize, factor){\n\n           var $container = this.$original;\n           var $gapList   = $('ul.source', $container);\n           $gapList.css('max-width', newSize + 'px'); \n           if(factor && factor !== 1){\n                $gapList.find('img').each(function(){\n                    var $img = $(this);\n                    $img.width( $img.attr('width') * factor );\n                    $img.height( $img.attr('height') * factor );\n                });\n           } \n        },\n\n        /**\n         * Create the gap images\n         */\n        createGapImgs : function(){\n            var interaction = this.element;\n            var $container  = this.$original;\n            var $gapList    = $('ul.source', $container);\n    \n            $gapList.empty();\n            _.forEach(interaction.gapImgs, function(gapImg){\n                $gapList.append(gapImg.render());            \n            });\n        }\n   });\n\n    return GraphicGapMatchInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicGapMatchInteraction/Widget'\n], function(_, GraphicGapMatchInteraction, GraphicGapMatchInteractionWidget){\n        \n    /**\n     * The CreatorGraphicGapMatchInteraction  Renderer \n     * @extends taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction\n     * @exports taoQtiItem/qtiCreator/renderers/interactions/GraphicGapMatchInteraction\n     */\n    var CreatorGraphicGapMatchInteraction = _.clone(GraphicGapMatchInteraction);\n\n    /**\n     * Render the interaction for authoring.\n     * It delegates the rendering to the widget layer.\n     * @param {Object} interaction - the model\n     * @param {Object} [options] - extra options\n     */\n    CreatorGraphicGapMatchInteraction.render = function(interaction, options){\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return GraphicGapMatchInteractionWidget.build(\n            interaction,\n            GraphicGapMatchInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGraphicGapMatchInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicOrderInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicOrderInteraction clearfix \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"image-editor solid\\\">\\n        <div id='graphic-paper-\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class=\\\"main-image-box\\\"></div>\\n        <div class=\\\"clearfix\\\"></div>\\n        <ul class=\\\"none block-listing solid horizontal ordinals\\\"></ul>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'raphael',\n    'scale.raphael',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicOrderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper'\n], function($, _, __, raphael, scaleRaphael, tpl, graphic,  pciResponse, Helper){\n\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     */\n    var render = function render(interaction){\n        var $container = Helper.getContainer(interaction);\n        var $orderList = $('ul', $container);\n        var background = interaction.object.attributes;\n        var baseUrl = this.getOption('baseUrl') || '';\n\n        //create the paper\n        interaction.paper = graphic.responsivePaper( 'graphic-paper-' + interaction.serial, interaction.serial, {\n            width       : background.width, \n            height      : background.height,\n            img         : baseUrl + background.data,\n            imgId       : 'bg-image-' + interaction.serial,\n            container   : $container\n        });\n\n        //create the list of number to order\n        _renderOrderList(interaction, $orderList);\n\n        //call render choice for each interaction's choices\n        _.forEach(interaction.getChoices(), _.partial(_renderChoice, interaction, $orderList));\n\n        //set up the constraints instructions\n        Helper.minMaxChoiceInstructions(interaction, {\n            min: interaction.attr('minChoices'),\n            max: interaction.attr('maxChoices'),\n            getResponse : _getRawResponse,\n            onError : function(data){\n                graphic.highlightError(data.target);\n            }\n        }); \n    };\n\n    /**\n     * Render a choice inside the paper. \n     * Please note that the choice renderer isn't implemented separately because it relies on the Raphael paper instead of the DOM.\n     * @private\n     * @param {Object} interaction\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     * @param {Object} choice - the hotspot choice to add to the interaction\n     */\n    var _renderChoice  =  function _renderChoice(interaction, $orderList, choice){\n\n        var rElement = graphic.createElement(interaction.paper, choice.attr('shape'), choice.attr('coords'), {\n            id : choice.serial,\n            title : __('Select this area')\n        })\n        .click(function(){\n            if(this.active){\n                _unselectShape(interaction.paper, this, $orderList);\n            } else {\n                _selectShape(interaction.paper, this, $orderList);\n            }\n            Helper.triggerResponseChangeEvent(interaction);\n            Helper.validateInstructions(interaction, { choice : choice });\n        });\n    };\n\n    /**\n     * Render the list of numbers\n     * @private\n     * @param {Object} interaction\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     */\n    var _renderOrderList = function _renderOrderList(interaction, $orderList){\n        var $orderers;\n        var size = _.size(interaction.getChoices());\n        var min = interaction.attr('minChoices');\n        var max = interaction.attr('maxChoices');\n\n        //calculate the number of orderer to display\n        if(max > 0 && max < size){\n            size = max;\n        } else if(min > 0 && min < size){\n           size = min;\n        }\n\n        //add them to the list\n        _.times(size, function(index){\n            var position = index + 1;\n            var $orderer = $('<li class=\"selectable\" data-number=\"' + position + '\">' + position +  '</li>');\n            if(index === 0){\n                $orderer.addClass('active');\n            }\n            $orderList.append($orderer);\n        });\n\n        //create related svg texts\n        _createTexts(interaction.paper, size, $orderList);\n\n        //bind the activation event\n        $orderers = $orderList.children('li');\n        $orderers.click(function(e){\n            e.preventDefault();\n            var $orderer = $(this);    \n        \n            if(!$orderer.hasClass('active') && !$orderer.hasClass('disabled')){\n                $orderers.removeClass('active');\n                $orderer.addClass('active');\n            }\n        }); \n    };\n\n    /**\n     * Select a shape to position an order\n     * @private \n     * @param {Raphael.Paper} paper - the interaction paper\n     * @param {Raphael.element} element - the selected shape\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     */\n    var _selectShape = function _selectShape(paper, element, $orderList){\n        \n        //lookup for the active number\n        var $active = $orderList.find('.active:first');\n        if($active.length && $active.data('number') > 0){\n\n            //associate the current number directly to the element\n            element.data('number', $active.data('number'));\n            element.active  = true;\n            _showText(paper, element); \n            graphic.updateElementState(element, 'active');\n            \n            //update the state of the order list\n            $active.toggleClass('active disabled').siblings(':not(.disabled)').first().toggleClass('active');\n        }\n    };\n\n    /**\n     * Unselect a shape to free the position\n     * @private \n     * @param {Raphael.Paper} paper - the interaction paper\n     * @param {Raphael.element} element - the unselected shape\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     */\n    var _unselectShape = function _unselectShape(paper, element, $orderList){\n        var number = element.data('number');\n        \n        //update element state\n        element.active  = false;\n        _hideText(paper, element); \n        element.removeData('number');\n        graphic.updateElementState(element, 'basic');\n        \n        //reset order list state and activate the removed number\n        $orderList\n            .children().removeClass('active')\n            .filter('[data-number='+number+']').removeClass('disabled').addClass('active');\n    };\n\n    /**\n     * Creates ALL the texts (the numbers to display in the shapes). They are created styled but hidden.\n     * \n     * @private \n     * @param {Raphael.Paper} paper - the interaction paper\n     * @param {Number} size - the number of numbers to create...\n     * @param {jQueryElement} $orderList - the list than contains the orderers\n     * @return {Array} the creates text element\n     */\n    var _createTexts = function _createTexts(paper, size){\n        var texts = [];\n        _.times(size, function(index){\n            \n            var number = index + 1;\n            var text = graphic.createText(paper, {\n                id          : 'text-' + number,\n                content     : number,\n                title       : __('Remove'),\n                style       : 'order-text',\n                hide        : true\n            });\n\n            //clicking the text will has the same effect that clicking the shape: unselect.\n            text.click(function(){\n                paper.forEach(function(element){\n                    if(element.data('number') === number && element.events){  //we just need to retrieve the right element\n                        //call the click event \n                        var evt = _.where(element.events, { name : 'click'});\n                        if(evt.length && evt[0] && typeof evt[0].f === 'function'){\n                            evt[0].f.call(element);\n                        }\n                    }\n                });\n            });\n            texts.push(text);\n        });\n        return texts;\n    };\n\n    /**\n     * Show the text that match the element's number. \n     * We need to display it at the center of the shape.\n     * @private \n     * @param {Raphael.Paper} paper - the interaction paper\n     * @param {Raphael.Element} element - the element to show the text for\n     */\n    var _showText =  function _showText(paper, element){\n        var bbox = element.getBBox();\n        var transf;\n\n        //we retrieve the good text from it's id \n        var text = paper.getById('text-' + element.data('number'));\n        if(text){\n        \n            //move it to the center of the shape (using absolute transform), and than display it\n            transf = 'T' + (bbox.x + (bbox.width / 2)) + ',' +\n                           (bbox.y + (bbox.height / 2));\n            text.transform(transf)\n                .show()\n                .toFront();\n        }\n    };\n\n    /**\n     * Hide an element text.\n     * @private \n     * @param {Raphael.Paper} paper - the interaction paper\n     * @param {Raphael.Element} element - the element to hide the text for\n     */\n    var _hideText =  function _hideText (paper, element){\n        var text = paper.getById('text-' + element.data('number'));\n        if(text){\n            text.hide();\n        }\n    };\n   \n    /**\n     * Get the responses from the interaction\n     * @private \n     * @param {Object} interaction\n     * @returns {Array} of points\n     */\n    var _getRawResponse = function _getRawResponse(interaction){\n        var response = [];\n        _.forEach(interaction.getChoices(), function(choice){\n            var elt = interaction.paper.getById(choice.serial);\n            if(elt && elt.data('number')){\n                response.push({\n                    index : elt.data('number'),\n                    id : choice.id()          \n                });\n            }\n        });\n        return _(response).sortBy('index').map('id').value();\n    };\n \n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        var responseValues;\n        var $container = Helper.getContainer(interaction);\n        var $orderList = $('ul', $container);\n        if(response && interaction.paper){\n\n            try {\n                //try to unserualize tthe pci response\n                responseValues = pciResponse.unserialize(response, interaction);\n            } catch(e){}\n            \n            if(_.isArray(responseValues)){\n                _.forEach(responseValues, function(responseValue, index){\n                    var element;\n                    var number = index + 1;\n\n                    //get the choice that match the response\n                    var choice = _(interaction.getChoices()).where({'attributes' : { 'identifier' : responseValue}}).first();\n                    if(choice){\n                       element = interaction.paper.getById(choice.serial);\n                       if(element){    \n                            //activate the orderer to be consistant\n                            $orderList.children('[data-number='+number+']').addClass('active');\n    \n                            //select the related shape\n                            _selectShape(interaction.paper, element, $orderList);\n                       }\n                    }\n                });\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction){\n        var $container = Helper.getContainer(interaction);\n        var $orderList = $('ul', $container);\n        \n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                _unselectShape(interaction.paper, element, $orderList);\n            }\n        });\n\n        $orderList.children('li').removeClass('active disabled').first().addClass('active');        \n    };\n\n\n    /**\n     i* Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return  pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container;\n        if(interaction.paper){\n            $container = Helper.getContainer(interaction);\n        \n            $(window).off('resize.qti-widget.' + interaction.serial);\n            $container.off('resize.qti-widget.' + interaction.serial);\n\n            interaction.paper.clear();\n            Helper.removeInstructions(interaction);\n            \n            $('.main-image-box', $container).empty().removeAttr('style');            \n            $('.image-editor', $container).removeAttr('style'); \n            $('ul', $container).empty();\n        }\n    };  \n    /**\n     * Expose the common renderer for the interaction\n     * @exports qtiCommonRenderer/renderers/interactions/SelectPointInteraction\n     */\n    return {\n        qtiClass : 'graphicOrderInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy\n    };\n});\n\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\n], function(stateFactory, SleepState){\n   \n    var initSleepState = function initSleepState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        widget.on('metaChange', function(data){\n            if(data.key === 'responsive'){\n                if(data.value === true){\n                    interaction.addClass('responsive');\n                } else {\n                    interaction.removeClass('responsive');\n                }\n                widget.rebuild();\n            }\n        });\n    };\n\n\n    var exitSleepState = function exitSleepState(){};\n \n    return stateFactory.extend(SleepState, initSleepState, exitSleepState); \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicOrder', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Interaction Background\", options) : helperMissing.call(depth0, \"__\", \"Interaction Background\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"type\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mime Type\", options) : helperMissing.call(depth0, \"__\", \"Mime Type\", options)))\n    + \"</label>\\n        <input name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <hr>\\n\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of choices\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of choices\", options)))\n    + \"\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"<br>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select.\", options)))\n    + \"\\n        </span>\\n    </h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"minChoices\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minChoices\\\" value=\\\"\";\n  if (helper = helpers.minChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"maxChoices\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxChoices\\\" value=\\\"\";\n  if (helper = helpers.maxChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/choices/hotspot', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"\\n<div class=\\\"panel\\\">\\n    <label for=\\\"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"identifier\", options) : helperMissing.call(depth0, \"__\", \"identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other choice or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. my-hotspot_1\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\\n\\n<h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shape position\", options) : helperMissing.call(depth0, \"__\", \"Shape position\", options)))\n    + \"</h3>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"x\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Left\", options) : helperMissing.call(depth0, \"__\", \"Left\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The left position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"x\\\" value=\\\"\";\n  if (helper = helpers.x) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.x); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"y\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Top\", options) : helperMissing.call(depth0, \"__\", \"Top\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The top position of the shape relative to the top left corner of the background in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"y\\\" value=\\\"\";\n  if (helper = helpers.y) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.y); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape width in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options) : helperMissing.call(depth0, \"__\", \"The shape height in pixels. This value may be scaled when the background image size is adapted to it's container\", options)))\n    + \"</div>\\n    <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/graphicOrder',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/hotspot',\n    'taoQtiItem/qtiCreator/helper/panel'\n], function($, _, GraphicHelper, stateFactory, Question, shapeEditor, imageSelector, formElement, interactionFormElement, identifierHelper, formTpl, choiceFormTpl, panel){\n\n    /**\n     * Question State initialization: set up side bar, editors and shae factory\n     */\n    var initQuestionState = function initQuestionState(){\n\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n\n        var $choiceForm  = widget.choiceForm;\n        var $formInteractionPanel = $('#item-editor-interaction-property-bar');\n        var $formChoicePanel = $('#item-editor-choice-property-bar');\n\n        var $left, $top, $width, $height;\n\n        //instantiate the shape editor, attach it to the widget to retrieve it during the exit phase\n        widget._editor = shapeEditor(widget, {\n            shapeCreated : function(shape, type){\n                var newChoice = interaction.createChoice({\n                    shape  : type === 'path' ? 'poly' : type,\n                    coords : GraphicHelper.qtiCoords(shape) \n                });\n\n                //link the shape to the choice\n                shape.id = newChoice.serial;\n            },\n            shapeRemoved : function(id){\n                interaction.removeChoice(id);\n            },\n            enterHandling : function(shape){\n                enterChoiceForm(shape.id);\n            },\n            quitHandling : function(){\n                leaveChoiceForm();\n            },\n            shapeChange : function(shape){\n                var bbox;\n                var choice = interaction.getChoice(shape.id);\n                if(choice){\n                    choice.attr('coords', GraphicHelper.qtiCoords(shape));\n    \n                    if($left && $left.length){\n                        bbox = shape.getBBox();\n                        $left.val(parseInt(bbox.x, 10)); \n                        $top.val(parseInt(bbox.y, 10));\n                        $width.val(parseInt(bbox.width, 10));\n                        $height.val(parseInt(bbox.height, 10));                         \n                    }         \n                }\n            }\n        });\n    \n        //and create an instance\n        widget._editor.create();\n\n        //we need to stop the question mode on resize, to keep the coordinate system coherent, \n        //even in responsive (the side bar introduce a biais)\n        $(window).on('resize.changestate', function(){\n            widget.changeState('sleep');\n        });\n\n\n        widget.on('attributeChange', function(data){\n            if(data.key === 'maxChoices'){\n                widget.renderOrderList();\n            }\n        });\n        /**\n         * Set up the choice form\n         * @private\n         * @param {String} serial - the choice serial\n         */\n        function enterChoiceForm(serial){\n            var choice = interaction.getChoice(serial);\n            var element, bbox;\n            if(choice){\n                \n                //get shape bounding box\n                element = interaction.paper.getById(serial);\n                bbox = element.getBBox();\n\n                $choiceForm.empty().html(\n                    choiceFormTpl({\n                        identifier  : choice.id(),\n                        fixed       : choice.attr('fixed'),\n                        serial      : serial,\n                        x           : parseInt(bbox.x, 10), \n                        y           : parseInt(bbox.y, 10),\n                        width       : parseInt(bbox.width, 10),\n                        height      : parseInt(bbox.height, 10)                         \n                    })\n                );\n\n                formElement.initWidget($choiceForm);\n\n                //init data validation and binding\n                formElement.setChangeCallbacks($choiceForm, choice, {\n                    identifier  : identifierHelper.updateChoiceIdentifier,\n                    fixed       : formElement.getAttributeChangeCallback() \n                });\n\n                $formChoicePanel.show();\n                panel.openSections($formChoicePanel.children('section'));\n                panel.closeSections($formInteractionPanel.children('section'));\n\n                //change the nodes bound to the position fields\n                $left   = $('input[name=x]', $choiceForm);\n                $top    = $('input[name=y]', $choiceForm);\n                $width  = $('input[name=width]', $choiceForm);\n                $height = $('input[name=height]', $choiceForm);\n            }\n        }\n        \n        /**\n         * Leave the choice form\n         * @private\n         */\n        function leaveChoiceForm(){\n            if($formChoicePanel.css('display') !== 'none'){\n                panel.openSections($formInteractionPanel.children('section'));\n                $formChoicePanel.hide();\n                $choiceForm.empty();\n            }\n        }\n    };\n\n    /**\n     * Exit the question state, leave the room cleaned up\n     */\n    var exitQuestionState = function initQuestionState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n        \n        $(window).off('resize.changestate');\n\n        if(widget._editor){\n            widget._editor.destroy();\n        }\n    };\n    \n    /**\n     * The question state for the graphicOrder interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Question\n     */\n    var GraphicOrderInteractionStateQuestion = stateFactory.extend(Question, initQuestionState, exitQuestionState);\n\n    /**\n     * Initialize the form linked to the interaction\n     */\n    GraphicOrderInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var options = widget.options;\n        var interaction = widget.element;\n        var $form = widget.$form;\n\n        $form.html(formTpl({\n            baseUrl         : options.baseUrl,\n            maxChoices      : parseInt(interaction.attr('maxChoices')),\n            minChoices      : parseInt(interaction.attr('minChoices')),\n            choicesCount    : _.size(interaction.getChoices()),\n            data            : interaction.object.attr('data'),\n            width           : interaction.object.attr('width'),\n            height          : interaction.object.attr('height'),\n            type            : interaction.object.attr('type')\n        }));\n\n        imageSelector($form, options); \n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'minChoices', 'maxChoices', {updateCardinality:false});\n        callbacks.data = function(i, value){\n            interaction.object.attr('data', value);\n            widget.rebuild({\n                ready:function(widget){\n                    widget.changeState('question');\n                }\n            });\n        };\n        callbacks.width = function(i, value){\n            interaction.object.attr('width', value);\n        };\n        callbacks.height = function(i, value){\n            interaction.object.attr('height', value);\n        };\n        callbacks.type = function(i, value){\n            if(!value || value === ''){\n                interaction.object.removeAttr('type');\n            } else {\n                interaction.object.attr('type', value);\n            }\n        };\n        formElement.setChangeCallbacks($form, interaction, callbacks, { validateOnInit : false });\n        \n        interactionFormElement.syncMaxChoices(widget);\n    };\n\n    return GraphicOrderInteractionStateQuestion;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    /**\n     * Just forward to the correct/map states\n     */\n    function initAnswerState(){\n        answerStateHelper.forward(this.widget);\n    }\n    \n    \n    function exitAnswerState(){\n        //needed an exit callback even empty\n    }\n    \n    \n    /**\n     * The answer state for the graphicOrder interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/states/Answer\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Answer\n     */\n    return stateFactory.extend(Answer, initAnswerState, exitAnswerState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, stateFactory, Correct, GraphicOrderInteraction, helper, PciResponse){\n\n    /**\n     * Initialize the state: use the common renderer to set the correct response.\n     */\n    function initCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n       \n        //really need to destroy before ? \n        GraphicOrderInteraction.destroy(interaction);\n\n        if(!interaction.paper){\n            return;\n        }\n        \n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please order the choices below to set the correct answer'));\n        \n        //use the common Renderer\n        GraphicOrderInteraction.render.call(interaction.getRenderer(), interaction);\n\n        GraphicOrderInteraction.setResponse(interaction, PciResponse.serialize(_.values(response.getCorrect()), interaction));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(PciResponse.unserialize(data.response, interaction)); \n        });\n\n    }\n\n    /**\n     * Exit the correct state\n     */\n    function exitCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n        \n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n        GraphicOrderInteraction.destroy(interaction); \n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper(_.bind(widget.scaleOrderList, widget)); \n        widget.createChoices();\n        widget.renderOrderList();\n    }\n\n    /**\n     * The correct answer state for the graphicOrder interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Correct\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Correct\n     */\n    return stateFactory.create(Correct, initCorrectState, exitCorrectState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n\t'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/Correct'\n], function(factory, states){\n\n    //creates a state bundle for the interaction\n    return factory.createBundle(states, arguments);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/states/states'\n], function($, _, __, Widget, GraphicWidget, states){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the GraphicOrder Interaction\n     *\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/Widget\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/GraphicInteraction/Widget\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/Widget\n     */      \n    var GraphicOrderInteractionWidget = _.extend(Widget.clone(), GraphicWidget, {\n\n        /**\n         * Initialize the widget\n         * @see {taoQtiItem/qtiCreator/widgets/interactions/Widget#initCreator}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        initCreator : function(options){\n            var paper;\n            this.baseUrl = options.baseUrl;\n            this.choiceForm = options.choiceForm;\n            \n            this.registerStates(states);\n            \n            //call parent initCreator\n            Widget.initCreator.call(this);\n           \n            paper = this.createPaper(_.bind(this.scaleOrderList, this)); \n            if(paper){\n                this.element.paper = paper;\n                this.createChoices();\n                this.renderOrderList();\n            }\n        },\n\n        /**\n         * Gracefull destroy the widget\n         * @see {taoQtiItem/qtiCreator/widgets/Widget#destroy}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.gridEdit.' + this.element.serial);\n            $(window).off('resize.qti-widget.' + this.element.serial);\n            $container.off('resize.qti-widget.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        },\n\n        /**\n         * Called back on paper resize to scale the order list\n         * @param {Number} newSize - the interaction size\n         */\n        scaleOrderList : function(newSize){\n            $('ul.block-listing', this.$original).css('max-width', newSize + 'px');\n        }, \n\n        /**\n         * Render the list of numbers\n         */\n         renderOrderList : function renderOrderList(){\n            var interaction = this.element;\n            var size        = _.size(interaction.getChoices());\n            var min         = interaction.attr('minChoices');\n            var max         = interaction.attr('maxChoices');\n            var $orderList  = $('ul.block-listing', this.$original);\n\n            //calculate the number of orderer to display\n            if(max > 0 && max < size){\n                size = max;\n            } else if(min > 0 && min < size){\n               size = min;\n            }\n    \n            $orderList.empty();\n\n            //add them to the list\n            _.times(size, function(index){\n                var position = index + 1;\n                var $orderer = $('<li class=\"selectable\" data-number=\"' + position + '\">' + position +  '</li>');\n                if(index === 0){\n                    $orderer.addClass('active');\n                }\n                $orderList.append($orderer);\n            });\n        }\n   });\n\n    return GraphicOrderInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicOrderInteraction/Widget'\n], function(_, GraphicOrderInteraction, GraphicOrderInteractionWidget){\n        \n    /**\n     * The CreatorGraphicOrderInteraction  Renderer \n     * @extends taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction\n     * @exports taoQtiItem/qtiCreator/renderers/interactions/GraphicOrderInteraction\n     */\n    var CreatorGraphicOrderInteraction = _.clone(GraphicOrderInteraction);\n\n    /**\n     * Render the interaction for authoring.\n     * It delegates the rendering to the widget layer.\n     * @param {Object} interaction - the model\n     * @param {Object} [options] - extra options\n     */\n    CreatorGraphicOrderInteraction.render = function(interaction, options){\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return GraphicOrderInteractionWidget.build(\n            interaction,\n            GraphicOrderInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorGraphicOrderInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hotspotInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-graphicInteraction qti-hotspotInteraction clearfix \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"image-editor solid\\\">\\n        <div id='graphic-paper-\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class=\\\"main-image-box\\\"></div>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'raphael',\n    'scale.raphael',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hotspotInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper'\n], function($, _, __, raphael, scaleRaphael, tpl, graphic,  pciResponse, Helper){\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     */\n    var render = function render(interaction){\n        \n        var $container = Helper.getContainer(interaction);\n        var background = interaction.object.attributes;\n        var baseUrl = this.getOption('baseUrl') || '';\n        \n        interaction.paper = graphic.responsivePaper( 'graphic-paper-' + interaction.serial, interaction.serial, {\n            width     : background.width, \n            height    : background.height,\n            img       : baseUrl + background.data,\n            container : $container\n        });\n\n        //call render choice for each interaction's choices\n        _.forEach(interaction.getChoices(), _.partial(_renderChoice, interaction));\n\n        //set up the constraints instructions\n        Helper.minMaxChoiceInstructions(interaction, {\n            min: interaction.attr('minChoices'),\n            max: interaction.attr('maxChoices'),\n            getResponse : _getRawResponse,\n            onError : function(data){\n                if(data.target.active){\n                    data.target.active = false;\n                    graphic.updateElementState(this, 'basic', __('Select this area'));\n                    graphic.highlightError(data.target);\n                    Helper.triggerResponseChangeEvent(interaction);\n                    $container.trigger('inactiveChoice.qti-widget', [data.choice, data.target]);\n                }\n            }\n        }); \n    };\n\n    /**\n     * Render a choice inside the paper. \n     * Please note that the choice renderer isn't implemented separately because it relies on the Raphael paper instead of the DOM.\n     * @param {Paper} paper - the raphael paper to add the choices to\n     * @param {Object} interaction\n     * @param {Object} choice - the hotspot choice to add to the interaction\n     */\n    var _renderChoice  =  function _renderChoice(interaction, choice){\n        var $container = Helper.getContainer(interaction);\n        var rElement = graphic.createElement(interaction.paper, choice.attr('shape'), choice.attr('coords'), {\n            id : choice.serial,\n            title : __('Select this area')\n        })\n        .click(function(){\n            if(this.active){\n                graphic.updateElementState(this, 'basic', __('Select this area'));\n                this.active = false;\n                $container.trigger('inactiveChoice.qti-widget', [choice, this]);\n            } else {\n                graphic.updateElementState(this, 'active', __('Click again to remove'));\n                this.active = true;\n                $container.trigger('activeChoice.qti-widget', [choice, this]);\n            }\n            Helper.triggerResponseChangeEvent(interaction);\n            Helper.validateInstructions(interaction, { choice : choice, target : this });\n        });\n    };\n\n    /**\n     * Get the response from the interaction\n     * @private\n     * @param {Object} interaction\n     * @returns {Array} the response in raw format\n     */ \n    var _getRawResponse = function _getRawResponse(interaction){\n        \n       return _(interaction.getChoices())\n        .map(function(choice){\n            var rElement = interaction.paper.getById(choice.serial);\n            return (rElement && rElement.active === true) ? choice.id() : false;\n       })\n        .filter(_.isString)\n        .value();\n    };\n \n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        \n        var responseValues;\n        if(response && interaction.paper){\n\n            try{\n                responseValues = pciResponse.unserialize(response, interaction);\n\n            } catch(e){ }\n            \n            if(_.isArray(responseValues)){\n\n                _.forEach(interaction.getChoices(), function(choice){\n                    var rElement;\n                    if(_.contains(responseValues, choice.attributes.identifier)){\n                        rElement = interaction.paper.getById(choice.serial);\n                        if(rElement){\n                            rElement.active = true;\n                            graphic.updateElementState(rElement, 'active', __('Click again to remove')); \n                            Helper.validateInstructions(interaction, { choice : choice, target : rElement });\n                        }\n                    }\n                });\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction){\n        _.forEach(interaction.getChoices(), function(choice){\n            var element = interaction.paper.getById(choice.serial);\n            if(element){\n                element.active = false;\n                graphic.updateElementState(element, 'basic'); \n            }\n        });\n        Helper.resetInstructions(interaction);\n    };\n\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var raw = _getRawResponse(interaction);\n        var response =  pciResponse.serialize(_getRawResponse(interaction), interaction);\n        return response;\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container;\n        if(interaction.paper){\n            $container = Helper.getContainer(interaction);\n        \n            $(window).off('resize.qti-widget.' + interaction.serial);\n            $container.off('resize.qti-widget.' + interaction.serial);\n\n            interaction.paper.clear();\n            Helper.removeInstructions(interaction);\n            \n            $('.main-image-box', $container).empty().removeAttr('style');            \n            $('.image-editor', $container).removeAttr('style'); \n        }\n    };  \n\n    /**\n     * Expose the common renderer for the hotspot interaction\n     * @exports qtiCommonRenderer/renderers/interactions/HotspotInteraction\n     */\n    return {\n        qtiClass : 'hotspotInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy\n    };\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\n], function(stateFactory, SleepState){\n   \n    var initSleepState = function initSleepState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        widget.on('metaChange', function(data){\n            if(data.key === 'responsive'){\n                if(data.value === true){\n                    interaction.addClass('responsive');\n                } else {\n                    interaction.removeClass('responsive');\n                }\n                widget.rebuild();\n            }\n        });\n    };\n\n    var exitSleepState = function exitSleepState(){};\n \n    return stateFactory.extend(SleepState, initSleepState, exitSleepState); \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hotspot', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Interaction Background\", options) : helperMissing.call(depth0, \"__\", \"Interaction Background\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"type\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mime Type\", options) : helperMissing.call(depth0, \"__\", \"Mime Type\", options)))\n    + \"</label>\\n        <input name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" readonly />\\n    </div>\\n\\n    <hr>\\n\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of choices\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of choices\", options)))\n    + \"\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"<br>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select.\", options)))\n    + \"\\n        </span>\\n    </h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"minChoices\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minChoices\\\" value=\\\"\";\n  if (helper = helpers.minChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"maxChoices\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxChoices\\\" value=\\\"\";\n  if (helper = helpers.maxChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hotspot',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/hotspot',\n    'taoQtiItem/qtiCreator/helper/panel'\n], function($, _, GraphicHelper, stateFactory, Question, shapeEditor, imageSelector, formElement, interactionFormElement,  identifierHelper, formTpl, choiceFormTpl,  panel){\n\n    /**\n     * Question State initialization: set up side bar, editors and shae factory\n     */\n    var initQuestionState = function initQuestionState(){\n\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n\n        var $choiceForm  = widget.choiceForm;\n        var $formInteractionPanel = $('#item-editor-interaction-property-bar');\n        var $formChoicePanel = $('#item-editor-choice-property-bar');\n\n        var $left, $top, $width, $height;\n\n        //instantiate the shape editor, attach it to the widget to retrieve it during the exit phase\n        widget._editor = shapeEditor(widget, {\n            shapeCreated : function(shape, type){\n                var newChoice = interaction.createChoice({\n                    shape  : type === 'path' ? 'poly' : type,\n                    coords : GraphicHelper.qtiCoords(shape) \n                });\n\n                //link the shape to the choice\n                shape.id = newChoice.serial;\n            },\n            shapeRemoved : function(id){\n                interaction.removeChoice(id);\n            },\n            enterHandling : function(shape){\n                enterChoiceForm(shape.id);\n            },\n            quitHandling : function(){\n                leaveChoiceForm();\n            },\n            shapeChange : function(shape){\n                var bbox;\n                var choice = interaction.getChoice(shape.id);\n                if(choice){\n                    choice.attr('coords', GraphicHelper.qtiCoords(shape));\n    \n                    if($left && $left.length){\n                        bbox = shape.getBBox();\n                        $left.val(parseInt(bbox.x, 10)); \n                        $top.val(parseInt(bbox.y, 10));\n                        $width.val(parseInt(bbox.width, 10));\n                        $height.val(parseInt(bbox.height, 10));                         \n                    }         \n                }\n            }\n        });\n    \n        //and create an instance\n        widget._editor.create();\n\n        //we need to stop the question mode on resize, to keep the coordinate system coherent, \n        //even in responsive (the side bar introduce a biais)\n        $(window).on('resize.changestate', function(){\n            widget.changeState('sleep');\n        });\n\n        /**\n         * Set up the choice form\n         * @private\n         * @param {String} serial - the choice serial\n         */\n        function enterChoiceForm(serial){\n            var choice = interaction.getChoice(serial);\n            var element, bbox;\n\n            if(choice){\n\n                //get shape bounding box\n                element = interaction.paper.getById(serial);\n                bbox = element.getBBox();\n\n                $choiceForm.empty().html(\n                    choiceFormTpl({\n                        identifier  : choice.id(),\n                        fixed       : choice.attr('fixed'),\n                        serial      : serial,\n                        x           : parseInt(bbox.x, 10), \n                        y           : parseInt(bbox.y, 10),\n                        width       : parseInt(bbox.width, 10),\n                        height      : parseInt(bbox.height, 10)                         \n                    })\n                );\n\n                formElement.initWidget($choiceForm);\n\n                //init data validation and binding\n                formElement.setChangeCallbacks($choiceForm, choice, {\n                    identifier  : identifierHelper.updateChoiceIdentifier,\n                    fixed       : formElement.getAttributeChangeCallback() \n                });\n\n                $formChoicePanel.show();\n                panel.openSections($formChoicePanel.children('section'));\n                panel.closeSections($formInteractionPanel.children('section'));\n\n                //change the nodes bound to the position fields\n                $left   = $('input[name=x]', $choiceForm);\n                $top    = $('input[name=y]', $choiceForm);\n                $width  = $('input[name=width]', $choiceForm);\n                $height = $('input[name=height]', $choiceForm);\n            }\n        }\n        \n        /**\n         * Leave the choice form\n         * @private\n         */\n        function leaveChoiceForm(){\n            if($formChoicePanel.css('display') !== 'none'){\n                panel.openSections($formInteractionPanel.children('section'));\n                $formChoicePanel.hide();\n                $choiceForm.empty();\n            }\n        }\n    };\n\n    /**\n     * Exit the question state, leave the room cleaned up\n     */\n    var exitQuestionState = function initQuestionState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var paper       = interaction.paper;\n\n        if(!paper){\n            return;\n        }\n        \n        $(window).off('resize.changestate');\n\n        if(widget._editor){\n            widget._editor.destroy();\n        }\n    };\n    \n    /**\n     * The question state for the hotspot interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Question\n     */\n    var HotspotInteractionStateQuestion = stateFactory.extend(Question, initQuestionState, exitQuestionState);\n\n    /**\n     * Initialize the form linked to the interaction\n     */\n    HotspotInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var options = widget.options;\n        var interaction = widget.element;\n        var $form = widget.$form;\n\n        $form.html(formTpl({\n            baseUrl         : options.baseUrl,\n            maxChoices      : parseInt(interaction.attr('maxChoices')),\n            minChoices      : parseInt(interaction.attr('minChoices')),\n            choicesCount    : _.size(interaction.getChoices()),\n            data            : interaction.object.attr('data'),\n            width           : interaction.object.attr('width'),\n            height          : interaction.object.attr('height'),\n            type            : interaction.object.attr('type')\n        }));\n\n        imageSelector($form, options); \n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'minChoices', 'maxChoices');\n        callbacks.data = function(inteaction, value){\n            interaction.object.attr('data', value);\n            widget.rebuild({\n                ready: function(widget){\n                    _.defer(function(){\n                        widget.changeState('question');\n                    });\n                }\n            });\n        };\n        callbacks.width = function(inteaction, value){\n            interaction.object.attr('width', value);\n        };\n        callbacks.height = function(inteaction, value){\n            interaction.object.attr('height', value);\n        };\n        callbacks.type = function(inteaction, value){\n            if(!value || value === ''){\n                interaction.object.removeAttr('type');\n            } else {\n                interaction.object.attr('type', value);\n            }\n        };\n        formElement.setChangeCallbacks($form, interaction, callbacks, { validateOnInit : false });\n        \n        interactionFormElement.syncMaxChoices(widget);\n    };\n\n    return HotspotInteractionStateQuestion;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    /**\n     * Just forward to the correct/map states\n     */\n    function initAnswerState(){\n        answerStateHelper.forward(this.widget);\n    }\n    \n    \n    function exitAnswerState(){\n        //needed an exit callback even empty\n    }\n    \n    \n    /**\n     * The answer state for the hotspot interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/states/Answer\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Answer\n     */\n    return stateFactory.extend(Answer, initAnswerState, exitAnswerState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, stateFactory, Correct, HotspotInteraction, helper, PciResponse){\n\n    /**\n     * Initialize the state: use the common renderer to set the correct response.\n     */\n    function initCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        \n\n        //really need to destroy before ? \n        HotspotInteraction.destroy(interaction);\n\n        if(!interaction.paper){\n            return;\n        }\n        \n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please select the correct hotspot choices below.'));\n        \n        //use the common Renderer\n        HotspotInteraction.render.call(interaction.getRenderer(), interaction);\n\n        HotspotInteraction.setResponse(interaction, PciResponse.serialize(_.values(response.getCorrect()), interaction));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(PciResponse.unserialize(data.response, interaction));\n        });\n    }\n\n    /**\n     * Exit the correct state\n     */\n    function exitCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n        \n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n        HotspotInteraction.destroy(interaction); \n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper();\n        widget.createChoices(); \n    }\n\n    /**\n     * The correct answer state for the hotspot interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Correct\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Correct\n     */\n    return stateFactory.create(Correct, initCorrectState, exitCorrectState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicScorePopup',[\n    'jquery', \n    'lodash' \n], function($, _){\n\n\n    /**\n     * Creates a popup relative to shape in a paper\n     * @param {Raphael.Element} shape - the relative shape\n     * @param {jQueryElement} $container - the svg container\n     * @returns {jQueryElement} the popup\n     */\n    return function createShapePopups(paper, shape, $container, isResponsive){\n        var wfactor;\n        var margin      = 10;\n        var $shape      = $(shape.node);\n        var $element    = $('<div class=\"mapping-editor arrow-left-top\"></div>'); \n        var boxOffset   = $container.offset();\n        var offset      = $shape.offset();\n        var bbox        = shape.getBBox();\n        var width       = bbox.width; \n           \n        if(isResponsive){\n            wfactor = paper.w / paper.width;\n            width   = Math.round(width * (2 - wfactor));\n        }\n \n        //style and attach the form\n        $element.css({\n            'top'       : offset.top - boxOffset.top - margin,\n            'left'      : offset.left - boxOffset.left + width + margin\n        }).appendTo($container);\n\n        return $element;\n    };  \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/response/graphicScoreMappingForm', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n        <div class=\\\"panel\\\" data-edit=\\\"correct\\\">\\n            <label>\\n                \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Correct\", options) : helperMissing.call(depth0, \"__\", \"Correct\", options)))\n    + \"\\n                <input name=\\\"correct\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.correct), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\\n                <span class=\\\"icon-checkbox\\\"></span>\\n            </label>\\n            <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n            <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Is this choice the correct response?\", options) : helperMissing.call(depth0, \"__\", \"Is this choice the correct response?\", options)))\n    + \"</span>\\n        </div>\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \" checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"    <a class=\\\"closer\\\" href=\\\"#\\\" data-close=\\\":parent .mapping-editor\\\"></a>\\n    <div class=\\\"form-container\\\">\\n        <h2>\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h2>\\n\\n\";\n  stack1 = helpers.unless.call(depth0, (depth0 && depth0.noCorrect), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        <div class=\\\"panel\\\">\\n            <label for=\\\"score\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Score\", options) : helperMissing.call(depth0, \"__\", \"Score\", options)))\n    + \"</label>\\n            <input value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" data-for=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" name=\\\"score\\\" class=\\\"score\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\\n            <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n            <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Set the score for this response\", options) : helperMissing.call(depth0, \"__\", \"Set the score for this response\", options)))\n    + \"</span>\\n        </div>\\n        <span class=\\\"arrow\\\"></span>\\n        <span class=\\\"arrow-cover\\\"></span>\\n    </div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse', \n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicScorePopup',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/response/graphicScoreMappingForm',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'ui/deleter',\n    'ui/tooltipster'\n], function($, _, __, stateFactory, Map, HotspotInteraction, helper, graphicHelper, PciResponse, answerStateHelper, grahicScorePopup, mappingFormTpl, formElement, deleter, tooltipster){\n\n    /**\n     * Initialize the state.\n     */\n    function initMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n\n        //really need to destroy before ? \n        HotspotInteraction.destroy(interaction);\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please the score of each hotspot choice.'));\n        interaction.responseMappingMode = true;\n\n        //here we do not use the common renderer but the creator's widget to get only a basic paper with the choices\n        interaction.paper = widget.createPaper();     \n        widget.createChoices(); \n\n        initResponseMapping(widget);           \n\n        //set the current corrects responses on the paper\n        HotspotInteraction.setResponse(interaction, PciResponse.serialize(_.values(response.getCorrect()), interaction));   \n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        if(!interaction.paper){\n            return;\n        }\n\n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n        HotspotInteraction.destroy(interaction); \n\n        //initialize again the widget's paper\n        interaction.paper = widget.createPaper();\n        widget.createChoices(); \n    }\n\n\n    /**\n     * Set up all elements to set the response mapping.\n     * TODO this method needs to be split\n     * @param {Oject} widget - the current widget\n     */\n    function initResponseMapping(widget){\n        var scoreTexts      = {};\n        var interaction     = widget.element;\n        var $container      = widget.$original; \n        var isResponsive    = $container.hasClass('responsive');\n        var $imageBox       = $('.main-image-box', $container);\n        var response        = interaction.getResponseDeclaration();\n        var mapEntries      = response.getMapEntries(); \n        var corrects        = _.values(response.getCorrect());\n\n        //get the shape of each choice\n        _.forEach(interaction.getChoices(), function(choice){    \n            var shape = interaction.paper.getById(choice.serial);\n            var $popup = grahicScorePopup(interaction.paper, shape, $imageBox, isResponsive);\n            var score = mapEntries[choice.id()] || response.mappingAttributes.defaultValue || '0'; \n\n            //create an SVG  text from the default mapping value\n            scoreTexts[choice.serial] = graphicHelper.createShapeText(interaction.paper, shape, {\n                id          : 'score-' + choice.serial,\n                content     : score,\n                style       : 'score-text-default',\n                shapeClick  : true\n            }).data('default', true); \n          \n            //create manually the mapping form (detached)\n            var $form = $(mappingFormTpl({\n                identifier          : choice.id(),\n                correctDefined      : answerStateHelper.isCorrectDefined(widget),\n                correct             : _.contains(response.getCorrect(), choice.id()),\n                score               : score,\n                scoreMin            : response.getMappingAttribute('lowerBound'),\n                scoreMax            : response.getMappingAttribute('upperBound')\n            }));\n\n            //set up the form data binding\n            formElement.setChangeCallbacks($form, response, {\n                score : function(response, value){\n                    var scoreText = scoreTexts[choice.serial];\n                    if(value === ''){\n                        response.removeMapEntry(choice.id());\n                        scoreText.attr({text : response.mappingAttributes.defaultValue})\n                                 .data('default', true);\n                    } else {\n                        response.setMapEntry(choice.id(), value, true);\n                        scoreText.attr({text : value})\n                                 .data('default', false);\n                    }\n                }, \n                correct : function(response, value){\n                    if(value === true){\n                        if(!_.contains(corrects, choice.id())){\n                            corrects.push(choice.id());\n                            shape.active = true;\n                            graphicHelper.updateElementState(shape, 'active');\n                        }\n                    } else {\n                        corrects = _.without(corrects, choice.id());\n                        shape.active = false;\n                        graphicHelper.updateElementState(shape, 'basic');\n                    }\n                    response.setCorrect(corrects);\n                }\n            });\n\n            shape.click(function(){\n                $('.mapping-editor', $container).hide();\n                $popup.show();\n            });\n\n            $popup.append($form);\n        });\n\n        //set up ui components used by the form\n        deleter($container);\n        tooltipster($container);\n        \n        interaction.paper.getById('bg-image-' + interaction.serial).click(function(){\n            $('.mapping-editor', $container).hide();\n        });\n        \n        //the click on the cross hides the popup\n        $('.mapping-editor', $container).on('click', '.closer', function(){\n            $(this).parent('.mapping-editor').hide();\n        });\n\n        //update the elements on attribute changes\n        widget.on('mappingAttributeChange', function(data){\n            if(data.key === 'defaultValue'){\n                _.forEach(scoreTexts, function(scoreText){\n                    if(scoreText.data('default') === true){\n                        scoreText.attr({text : data.value });\n                    }\n                });\n            }\n        });\n    }\n\n\n    /**\n     * The map answer state for the hotspot interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/Map'\n], function(factory, states){\n\n    //creates a state bundle for the interaction\n    return factory.createBundle(states, arguments);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/states/states'\n], function($, _, __, Widget, GraphicWidget, states){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the Hotspot Interaction\n     *\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/Widget\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/GraphicInteraction/Widget\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/Widget\n     */      \n    var HotspotInteractionWidget = _.extend(Widget.clone(), GraphicWidget, {\n\n        /**\n         * Initialize the widget\n         * @see {taoQtiItem/qtiCreator/widgets/interactions/Widget#initCreator}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        initCreator : function(options){\n            var paper;\n            this.baseUrl = options.baseUrl;\n            this.choiceForm = options.choiceForm;\n            \n            this.registerStates(states);\n            \n            //call parent initCreator\n            Widget.initCreator.call(this);\n          \n            paper = this.createPaper(); \n            if(paper){\n                this.element.paper = paper;\n                this.createChoices();    \n            }\n        },\n\n        /**\n         * Gracefull destroy the widget\n         * @see {taoQtiItem/qtiCreator/widgets/Widget#destroy}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.gridEdit.' + this.element.serial);\n            $(window).off('resize.qti-widget.' + this.element.serial);\n            $container.off('resize.qti-widget.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        }\n\n   });\n\n    return HotspotInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/hotspotInteraction/Widget'\n], function(_, HotspotInteraction, HotspotInteractionWidget){\n        \n    /**\n     * The CreatorHotspotInteraction  Renderer \n     * @extends taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction\n     * @exports taoQtiItem/qtiCreator/renderers/interactions/HotspotInteraction\n     */\n    var CreatorHotspotInteraction = _.clone(HotspotInteraction);\n\n    /**\n     * Render the interaction for authoring.\n     * It delegates the rendering to the widget layer.\n     * @param {Object} interaction - the model\n     * @param {Object} [options] - extra options\n     */\n    CreatorHotspotInteraction.render = function(interaction, options){\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return HotspotInteractionWidget.build(\n            interaction,\n            HotspotInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorHotspotInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hottextInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div id=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.identifier)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" class=\\\"qti-interaction qti-blockInteraction qti-hottextInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"hottextInteraction\\\">\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  <div class=\\\"instruction-container\\\"></div>\\n  <div class=\\\"qti-flow-container\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',[\n    'lodash',\n    'jquery',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hottextInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'i18n'\n], function(_, $, tpl, Helper, pciResponse, __){\n    'use strict';\n\n\n    /**\n     * 'pseudo-label' is technically a div that behaves like a label.\n     * This allows the usage of block elements inside the fake label\n     */\n    var pseudoLabel = function(interaction){\n\n\n        var setChoice = function($choice, interaction){\n            var $inupt = $choice.find('input');\n            \n            if($inupt.prop('checked') || $inupt.hasClass('disabled')){\n                $inupt.prop('checked', false);\n            }else{\n                var maxChoices = parseInt(interaction.attr('maxChoices'));\n                var currentChoices = _.values(_getRawResponse(interaction)).length;\n                \n                if(currentChoices < maxChoices || maxChoices === 0){\n                    $inupt.prop('checked', true);\n                }\n            }\n            Helper.triggerResponseChangeEvent(interaction);\n            Helper.validateInstructions(interaction, {choice : $choice});\n        };\n\n        Helper.getContainer(interaction).find('.hottext').on('click', function(e){\n            e.preventDefault();\n            setChoice($(this), interaction);\n        });\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10278\n     * \n     * @param {object} interaction\n     */\n    var render = function(interaction){\n        pseudoLabel(interaction);\n        \n        //set up the constraints instructions\n        Helper.minMaxChoiceInstructions(interaction, {\n            min: interaction.attr('minChoices'),\n            max: interaction.attr('maxChoices'),\n            getResponse : _getRawResponse,\n            onError : function(data){\n                var $input, $choice, $icon;\n                if(data.choice && data.choice.length){\n                    $choice = data.choice.addClass('error');\n                    $input  = $choice.find('input');\n                    $icon   = $choice.find(' > label > span').addClass('error cross');\n\n\n                    setTimeout(function(){\n                        $input.prop('checked', false);\n                        $choice.removeClass('error');\n                        $icon.removeClass('error cross');\n                    }, 350);\n                }\n            }\n        }); \n    };\n\n    var resetResponse = function(interaction){\n        Helper.getContainer(interaction).find('input').prop('checked', false);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var $container = Helper.getContainer(interaction);\n\n        try{\n            _.each(pciResponse.unserialize(response, interaction), function(identifier){\n                $container.find('input[value=' + identifier + ']').prop('checked', true);\n            });\n            Helper.validateInstructions(interaction);\n        }catch(e){\n            throw new Error('wrong response format in argument : ' + e);\n        }\n    };\n\n    var _getRawResponse = function(interaction){\n        var values = [];\n        Helper.getContainer(interaction).find('input:checked').each(function(){\n            values.push($(this).val());\n        });\n        return values;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container = Helper.getContainer(interaction);\n\n        //restore response\n        resetResponse(interaction);\n\n        //restore selected choices:\n        $container.find('.hottext').off('click');\n    };  \n    \n\n    return {\n        qtiClass : 'hottextInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hottext', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of choices\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of choices\", options)))\n    + \"</h3>\\n\\n    <div>\\n        <label for=\\\"minChoices\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minChoices\\\" value=\\\"\";\n  if (helper = helpers.minChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n    <div>\\n        <label for=\\\"maxChoices\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxChoices\\\" value=\\\"\";\n  if (helper = helpers.maxChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.choicesCount) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choicesCount); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n            <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select to form a valid response.\", options)))\n    + \"\\n        </span>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext-create', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<span class=\\\"mini-tlb\\\" data-edit=\\\"\";\n  if (helper = helpers.state) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.state); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-role=\\\"create-hottext-tlb\\\">\\n    <span class=\\\"rgt tlb-button\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Create hottext\", options) : helperMissing.call(depth0, \"__\", \"Create hottext\", options)))\n    + \"\\\" data-role=\\\"create-hottext\\\">\\n        <span class=\\\"icon-magicwand\\\"></span>\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Question',[\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/hottext',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/hottext-create'\n], function(_, stateFactory, Question, formElement, interactionFormElement, formTpl, hottextTpl){\n\n    var HottextInteractionStateQuestion = stateFactory.extend(Question);\n\n    HottextInteractionStateQuestion.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            maxChoices : interaction.attr('maxChoices'),\n            minChoices : interaction.attr('minChoices'),\n            choicesCount : _.size(interaction.getChoices())\n        }));\n\n        formElement.initWidget($form);\n\n        var callbacks = formElement.getMinMaxAttributeCallbacks($form, 'minChoices', 'maxChoices');\n        formElement.setChangeCallbacks($form, interaction, callbacks);\n        interactionFormElement.syncMaxChoices(_widget);\n    };\n\n    HottextInteractionStateQuestion.prototype.getGapModel = function(){\n\n        return {\n            toolbarTpl : hottextTpl,\n            qtiClass : 'hottext',\n            afterCreate : function(interactionWidget, newHottextWidget, text){\n            \n                newHottextWidget.element.body(text);\n                newHottextWidget.$container.find('.hottext-content').html(text);//add this manually the first time\n                newHottextWidget.changeState('choice');\n            }\n        };\n    };\n\n    return HottextInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var HottextInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        \n        this.widget.$original.find('.hottext-checkmark > input').removeProp('disabled');\n        \n        //forward to one of the available sub state, according to the response processing template\n        answerStateHelper.forward(this.widget);\n        \n    }, function(){\n        \n        this.widget.$original.find('.hottext-checkmark > input').prop('disabled', 'disabled');\n        \n    });\n    \n    return HottextInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Correct',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse'\n], function(_, __, stateFactory, Correct, HottextInteraction, helper, PciResponse){\n\n    /**\n     * Initialize the state: use the common renderer to set the correct response.\n     */\n    function initCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        \n        //really need to destroy before ? \n        HottextInteraction.destroy(interaction);\n        \n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please select the correct hottext choices below.'));\n        \n        //use the common Renderer\n        HottextInteraction.render.call(interaction.getRenderer(), interaction);\n\n        HottextInteraction.setResponse(interaction, PciResponse.serialize(_.values(response.getCorrect()), interaction));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(PciResponse.unserialize(data.response, interaction));\n        });\n    }\n\n    /**\n     * Exit the correct state\n     */\n    function exitCorrectState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        \n        //stop listening responses changes\n        widget.$container.off('responseChange.qti-widget');\n        \n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n        HottextInteraction.destroy(interaction); \n    }\n\n    /**\n     * The correct answer state for the hottext interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Correct\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Correct\n     */\n    return stateFactory.create(Correct, initCorrectState, exitCorrectState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse' \n], function($, _, __, stateFactory, Map, HottextInteraction, answerStateHelper, helper, formElement, PciResponse){\n\n    /**\n     * Initialize the state.\n     */\n    function initMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var corrects  = _.values(response.getCorrect());\n        \n        //really need to destroy before ? \n        HottextInteraction.destroy(interaction);\n        \n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please enter the score for the given hottexts.'));\n        \n        //set the current mapping mode, needed by the common renderer\n        interaction.responseMappingMode = true;\n \n        //must be done prior to the render to override clicks        \n        createScoreForm(interaction, widget.$container);\n\n        //use the common Renderer\n        HottextInteraction.render.call(interaction.getRenderer(), interaction);\n\n        HottextInteraction.setResponse(interaction, PciResponse.serialize(corrects, interaction));\n\n        //each response change leads to an update of the scoring form\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            var type  = response.attr('cardinality') === 'single' ? 'base' : 'list';\n            if(data && data.response &&  data.response[type]){\n                response.setCorrect(data.response[type].identifier);\n            }\n        });\n\n       //change the correct state \n       widget.on('metaChange', function(meta){\n            if(meta.key === 'defineCorrect'){\n                toggleCorrectState(widget.$container, meta.value);\n                if(meta.value === false){\n                    response.setCorrect([]);\n                }\n            }\n        });\n        toggleCorrectState(widget.$container, answerStateHelper.defineCorrect(response));\n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        var $container  = widget.$container;\n        \n        $container.off('responseChange.qti-widget');\n\n        $('.score', $container).remove();\n\n        toggleCorrectState($container, true);\n\n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n\n        HottextInteraction.destroy(interaction); \n    }\n\n    function toggleCorrectState($container, enable){\n        if(enable){\n            $('.hottext-checkmark > input', $container)\n                .removeProp('disabled') \n                .removeClass('disabled');\n        } else {\n            $('.hottext-checkmark > input', $container)\n                .prop('disabled', true)\n                .prop('checked', false)\n                .addClass('disabled');\n        }\n    }\n\n    function createScoreForm(interaction, $container){\n        var callbacks = {};\n        var response = interaction.getResponseDeclaration();\n        var mapEntries = response.getMapEntries();\n\n        //do not trigger the responseChange in the score field\n        $('.hottext', $container).on('click', function(e){\n            if($(e.target).hasClass('score') || answerStateHelper.defineCorrect(response) === false){\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            } \n        });\n\n        _.forEach(interaction.getChoices(), function(choice){\n            var $score;\n            var id = choice.serial + '-score';\n            var $hottext = $('[data-serial=\"' + choice.serial + '\"]', $container);\n            if($hottext.length){\n    \n                $score = $(\"<input type='text' name='\" + id + \"' class='score' title='\" + __('Score value') + \"' data-validate='$numeric' data-validate-option='$allowEmpty; $event(type=keyup)' />\"); \n                $score.val(mapEntries[choice.id()] !== undefined ? mapEntries[choice.id()] : response.mappingAttributes.defaultValue);                \n                $hottext.append($score);\n                \n\n                callbacks[id] = function(response, value){\n                    if(value === ''){\n                        response.removeMapEntry(choice.id());\n                    } else {\n                        response.setMapEntry(choice.id(), value, true);\n                    }\n                };\n            }\n        });\n        formElement.setChangeCallbacks($container, response, callbacks);\n    }\n\n\n    /**\n     * The map answer state for the HottextInteraction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/containerInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/states/states'\n], function(Widget, states){\n\n    var HottextInteractionWidget = Widget.clone();\n\n    HottextInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return HottextInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/HottextInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/hottextInteraction/Widget'\n], function(_, HottextInteraction, HottextInteractionWidget){\n    \n    var CreatorHottextInteraction = _.clone(HottextInteraction);\n\n    CreatorHottextInteraction.render = function(interaction, options){\n        \n        return HottextInteractionWidget.build(\n            interaction,\n            HottextInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorHottextInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/inlineChoiceInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<select class=\\\"qti-interaction qti-inlineInteraction qti-inlineChoiceInteraction\\\" \\n        data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n        data-qti-class=\\\"inlineChoiceInteraction\\\" \\n        data-has-search=\\\"false\\\">\\n    <option></option>\\n    <option value=\\\"empty\\\"></option>\\n    \";\n  options={hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</select>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction',[\n    'lodash',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/inlineChoiceInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'i18n',\n    'select2',\n    'tooltipster'\n], function(_, tpl, Helper, pciResponse, __){\n\n    /**\n     * The value of the \"empty\" option\n     * @type String\n     */\n    var _emptyValue = 'empty';\n    \n    var _defaultOptions = {\n        allowEmpty:true,\n        placeholderText:__('select a choice')\n    };\n    \n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     */\n    var render = function(interaction, options){\n        \n        var opts = _.clone(_defaultOptions),\n            required = !!interaction.attr('required');\n        _.extend(opts, options);\n        \n        var $container = Helper.getContainer(interaction);\n        \n        if(opts.allowEmpty && !required){\n            $container.find('option[value=' + _emptyValue + ']').text('--- ' + __('leave empty') + ' ---');\n        }else{\n            $container.find('option[value=' + _emptyValue + ']').remove();\n        }\n        \n        $container.select2({\n            width : 'resolve',\n            placeholder : opts.placeholderText,\n            minimumResultsForSearch : -1\n        });\n\n        var $el = $container.select2('container');\n        \n        _setInstructions(interaction);\n           \n        $container.on('change', function(){\n            \n            if(required && $container.val() !== \"\") {\n                $el.tooltipster('hide');\n            }\n            \n            Helper.triggerResponseChangeEvent(interaction);\n            \n        }).on('select2-open', function(){\n            \n            $el.tooltipster('hide');\n            \n        }).on('select2-close', function(){\n            \n            if(required && $container.val() === \"\") {\n                $el.tooltipster('show');\n            }\n        });\n    };\n\n    var _setInstructions = function(interaction){\n\n        var required = !!interaction.attr('required'),\n            $container = interaction.getContainer(),\n            $el = $container.select2('container');\n    \n        if(required){\n            //set up the tooltip plugin for the input\n            $el.tooltipster({\n                theme: 'tao-warning-tooltip',\n                content: __('A choice must be selected'),\n                delay: 250,\n                trigger: 'custom'\n            });\n            \n            if($container.val() === \"\") {\n                $el.tooltipster('show');\n            }\n        }\n\n    };\n\n    var resetResponse = function(interaction){\n        _setVal(interaction, _emptyValue);\n    };\n\n    var _setVal = function(interaction, choiceIdentifier){\n        \n        Helper.getContainer(interaction)\n            .val(choiceIdentifier)\n            .select2('val', choiceIdentifier)\n            .change();\n        \n    };\n    \n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        \n         _setVal(interaction, pciResponse.unserialize(response, interaction)[0]);\n    };\n\n    var _getRawResponse = function(interaction){\n        var value = Helper.getContainer(interaction).val();\n        return (value && value !== _emptyValue) ? [value] : [];\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n    \n    return {\n        qtiClass : 'inlineChoiceInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse\n    };\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/Widget',['taoQtiItem/qtiCreator/widgets/interactions/Widget'], function(Widget){\n\n    var InlineInteractionWidget = Widget.clone();\n\n    InlineInteractionWidget.destroy = function(){\n        \n        //remove all events on the original DOM element\n        this.$original.off('.qti-widget');\n        \n        //remove the external container completely\n        this.$container.remove();\n\n        //clean old referenced event\n        this.offEvents();\n    };\n\n    return InlineInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Question',\n    'taoQtiItem/qtiCreator/widgets/choices/helpers/formElement',\n    'lodash'\n], function($, stateFactory, QuestionState, formElement, _){\n\n    var ChoiceStateQuestion = stateFactory.extend(QuestionState, function(){\n        this.buildEditor();\n    }, function(){\n        this.destroyEditor();\n    });\n\n    ChoiceStateQuestion.prototype.createToolbar = function(){\n\n        var _widget = this.widget,\n            $toolbar = _widget.$container.find('td:last');\n\n        //set toolbar button behaviour:\n        formElement.initShufflePinToggle(_widget);\n        formElement.initDelete(_widget);\n\n        return $toolbar;\n    };\n\n    ChoiceStateQuestion.prototype.buildEditor = function(){\n\n        var _widget = this.widget,\n            $editableContainer = _widget.$container.children('td:first');\n\n        $editableContainer.attr('contentEditable', true);\n\n        $editableContainer.on('keyup.qti-widget', _.throttle(function(){\n\n            //update model\n            _widget.element.val($(this).text());\n\n            //update placeholder\n            _widget.$original.width($(this).width());\n\n        }, 200)).on('focus.qti-widget', function(){\n\n            _widget.changeState('choice');\n\n        }).on('keypress.qti-widget', function(e){\n\n            if(e.which === 13){\n                e.preventDefault();\n                $(this).blur();\n                _widget.changeState('question');\n            }\n\n        });\n    };\n\n    ChoiceStateQuestion.prototype.destroyEditor = function(){\n\n        var $container = this.widget.$container;\n\n        $container.find('td').removeAttr('contentEditable');\n        $container.children('td:first').off('keyup.qti-widget');\n    };\n\n    return ChoiceStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Choice',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/Choice',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/choices/choice',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/helpers/identifier'\n], function(stateFactory, Choice, formTpl, formElement, identifierHelper){\n    \n    var InlineChoiceStateChoice = stateFactory.extend(Choice);\n\n    InlineChoiceStateChoice.prototype.initForm = function(){\n        \n        var _widget = this.widget;\n        \n        //build form:\n        _widget.$form.html(formTpl({\n            serial:_widget.element.getSerial(),\n            identifier:_widget.element.id()\n        }));\n        \n        //init data validation and binding\n        formElement.setChangeCallbacks(_widget.$form, _widget.element, {\n            identifier : identifierHelper.updateChoiceIdentifier\n        });\n    };\n    \n    return InlineChoiceStateChoice;\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/choices/states/states',\n    'taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Question',\n    'taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/Choice'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/choices/inlineChoice/Widget',[\n    'taoQtiItem/qtiCreator/widgets/choices/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/inlineChoice/states/states'\n], function(Widget, states){\n\n    var InlineChoiceWidget = Widget.clone();\n\n    InlineChoiceWidget.initCreator = function(){\n        \n        Widget.initCreator.call(this);\n\n        this.registerStates(states);\n    };\n\n    return InlineChoiceWidget;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Sleep',['taoQtiItem/qtiCreator/widgets/states/factory', 'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'], function(stateFactory, SleepState){\n\n    var InlineInteractionStateSleep = stateFactory.create(SleepState, function(){\n\n        var _widget = this.widget,\n            $container = this.widget.$original;\n\n        $container.on('click.qti-widget.sleep', function(e){\n            e.stopPropagation();\n            //if active == false do this: (else nothing)\n            //show toolbar, prompt widget and choice widgets and property form\n\n            //init default mode: question\n            _widget.changeState('question');\n        });\n\n        //add listener to display proper hover style\n        $container.on('mouseenter.sleep', function(e){\n            $container.addClass('hover');\n            $container.parent().trigger('mouseleave.sleep');\n        }).on('mouseleave.sleep', function(){\n            $container.removeClass('hover');\n            $container.parent().trigger('mouseenter.sleep');\n        });\n\n    }, function(){\n\n        this.widget.$original.removeClass('hover').off('.sleep');\n    });\n\n    return InlineInteractionStateSleep;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Active',[\n    'jquery', \n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Active'], \nfunction($, _, stateFactory, Active){\n\n    var InteractionStateActive = stateFactory.extend(Active, function(){\n        \n        var _this = this;\n        $(window).on('resize.active', _.throttle(function(){\n            _this.positionWidget();\n        }, 200));\n        \n        this.positionWidget();\n\n    }, function(){\n\n        //unbind events\n        $(window).off('.active');\n        \n        //hide it:\n        this.widget.$container.hide();\n    });\n\n    InteractionStateActive.prototype.positionWidget = function(){\n        \n        //show toolbar, ok button, event binding performed by parent state\n        var _widget = this.widget,\n            itemOffset = _widget.$itemContainer.offset(),\n            originalOffset = _widget.$original.offset();\n\n        //debug\n//        _widget.$itemContainer.on('mousemove', _.throttle(function(e){\n//            console.log(e.pageX - itemOffset.left, e.pageY - itemOffset.top);\n//        }, 200));\n//        _widget.$itemContainer.css({border:'2px solid red'});\n//        _widget.$container.css({border:'2px solid red'});\n//        _widget.$original.css({border:'2px solid red'});\n\n        //calculate absolute position:\n        _widget.$container.show().css({\n            position : 'absolute',\n            top : originalOffset.top - itemOffset.top - 22,\n            left : originalOffset.left - itemOffset.left - 32\n        });\n        \n    };\n\n    return InteractionStateActive;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/Active'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/inlineChoice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, self=this, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"shuffle\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.shuffle), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Shuffle choices\", options) : helperMissing.call(depth0, \"__\", \"Shuffle choices\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be shuffled of fixed individually.\", options) : helperMissing.call(depth0, \"__\", \"If the shuffle attribute is true then the delivery engine will randomize the order in which the choices are initially presented.\\n        However each choice may be shuffled of fixed individually.\", options)))\n    + \"\\n    </span>\\n</div>\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"required\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.required), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"required\", options) : helperMissing.call(depth0, \"__\", \"required\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.\", options) : helperMissing.call(depth0, \"__\", \"Define whether a choice must be selected by the candidate in order to form a valid response to the interaction.\", options)))\n    + \"\\n    </span>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Question',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/inlineChoice'\n], function($, stateFactory, Question, formElement, formTpl){\n\n    var InlineChoiceInteractionStateQuestion = stateFactory.extend(Question, function(){\n\n        var $mainOption = this.widget.$container.find('.main-option'),\n            $original = this.widget.$original;\n        \n        //listener to children choice widget change and update the original interaction placehoder\n        $(document).on('choiceTextChange.qti-widget.question', function(){\n            $original.width($mainOption.width());\n        });\n\n    }, function(){\n        \n        $(document).off('.qti-widget.question');\n    });\n\n    InlineChoiceInteractionStateQuestion.prototype.addNewChoiceButton = function(){\n\n        var _widget = this.widget,\n            $addChoice = _widget.$container.find('.add-option'),\n            interaction = _widget.element;\n\n        //init add choice button once only\n        if(!$addChoice.data('initialized')){\n\n            $addChoice.on('click.qti-widget', function(e){\n\n                e.stopPropagation();\n\n                //add a new choice\n                var choice = interaction.createChoice();\n\n                //append render choice:\n                $(this).closest('tr').before(_widget.renderChoice(choice));\n                _widget.buildChoice(choice, {\n                    ready : function(widget){\n                        //transition state directly back to \"question\"\n                        widget.changeState('question');\n                    }\n                });\n            });\n\n            //set button as initialized\n            $addChoice.data('initialized', true);\n        }\n    };\n\n    InlineChoiceInteractionStateQuestion.prototype.initForm = function(){\n\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            shuffle : !!interaction.attr('shuffle'),\n            required : !!interaction.attr('required')\n        }));\n\n        formElement.initWidget($form);\n\n        formElement.setChangeCallbacks($form, interaction, {\n            shuffle : formElement.getAttributeChangeCallback(),\n            required : formElement.getAttributeChangeCallback()\n        });\n    };\n\n    return InlineChoiceInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var InlineChoiceInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        answerStateHelper.forward(this.widget);\n    }, function(){\n        \n    });\n    \n    return InlineChoiceInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/ResponseWidget',[\n    'jquery',\n    'taoQtiItem/qtiCommonRenderer/renderers/Renderer',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'lodash',\n    'i18n'\n], function($, CommonRenderer, helper, _, __){\n\n    var ResponseWidget = {\n        create : function(widget, callback){\n\n            var _this = this,\n                interaction = widget.element,\n                $placeholder = $('<select>'),\n                $responseWidget = widget.$container.find('.widget-response').append($placeholder);\n\n            this.commonRenderer = new CommonRenderer({shuffleChoices : false});\n            this.commonRenderer.load(function(){\n\n                interaction.render({}, $placeholder, '', this);\n                interaction.postRender({\n                    allowEmpty : false,\n                    placeholderText : __('select correct choice')\n                }, '', this);\n\n                callback.call(_this, this);\n\n                $responseWidget.siblings('.padding').width($responseWidget.width() + 50);//plus icons width\n\n            }, ['inlineChoice', 'inlineChoiceInteraction']);\n\n        },\n        setResponse : function(widget, response){\n            this.commonRenderer.setResponse(widget.element, this.formatResponse(response));\n        },\n        destroy : function(widget){\n            widget.$container.find('.widget-response').empty();\n            widget.$container.find('.padding').removeAttr('style');\n        },\n        formatResponse : function(response){\n            if(!_.isString(response)){\n                response = _.values(response);\n                if(response && response.length){\n                    response = response[0];\n                }\n            }\n            return {base : {identifier : response}};\n        },\n        unformatResponse : function(formatedResponse){\n\n            var response = [];\n\n            if(formatedResponse.base && formatedResponse.base.identifier){\n                response.push(formatedResponse.base.identifier);\n            }\n            return response;\n        }\n    };\n\n    return ResponseWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/ResponseWidget',\n    'lodash'\n], function(stateFactory, Correct, responseWidget, _){\n\n    var InlineChoiceInteractionStateCorrect = stateFactory.create(Correct, function(){\n        \n        var _widget = this.widget,\n            response = this.widget.element.getResponseDeclaration();\n            \n            _widget.$container.find('table').hide();\n            \n            //render commonRenderer.render()\n            responseWidget.create(_widget, function(){\n               \n                //set response\n                responseWidget.setResponse(_widget, _.values(response.getCorrect()));\n\n                //save correct response on change\n                _widget.$container.on('responseChange.qti-widget', function(e, data){\n                    response.setCorrect(responseWidget.unformatResponse(data.response));\n                });\n            });\n\n    }, function(){\n        \n        var $container = this.widget.$container;\n        $container.find('table').show();\n        $container.off('responseChange.qti-widget');\n        \n        responseWidget.destroy(this.widget);\n    });\n\n    return InlineChoiceInteractionStateCorrect;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Map',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiItem/helper/interactionHelper',\n    'lodash',\n], function($, stateFactory, Map, formElement, interactionHelper, _){\n\n    var AssociateInteractionStateCorrect = stateFactory.create(Map, function(){\n\n        var _widget = this.widget,\n            $container = _widget.$container,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        $container.find('[data-edit=map]').show();\n\n        //init correct response radio group:\n        var correct = _.values(response.getCorrect());\n        if(correct.length){\n            var selectedChoice = interaction.getChoiceByIdentifier(correct.pop());\n            if(selectedChoice){\n                $container.find('input[name=correct][value=\"' + selectedChoice.serial + '\"]').prop('checked', true);\n            }\n        }\n\n        formElement.setChangeCallbacks($container, response, {\n            correct : function(response, value){\n                response.setCorrect(interactionHelper.serialToIdentifier(interaction, value));\n            },\n            score : function(response, value){\n                var score = parseFloat(value);\n                if(!isNaN(score)){\n                    response.setMapEntry(interactionHelper.serialToIdentifier(interaction, $(this).data('for')), score);\n                }\n            }\n        });\n\n    }, function(){\n\n    });\n\n\n    return AssociateInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"widget-box widget-inline widget-inlineChoiceInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-edit=\\\"active\\\">\\n    <div class=\\\"qti-interaction qti-inlineChoiceInteraction\\\">\\n        <table>\\n            <colgroup>\\n                <col class=\\\"text\\\">\\n                <col class=\\\"icon\\\">\\n                <col class=\\\"icon\\\">\\n            </colgroup>\\n            <tbody>\\n                <tr>\\n                    <td class=\\\"main-option\\\"><div>-- \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"edit choices\", options) : helperMissing.call(depth0, \"__\", \"edit choices\", options)))\n    + \" --<span class=\\\"icon-down\\\"></span></div></td>\\n                    <td class=\\\"icon-title\\\" data-edit=\\\"map\\\">correct</td>\\n                    <td class=\\\"icon-title\\\" data-edit=\\\"map\\\">score</td>\\n                </tr>\\n                \";\n  options={hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                <tr data-edit=\\\"question\\\">\\n                    <td>\\n                        <div class=\\\"add-option\\\">\\n                            <span class=\\\"icon-add\\\"></span>\\n                            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add choice\", options) : helperMissing.call(depth0, \"__\", \"Add choice\", options)))\n    + \"\\n                        </div>\\n                    </td>\\n                    <td colspan=\\\"2\\\"></td>\\n                </tr>\\n            </tbody>\\n        </table>\\n        <div>\\n            <div class=\\\"widget-response\\\" data-edit=\\\"correct\\\"></div>\\n            <div class=\\\"padding\\\"></div>\\n        </div>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoice', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"pin\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"shuffle\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"display:none;\";\n  }\n\n  buffer += \"<tr class=\\\"widget-box widget-inlineChoice qti-choice\\\" data-edit=\\\"active\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    <td class=\\\"option\\\"><div contenteditable=\\\"true\\\">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</div></td>\\n    <td class=\\\"mini-tlb\\\">\\n        <span data-edit=\\\"question\\\" class=\\\"tlb-button\\\">\\n            <span  class=\\\"icon-\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.fixed), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-role=\\\"shuffle-pin\\\" style=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.interactionShuffle), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"></span>\\n        </span>\\n        <label data-edit=\\\"map\\\">\\n            <input name=\\\"correct\\\" type=\\\"radio\\\" value=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <span class=\\\"icon-radio\\\"></span>\\n        </label>\\n    </td>\\n    <td class=\\\"mini-tlb\\\">\\n        <span data-edit=\\\"question\\\" class=\\\"icon-bin\\\" data-role=\\\"delete\\\"></span>\\n        <input class=\\\"score\\\" name=\\\"score\\\" data-edit=\\\"map\\\" value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\"/>\\n    </td>\\n</tr>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/Widget',[\n    'lodash',\n    'taoQtiItem/qtiItem/core/Element',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/choices/inlineChoice/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoice'\n], function(_, Element, InteractionWidget, ChoiceWidget, states, inlineChoiceInteractionTpl, inlineChoiceTpl){\n\n    var InlineChoiceInteractionWidget = InteractionWidget.clone();\n\n    InlineChoiceInteractionWidget.initCreator = function(options){\n\n        var _this = this;\n\n        this.registerStates(states);\n\n        InteractionWidget.initCreator.call(this);\n\n        this.$choiceOptionForm = options.choiceOptionForm;\n        _.each(this.element.getChoices(), function(choice){\n            _this.buildChoice(choice);\n        });\n\n       //remove toolbar title, because it is too large\n       this.$container.find('.tlb-title').remove();\n    };\n\n    InlineChoiceInteractionWidget.renderChoice = function(choice, shuffleChoice){\n\n        var tplData = {\n            tag : choice.qtiClass,\n            serial : choice.serial,\n            attributes : choice.attributes,\n            body : choice.text,\n            interactionShuffle:shuffleChoice\n        };\n\n        return inlineChoiceTpl(tplData);\n    };\n\n\n    InlineChoiceInteractionWidget.renderInteraction = function(){\n\n        var _this = this,\n            interaction = this.element,\n            shuffleChoice = interaction.attr('shuffle'),\n            tplData = {\n                tag : interaction.qtiClass,\n                serial : interaction.serial,\n                attributes : interaction.attributes,\n                choices : []\n            };\n\n        _.each(interaction.getChoices(), function(choice){\n            if(Element.isA(choice, 'choice')){\n                tplData.choices.push(_this.renderChoice(choice, shuffleChoice));\n            }\n        });\n\n        return inlineChoiceInteractionTpl(tplData);\n    };\n\n\n    InlineChoiceInteractionWidget.buildChoice = function(choice, options){\n\n        ChoiceWidget.build(\n            choice,\n            this.$container.find('.widget-inlineChoice[data-serial=\"' + choice.serial + '\"]'),\n            this.$choiceOptionForm,\n            options\n            );\n    };\n\n    InlineChoiceInteractionWidget.buildContainer = function(){\n        var previous, next;\n        //add a space to be able to place the cursor before and after it.\n        if(this.$original.length){\n            previous = this.$original[0].previousSibling;\n            next = this.$original[0].nextSibling;\n\n            if(!previous || (previous.nodeType === 3 && previous.nodeValue === '') || previous.nodeType !== 3){\n                this.$original.before('&nbsp;');\n            }\n            if(!next || (next.nodeType === 3 && next.nodeValue === '') || next.nodeType !== 3){\n                this.$original.after('&nbsp;');\n            }\n        }\n\n        //set the itemContainer where the actual widget should be append and be positioned absolutely\n        this.$itemContainer = this.$original.parents('.item-editor-item');\n\n        //prepare html: interaction & choices:\n        this.$itemContainer.append(this.renderInteraction());\n\n        this.$container = this.$itemContainer.find('.widget-inlineChoiceInteraction[data-serial=' + this.element.getSerial() + ']');\n    };\n\n    return InlineChoiceInteractionWidget;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction.placeholder', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<span class=\\\"widget-box inlineChoiceInteraction-placeholder\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"inlineChoiceInteraction\\\">\\n    <label>-- \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"edit choices\", options) : helperMissing.call(depth0, \"__\", \"edit choices\", options)))\n    + \" --</label>\\n    <span class=\\\"icon-down\\\"></span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/InlineChoiceInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineChoiceInteraction/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/inlineChoiceInteraction.placeholder'\n], function($, _, InlineChoiceInteraction, InlineChoiceInteractionWidget, tpl){\n\n    var CreatorInlineChoiceInteraction = _.clone(InlineChoiceInteraction);\n\n    CreatorInlineChoiceInteraction.template = tpl;\n\n    CreatorInlineChoiceInteraction.render = function(interaction, options){\n\n        //need to pass choice option form to the interaction widget because it will manage everything\n        options = options || {};\n        options.choiceOptionForm = this.getOption('choiceOptionForm');\n\n        return InlineChoiceInteractionWidget.build(\n            interaction,\n            $('.inlineChoiceInteraction-placeholder[data-serial=\"' + interaction.serial + '\"]'),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorInlineChoiceInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/matchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", self=this, escapeExpression=this.escapeExpression, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n      <tr>\\n        \";\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers.each.call(depth0, (depth1 && depth1.matchSet1), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </tr>\\n      \";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  \n  return \"\\n        <td>\\n          <label>\\n            <input type=\\\"checkbox\\\" >\\n            <span class=\\\"icon-checkbox cross\\\"></span>\\n          </label>\\n        </td>\\n        \";\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-matchInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"matchInteraction\\\">\\n  \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  <div class=\\\"instruction-container\\\"></div>\\n  <div class=\\\"match-interaction-area\\\">\\n    <table class=\\\"matrix\\\">\\n      <thead>\\n      <tr>\\n        <th> </th>\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}\n  if (helper = helpers.matchSet1) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.matchSet1); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.matchSet1) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </tr>\\n      </thead>\\n      <tbody>\\n      \";\n  options={hash:{},inverse:self.noop,fn:self.programWithDepth(5, program5, data, depth0),data:data}\n  if (helper = helpers.matchSet2) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.matchSet2); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.matchSet2) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.programWithDepth(5, program5, data, depth0),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </tbody>\\n    </table>\\n  </div>\\n  <div class=\\\"notification-container\\\"></div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","/*! jQuery Color v@2.1.2 http://github.com/jquery/jquery-color | jquery.org/license */\ndefine('lib/jquery.color',['jquery'], function(jQuery){\n(function(a,b){function m(a,b,c){var d=h[b.type]||{};return a==null?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function n(b){var c=f(),d=c._rgba=[];return b=b.toLowerCase(),l(e,function(a,e){var f,h=e.re.exec(b),i=h&&e.parse(h),j=e.space||\"rgba\";if(i)return f=c[j](i),c[g[j].cache]=f[g[j].cache],d=c._rgba=f._rgba,!1}),d.length?(d.join()===\"0,0,0,0\"&&a.extend(d,k.transparent),c):k[b]}function o(a,b,c){return c=(c+1)%1,c*6<1?a+(b-a)*c*6:c*2<1?b:c*3<2?a+(b-a)*(2/3-c)*6:a}var c=\"backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor\",d=/^([\\-+])=\\s*(\\d+\\.?\\d*)/,e=[{re:/rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,parse:function(a){return[a[1]*2.55,a[2]*2.55,a[3]*2.55,a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,space:\"hsla\",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],f=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},g={rgba:{props:{red:{idx:0,type:\"byte\"},green:{idx:1,type:\"byte\"},blue:{idx:2,type:\"byte\"}}},hsla:{props:{hue:{idx:0,type:\"degrees\"},saturation:{idx:1,type:\"percent\"},lightness:{idx:2,type:\"percent\"}}}},h={\"byte\":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},i=f.support={},j=a(\"<p>\")[0],k,l=a.each;j.style.cssText=\"background-color:rgba(1,1,1,.5)\",i.rgba=j.style.backgroundColor.indexOf(\"rgba\")>-1,l(g,function(a,b){b.cache=\"_\"+a,b.props.alpha={idx:3,type:\"percent\",def:1}}),f.fn=a.extend(f.prototype,{parse:function(c,d,e,h){if(c===b)return this._rgba=[null,null,null,null],this;if(c.jquery||c.nodeType)c=a(c).css(d),d=b;var i=this,j=a.type(c),o=this._rgba=[];d!==b&&(c=[c,d,e,h],j=\"array\");if(j===\"string\")return this.parse(n(c)||k._default);if(j===\"array\")return l(g.rgba.props,function(a,b){o[b.idx]=m(c[b.idx],b)}),this;if(j===\"object\")return c instanceof f?l(g,function(a,b){c[b.cache]&&(i[b.cache]=c[b.cache].slice())}):l(g,function(b,d){var e=d.cache;l(d.props,function(a,b){if(!i[e]&&d.to){if(a===\"alpha\"||c[a]==null)return;i[e]=d.to(i._rgba)}i[e][b.idx]=m(c[a],b,!0)}),i[e]&&a.inArray(null,i[e].slice(0,3))<0&&(i[e][3]=1,d.from&&(i._rgba=d.from(i[e])))}),this},is:function(a){var b=f(a),c=!0,d=this;return l(g,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],l(e.props,function(a,b){if(g[b.idx]!=null)return c=g[b.idx]===f[b.idx],c})),c}),c},_space:function(){var a=[],b=this;return l(g,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var c=f(a),d=c._space(),e=g[d],i=this.alpha()===0?f(\"transparent\"):this,j=i[e.cache]||e.to(i._rgba),k=j.slice();return c=c[e.cache],l(e.props,function(a,d){var e=d.idx,f=j[e],g=c[e],i=h[d.type]||{};if(g===null)return;f===null?k[e]=g:(i.mod&&(g-f>i.mod/2?f+=i.mod:f-g>i.mod/2&&(f-=i.mod)),k[e]=m((g-f)*b+f,d))}),this[d](k)},blend:function(b){if(this._rgba[3]===1)return this;var c=this._rgba.slice(),d=c.pop(),e=f(b)._rgba;return f(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b=\"rgba(\",c=a.map(this._rgba,function(a,b){return a==null?b>2?1:0:a});return c[3]===1&&(c.pop(),b=\"rgb(\"),b+c.join()+\")\"},toHslaString:function(){var b=\"hsla(\",c=a.map(this.hsla(),function(a,b){return a==null&&(a=b>2?1:0),b&&b<3&&(a=Math.round(a*100)+\"%\"),a});return c[3]===1&&(c.pop(),b=\"hsl(\"),b+c.join()+\")\"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(d*255)),\"#\"+a.map(c,function(a){return a=(a||0).toString(16),a.length===1?\"0\"+a:a}).join(\"\")},toString:function(){return this._rgba[3]===0?\"transparent\":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,g.hsla.to=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255,e=a[3],f=Math.max(b,c,d),g=Math.min(b,c,d),h=f-g,i=f+g,j=i*.5,k,l;return g===f?k=0:b===f?k=60*(c-d)/h+360:c===f?k=60*(d-b)/h+120:k=60*(b-c)/h+240,h===0?l=0:j<=.5?l=h/i:l=h/(2-i),[Math.round(k)%360,l,j,e==null?1:e]},g.hsla.from=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],e=a[3],f=d<=.5?d*(1+c):d+c-d*c,g=2*d-f;return[Math.round(o(g,f,b+1/3)*255),Math.round(o(g,f,b)*255),Math.round(o(g,f,b-1/3)*255),e]},l(g,function(c,e){var g=e.props,h=e.cache,i=e.to,j=e.from;f.fn[c]=function(c){i&&!this[h]&&(this[h]=i(this._rgba));if(c===b)return this[h].slice();var d,e=a.type(c),k=e===\"array\"||e===\"object\"?c:arguments,n=this[h].slice();return l(g,function(a,b){var c=k[e===\"object\"?a:b.idx];c==null&&(c=n[b.idx]),n[b.idx]=m(c,b)}),j?(d=f(j(n)),d[h]=n,d):f(n)},l(g,function(b,e){if(f.fn[b])return;f.fn[b]=function(f){var g=a.type(f),h=b===\"alpha\"?this._hsla?\"hsla\":\"rgba\":c,i=this[h](),j=i[e.idx],k;return g===\"undefined\"?j:(g===\"function\"&&(f=f.call(this,j),g=a.type(f)),f==null&&e.empty?this:(g===\"string\"&&(k=d.exec(f),k&&(f=j+parseFloat(k[2])*(k[1]===\"+\"?1:-1))),i[e.idx]=f,this[h](i)))}})}),f.hook=function(b){var c=b.split(\" \");l(c,function(b,c){a.cssHooks[c]={set:function(b,d){var e,g,h=\"\";if(d!==\"transparent\"&&(a.type(d)!==\"string\"||(e=n(d)))){d=f(e||d);if(!i.rgba&&d._rgba[3]!==1){g=c===\"backgroundColor\"?b.parentNode:b;while((h===\"\"||h===\"transparent\")&&g&&g.style)try{h=a.css(g,\"backgroundColor\"),g=g.parentNode}catch(j){}d=d.blend(h&&h!==\"transparent\"?h:\"_default\")}d=d.toRgbaString()}try{b.style[c]=d}catch(j){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=f(b.elem,c),b.end=f(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},f.hook(c),a.cssHooks.borderColor={expand:function(a){var b={};return l([\"Top\",\"Right\",\"Bottom\",\"Left\"],function(c,d){b[\"border\"+d+\"Color\"]=a}),b}},k=a.Color.names={aqua:\"#00ffff\",black:\"#000000\",blue:\"#0000ff\",fuchsia:\"#ff00ff\",gray:\"#808080\",green:\"#008000\",lime:\"#00ff00\",maroon:\"#800000\",navy:\"#000080\",olive:\"#808000\",purple:\"#800080\",red:\"#ff0000\",silver:\"#c0c0c0\",teal:\"#008080\",white:\"#ffffff\",yellow:\"#ffff00\",transparent:[null,null,null,0],_default:\"#ffffff\"}})(jQuery);\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction',[\n    'lodash',\n    'jquery',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/matchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'i18n',\n    'lib/jquery.color'\n], function(_, $, tpl, Helper, pciResponse, __){\n\n    /**\n     * Flag to not throw warning instruction if already\n     * displaying the warning. If such a flag is not used,\n     * disturbances can be seen by the candidate if he clicks\n     * like hell on choices.\n     */\n    var inWarning = false;\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     * \n     * @param {object} interaction\n     */\n    var render = function(interaction){\n        var $container = Helper.getContainer(interaction);\n\n        // Initialize instructions system.\n        _setInstructions(interaction);\n\n        $container.on('click.commonRenderer', 'input[type=checkbox]', function(e){\n            _onCheckboxSelected(interaction, e);\n        });\n\n        Helper.validateInstructions(interaction);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        response = _filterResponse(response);\n\n        if(typeof response.list !== 'undefined' && typeof response.list.directedPair !== 'undefined'){\n            _(response.list.directedPair).forEach(function(directedPair){\n                var x = $('th[data-identifier=' + directedPair[0] + ']').index() - 1;\n                var y = $('th[data-identifier=' + directedPair[1] + ']').parent().index();\n\n                $('.matrix > tbody tr').eq(y).find('input[type=checkbox]').eq(x).attr('checked', true);\n            });\n        }\n\n        Helper.validateInstructions(interaction);\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10296\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var response = pciResponse.serialize(_getRawResponse(interaction), interaction);\n        return response;\n    };\n\n    var resetResponse = function(interaction){\n\n        Helper.getContainer(interaction).find('input[type=checkbox]:checked').each(function(){\n            $(this).prop('checked', false);\n        });\n\n        Helper.validateInstructions(interaction);\n    };\n\n    var _filterResponse = function(response){\n        if(typeof response.list == 'undefined'){\n            // Maybe it's a base?\n            if(typeof response.base == 'undefined'){\n                // Oops, it is even not a base.\n                throw 'The given response is not compliant with PCI JSON representation.';\n            }\n            else{\n                // It's a base, Is it a directedPair? Null?\n                if (response.base == null) {\n                    return {\"list\" : {\"directedPair\" : []}};\n                }\n                else if (typeof response.base.directedPair == 'undefined'){\n                    // Oops again, it is not a directedPair.\n                    throw 'The matchInteraction only accepts directedPair values as responses.';\n                }\n                else{\n                    return {\"list\" : {\"directedPair\" : [response.base.directedPair]}};\n                }\n            }\n        }\n        else if(typeof response.list.directedPair == 'undefined'){\n            // Oops, not a directedPair.\n            throw 'The matchInteraction only accept directedPair values as responses.';\n        }\n        else{\n            return response;\n        }\n    }\n\n    var _getRawResponse = function(interaction){\n        var $container = Helper.getContainer(interaction);\n        var values = [];\n\n        $container.find('input[type=checkbox]:checked').each(function(){\n            values.push(_inferValue(this));\n        });\n\n        return values;\n    };\n\n    var _inferValue = function(element){\n        var $element = $(element);\n        var y = $element.closest('tr').index();\n        var x = $element.closest('td').index();\n        var firstId = $('.matrix > thead th').eq(x).data('identifier');\n        var secondId = $('.matrix > tbody th').eq(y).data('identifier');\n        return [firstId, secondId];\n    };\n\n    var _onCheckboxSelected = function(interaction, e){\n\n        var currentResponse = _getRawResponse(interaction);\n        var minAssociations = interaction.attr('minAssociations');\n        var maxAssociations = interaction.attr('maxAssociations');\n\n        if(maxAssociations === 0){\n            maxAssociations = _countChoices(interaction);\n        }\n\n        if(_.size(currentResponse) > maxAssociations){\n            // No more associations possible.\n            e.preventDefault();\n            Helper.validateInstructions(interaction);\n\n        }else if((choice = _maxMatchReached(interaction, e.target)) !== false){\n\n            // Check if matchmax is respected for both choices\n            // involved in the selection.\n            e.preventDefault();\n            Helper.validateInstructions(interaction, choice);\n\n        }else{\n\n            Helper.triggerResponseChangeEvent(interaction, {});\n            Helper.validateInstructions(interaction);\n        }\n\n    };\n\n    var _maxMatchReached = function(interaction, input){\n\n        var association = _inferValue(input);\n        var overflow = false;\n\n        _(association).forEach(function(identifier){\n            var choice = _getChoiceDefinitionByIdentifier(interaction, identifier);\n            var matchMin = choice.attributes.matchMin;\n            var matchMax = choice.attributes.matchMax;\n            var assoc = _countAssociations(interaction, choice);\n\n            if(matchMax > 0 && assoc > matchMax){\n                overflow = choice;\n            }\n        });\n\n        return overflow;\n    }\n\n    var _countAssociations = function(interaction, choice){\n\n        var rawResponse = _getRawResponse(interaction);\n        var count = 0;\n\n        // How much time can we find rawChoice in rawResponses?\n        _(rawResponse).forEach(function(response){\n            if((response[0] == choice.attributes.identifier || response[1] == choice.attributes.identifier)){\n                count++;\n            }\n        });\n\n        return count;\n    }\n\n    var _countChoices = function(interaction){\n        var $container = Helper.getContainer(interaction);\n        return $container.find('input[type=checkbox]').length;\n    };\n\n    var _getChoiceDefinitionByIdentifier = function(interaction, identifier){\n        var rawChoices = _getRawChoices(interaction);\n        return rawChoices[identifier];\n    }\n\n    var _getRawChoices = function(interaction){\n        var rawChoices = {};\n\n        _(interaction.choices).forEach(function(matchset){\n            _(matchset).forEach(function(choice){\n                rawChoices[choice.attributes.identifier] = choice;\n            });\n        });\n\n        return rawChoices;\n    }\n\n    var _setInstructions = function(interaction){\n\n        var minAssociations = interaction.attr('minAssociations');\n        var maxAssociations = interaction.attr('maxAssociations');\n        var choiceCount = _countChoices(interaction);\n\n        // Super closure is here again to save our souls! Houray!\n        // ~~~~~~~ |==||||0__\n\n        var superClosure = function(){\n\n            var onMaxChoicesReached = function(report, msg){\n                if(inWarning === false){\n                    inWarning = true;\n\n                    report.update({\n                        level : 'warning',\n                        message : __('Maximum number of choices reached.'),\n                        timeout : 2000,\n                        stop : function(){\n                            report.update({level : 'success', message : msg});\n                            inWarning = false;\n                        }\n                    });\n                }\n            };\n\n            var onMatchMaxReached = function(interaction, choice, report, msg, level){\n\n                var $container = Helper.getContainer(interaction);\n\n                if(inWarning === false){\n                    inWarning = true;\n\n                    var $choice = $container.find('.qti-simpleAssociableChoice[data-identifier=\"' + choice.attributes.identifier + '\"]');\n                    var originalBackgroundColor = $choice.css('background-color');\n                    var originalColor = $choice.css('color');\n\n                    report.update({\n                        level : 'warning',\n                        message : __('The highlighted choice cannot be associated more than %d time(s).').replace('%d', choice.attributes.matchMax),\n                        timeout : 3000,\n                        start : function(){\n                            $choice.animate({\n                                backgroundColor : '#fff',\n                                color : '#ba122b'\n                            }, 250, function(){\n                                $choice.animate({\n                                    backgroundColor : '#ba122b',\n                                    color : '#fff'\n                                }, 250);\n                            });\n                        },\n                        stop : function(){\n                            $choice.animate({\n                                backgroundColor : originalBackgroundColor,\n                                color : originalColor\n                            }, 500);\n                            report.update({level : level, message : msg});\n                            inWarning = false;\n                        }\n                    });\n                }\n            };\n\n            if(minAssociations == 0 && maxAssociations > 0){\n                // No minimum but maximum.\n                var msg = __('You must select 0 to %d choices.').replace('%d', maxAssociations);\n\n                Helper.appendInstruction(interaction, msg, function(choice){\n                    var responseCount = _.size(_getRawResponse(interaction));\n                    var choiceGiven = typeof choice != 'undefined';\n\n                    if(choiceGiven == true && choice.attributes.matchMax > 0 && _countAssociations(interaction, choice) > choice.attributes.matchMax){\n                        onMatchMaxReached(interaction, choice, this, msg, this.getLevel());\n                    }\n                    else if(responseCount <= maxAssociations){\n                        this.setLevel('success');\n                    }\n                    else if(responseCount > maxAssociations){\n                        onMaxChoicesReached(this, msg);\n                    }\n                    else{\n                        this.reset();\n                    }\n                });\n            }\n            else if(minAssociations == 0 && maxAssociations == 0){\n                // No minimum, no maximum.\n                var msg = __('You must select 0 to %d choices.').replace('%d', choiceCount);\n\n                Helper.appendInstruction(interaction, msg, function(choice){\n                    var choiceGiven = typeof choice != 'undefined';\n\n                    if(choiceGiven == true && choice.attributes.matchMax > 0 && _countAssociations(interaction, choice) > choice.attributes.matchMax){\n                        onMatchMaxReached(interaction, choice, this, msg, this.getLevel());\n                    }\n                    else{\n                        this.setLevel('success');\n                    }\n                });\n            }\n            else if(minAssociations > 0 && maxAssociations == 0){\n                // minimum but no maximum.\n                var msg = __('You must select %1$d to %2$d choices.');\n                msg = msg.replace('%1$d', minAssociations);\n                msg = msg.replace('%2$d', choiceCount);\n\n                Helper.appendInstruction(interaction, msg, function(choice){\n                    var responseCount = _.size(_getRawResponse(interaction));\n                    var choiceGiven = typeof choice != 'undefined';\n\n                    if(choiceGiven == true && choice.attributes.matchMax > 0 && _countAssociations(interaction, choice) > choice.attributes.matchMax){\n                        onMatchMaxReached(interaction, choice, this, msg, this.getLevel());\n                    }\n                    else if(responseCount < minAssociations){\n                        this.setLevel('info');\n                    }\n                    else if(responseCount > choiceCount){\n                        onMaxChoicesReached(this, msg);\n                    }\n                    else{\n                        this.setLevel('success');\n                    }\n                });\n            }\n            else if(minAssociations > 0 && maxAssociations > 0){\n                // minimum and maximum.\n                if(minAssociations != maxAssociations){\n                    var msg = __('You must select %1$d to %2$d choices.');\n                    msg = msg.replace('%1$d', minAssociations);\n                    msg = msg.replace('%2$d', maxAssociations);\n                }\n                else{\n                    var msg = __('You must select exactly %d choice(s).');\n                    msg = msg.replace('%d', minAssociations);\n                }\n\n                Helper.appendInstruction(interaction, msg, function(choice){\n\n                    var responseCount = _.size(_getRawResponse(interaction));\n                    var choiceGiven = typeof choice != 'undefined';\n\n                    if(choiceGiven == true && choice.attributes.matchMax > 0 && _countAssociations(interaction, choice) > choice.attributes.matchMax){\n                        onMatchMaxReached(interaction, choice, this, msg, this.getLevel());\n                    }\n                    else if(responseCount < minAssociations){\n                        this.setLevel('info');\n                    }\n                    else if(responseCount > maxAssociations){\n                        onMaxChoicesReached(this, msg);\n                    }\n                    else if(responseCount >= minAssociations && responseCount <= maxAssociations){\n                        this.setLevel('success');\n                    }\n                });\n            }\n        };\n\n        superClosure();\n    }\n\n    var destroy = function(interaction){\n\n        Helper.getContainer(interaction).off('.commonRenderer');\n\n        resetResponse(interaction);\n\n        Helper.removeInstructions(interaction);\n    };\n\n    return {\n        qtiClass : 'matchInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        inferValue : _inferValue\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.adder', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"clearfix add-options\\\" data-edit=\\\"question\\\">\\n    <div class=\\\"rgt\\\">\\n        <span class=\\\"add-option\\\" data-role=\\\"add-row\\\"><span class=\\\"icon-add\\\"></span>Add new row</span>\\n        <span class=\\\"add-option\\\" data-role=\\\"add-col\\\"><span class=\\\"icon-add\\\"></span>Add new column</span>\\n    </div>\\n</div>\";\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.row', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"\\n    <td>\\n        <label>\\n            <input type=\\\"checkbox\\\" >\\n            <span class=\\\"icon-checkbox cross\\\"></span>\\n        </label>\\n    </td>\\n    \";\n  }\n\n  buffer += \"<tr>\\n    \";\n  if (helper = helpers.choice) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choice); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = (helper = helpers['for'] || (depth0 && depth0['for']),options={hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data},helper ? helper.call(depth0, 0, (depth0 && depth0.otherMatchSetCount), 1, options) : helperMissing.call(depth0, \"for\", 0, (depth0 && depth0.otherMatchSetCount), 1, options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</tr>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.cell', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<td>\\n    <label>\\n        <input type=\\\"checkbox\\\" >\\n        <span class=\\\"icon-checkbox cross\\\"></span>\\n    </label>\\n</td>\";\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/associateInteraction/states/Question',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.adder',\n    'tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.row',\n    'tpl!taoQtiItem/qtiCreator/tpl/interactions/matchInteraction.cell',\n    'taoQtiItem/qtiCreator/helper/adaptSize'\n], function($, _, stateFactory, Question, AssociateInteractionQuestionState, adderTpl, rowTpl, cellTpl, adaptSize){\n\n    var MatchInteractionStateQuestion = stateFactory.extend(Question);\n\n    MatchInteractionStateQuestion.prototype.initForm = AssociateInteractionQuestionState.prototype.initForm;\n\n    MatchInteractionStateQuestion.prototype.addNewChoiceButton = function(){\n\n        var widget = this.widget,\n            interaction = widget.element,\n            $matchArea = widget.$container.find('.match-interaction-area'),\n            qtiChoiceClassName = 'simpleAssociableChoice.matchInteraction';\n\n        var _postRender = function(choice){\n            \n            choice.postRender({\n                ready : function(widget){\n                    //transition state directly back to \"question\"\n                    widget.changeState('question');\n                }\n            }, qtiChoiceClassName);\n        };\n\n        if(!$matchArea.find('.add-option').length){\n            \n            $matchArea.append(adderTpl());\n            \n            $matchArea.find('.add-options').show();\n            \n            $matchArea.find('.add-option[data-role=add-col]').on('click', function(){\n                \n                //match set 0\n                var choice = interaction.createChoice(0);\n                \n                $matchArea.find('thead > tr').append(choice.render(qtiChoiceClassName));\n                $matchArea.find('tbody > tr').append(cellTpl({}));\n                \n                _postRender(choice);\n            });\n\n            $matchArea.find('.add-option[data-role=add-row]').on('click', function(){\n                \n                //match set 1\n                var choice = interaction.createChoice(1);\n                \n                $matchArea.find('tbody').append(rowTpl({\n                    choice : choice.render(qtiChoiceClassName),\n                    otherMatchSetCount : _.size(interaction.choices[0])\n                }));\n                \n                _postRender(choice);\n            });\n        }\n\n        $('.qti-item').on('toolbarchange', function() {\n            $matchArea.find('tbody .mini-tlb').each(function() {\n                var $toolbar = $(this);\n                // (string) false is _not_ a mistake\n                // this prevents images etc inside a choice from having funny toolbars\n                if($toolbar.parent().attr('contenteditable') !== 'false') {\n                    $toolbar.css({ left: ($toolbar.width() + 10) * -1, top: -1} );\n                }\n            });\n        });\n\n        //listen for height changes\n        $matchArea.find('tr ').each(function() {\n            var $elements = $(this).find('[data-html-editable=\"true\"]');\n            widget.on('containerBodyChange', function(){\n                adaptSize.height($elements);\n            });\n        });\n\n    };\n\n    return MatchInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var MatchInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        answerStateHelper.forward(this.widget);\n    }, function(){\n        \n    });\n    \n    return MatchInteractionStateAnswer;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.score', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<input value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n       title=\\\"Score of this answer\\\" \\n       type=\\\"text\\\" \\n       data-for=\\\"\";\n  if (helper = helpers.choiceIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.choiceIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n       name=\\\"score\\\" \\n       class=\\\"score\\\" \\n       placeholder = \\\"\";\n  if (helper = helpers.placeholder) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.placeholder); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\\n       data-validate=\\\"$numeric\\\" \\n       data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\" />\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/ResponseWidget',[\n    'jquery',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/toolbars/matchInteraction.score',\n    'lodash',\n    'i18n',\n    'polyfill/placeholders'\n], function($, commonRenderer, helper, formElement, scoreTpl, _, __){\n\n    var ResponseWidget = {\n        create : function(widget, responseMappingMode){\n\n            var interaction = widget.element;\n\n            commonRenderer.destroy(interaction);\n\n            if(responseMappingMode){\n                helper.appendInstruction(widget.element, __('Please define the correct response and the score below.'));\n                interaction.data('responseMappingMode', true);\n                ResponseWidget.createScoreWidgets(widget);\n                ResponseWidget.createCorrectWidgets(widget);\n            }else{\n                helper.appendInstruction(widget.element, __('Please define the correct response below.'));\n                ResponseWidget.createCorrectWidgets(widget);\n            }\n\n            commonRenderer.render(interaction);\n\n            widget.$container.find('table.matrix input[type=checkbox]')\n                .removeProp('disabled')\n                .attr('data-edit', 'correct')\n                .attr('data-role', 'correct');\n        },\n        setResponse : function(interaction, response){\n\n            commonRenderer.setResponse(interaction, ResponseWidget.formatResponse(response));\n        },\n        destroy : function(widget){\n\n            var interaction = widget.element;\n\n            commonRenderer.destroy(interaction);\n\n            interaction.removeData('responseMappingMode');\n\n            widget.$container.find('table.matrix input[type=checkbox]').prop('disabled', 'disabled');\n            widget.$container.find('table.matrix .score').remove();\n            widget.$container.off('responseChange.qti-widget');\n        },\n        createScoreWidgets : function(widget){\n\n            var $container = widget.$container,\n                interaction = widget.element,\n                response = interaction.getResponseDeclaration(),\n                mapEntries = response.getMapEntries(),\n                defaultValue = response.getMappingAttribute('defaultValue');\n\n            $container.find('table.matrix td>label').each(function(){\n\n                var pairId = commonRenderer.inferValue(this).join(' ');\n\n                $(this).append(scoreTpl({\n                    serial : interaction.getSerial(),\n                    choiceIdentifier : pairId,\n                    score : mapEntries[pairId] ? mapEntries[pairId] : '',\n                    placeholder : defaultValue\n                }));\n            });\n\n            //add placeholder text to show the default value\n            var $scores = $container.find('table.matrix .score');\n            $scores.on('click', function(e){\n                e.stopPropagation();\n                e.preventDefault();\n            });\n\n            widget.on('mappingAttributeChange', function(data){\n                if(data.key === 'defaultValue'){\n                    $scores.attr('placeholder', data.value);\n                }\n            });\n\n            formElement.setChangeCallbacks($container, response, {\n                score : function(response, value){\n\n                    var key = $(this).data('for');\n\n                    if(value === ''){\n                        response.removeMapEntry(key);\n                    }else{\n                        response.setMapEntry(key, value, true);\n                    }\n\n                }\n            });\n\n        },\n        createCorrectWidgets : function(widget){\n\n            var interaction = widget.element,\n                response = interaction.getResponseDeclaration();\n\n            widget.$container.on('responseChange.qti-widget', function(e, data){\n                response.setCorrect(ResponseWidget.unformatResponse(data.response));\n            });\n\n        },\n        formatResponse : function(response){\n\n            var formatedRes = {list : {directedPair : []}};\n            if(_.size(response) === 1){\n                var pair = _.values(response).pop().split(' ');\n                formatedRes = {base : {directedPair : pair}};\n            }else{\n                formatedRes = {list : {directedPair : []}};\n                _.each(response, function(pairString){\n                    var pair = pairString.split(' ');\n                    formatedRes.list.directedPair.push(pair);\n                });\n            }\n            return formatedRes;\n        },\n        unformatResponse : function(formatedResponse){\n\n            var res = [];\n\n            if(formatedResponse.list && formatedResponse.list.directedPair){\n                _.each(formatedResponse.list.directedPair, function(pair){\n                    res.push(pair.join(' '));\n                });\n            }else if(formatedResponse.base && formatedResponse.base.directedPair){\n                res.push(formatedResponse.base.directedPair.join(' '));\n            }\n            return res;\n        }\n    };\n\n    return ResponseWidget;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/ResponseWidget',\n    'lodash'\n], function(stateFactory, Correct, responseWidget, _){\n\n    var MatchInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //init response widget in responseMapping mode:\n        responseWidget.create(_widget);\n\n        //finally, apply defined correct response and response mapping:\n        responseWidget.setResponse(interaction, _.values(response.getCorrect()));\n\n    }, function(){\n\n        responseWidget.destroy(this.widget);\n\n    });\n\n    return MatchInteractionStateCorrect;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Map',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/ResponseWidget',\n    'lodash'\n], function($, stateFactory, Map, responseWidget, _){\n\n    var MatchInteractionStateMap = stateFactory.create(Map, function(){\n\n        var _widget = this.widget,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //init response widget in responseMapping mode:\n        responseWidget.create(_widget, true);\n\n        //finally, apply defined correct response and response mapping:\n        responseWidget.setResponse(interaction, _.values(response.getCorrect()));\n        \n       //change the correct state \n       _widget.on('metaChange', function(meta){\n            if(meta.key === 'defineCorrect'){\n                if(meta.value){\n                    $('.match-interaction-area input[type=\"checkbox\"]', _widget.$container)\n                        .removeProp('disabled') \n                        .removeClass('disabled');\n                } else {\n                    $('.match-interaction-area input[type=\"checkbox\"]', _widget.$container)\n                        .prop('disabled', true)\n                        .prop('checked', false)\n                        .addClass('disabled');\n                }\n                if(meta.value === false){\n                    response.setCorrect([]);\n                }\n            }\n        });\n\n    }, function(){\n\n        responseWidget.destroy(this.widget);\n\n    });\n\n    return MatchInteractionStateMap;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/states/states'\n], function(Widget, states){\n\n    var MatchInteractionWidget = Widget.clone();\n\n    MatchInteractionWidget.initCreator = function(){\n        this.registerStates(states);\n        Widget.initCreator.call(this);\n    };\n    \n    return MatchInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/MatchInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/matchInteraction/Widget'\n], function(_, MatchInteraction,MatchInteractionWidget){\n\n    var CreatorMatchInteraction = _.clone(MatchInteraction);\n\n    CreatorMatchInteraction.render = function(interaction, options){\n        \n        return MatchInteractionWidget.build(\n            interaction,\n            MatchInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorMatchInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/mediaInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-mediaInteraction \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"media-container\\\"></div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Martin for OAT S.A. <code@taotesting.com>\n * @author Bertrand Chevrier <bertrand@taotesting.com> \n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/mediaInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'mediaElement'\n], function($, _, __, tpl, pciResponse, Helper, MediaElementPlayer) {\n\n    /**\n     * Get the media type (audio, video or video/youtube) regarding it's mime type. \n     * @param {String} mimetype - the mime type\n     * @returns {String} the catrgory/type\n     */\n    var getMediaType = function(mimetype) {\n        var type = '';\n        if (mimetype !== '') {\n            if (mimetype.indexOf('youtube') !== -1) {\n                type = 'video/youtube';\n            } else if (mimetype.indexOf('video') === 0 || mimetype.indexOf('application/ogg')) {\n                type = 'video';\n            } else if (mimetype.indexOf('audio') === 0) {\n                type = 'audio';\n            }\n        }\n        return type;\n    };\n\n    //some default values\n    var defaults = {\n        type   : 'video/mp4', \n        video : {\n            width: 480,\n            height: 270\n        },\n        audio : {\n            width: 400,\n            height: 30\n        }\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10391\n     * \n     * @param {object} interaction\n     * @fires playerready when the player is sucessfully loaded and configured\n     */\n    var render = function render(interaction) {\n\n        var mediaInteractionObjectToReturn, \n            $meTag,\n            mediaOptions;\n        var $container          = Helper.getContainer(interaction);\n        var media               = interaction.object;\n        var baseUrl             = this.getOption('baseUrl') || '';\n        var mediaType           = getMediaType(media.attr('type') || defaults.type);\n        var enablePause         = $container.hasClass('pause');\n        var maxPlays            = parseInt(interaction.attr('maxPlays'), 10) || 0;\n\n        var playFromPauseEvent  = false;\n        var pauseFromClick      = false;\n\n        var features = enablePause ? ['playpause', 'progress', 'current', 'duration', 'volume'] : ['playpause', 'current', 'duration', 'volume'];\n\n        //intialize the player if not yet done\n        var initMediaPlayer = function initMediaPlayer(){\n            if(!interaction.mediaElement && $meTag && $meTag.length){\n                new MediaElementPlayer($meTag, mediaOptions);\n            }\n        };\n\n        //check if the media can be played (using timesPlayed and maxPlays)\n        var canBePlayed = function canBePlayed(){\n            var current = parseInt($container.data('timesPlayed'), 10);\n            return maxPlays === 0 || maxPlays > current; \n        };\n\n        if(_.size(media.attributes) === 0){\n            //TODO move to afterCreate\n            media.attr('type', defaults.type);\n            media.attr('width', $container.innerWidth());\n            media.attr('height', defaults.video.height);\n            media.attr('data', '');\n        }\n\n        //set up player options\n        mediaOptions = {\n            defaultVideoWidth       : defaults.video.width,\n            defaultVideoHeight      : defaults.video.height,\n            videoWidth              : media.attr('width'),\n            videoHeight             : media.attr('height'),\n            audioWidth              : media.attr('width') || defaults.audio.width,\n            audioHeight             : media.attr('height') || defaults.audio.height,\n            features                : features,\n            startVolume             : 1,\n            loop                    : !!interaction.attr('loop'),\n            enableAutosize          : true,\n            alwaysShowControls      : true,\n            iPadUseNativeControls   : false,\n            iPhoneUseNativeControls : false,\n            AndroidUseNativeControls: false,\n            alwaysShowHours         : false,\n            enableKeyboard          : false,\n            pauseOtherPlayers       : false,\n\n            //the player is loaded\n            success: function(mediaElement, playerDom) {\n                \n                var stillNeedToCallPlay = true;\n                var $meContainer    = $(playerDom).closest('.mejs-container');\n                var $layers         = $('.mejs-layers', $meContainer);\n                var $playpauseBtn   = $('.mejs-playpause-button', $meContainer);\n                var $bigPlayBtn     = $('.mejs-overlay-play', $meContainer);\n                var $controls       = $('.mejs-controls', $meContainer); \n                var controlsHeight  = $controls.outerHeight();\n\n                interaction.mediaElement = mediaElement;\n    \n                //resize the iframe of the youtube plugin\n                if (mediaType === 'video/youtube') {\n                    _.defer(function(){\n                        $('iframe.me-plugin', $container).css('min-height', media.attr('height'));\n                    });\n                }\n\n                //set up the number of times played\n                if (!$container.data('timesPlayed')) {\n                    $container.data('timesPlayed', 0);\n                }\n                \n                //controls the autoplaying\n                if (interaction.attr('autostart') && canBePlayed()) {\n\n                    if (mediaType !== 'video/youtube') {\n                        mediaElement.load();\n                        mediaElement.play();\n                    }\n\n                    mediaElement.addEventListener('canplay', function() {\n                        if (stillNeedToCallPlay) {\n                            mediaElement.play();\n                        }\n                    }, false);\n                }\n\n                \n                mediaElement.addEventListener('play', function(event) {\n                    stillNeedToCallPlay = false;\n\n                    if (playFromPauseEvent === true) {\n\n                        playFromPauseEvent = false;\n\n                    } else {\n                        //if no pause we detach the controls or add an overlay on iframes to prevent pause from click\n                        if(!enablePause){\n                            $bigPlayBtn.detach();\n                            $playpauseBtn.detach();\n \n                            if(mediaType === 'video/youtube' || mediaElement.pluginType === 'flash') {\n                                $('<div class=\"overlay\"></div>')\n                                    .width(mediaOptions.videoWidth)\n                                    .height(mediaOptions.videoHeight - controlsHeight)\n                                    .appendTo($layers);\n                            }\n                        }\n                    }\n                }, false);\n\n                mediaElement.addEventListener('ended', function(event) {\n                    $container.data('timesPlayed', $container.data('timesPlayed') + 1);\n                    Helper.triggerResponseChangeEvent(interaction);\n\n                    if (canBePlayed() && !enablePause){\n    \n                        //re attach the controls and remove the overlay\n                        $controls.prepend($playpauseBtn);\n                        $layers.append($bigPlayBtn);\n                        $('.overlay', $layers).remove();\n                        \n                    } else if(!canBePlayed()) {\n\n                        //we detach the controls or add an overlay on iframes to prevent a new play\n                        $bigPlayBtn.detach();\n                        $playpauseBtn.detach();\n\n                        if(mediaType === 'video/youtube' || mediaElement.pluginType === 'flash') {\n                            $('<div class=\"overlay\"></div>')\n                                .width(mediaOptions.videoWidth)\n                                .height(mediaOptions.videoHeight - controlsHeight)\n                                .appendTo($layers);\n                        }\n    \n                        //no other way to stop it if in loop\n                        if(!!interaction.attr('loop')){\n                            if(!interaction.mediaElement.pluginApi){\n                                interaction.mediaElement.setSrc('');\n                            } else {\n                                $(playerDom).remove();\n                            }\n                        }\n                            \n                    }\n\n                }, false);\n\n                //prevents to pause the player\n                $playpauseBtn.on('click.qti-element', function(e) {\n                        pauseFromClick = true;\n                        if(!enablePause){\n                            e.preventDefault();\n                            e.stopPropagation();                        }\n                    });\n\n                mediaElement.addEventListener('pause', function(event) {\n                    // there is a \"pause\" event fired at the end of a movie and we need to differentiate it from pause event caused by a click\n                    if (pauseFromClick) {\n                        playFromPauseEvent = true;\n                        pauseFromClick = false;\n                        //mediaElement.play();\n                    }\n                });\n\n                /**\n                 * @event playerready\n                 */\n                $container.trigger('playerready');\n            },\n\n            error: function(playerDom) {\n                $(playerDom).closest('div.mejs-container').find('.me-cannotplay').remove();\n            }\n        };\n\n        //create the HTML tags\n        $meTag = $(_buildMedia(media, mediaType, baseUrl)).appendTo($('.media-container', $container));\n\n        //prevent contextmenu and control click on the player to prevent unwanted pause.\n        $meTag\n            .on('contextmenu', function(e) {\n                e.preventDefault();\n            })\n            .on('click.qit-element', function(e) {\n                pauseFromClick = true;\n                if(!enablePause){\n                    e.preventDefault();\n                    e.stopPropagation();\n                    return false;\n                }\n            });\n          \n        //initialize the component\n    \n       $container.on('responseSet', function() {\n            initMediaPlayer();\n       });\n\n        //gives a small chance to the responseSet event before initializing the player\n        _.defer(function(){ \n            initMediaPlayer();\n        });\n    };\n\n    /**\n     * Build the HTML5 tags for a media\n     * @private\n     * @param {Object} media - interaction.object\n     * @param {String} type  - the media type in video, audio and video/youtube\n     * @param {String} baseUrl - to prepend media.url if this is relative resource\n     * @returns {String} the html5 tags\n     */\n    var _buildMedia = function _buildMedia(media, type, baseUrl){\n        var element;\n        var url;\n        var attrs;\n\n        //inline an object to html attributes\n        var inlineAttrs = function inlineAttrs(attrs){\n            return _.reduce(attrs, function(res, value, key){\n                res += key + '=\"' + value + '\" ';\n                return res;\n            }, '');\n        };\n        \n        if(media){\n            url = media.attr('data') ? media.attr('data').replace(/^\\//, '') : '';\n\n            attrs = {\n                width : media.attr('width')     + 'px',\n                height: media.attr('height')    + 'px',\n                preload : 'none'\n            };\n            if (!/^http(s)?:\\/\\//.test(url)){\n                url = baseUrl + url;\n                attrs.type = media.attr('type');\n            }\n            \n            if (type === 'video/youtube') {\n                element =   '<video ' + inlineAttrs(attrs) + '> ' +\n                                ' <source type=\"video/youtube\" src=\"' + url + '\" /> ' +\n                            '</video>';\n            } else {\n                attrs.src = url;\n                if(!type){\n                    type = 'video';\n                }\n                element =   '<' + type + ' ' + inlineAttrs(attrs) + '></' + type + '>';\n            }\n        }\n        return element;\n    };\n\n    /**\n     * Destroy the current interaction\n     * @param {Object} interaction\n     */\n    var destroy = function(interaction) {\n        var $container = Helper.getContainer(interaction);\n\n        if(interaction.mediaElement){\n            //needed to release socket\n            if(!interaction.mediaElement.pluginApi){\n                interaction.mediaElement.setSrc('');\n            }\n            interaction.mediaElement = undefined;\n        }\n        \n        $('.instruction-container', $container).empty();\n        $('.media-container', $container).empty();\n\n        $container.removeData('timesPlayed');\n\n    };\n\n    /**\n     * Get the responses from the interaction\n     * @private \n     * @param {Object} interaction\n     * @returns {Array} of points\n     */\n    var _getRawResponse = function _getRawResponse(interaction) {\n        return [Helper.getContainer(interaction).data('timesPlayed')];\n    };\n\n    /**\n     * Set the response to the rendered interaction. \n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response) {\n        if (response) {\n            try {\n                //try to unserialize the pci response\n                var responseValues;\n                responseValues = pciResponse.unserialize(response, interaction);\n                Helper.getContainer(interaction).data('timesPlayed', responseValues[0]);\n            } catch (e) {\n                // something went wrong\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction) {\n        Helper.getContainer(interaction).data('timesPlayed', 0);\n    };\n\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction) {\n        return  pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    /**\n     * Expose the common renderer for the interaction\n     * @exports qtiCommonRenderer/renderers/interactions/mediaInteraction\n     */\n    return {\n        qtiClass        : 'mediaInteraction',\n        template        : tpl,\n        render          : render,\n        getContainer    : Helper.getContainer,\n        setResponse     : setResponse,\n        getResponse     : getResponse,\n        resetResponse   : resetResponse,\n        destroy         : destroy\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/media', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<!--\\n<div class=\\\"panel\\\">\\n      TO BE COMPLETED : add \\\"object\\\" editor (see : http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10173)\\n</div>\\n-->\\n\\n<div class=\\\"panel\\\">\\n    \\n    <div>\\n        <label>\\n            <div>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Media file path or YouTube video address\", options) : helperMissing.call(depth0, \"__\", \"Media file path or YouTube video address\", options)))\n    + \"</div>\\n            <input type=\\\"text\\\" name=\\\"data\\\" placeholder=\\\"Please select media file\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty;\\\"/>\\n            <div><button class='selectMediaFile btn-info small block'>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select media file\", options) : helperMissing.call(depth0, \"__\", \"Select media file\", options)))\n    + \"</button></div>\\n        </label>\\n    </div>\\n    \\n    <div>\\n        <label for=\\\"width\\\" class=\\\"spinner\\\">Width</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\"   data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"1920\\\" style='min-width: 55px!important;' />\\n    </div>\\n    \\n    <div>\\n        <label for=\\\"height\\\" class=\\\"spinner\\\">Height</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\"  data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"1080\\\" style='min-width: 55px!important;' />\\n    </div>\\n    \\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"autostart\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.autostart), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Autostart\", options) : helperMissing.call(depth0, \"__\", \"Autostart\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The autostart attribute determines if the media object should begin as soon as the candidate starts the attempt (checked) or if the media object should be started under the control of the candidate (unchecked).\", options) : helperMissing.call(depth0, \"__\", \"The autostart attribute determines if the media object should begin as soon as the candidate starts the attempt (checked) or if the media object should be started under the control of the candidate (unchecked).\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"loop\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.loop), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Loop\", options) : helperMissing.call(depth0, \"__\", \"Loop\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n       \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The loop attribute is used to set continuous play mode. In continuous play mode, once the media object has started to play it should play continuously (subject to maxPlays).\", options) : helperMissing.call(depth0, \"__\", \"The loop attribute is used to set continuous play mode. In continuous play mode, once the media object has started to play it should play continuously (subject to maxPlays).\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label>\\n        <input name=\\\"pause\\\" type=\\\"checkbox\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.pause), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"/>\\n        <span class=\\\"icon-checkbox\\\"></span>\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Pause\", options) : helperMissing.call(depth0, \"__\", \"Pause\", options)))\n    + \"\\n    </label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\\n       \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Enable the test taker to pause and restart the playing.\", options) : helperMissing.call(depth0, \"__\", \"Enable the test taker to pause and restart the playing.\", options)))\n    + \"\\n    </span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <div>\\n        <label for=\\\"maxPlays\\\" class=\\\"spinner\\\">Max plays count</label>\\n        <input name=\\\"maxPlays\\\" value=\\\"\";\n  if (helper = helpers.maxPlays) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxPlays); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"1000\\\" type=\\\"text\\\" style='min-width: 55px!important;' />\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maxPlays attribute indicates that the media object can be played at most maxPlays times - it must not be possible for the candidate to play the media object more than maxPlay times. A value of 0 (the default) indicates that there is no limit.\", options) : helperMissing.call(depth0, \"__\", \"The maxPlays attribute indicates that the media object can be played at most maxPlays times - it must not be possible for the candidate to play the media object more than maxPlay times. A value of 0 (the default) indicates that there is no limit.\", options)))\n    + \"\\n        </span>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/media',\n    'ui/resourcemgr'\n], function($, _, __, stateFactory, Question, formElement, formTpl){\n\n    var initQuestionState = function initQuestionState(){\n        this.widget.renderInteraction();\n    };\n\n    var exitQuestionState = function exitQuestionState(){\n        this.widget.destroyInteraction();\n    };\n\n    var MediaInteractionStateQuestion = stateFactory.extend(Question, initQuestionState, exitQuestionState);\n\n    MediaInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var $form = widget.$form;\n        var $container = widget.$original;\n        var options = widget.options;\n        var interaction = widget.element;\n        var callbacks = {};\n\n        var reRender = _.throttle(function reRender(interaction){\n            xmlUpdateCheat(interaction);\n            widget.destroyInteraction();\n            widget.renderInteraction();\n        }, 1000);\n\n        var xmlUpdateCheat = function xmlUpdateCheat(interaction){\n            // xml update cheat\n            interaction.attr('responseIdentifier', interaction.attr('responseIdentifier'));\n        };\n\n        //initialization binding\n        //initialize your form here, you certainly gonna need to modify it:\n        //append the form to the dom (this part should be almost ok)\n        $form.html(formTpl({\n            //tpl data for the interaction\n            autostart : !!interaction.attr('autostart'),\n            loop : !!interaction.attr('loop'),\n            maxPlays : parseInt(interaction.attr('maxPlays'), 10),\n            pause : interaction.hasClass('pause'),\n            //tpl data for the \"object\", this part is going to be reused by the \"objectWidget\", http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10173\n            data : interaction.object.attr('data'),\n            type : interaction.object.attr('type'), //use the same as the uploadInteraction, contact jerome@taotesting.com for this\n            width : interaction.object.attr('width'),\n            height : interaction.object.attr('height')\n\n        }));\n\n        formElement.initWidget($form);\n\n        //init data change callbacks\n\n        //callbacks.autostart = formElement.getAttributeChangeCallback();\n        callbacks.autostart = function(interaction, attrValue, attrName){\n            interaction.attr(attrName, attrValue);\n            reRender(interaction);\n        };\n\n        //callbacks.loop = formElement.getAttributeChangeCallback();\n        callbacks.loop = function(interaction, attrValue, attrName){\n            interaction.attr(attrName, attrValue);\n            reRender(interaction);\n        };\n\n        callbacks.maxPlays = function(interaction, attrValue, attrName){\n            interaction.attr(attrName, attrValue);\n            reRender(interaction);\n        };\n\n        callbacks.pause = function(interaction, attrValue, attrName){\n            if(attrValue){\n                if(!$container.hasClass('pause')){\n                    $container.addClass('pause');\n                    interaction.addClass('pause');\n                }\n            }else{\n                $container.removeClass('pause');\n                interaction.removeClass('pause');\n            }\n        };\n\n        callbacks.width = function(interaction, attrValue, attrName){\n            interaction.object.attr(attrName, attrValue);\n            reRender(interaction);\n        };\n\n        callbacks.height = function(interaction, attrValue, attrName){\n            interaction.object.attr(attrName, attrValue);\n            reRender(interaction);\n        };\n\n        callbacks.data = function(interaction, attrValue, attrName){\n            if(interaction.object.attr(attrName) !== attrValue){\n                interaction.object.attr(attrName, attrValue);\n                xmlUpdateCheat(interaction);\n\n                var dataValue = $.trim(attrValue).toLowerCase();\n\n                if(/^http(s)?:\\/\\/(www\\.)?youtu/.test(dataValue)){\n                    interaction.object.attr('type', 'video/youtube');\n                }\n\n                if(interaction.object && (!interaction.object.attr('width') || parseInt(interaction.object.attr('width'), 10) <= 0)){\n                    interaction.object.attr('width', widget.$original.innerWidth());\n                }\n                reRender(interaction);\n            }\n        };\n\n        formElement.setChangeCallbacks($form, interaction, callbacks, {invalidate : true});\n\n        var $src = $form.find('input[name=data]');\n        var $uploadTrigger = $form.find('.selectMediaFile');\n        var _openResourceMgr = function(){\n            $uploadTrigger.resourcemgr({\n                title : __('Please select a media file (video or audio) from the resource manager. You can add files from your computer with the button \"Add file(s)\".'),\n                appendContainer : options.mediaManager.appendContainer,\n                mediaSources : options.mediaManager.mediaSources,\n                browseUrl : options.mediaManager.browseUrl,\n                uploadUrl : options.mediaManager.uploadUrl,\n                deleteUrl : options.mediaManager.deleteUrl,\n                downloadUrl : options.mediaManager.downloadUrl,\n                fileExistsUrl : options.mediaManager.fileExistsUrl,\n                params : {\n                    uri : options.uri,\n                    lang : options.lang,\n                    filters : 'video/mp4,video/avi,video/ogv,video/mpeg,video/ogg,video/quicktime,video/webm,video/x-ms-wmv,video/x-flv,audio/mp3,audio/vnd.wav,audio/ogg,audio/vorbis,audio/webm,audio/mpeg,application/ogg'\n                },\n                pathParam : 'path',\n                select : function(e, files){\n                    if(files && files.length){\n                        // set data field content and meybe detect and set media type here\n                        interaction.object.attr('type', files[0].mime);\n                        $form.find('input[name=data]')\n                            .val(files[0].file)\n                            .trigger('change');\n                    }\n                },\n                open : function(){\n                    //hide tooltip if displayed\n                    if($src.hasClass('tooltipstered')){\n                        $src.blur().tooltipster('hide');\n                    }\n                },\n                close : function(){\n                    //triggers validation : \n                    $src.blur();\n                }\n            });\n\n        };\n\n        $uploadTrigger.on('click', _openResourceMgr);\n\n        //if empty, open file manager immediately\n        if(!$src.val()){\n            _openResourceMgr();\n        }\n    };\n\n    return MediaInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Sleep',[\r\n    'lodash',\r\n    'taoQtiItem/qtiCreator/widgets/states/factory',\r\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\r\n], function(_, stateFactory, SleepState) {\r\n\r\n    var initSleepState = function initSleepState() {\r\n        this.widget.renderInteraction();\r\n        this.widget.$original.append('<div class=\"overlay\"></div>');\r\n    };\r\n\r\n    var exitSleepState = function exitSleepState(){\r\n        this.widget.destroyInteraction();\r\n        this.widget.$original.children('.overlay').remove();\r\n    };\r\n\r\n    return stateFactory.extend(SleepState, initSleepState, exitSleepState);\r\n});\r\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Sleep'\n], function(factory, states){\n    //return factory.createBundle(states, arguments);\n    return factory.createBundle(states, arguments, ['answer', 'correct', 'map']);\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/Widget',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/states',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction'\n], function($, _, Widget, states, MediaInteractionCommonRenderer){\n    \n    var MediaInteractionWidget = _.extend(Widget.clone(), {\n\n        initCreator : function(){\n            var self        = this; \n            var $container  = this.$original;\n            var $item       = $container.parents('.qti-item');\n\n            this.registerStates(states);            \n            Widget.initCreator.call(this);\n            \n            $item\n              .off('.' + this.element.serial)\n              .on('resize.'+ this.element.serial, _.throttle(function(e){\n                    var width = $container.innerWidth();\n                    if(width > 0){\n                        self.element.object.attr('width', $container.innerWidth());\n                        self.destroyInteraction();\n                        self.renderInteraction();\n                    }\n            }, 100));\n        },\n    \n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        },\n\n        renderInteraction : function(){\n            var $container  = this.$original; \n            var interaction = this.element;\n            MediaInteractionCommonRenderer.render.call(interaction.getRenderer(), interaction, {\n                features : 'full',\n                controlPlaying : false\n            });\n        },\n\n        destroyInteraction : function(){\n            var interaction = this.element;\n            MediaInteractionCommonRenderer.destroy.call(interaction.getRenderer(), interaction);    \n        }\n    });\n\n    return MediaInteractionWidget;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/interactions/mediaInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-mediaInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n\t\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t<div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"media-container\\\"></div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/MediaInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/interactions/mediaInteraction'\n], function(_, MediaInteraction, MediaInteractionWidget, tpl){\n    \n    var MediaInteraction = _.clone(MediaInteraction);\n\n    MediaInteraction.template = tpl;\n    \n    MediaInteraction.render = function(interaction, options){\n        \n        \n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        //options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return MediaInteractionWidget.build(\n            interaction,\n            MediaInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),//note : no response required...\n            options\n        );\n    };\n\n    return MediaInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/orderInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", self=this, escapeExpression=this.escapeExpression, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"qti-horizontal\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"qti-vertical\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"horizontal\";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"vertical\";\n  }\n\nfunction program9(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program11(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program13(depth0,data) {\n  \n  \n  return \"icon-down\";\n  }\n\nfunction program15(depth0,data) {\n  \n  \n  return \"icon-right\";\n  }\n\nfunction program17(depth0,data) {\n  \n  \n  return \"icon-up\";\n  }\n\nfunction program19(depth0,data) {\n  \n  \n  return \"icon-left\";\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-orderInteraction \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" \\n     data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n     data-qti-class=\\\"orderInteraction\\\" \\n     data-orientation=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"order-interaction-area\\\">\\n        <ul class=\\\"choice-area square source solid block-listing \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n            \";\n  options={hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </ul>\\n        <div class=\\\"arrow-bar middle\\\">\\n            <span class=\\\"icon-add-to-selection \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(15, program15, data),fn:self.program(13, program13, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\"></span>\\n            <span class=\\\"icon-remove-from-selection \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(19, program19, data),fn:self.program(17, program17, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" inactive\\\"></span>\\n        </div>\\n        <ul class=\\\"result-area decimal target solid block-listing \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n        </ul>\\n        <div class=\\\"arrow-bar\\\">\\n            <span class=\\\"icon-move-before \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(17, program17, data),fn:self.program(19, program19, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" inactive\\\"></span>\\n            <span class=\\\"icon-move-after \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.horizontal), {hash:{},inverse:self.program(13, program13, data),fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" inactive\\\"></span>\\n        </div>\\n    </div>\\n    <div class=\\\"notification-container\\\"></div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction',[\n    'lodash',\n    'jquery',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/orderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'i18n',\n    'jqueryui'\n], function(_, $, tpl, Helper, pciResponse, __){\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10283\n     * \n     * @param {object} interaction\n     */\n    var render = function(interaction){\n\n        var $container = Helper.getContainer(interaction),\n            $choiceArea = $container.find('.choice-area'),\n            $resultArea = $container.find('.result-area'),\n            $iconAdd = $container.find('.icon-add-to-selection'),\n            $iconRemove = $container.find('.icon-remove-from-selection'),\n            $iconBefore = $container.find('.icon-move-before'),\n            $iconAfter = $container.find('.icon-move-after'),\n            $activeChoice = null;\n\n        var _activeControls = function(){\n            $iconAdd.addClass('inactive');\n            $iconRemove.removeClass('inactive').addClass('active');\n            $iconBefore.removeClass('inactive').addClass('active');\n            $iconAfter.removeClass('inactive').addClass('active');\n        };\n\n        var _resetControls = function(){\n            $iconAdd.removeClass('inactive');\n            $iconRemove.removeClass('active').addClass('inactive');\n            $iconBefore.removeClass('active').addClass('inactive');\n            $iconAfter.removeClass('active').addClass('inactive');\n        };\n\n        var _setSelection = function($choice){\n            if($activeChoice){\n                $activeChoice.removeClass('active');\n            }\n            $activeChoice = $choice;\n            $activeChoice.addClass('active');\n            _activeControls();\n        };\n\n        var _resetSelection = function(){\n            if($activeChoice){\n                $activeChoice.removeClass('active');\n                $activeChoice = null;\n            }\n            _resetControls();\n        };\n        \n        $container.on('mousedown.commonRenderer', function(e){\n            _resetSelection();\n        });\n        \n        $choiceArea.on('mousedown.commonRenderer', '>li:not(.deactivated)', function(e){\n            \n            e.stopPropagation();\n            \n            _resetSelection();\n\n            $iconAdd.addClass('triggered');\n            setTimeout(function(){\n                $iconAdd.removeClass('triggered');\n            }, 150);\n\n            //move choice to the result list:\n            $resultArea.append($(this));\n            Helper.triggerResponseChangeEvent(interaction);\n\n            //update constraints :\n            Helper.validateInstructions(interaction);\n        });\n\n        $resultArea.on('mousedown.commonRenderer', '>li', function(e){\n            \n            e.stopPropagation();\n            \n            var $choice = $(this);\n            if($choice.hasClass('active')){\n                _resetSelection();\n            }else{\n                _setSelection($(this));\n            }\n        });\n\n        $iconRemove.on('mousedown.commonRenderer', function(e){\n            \n            e.stopPropagation();\n            \n            if($activeChoice){\n\n                //restore choice back to choice list\n                $choiceArea.append($activeChoice);\n                Helper.triggerResponseChangeEvent(interaction);\n\n                //update constraints :\n                Helper.validateInstructions(interaction);\n            }\n\n            _resetSelection();\n        });\n\n        $iconBefore.on('mousedown.commonRenderer', function(e){\n            \n            e.stopPropagation();\n            \n            var $prev = $activeChoice.prev();\n            if($prev.length){\n                $prev.before($activeChoice);\n                Helper.triggerResponseChangeEvent(interaction);\n            }\n        });\n\n        $iconAfter.on('mousedown.commonRenderer', function(e){\n            \n            e.stopPropagation();\n            \n            var $next = $activeChoice.next();\n            if($next.length){\n                $next.after($activeChoice);\n                Helper.triggerResponseChangeEvent(interaction);\n            }\n        });\n\n        _setInstructions(interaction);\n\n        //bind event listener in case the attributes change dynamically on runtime\n        $(document).on('attributeChange.qti-widget.commonRenderer', function(e, data){\n            if(data.element.getSerial() === interaction.getSerial()){\n                if(data.key === 'maxChoices' || data.key === 'minChoices'){\n                    Helper.removeInstructions(interaction);\n                    _setInstructions(interaction);\n                    Helper.validateInstructions(interaction);\n                }\n            }\n        });\n        \n        _freezeSize($container);\n    };\n    \n    var _freezeSize = function($container){\n        var $orderArea = $container.find('.order-interaction-area');\n        $orderArea.height($orderArea.height());\n    };\n    \n    var _setInstructions = function(interaction){\n\n        var $choiceArea = Helper.getContainer(interaction).find('.choice-area'),\n            $resultArea = Helper.getContainer(interaction).find('.result-area'),\n            min = parseInt(interaction.attr('minChoices')),\n            max = parseInt(interaction.attr('maxChoices'));\n\n        if(min){\n            Helper.appendInstruction(interaction, __('You must use at least ' + min + ' choices'), function(){\n                if($resultArea.find('>li').length >= min){\n                    this.setLevel('success');\n                }else{\n                    this.reset();\n                }\n            });\n        }\n\n        if(max && max < _.size(interaction.getChoices())){\n            var instructionMax = Helper.appendInstruction(interaction, __('You can use maximum ' + max + ' choices'), function(){\n                if($resultArea.find('>li').length >= max){\n                    $choiceArea.find('>li').addClass('deactivated');\n                    this.setMessage(__('Maximum choices reached'));\n                }else{\n                    $choiceArea.find('>li').removeClass('deactivated');\n                    this.reset();\n                }\n            });\n\n            $choiceArea.on('mousedown.commonRenderer', '>li.deactivated', function(){\n                var $choice = $(this);\n                $choice.addClass('brd-error');\n                instructionMax.setLevel('warning', 2000);\n                setTimeout(function(){\n                    $choice.removeClass('brd-error');\n                }, 150);\n            });\n        }\n    };\n\n    var _resetResponse = function(interaction){\n\n        var initialOrder = _.keys(interaction.getChoices());\n        var $choiceArea = Helper.getContainer(interaction).find('.choice-area').append(Helper.getContainer(interaction).find('.result-area>li'));\n        var $choices = $choiceArea.children('.qti-choice');\n        $choices.detach().sort(function(choice1, choice2){\n            return (_.indexOf(initialOrder, $(choice1).data('serial')) > _.indexOf(initialOrder, $(choice2).data('serial')));\n        });\n        $choiceArea.prepend($choices);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10283\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var $choiceArea = Helper.getContainer(interaction).find('.choice-area'),\n            $resultArea = Helper.getContainer(interaction).find('.result-area');\n\n        if(response === null || _.isEmpty(response)){\n            _resetResponse(interaction);\n        }else{\n            try{\n                _.each(pciResponse.unserialize(response, interaction), function(identifier){\n                    $resultArea.append($choiceArea.find('[data-identifier=' + identifier + ']'));\n                });\n            }catch(e){\n                throw new Error('wrong response format in argument : ' + e);\n            }\n        }\n\n        Helper.validateInstructions(interaction);\n    };\n\n    var _getRawResponse = function(interaction){\n        var response = [];\n        Helper.getContainer(interaction).find('.result-area>li').each(function(){\n            response.push($(this).data('identifier'));\n        });\n        return response;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10283\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize(_getRawResponse(interaction), interaction);\n    };\n\n    var getCustomData = function(interaction, data){\n\n        return _.merge(data || {}, {\n            horizontal : (interaction.attr('orientation') === 'horizontal')\n        });\n\n    };\n\n    var destroy = function(interaction){\n        \n        var $container = Helper.getContainer(interaction);\n        $container.find('.qti-choice.active').mousedown();\n\n        //first, remove all events\n        var selectors = [\n            '.choice-area',\n            '.result-area',\n            '.icon-add-to-selection',\n            '.icon-remove-from-selection',\n            '.icon-move-before',\n            '.icon-move-after'\n        ];\n        $container.find(selectors.join(',')).andSelf().off('.commonRenderer');\n        $(document).off('.commonRenderer');\n        \n        $container.find('.order-interaction-area').removeAttr('style');\n        \n        _resetResponse(interaction);\n\n        Helper.removeInstructions(interaction);\n    };\n\n    return {\n        qtiClass : 'orderInteraction',\n        getData : getCustomData,\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        destroy : destroy\n    };\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/choiceInteraction/states/Question'\n], function(stateFactory, Question, ChoiceInteractionQuestionState){\n\n    var OrderInteractionStateQuestion = stateFactory.extend(Question);\n    \n    //reuse the same exact same form as choice interaction\n    OrderInteractionStateQuestion.prototype.initForm = function(){\n         ChoiceInteractionQuestionState.prototype.initForm.call(this, false);\n    };\n\n    return OrderInteractionStateQuestion;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer'\n], function(stateFactory, Answer){\n\n    var OrderInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        \n        //currently only allow \"correct\" state\n        this.widget.changeState('correct');\n        \n    }, function(){\n        \n    });\n\n    return OrderInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'lodash',\n    'i18n'\n], function(stateFactory, Correct, commonRenderer, helper, _, __){\n\n    var InlineChoiceInteractionStateCorrect = stateFactory.create(Correct, function(){\n        \n        _createResponseWidget(this.widget);\n        \n    }, function(){\n        \n        _destroyResponseWidget(this.widget);\n        \n    });\n    \n    var _createResponseWidget = function(widget){\n\n        var interaction = widget.element,\n            response = interaction.getResponseDeclaration(),\n            correctResponse = _.values(response.getCorrect());\n\n        helper.appendInstruction(widget.element, __('Please define the correct order in the box to the right.'));\n\n        commonRenderer.render(widget.element);\n        commonRenderer.setResponse(interaction, _formatResponse(correctResponse));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(_unformatResponse(data.response));\n        });\n    };\n    \n    var _destroyResponseWidget = function(widget){\n        \n        widget.$container.off('responseChange.qti-widget');\n        commonRenderer.destroy(widget.element);\n    };\n    \n    var _formatResponse = function(response){\n        return {list : {identifier : response}};\n    };\n\n    var _unformatResponse = function(formatedResponse){\n        var res = [];\n        if(formatedResponse.list && formatedResponse.list.identifier){\n            res = formatedResponse.list.identifier;\n        }\n        return res;\n    };\n    \n    return InlineChoiceInteractionStateCorrect;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/Correct'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/states/states'\n], function(Widget, states){\n\n    var OrderInteractionWidget = Widget.clone();\n\n    OrderInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return OrderInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/OrderInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/orderInteraction/Widget'\n], function(_, OrderInteraction, OrderInteractionWidget){\n\n    var CreatorOrderInteraction = _.clone(OrderInteraction);\n\n    CreatorOrderInteraction.render = function(interaction, options){\n        \n        return OrderInteractionWidget.build(\n            interaction,\n            OrderInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorOrderInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/customInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"qti-interaction qti-customInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  if (helper = helpers.markup) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.markup); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/runtime/qtiCustomInteractionContext',[],function(){\n\n    //need a global reference to have pciHooks shared in two different requirejs context (\"default\" and \"portableCustomInteraction\")\n    window._pciHooks = window._pciHooks || {};\n\n    /**\n     * Global object accessible by all PCIs\n     * \n     * @type Object\n     */\n    var taoQtiCustomInteractionContext = {\n        /**\n         * register a custom interaction (its runtime model) in global registery\n         * register a renderer\n         * \n         * @param {Object} pciHook\n         * @returns {undefined}\n         */\n        register : function(pciHook){\n            //@todo check pciHook validity\n            window._pciHooks[pciHook.getTypeIdentifier()] = pciHook;\n        },\n        /**\n         * notify when a custom interaction is ready for test taker interaction\n         * \n         * @param {string} pciInstance\n         * @fires custominteractionready\n         */\n        notifyReady : function(pciInstance){\n            //@todo add pciIntance as event data and notify event to delivery engine\n        },\n        /**\n         * notify when a custom interaction is completed by test taker\n         * \n         * @param {string} pciInstance\n         * @fires custominteractiondone\n         */\n        notifyDone : function(pciInstance){\n            //@todo add pciIntance as event data and notify event to delivery engine\n        },\n        /**\n         * Get a cloned object representing the PCI model\n         * \n         * @param {string} pciTypeIdentifier\n         * @returns {Object} clonedPciModel\n         */\n        createPciInstance : function(pciTypeIdentifier){\n\n            if(window._pciHooks[pciTypeIdentifier]){\n\n                var instance = {},\n                    proto = window._pciHooks[pciTypeIdentifier];\n\n                for(var name in proto){\n                    if(typeof proto[name] === 'function'){\n                        //@todo : delegate function call for better performance ?\n                        instance[name] = proto[name];\n                    }else if(proto[name] !== null && typeof proto[name] === 'object'){\n                        //a plain object:\n                        instance[name] = proto[name].constructor();\n                    }else{\n                        //not an object (nor a function) : e.g. 0, 123, '123', null, undefined\n                        instance[name] = proto[name];\n                    }\n                }\n\n                return instance;\n\n            }else{\n                throw 'no portable custom interaction hook found with the id ' + pciTypeIdentifier;\n            }\n        }\n    };\n    \n    \n    return taoQtiCustomInteractionContext;\n});\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/PortableCustomInteraction',[\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/customInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PortableElement',\n    'taoQtiItem/runtime/qtiCustomInteractionContext',\n    'taoQtiItem/qtiItem/helper/util',\n    'lodash',\n    'context'\n], function(tpl, Helper, PortableElement, qtiCustomInteractionContext, util, _, context){\n\n    /**\n     * Get the PCI instance associated to the interaction object\n     * If none exists, create a new one based on the PCI typeIdentifier\n     * \n     * @param {Object} interaction - the js object representing the interaction\n     * @returns {Object} PCI instance\n     */\n    var _getPci = function(interaction){\n\n        var pciTypeIdentifier,\n            pci = interaction.data('pci') || undefined;\n\n        if(!pci){\n\n            pciTypeIdentifier = interaction.typeIdentifier;\n            pci = qtiCustomInteractionContext.createPciInstance(pciTypeIdentifier);\n\n            if(pci){\n\n                //binds the PCI instance to TAO interaction object and vice versa\n                interaction.data('pci', pci);\n                pci._taoCustomInteraction = interaction;\n\n            }else{\n                throw 'no custom interaction hook found for the type ' + pciTypeIdentifier;\n            }\n        }\n\n        return pci;\n    };\n\n    /**\n     * Execute javascript codes to bring the interaction to life.\n     * At this point, the html markup must already be ready in the document.\n     * \n     * It is done in 5 steps : \n     * 1. register required libs in the \"portableCustomInteraction\" context\n     * 2. require all required libs\n     * 3. create a pci instance based on the interaction model\n     * 4. initialize the rendering \n     * 5. restore full state if applicable (state and/or response)\n     * \n     * @param {Object} interaction\n     */\n    var render = function(interaction, options){\n\n        options = options || {};\n\n        var id = interaction.attr('responseIdentifier'),\n            typeIdentifier = interaction.typeIdentifier,\n            baseUrl = this.getOption('baseUrl') || PortableElement.getDocumentBaseUrl(), //require a base url !\n            runtimeLocations = options.runtimeLocations ? options.runtimeLocations : this.getOption('runtimeLocations'),\n            config = _.clone(interaction.properties), //pass a clone instead\n            entryPoint = this.getAbsoluteUrl(interaction.entryPoint),\n            $dom = Helper.getContainer(interaction).children(),\n            localRequirePaths = {\n                qtiCustomInteractionContext : context.root_url + 'taoQtiItem/views/js/runtime/qtiCustomInteractionContext'\n            },\n            localRequireConfig = {},\n            state = {}, //@todo pass state and response to renderer here:\n            response = {base : null};\n        \n        if(runtimeLocations && runtimeLocations[typeIdentifier]){\n            //we are overwriting the runtime libs location:\n            localRequireConfig.runtimeLocation = runtimeLocations[typeIdentifier];\n        }\n\n        //create a new require context to load the libs: \n        var localRequire = PortableElement.getCachedLocalRequire(typeIdentifier, baseUrl, localRequirePaths, localRequireConfig);\n\n        localRequire([entryPoint], function(){\n\n            var pci = _getPci(interaction);\n            if(pci){\n                //call pci initialize() to render the pci\n                pci.initialize(id, $dom[0], config);\n                //restore context (state + response)\n                pci.setSerializedState(state);\n                pci.setResponse(response);\n                //call callback function\n                interaction.triggerPciReady(pci);\n            }\n\n        });\n    };\n\n    /**\n     * Programmatically set the response following the json schema described in\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     * \n     * @param {Object} interaction\n     * @param {Object} response\n     */\n    var setResponse = function(interaction, response){\n\n        _getPci(interaction).setResponse(response);\n    };\n\n    /**\n     * Get the response in the json format described in\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343\n     * \n     * @param {Object} interaction\n     * @returns {Object}\n     */\n    var getResponse = function(interaction){\n\n        return _getPci(interaction).getResponse();\n    };\n\n    /**\n     * Remove the current response set in the interaction\n     * The state may not be restored at this point.\n     * \n     * @param {Object} interaction\n     */\n    var resetResponse = function(interaction){\n\n        _getPci(interaction).resetResponse();\n    };\n\n    /**\n     * Reverse operation performed by render()\n     * After this function is executed, only the inital naked markup remains \n     * Event listeners are removed and the state and the response are reset\n     * \n     * @param {Object} interaction\n     */\n    var destroy = function(interaction){\n\n        _getPci(interaction).destroy();\n    };\n\n    /**\n     * Restore the state of the interaction from the serializedState.\n     * \n     * @param {Object} interaction\n     * @param {Object} serializedState - json format\n     */\n    var setSerializedState = function(interaction, serializedState){\n\n        _getPci(interaction).setSerializedState(serializedState);\n    };\n\n    /**\n     * Get the current state of the interaction as a string.\n     * It enables saving the state for later usage.\n     * \n     * @param {Object} interaction\n     * @returns {Object} json format\n     */\n    var getSerializedState = function(interaction){\n\n        return _getPci(interaction).getSerializedState();\n    };\n\n    return {\n        qtiClass : 'customInteraction',\n        template : tpl,\n        getData : function(customInteraction, data){\n            \n            //remove ns + fix media file path\n            var markup = data.markup;\n            markup = util.removeMarkupNamespaces(markup);\n            markup = PortableElement.fixMarkupMediaSources(markup, this);\n            data.markup = markup;\n            \n            return data;\n        },\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy,\n        getSerializedState : getSerializedState,\n        setSerializedState : setSerializedState\n    };\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/PortableCustomInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/PortableCustomInteraction',\n    'taoQtiItem/qtiCreator/editor/customInteractionRegistry',\n    'taoQtiItem/qtiCreator/helper/commonRenderer'\n], function(_, Renderer, ciRegistry, commonRenderer){\n\n    var CreatorCustomInteraction = _.clone(Renderer);\n\n    CreatorCustomInteraction.render = function(interaction, options){\n        \n        //initial rendering:\n        Renderer.render.call(commonRenderer.get(), interaction, {baseUrl : ciRegistry.getBaseUrl(interaction.typeIdentifier)});\n        \n        var pciCreator = ciRegistry.getCreator(interaction.typeIdentifier),\n            Widget = pciCreator.getWidget();\n        \n        return Widget.build(\n            interaction,\n            Renderer.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n            );\n    };\n\n    return CreatorCustomInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/selectPointInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-graphicInteraction qti-selectPointInteraction clearfix \"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.attributes)),stack1 == null || stack1 === false ? stack1 : stack1['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"image-editor solid\\\">\\n        <div id='graphic-paper-\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"' class=\\\"main-image-box\\\"></div>\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/selectPointInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper'\n], function($, _, __, tpl, graphic, pciResponse, Helper){\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     */\n    var render = function render(interaction){\n        var $container = Helper.getContainer(interaction);\n        var background = interaction.object.attributes;\n        var baseUrl = this.getOption('baseUrl') || '';\n        \n        //create the paper\n        interaction.paper = graphic.responsivePaper( 'graphic-paper-' + interaction.serial, interaction.serial, {\n            width       : background.width, \n            height      : background.height,\n            img         : baseUrl + background.data,\n            imgId       : 'bg-image-' + interaction.serial,\n            container   : $container\n        });\n\n        //enable to select the paper to position a target\n        _enableSelection(interaction);\n\n        //set up the constraints instructions\n        Helper.minMaxChoiceInstructions(interaction, {\n            min: interaction.attr('minChoices'),\n            max: interaction.attr('maxChoices'),\n            choiceCount : false,\n            getResponse : _getRawResponse,\n            onError : function(data){\n                if(data){\n                    graphic.highlightError(data.target, 'success');\n                }\n            }\n        }); \n    };\n\n    /**\n     * Make the image clickable and place targets at the given position.\n     * @private\n     * @param {object} interaction\n     */\n    var _enableSelection = function _enableSelection(interaction){\n        var maxChoices      = interaction.attr('maxChoices');\n        var $container      = Helper.getContainer(interaction);\n        var $imageBox       = $container.find('.main-image-box');\n        var isResponsive    = $container.hasClass('responsive');\n        var image           = interaction.paper.getById('bg-image-' + interaction.serial);\n        var isTouch         = false;\n\n        //used to see if we are in a touch context\n        image.touchstart(function(){\n            isTouch = true;\n            image.untouchstart();\n        });\n\n        //get the point on click\n        image.click(function imageClicked(event){\n\n            if(maxChoices > 0 && _getRawResponse(interaction).length >= maxChoices){\n                Helper.validateInstructions(interaction);\n                return;\n            } \n    \n            //get the current mouse point, even on a responsive paper\n            var point = graphic.getPoint(event, interaction.paper, $imageBox, isResponsive);\n            \n            //add the point to the paper\n            graphic.createTarget(interaction.paper, {\n                point : point, \n                create : changePoint,\n                remove : function pointRemoved (){\n                    changePoint();\n                }\n            });\n        });\n\n        /**\n         * When there is point added or reomved\n         */\n        function changePoint(target){\n            if(isTouch && target){\n                graphic.createTouchCircle(interaction.paper, target.getBBox());\n            }\n            Helper.triggerResponseChangeEvent(interaction);\n            Helper.validateInstructions(interaction, {target : target});\n        }\n    };\n    /**\n     * Get the responses from the interaction\n     * @private \n     * @param {Object} interaction\n     * @returns {Array} of points\n     */\n    var _getRawResponse = function _getRawResponse(interaction){\n        var points = [];\n        interaction.paper.forEach(function(element){\n            var point = element.data('point');\n            if(typeof point === 'object' && point.x && point.y){\n                points.push([Math.round(point.x), Math.round(point.y)]);\n            }\n        });\n        return points;\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var responseValues;\n        if(response && interaction.paper){\n\n            try{\n                responseValues = pciResponse.unserialize(response, interaction);\n            }catch(e){\n            }\n\n            if(_.isArray(responseValues)){\n                _(responseValues)\n                    .flatten()\n                    .map(function(value, index){\n                    if(index % 2 === 0){\n                        return {x : value, y : responseValues[index + 1]};\n                    }\n                })\n                .filter(_.isObject)\n                .forEach(function(point){\n                   graphic.createTarget(interaction.paper, {\n                        point : point\n                   }); \n                });\n            }\n        }\n    };\n\n    /**\n     * Reset the current responses of the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var resetResponse = function resetResponse(interaction){\n        interaction.paper.forEach(function(element){\n            var point = element.data('point');\n            if(typeof point === 'object'){\n                graphic.trigger(element, 'click');\n            }\n        });\n    };\n\n\n    /**\n     i* Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var raw = _getRawResponse(interaction);\n        var response = pciResponse.serialize(_getRawResponse(interaction), interaction);\n        return response;\n    };\n\n    /**\n     * Clean interaction destroy\n     * @param {Object} interaction\n     */\n    var destroy = function destroy(interaction){\n        var $container;\n        if(interaction.paper){\n            $container = Helper.getContainer(interaction);\n        \n            $(window).off('resize.qti-widget.' + interaction.serial);\n            $container.off('resize.qti-widget.' + interaction.serial);\n\n            interaction.paper.clear();\n            Helper.removeInstructions(interaction);\n            \n            $('.main-image-box', $container).empty().removeAttr('style');            \n            $('.image-editor', $container).removeAttr('style'); \n        }\n    };  \n\n    /**\n     * Expose the common renderer for the interaction\n     * @exports qtiCommonRenderer/renderers/interactions/SelectPointInteraction\n     */\n    return {\n        qtiClass : 'selectPointInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy : destroy\n    };\n});\n\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Sleep',[\n    'taoQtiItem/qtiCreator/widgets/states/factory', \n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep'\n], function(stateFactory, SleepState){\n   \n    var initSleepState = function initSleepState(){\n        var widget      = this.widget;\n        var interaction = widget.element;\n        widget.on('metaChange', function(data){\n            if(data.key === 'responsive'){\n                if(data.value === true){\n                    interaction.addClass('responsive');\n                } else {\n                    interaction.removeClass('responsive');\n                }\n            }\n        });\n    };\n\n    var exitSleepState = function exitSleepState(){};\n \n    return stateFactory.extend(SleepState, initSleepState, exitSleepState); \n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/selectPoint', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n\\n    \\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Interaction Background\", options) : helperMissing.call(depth0, \"__\", \"Interaction Background\", options)))\n    + \"</h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"data\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"File\", options) : helperMissing.call(depth0, \"__\", \"File\", options)))\n    + \"</label>\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The file path to the image.\", options) : helperMissing.call(depth0, \"__\", \"The file path to the image.\", options)))\n    + \"</div>\\n        <input type=\\\"text\\\" name=\\\"data\\\" value=\\\"\";\n  if (helper = helpers.data) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.data); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$notEmpty; $fileExists(baseUrl=\";\n  if (helper = helpers.baseUrl) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.baseUrl); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")\\\"/>\\n        <button class=\\\"btn-info small block\\\" data-role=\\\"upload-trigger\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Select image\", options) : helperMissing.call(depth0, \"__\", \"Select image\", options)))\n    + \"</button>\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"width\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Width\", options) : helperMissing.call(depth0, \"__\", \"Width\", options)))\n    + \"</label>\\n        <input name=\\\"width\\\" value=\\\"\";\n  if (helper = helpers.width) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.width); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"height\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Height\", options) : helperMissing.call(depth0, \"__\", \"Height\", options)))\n    + \"</label>\\n        <input name=\\\"height\\\" value=\\\"\";\n  if (helper = helpers.height) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.height); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"type\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Mime Type\", options) : helperMissing.call(depth0, \"__\", \"Mime Type\", options)))\n    + \"</label>\\n        <input name=\\\"type\\\" value=\\\"\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <hr>\\n\\n    <h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Allowed number of choices\", options) : helperMissing.call(depth0, \"__\", \"Allowed number of choices\", options)))\n    + \"\\n        <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n        <span class=\\\"tooltip-content\\\">\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The minimum number of choices that the candidate is required to select to form a valid response.\", options) : helperMissing.call(depth0, \"__\", \"The minimum number of choices that the candidate is required to select to form a valid response.\", options)))\n    + \"<br>\\n            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The maximum number of choices that the candidate is allowed to select.\", options) : helperMissing.call(depth0, \"__\", \"The maximum number of choices that the candidate is allowed to select.\", options)))\n    + \"\\n        </span>\\n    </h3>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"minChoices\\\" class=\\\"spinner\\\">Min</label>\\n        <input name=\\\"minChoices\\\" value=\\\"\";\n  if (helper = helpers.minChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.minChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" type=\\\"text\\\" />\\n    </div>\\n\\n    <div class=\\\"panel\\\">\\n        <label for=\\\"maxChoices\\\" class=\\\"spinner\\\">Max</label>\\n        <input name=\\\"maxChoices\\\" value=\\\"\";\n  if (helper = helpers.maxChoices) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.maxChoices); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" type=\\\"text\\\" />\\n    </div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Question',[\n    'jquery',\n    'lodash',\n    'util/image',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/imageSelector',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/selectPoint'\n], function($, _, imageUtil, stateFactory, Question, imageSelector, formElement, interactionFormElement, formTpl){\n\n    \n    /**\n     * The question state for the selectPoint interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Question\n     */\n    var SelectPointInteractionStateQuestion = stateFactory.extend(Question);\n\n    /**\n     * Initialize the form linked to the interaction\n     */\n    SelectPointInteractionStateQuestion.prototype.initForm = function(){\n\n        var widget = this.widget;\n        var options = widget.options;\n        var interaction = widget.element;\n        var $form = widget.$form;\n\n        $form.html(formTpl({\n            baseUrl         : options.baseUrl,\n            maxChoices      : parseInt(interaction.attr('maxChoices')),\n            minChoices      : parseInt(interaction.attr('minChoices')),\n            choicesCount    : _.size(interaction.getChoices()),\n            data            : interaction.object.attr('data'),\n            width           : interaction.object.attr('width'),\n            height          : interaction.object.attr('height'),\n            type            : interaction.object.attr('type')\n        }));\n\n        imageSelector($form, options); \n\n        formElement.initWidget($form);\n        \n        //init data change callbacks\n        var callbacks = formElement.getMinMaxAttributeCallbacks(this.widget.$form, 'minChoices', 'maxChoices');\n        callbacks.data = function(inteaction, value){\n            interaction.object.attr('data', value);\n            widget.rebuild({\n                ready:function(widget){\n                    widget.changeState('question');\n                }\n            });\n        };\n        callbacks.width = function(inteaction, value){\n            interaction.object.attr('width', value);\n        };\n        callbacks.height = function(inteaction, value){\n            interaction.object.attr('height', value);\n        };\n        callbacks.type = function(inteaction, value){\n            if(!value || value === ''){\n                interaction.object.removeAttr('type');\n            } else {\n                interaction.object.attr('type', value);\n            }\n        };\n        formElement.setChangeCallbacks($form, interaction, callbacks, { validateOnInit : false });\n        \n        interactionFormElement.syncMaxChoices(widget);\n    };\n\n    return SelectPointInteractionStateQuestion;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    /**\n     * Just forward to the correct/map states\n     */\n    function initAnswerState(){\n        //answerStateHelper.forward(this.widget);\n        this.widget.changeState('map');\n    }\n    \n    \n    function exitAnswerState(){\n        //needed an exit callback even empty\n    }\n    \n    \n    /**\n     * The answer state for the selectPoint interaction\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/states/Answer\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Answer\n     */\n    return stateFactory.extend(Answer, initAnswerState, exitAnswerState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Map',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse', \n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicInteractionShapeEditor',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/graphicScorePopup',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/response/graphicScoreMappingForm',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'ui/incrementer',\n    'ui/tooltipster'\n], function($, _, __, stateFactory, Map, SelectPointInteraction, helper, graphicHelper, PciResponse, answerStateHelper, shapeEditor, grahicScorePopup, mappingFormTpl, formElement, incrementer, tooltipster){\n\n    /**\n     * Initialize the Map state.\n     */\n    function initMapState(){\n        var widget          = this.widget;\n        var interaction     = widget.element;\n        var $container      = widget.$original; \n        var response        = interaction.getResponseDeclaration();\n\n        widget._targets = [];\n\n        if(!interaction.paper){\n            return;\n        }\n\n        //really need to destroy before ? \n        SelectPointInteraction.destroy(interaction);\n        \n        //add a specific instruction\n        helper.appendInstruction(interaction, __('Please create areas that correspond to the response and associate them a score.\\n' + \n                                                 'You can also position the target to the exact point as the correct response.'));\n        interaction.responseMappingMode = true;\n        if(_.isPlainObject(response.mapEntries)){\n            response.mapEntries = _.values(response.mapEntries);\n        }\n\n        //here we do not use the common renderer but the creator's widget to get only a basic paper with the choices\n        interaction.paper = widget.createPaper(); \n       \n        //we create the shapes from the response mapping \n        setCurrentResponses(widget);\n        \n        //set up of the shape editor\n        widget._editor = createEditor(widget);\n     \n        listenResponseAttrChange(widget);\n  \n    }\n\n    /**\n     * Creates an identifier based on an areaMapping entry\n     * @private\n     * @param {Object} area - the map entry\n     * @returns {String} the identifier\n     */\n    function areaId(area){\n        return area.shape + '-' + area.coords.replace(/,*/g, '-');\n    }\n\n    /**\n     * Get the index of a area map entry in the entries\n     * @private\n     * @param {Object} response - the response declaration\n     * @param {String} id - the identifier from areaId used to retrieve the index\n     * @returns {Number|Boolean} the index or false\n     */\n    function getAreaIndex(response, id){\n        var found = false;\n        _.forEach(response.mapEntries, function(area, index){\n            if(areaId(area) === id){\n                found = index;\n                return false;\n            }\n        });\n        return found;\n    }\n \n     \n    /**\n     * Creates the shapes on the paper from the responses\n     * @private\n     * @param {Object} widget - the current widget\n     */\n    function setCurrentResponses(widget){\n        var interaction = widget.element;\n        var $container  = widget.$original; \n        var response    = interaction.getResponseDeclaration();\n        var corrects    = _.values(response.getCorrect());\n\n        //set up for the existing areas\n        _.forEach(response.mapEntries, function(area){\n            var shape = widget.createResponseArea(area.shape, area.coords);\n            setUpScoringArea(widget, area, shape, false); \n        });\n\n        //set up a target if\n        if(answerStateHelper.defineCorrect(response) && corrects.length){\n             _.forEach(corrects, function(correct){\n                var point = correct.split(' ');\n                if(point.length >= 2){\n                   var target = graphicHelper.createTarget(interaction.paper, {\n                        point : {\n                            x : point[0],\n                            y : point[1]\n                        }\n                   }); \n                   widget._targets.push(target.id);\n                }\n           });\n        }\n\n        //hide popups by clicking the paper \n        interaction.paper.getById('bg-image-' + interaction.serial).click(function(){\n            $('.-mapping-editor', $container).hide();\n        });\n    }\n\n    /**\n     * Creates and initialize the shape editor \n     * @private\n     * @param {Object} widget - the current widget\n     * @return {ShapeEditor} the editor\n     */\n    function createEditor(widget){\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n\n        //instantiate the shape editor, attach it to the widget to retrieve it during the exit phase\n        var editor = shapeEditor(widget, {\n            currents : response.mapEntries.map(areaId).concat(widget._targets),\n            target : true,\n            shapeCreated : function(shape, type){\n                var point, corrects, area;\n                if(type === 'target'){\n                    //add a correct response \n                    point = shape.data('target');\n                    corrects = response.getCorrect() || [];\n                    corrects.push(qtiPoint(point));\n                    response.setCorrect(corrects);\n\n                } else {\n                    //create an area for the mapping\n                    area = {\n                        shape  : type === 'path' ? 'poly' : type,\n                        coords : graphicHelper.qtiCoords(shape),\n                        mappedValue :  response.mappingAttributes.defaultValue || '0'\n                    };\n                    setUpScoringArea(widget, area, shape, true);\n\n                    response.mapEntries.push(area);\n                }\n            },\n            shapeRemoved : function(id, data){\n                var scoreElt;\n                if(/^target/.test(id) && data.target){\n                    //remove from the correct response\n                    response.setCorrect(\n                        _.without(response.getCorrect(), qtiPoint(data.target))\n                    );\n                } else {\n                    //remove the score and the popup\n                    scoreElt = interaction.paper.getById('score-' + id);\n                    if(scoreElt){\n                        scoreElt.remove();\n                    }\n                    $('#score-popup-' + id).remove(); \n                    \n                    //remove the area from the mapping\n                    _.remove(response.mapEntries, function(area){\n                        return id && areaId(area) === id;\n                    });\n                }\n            },\n            enterHandling : function(shape){\n                if(shape.type === 'set'){\n                    shape.forEach(function(setElt){\n                        if(setElt.type === 'path'){\n                            setElt.attr(graphicHelper._style['target-hover']);\n                            return;\n                        }\n                    });\n    \n                } else {\n                    //move the score back the shape and show the popup\n                    shape.toFront();\n                    $('#score-popup-' + shape.id).show(); \n                }\n            },\n            quitHandling : function(shape){\n                if(shape.type === 'set'){\n                    shape.forEach(function(setElt){\n                        if(setElt.type === 'path'){\n                            setElt.attr(graphicHelper._style['target-success']);\n                            return;\n                        }\n                    });\n                } else {\n                    //move the score in above the shape and hide the popup\n                    var scoreElt = interaction.paper.getById('score-' + shape.id);\n                    if(scoreElt){\n                        scoreElt.show().toFront();\n                    }\n                    $('#score-popup-' + shape.id).hide();\n                } \n            },\n            shapeChanging : function(shape){\n                //move the score and the popup to create them again once the shape has moved\n                var scoreElt = interaction.paper.getById('score-' + shape.id);\n                if(scoreElt){\n                    scoreElt.remove();\n                }\n                $('#score-popup-' + shape.id).remove(); \n            },\n            shapeChange : function(shape){\n                //now the shape has moved, so we update the mapping and create again the score and the popup\n                var index = getAreaIndex(response, shape.id);\n                var mapEntry;\n                if(index !== false){\n                    mapEntry = response.mapEntries[index];\n                    response.mapEntries[index].coords = graphicHelper.qtiCoords(shape);\n                    setUpScoringArea(widget, mapEntry, shape, mapEntry.mappedValue === response.mappingAttributes.defaultValue);\n                    shape.id = areaId(mapEntry);\n                }\n            }\n        });\n\n        //Create our brand new editor\n        editor.create();\n\n        return editor;\n    }\n\n    /**\n     * Format a point to the qti format\n     * @param {Object} point\n     * @param {Number} point.x \n     * @param {Number} point.y\n     * @returns {String} the point as \"x y\"\n     */\n    function qtiPoint(point){\n        return Math.round(point.x) + ' ' + Math.round(point.y);\n    }\n \n    /**\n     * Creates the score element and the popup to view/edit the score \n     * @private\n     * @param {Object} widget - the current widget\n     * @param {Object} area   - the response area entry\n     * @param {Raphael.Element} shape   - the related shape\n     * @param {Boolean} default - if the score uses the default value\n     */\n    function setUpScoringArea(widget, area, shape, defaults){\n        var interaction     = widget.element;\n        var $container      = widget.$original; \n        var isResponsive    = $container.hasClass('responsive');\n        var response        = interaction.getResponseDeclaration();\n        var id              = areaId(area);        \n        var $imageBox       = $('.main-image-box', $container);\n        var $popup          = grahicScorePopup(interaction.paper, shape, $imageBox, isResponsive);\n        var score           = area.mappedValue || response.mappingAttributes.defaultValue || '0';\n\n        var scoreElt    = graphicHelper.createShapeText(interaction.paper, shape, {\n                    id          : 'score-' + id,\n                    content     : area.mappedValue + '',\n                    style       : 'score-text-default',\n                    title       : __('Score value'),\n                    shapeClick  : true\n                });\n        scoreElt.data('default', !!defaults);\n        shape.id = id; \n\n        $popup.attr('id', 'score-popup-' + id);\n\n        //create manually the mapping form (detached)\n        var $form = $(mappingFormTpl({\n            score     : area.mappedValue,\n            scoreMin  : response.getMappingAttribute('lowerBound'),\n            scoreMax  : response.getMappingAttribute('upperBound'),\n            noCorrect : true\n        }));\n        \n        //set up the form data binding\n        formElement.setChangeCallbacks($form, response, {\n            score : function(response, value){\n                if(value === ''){\n                    scoreElt.attr({text : response.mappingAttributes.defaultValue})\n                             .data('default', true);\n                } else {\n                    scoreElt.attr({text : value})\n                             .data('default', false);\n                }\n                area.mappedValue = parseFloat(value);\n            }\n        });\n        $form.appendTo($popup);\n    }\n\n    /**\n     * Listen for changes in the response form that affects the creator : defaultValue and defineCorrect. \n     * @private\n     * @param {Object} widget - the current widget\n     */\n    function listenResponseAttrChange(widget){\n        var interaction = widget.element;\n        var $container = widget.$container;        \n        var $target = $container.find('[data-type=\"target\"]');\n        var $separator = $target.prev('.separator');\n\n        //update the default scores when the form value change\n        widget.on('mappingAttributeChange', function(data){\n            if(data.key === 'defaultValue'){\n                interaction.paper.forEach(function(element){\n                    if(/^score/.test(element.id) && element.data('default') === true){\n                        element.attr({text : data.value });\n                    }\n                });\n            }\n        });\n\n        //update the targets when the defineCorrect field cahnges\n        widget.on('metaChange', function(data){\n            if(data.key === 'defineCorrect'){\n               if(data.value){\n                    $target.show();\n                    $separator.show();\n                } else {\n                    $target.hide();\n                    $separator.hide();\n    \n                    //remove targets\n                    _.forEach(widget._targets, function(targetId){\n                        var target = interaction.paper.getById(targetId);\n                        var layer  = interaction.paper.getById('layer-' + targetId);\n                        target.remove();\n                        layer.remove();\n                    }); \n                }\n            } \n        });\n    }\n\n    /**\n     * Exit the map state\n     */\n    function exitMapState(){\n        var widget = this.widget;\n        var interaction = widget.element;\n\n        if(!interaction.paper){\n            return;\n        }\n\n        if(widget._editor){\n            widget._editor.destroy();\n        }\n        \n        //destroy the common renderer\n        helper.removeInstructions(interaction);\n        SelectPointInteraction.destroy(interaction); \n\n        //initialize again the widget's paper\n        interaction.paper = this.widget.createPaper();\n    }\n\n    /**\n     * The map answer state for the selectPoint interaction\n     * @extends taoQtiItem/qtiCreator/widgets/states/Map\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Map\n     */\n    return  stateFactory.create(Map, initMapState, exitMapState);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Sleep',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/Map'\n], function(factory, states){\n\n    //creates a state bundle for the interaction\n    return factory.createBundle(states, arguments);\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/Widget',[\n    'jquery', 'lodash', 'i18n',\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/graphicInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/states/states',\n    'taoQtiItem/qtiCommonRenderer/helpers/Graphic',\n], function($, _, __, Widget, GraphicWidget, states, graphicHelper){\n\n    /**\n     * The Widget that provides components used by the QTI Creator for the SelectPoint Interaction\n     *\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/Widget\n     * @extends taoQtiItem/qtiCreator/widgets/interactions/GraphicInteraction/Widget\n     *\n     * @exports taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/Widget\n     */      \n    var SelectPointInteractionWidget = _.extend(Widget.clone(), GraphicWidget, {\n\n        /**\n         * Initialize the widget\n         * @see {taoQtiItem/qtiCreator/widgets/interactions/Widget#initCreator}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        initCreator : function(options){\n            var paper;\n            this.baseUrl = options.baseUrl;\n            this.choiceForm = options.choiceForm;\n            \n            this.registerStates(states);\n            \n            //call parent initCreator\n            Widget.initCreator.call(this);\n           \n            paper = this.createPaper(); \n            if(paper){\n                this.element.paper = paper;\n            }\n        },\n\n        /**\n         * Gracefull destroy the widget\n         * @see {taoQtiItem/qtiCreator/widgets/Widget#destroy}\n         * @param {Object} options - extra options \n         * @param {String} options.baseUrl - the resource base url\n         * @param {jQueryElement} options.choiceForm = a reference to the form of the choices\n         */\n        destroy : function(){\n\n            var $container = this.$original;\n            var $item      = $container.parents('.qti-item');\n\n            //stop listening the resize\n            $item.off('resize.gridEdit.' + this.element.serial);\n            $(window).off('resize.qti-widget.' + this.element.serial);\n            $container.off('resize.qti-widget.' + this.element.serial);\n\n            //call parent destroy\n            Widget.destroy.call(this);\n        },\n\n        /**\n         * Create shapes for the response mapping areas\n         * @param {String} shapeType - the QTI shape type \n         * @param {String} coords - the QTI shape coords\n         * @returns {Raphael.Element} the shape\n         */ \n        createResponseArea : function(shapeType, coords){\n            return graphicHelper.createElement(this.element.paper, shapeType, coords, {\n                touchEffect : false\n            });\n        }\n\n   });\n\n    return SelectPointInteractionWidget;\n});\n\n","/**\n * @author Bertrand Chevrier <bertrand@taotesting.com>\n */\ndefine('taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/selectPointInteraction/Widget'\n], function(_, SelectPointInteraction, SelectPointInteractionWidget){\n        \n    /**\n     * The CreatorSelectPointInteraction  Renderer \n     * @extends taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction\n     * @exports taoQtiItem/qtiCreator/renderers/interactions/SelectPointInteraction\n     */\n    var CreatorSelectPointInteraction = _.clone(SelectPointInteraction);\n\n    /**\n     * Render the interaction for authoring.\n     * It delegates the rendering to the widget layer.\n     * @param {Object} interaction - the model\n     * @param {Object} [options] - extra options\n     */\n    CreatorSelectPointInteraction.render = function(interaction, options){\n        options = options || {};\n        options.baseUrl = this.getOption('baseUrl');\n        options.choiceForm = this.getOption('choiceOptionForm');\n        options.uri = this.getOption('uri');\n        options.lang = this.getOption('lang');\n        options.mediaManager = this.getOption('mediaManager');\n        \n        return SelectPointInteractionWidget.build(\n            interaction,\n            SelectPointInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorSelectPointInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/sliderInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-sliderInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"sliderInteraction\\\" >\\r\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n    <div class=\\\"instruction-container\\\"></div>\\r\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction',[\n    'lodash',\n    'jquery',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/sliderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'nouislider'\n], function(_, $, tpl, Helper, pciResponse){\n    'use strict';\n\n    var _slideTo = function(options){\n        options.sliderCurrentValue.find('.qti-slider-cur-value').text(options.value);\n        options.sliderValue.val(options.value);\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     * \n     * @param {object} interaction\n     */\n    var render = function(interaction){\n\n        var attributes = interaction.getAttributes(),\n            $container = interaction.getContainer(),\n            $el = $('<div />').attr({'id' : attributes.identifier + '-qti-slider', 'class' : 'qti-slider'}), //slider element\n        $sliderLabels = $('<div />').attr({'class' : 'qti-slider-values'}),\n        $sliderCurrentValue = $('<div />').attr({'id' : attributes.identifier + '-qti-slider-cur-value', 'class' : 'qti-slider-cur-value'}), //show the current selected value\n        $sliderValue = $('<input />').attr({'type' : 'hidden', 'id' : attributes.identifier + '-qti-slider-value'}); //the input that always holds the slider value\n\n        //getting the options\n        var orientation = 'horizontal',\n            reverse = typeof attributes.reverse !== 'undefined' && attributes.reverse ? true : false, //setting the slider whether to be reverse or not \n            min = parseInt(attributes.lowerBound),\n            max = parseInt(attributes.upperBound),\n            step = typeof attributes.step !== 'undefined' && attributes.step ? parseInt(attributes.step) : 1, //default value as per QTI standard\n            steps = (max - min) / step; //number of the steps\n\n        //add the containers\n        $sliderCurrentValue.append('<span class=\"qti-slider-cur-value-text\">Current value: </span>')\n            .append('<span class=\"qti-slider-cur-value\"></span>');\n\n        $sliderLabels.append('<span class=\"slider-min\">' + (!reverse ? min : max) + '</span>')\n            .append('<span class=\"slider-max\">' + (!reverse ? max : min) + '</span>');\n\n        interaction.getContainer().append($el)\n            .append($sliderLabels)\n            .append($sliderCurrentValue)\n            .append($sliderValue);\n\n        //setting the orientation of the slider\n        if(typeof attributes.orientation !== 'undefined' && $.inArray(attributes.orientation, ['horizontal', 'vertical']) > -1){\n            orientation = attributes.orientation;\n        }\n\n        var sliderSize = 0;\n\n        if(orientation === 'horizontal'){\n            $container.addClass('qti-slider-horizontal');\n        }else{\n            var maxHeight = 300;\n            sliderSize = steps * 20;\n            if(sliderSize > maxHeight){\n                sliderSize = maxHeight;\n            }\n            $container.addClass('qti-slider-vertical');\n            $el.height(sliderSize + 'px');\n            $sliderLabels.height(sliderSize + 'px');\n        }\n\n        //set the middle value if the stepLabel attribute is enabled\n        if(typeof attributes.stepLabel !== 'undefined' && attributes.stepLabel){\n            var middleStep = parseInt(steps / 2),\n                leftOffset = (100 / steps) * middleStep,\n                middleValue = reverse ? max - (middleStep * step) : min + (middleStep * step);\n\n            if(orientation === 'horizontal'){\n                $sliderLabels.find('.slider-min').after('<span class=\"slider-middle\" style=\"left:' + leftOffset + '%\">' + middleValue + '</span>');\n            }else{\n                $sliderLabels.find('.slider-min').after('<span class=\"slider-middle\" style=\"top:' + leftOffset + '%\">' + middleValue + '</span>');\n            }\n\n        }\n\n        //create the slider\n        $el.noUiSlider({\n            start : reverse ? max : min,\n            range: {\n                'min': min,\n                'max': max\n            },\n            step : step,\n            orientation : orientation\n        }).on('slide', function(e){\n            var val = parseInt($(this).val());\n            if((interaction.attr('reverse'))){\n                val = (max + min) - val;\n            }\n            val = Math.round(val * 1000) / 1000;\n            _slideTo({\n                'value' : val,\n                'sliderValue' : $sliderValue,\n                'sliderCurrentValue' : $sliderCurrentValue\n            });\n            \n            Helper.triggerResponseChangeEvent(interaction);\n        });\n\n        _slideTo({\n            'value' : min,\n            'sliderValue' : $sliderValue,\n            'sliderCurrentValue' : $sliderCurrentValue\n        });\n    };\n\n    var resetResponse = function(interaction){\n        var attributes = interaction.getAttributes(),\n            $el = $('#' + attributes.identifier + '-qti-slider'),\n            $sliderValue = $('#' + attributes.identifier + '-qti-slider-value'),\n            $sliderCurrentValue = $('#' + attributes.identifier + '-qti-slider-cur-value'),\n            min = parseInt(attributes.lowerBound),\n            max = parseInt(attributes.upperBound),\n            reverse = typeof attributes.reverse !== 'undefined' && attributes.reverse ? true : false,\n            startValue = reverse ? max : min;\n\n        _slideTo({\n            'value' : min,\n            'sliderValue' : $sliderValue,\n            'sliderCurrentValue' : $sliderCurrentValue\n        });\n\n        $el.val(startValue);\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n        var attributes = interaction.getAttributes(),\n            $sliderValue = $('#' + attributes.identifier + '-qti-slider-value'),\n            $sliderCurrentValue = $('#' + attributes.identifier + '-qti-slider-cur-value'),\n            $el = $('#' + attributes.identifier + '-qti-slider'),\n            min = parseInt(attributes.lowerBound),\n            max = parseInt(attributes.upperBound),\n            value;\n\n        value = pciResponse.unserialize(response, interaction)[0];\n\n        _slideTo({\n            'value' : value,\n            'sliderValue' : $sliderValue,\n            'sliderCurrentValue' : $sliderCurrentValue\n        });\n        \n        $el.val(interaction.attr('reverse') ? (max + min) - value : value);\n    };\n\n    var _getRawResponse = function(interaction){\n\n        var value,\n            attributes = interaction.getAttributes(),\n            baseType = interaction.getResponseDeclaration().attr('baseType'),\n            min = parseInt(attributes.lowerBound),\n            $sliderValue = $('#' + attributes.identifier + '-qti-slider-value');\n\n        if(baseType === 'integer'){\n            value = parseInt($sliderValue.val());\n        }else if(baseType === 'float'){\n            value = parseFloat($sliderValue.val());\n        }\n\n        return isNaN(value) ? min : value;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        return pciResponse.serialize([_getRawResponse(interaction)], interaction);\n    };\n    \n    var destroy = function(interaction) {\n        var $container = interaction.getContainer();\n        \n        $container.empty();\n    }\n\n    return {\n        qtiClass : 'sliderInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        destroy: destroy\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/slider', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"\\n<div class=\\\"panel\\\">\\n    <label for=\\\"lowerBound\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Lower Bound\", options) : helperMissing.call(depth0, \"__\", \"Lower Bound\", options)))\n    + \"</label>\\n    <input name=\\\"lowerBound\\\" value=\\\"\";\n  if (helper = helpers.lowerBound) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.lowerBound); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" type=\\\"text\\\" />\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The lower bound of the slider\", options) : helperMissing.call(depth0, \"__\", \"The lower bound of the slider\", options)))\n    + \"</span>\\n    <label for=\\\"upperBound\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Upper Bound\", options) : helperMissing.call(depth0, \"__\", \"Upper Bound\", options)))\n    + \"</label>\\n    <input name=\\\"upperBound\\\" value=\\\"\";\n  if (helper = helpers.upperBound) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.upperBound); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" type=\\\"text\\\" />\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The upper bound of the slider\", options) : helperMissing.call(depth0, \"__\", \"The upper bound of the slider\", options)))\n    + \"</span>\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"step\\\" class=\\\"spinner\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Step\", options) : helperMissing.call(depth0, \"__\", \"Step\", options)))\n    + \"</label>\\n    <input name=\\\"step\\\" value=\\\"\";\n  if (helper = helpers.step) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.step); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"0\\\" data-max=\\\"\";\n  if (helper = helpers.upperBound) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.upperBound); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <span class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The number of units corresponding to a step on the slider\", options) : helperMissing.call(depth0, \"__\", \"The number of units corresponding to a step on the slider\", options)))\n    + \"</span>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Question',[\n'taoQtiItem/qtiCreator/widgets/states/factory',\n'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/slider'\n], function(stateFactory, Question, formElement, formTpl){\n    var SliderInteractionStateQuestion = stateFactory.extend(Question);\n    SliderInteractionStateQuestion.prototype.initForm = function(){\n        var _widget = this.widget,\n        $form = _widget.$form,\n        interaction = _widget.element;\n\n        $form.html(formTpl({\n            // tpl data for the interaction\n            lowerBound : parseFloat(interaction.attr('lowerBound')),\n            upperBound : parseFloat(interaction.attr('upperBound')),\n            orientation : interaction.attr('orientation'),\n            reverse : !!interaction.attr('reverse'),\n            step : parseInt(interaction.attr('step')),\n            stepLabel : !!interaction.attr('stepLabel')\n        }));\n        \n        formElement.initWidget($form);\n        //  init data change callbacks\n        var callbacks = {};\n        \n        // -- lowerBound Callback\n        callbacks.lowerBound = function(interaction, attrValue, attrName){\n            \n            interaction.attr('lowerBound', parseFloat(attrValue));\n            \n            var lowerBound = interaction.attr('lowerBound');\n            var upperBound = interaction.attr('upperBound');\n            var sliderLength = upperBound-lowerBound; //the lenght of the slider\n            var step = interaction.attr('step');\n            var reverse = !!interaction.attr('reverse');\n\n            //if min is greater than max change upperBound to be like lowerBound\n            if(lowerBound>upperBound){\n                callbacks.upperBound(interaction, lowerBound);\n                _widget.$form.find('input[name=\"upperBound\"]').val(lowerBound);\n            }\n            \n            //check if the lendth of the slide is smaller than the step\n            if(sliderLength<step && sliderLength>=0){\n                callbacks.step(interaction, sliderLength);\n                _widget.$form.find('input[name=\"step\"]').val(sliderLength);\n            }\n            _widget.$container.find((!reverse) ? '.slider-min' : '.slider-max').text(attrValue);\n            _widget.$container.find('span.qti-slider-cur-value').text(lowerBound);\n            _widget.$container.find('.qti-slider').noUiSlider({ range: { 'min': lowerBound, 'max': upperBound }}, true);\n            _widget.$container.find('.qti-slider').val(lowerBound);\n        };\n        \n        // -- upperBound Callback\n        callbacks.upperBound = function(interaction, attrValue, attrName){\n            \n            interaction.attr('upperBound', parseFloat(attrValue));\n            \n            var lowerBound = interaction.attr('lowerBound');\n            var upperBound = interaction.attr('upperBound');\n            var sliderLength = upperBound-lowerBound; //the lenght of the slider\n            var step = interaction.attr('step');\n            var reverse = !!interaction.attr('reverse');\n            \n            //if max is smaller than min then change lowerBound to be like upperBound\n            if(upperBound<lowerBound){\n                callbacks.lowerBound(interaction, upperBound);\n                _widget.$form.find('input[name=\"lowerBound\"]').val(upperBound);\n            }\n            \n            //check if the lendth of the slide is smaller than the step\n            if(sliderLength<step && sliderLength>=0){\n                callbacks.step(interaction, sliderLength);\n                _widget.$form.find('input[name=\"step\"]').val(sliderLength);\n            }\n            _widget.$form.find('input[name=\"step\"]').incrementer('options', {max: upperBound});\n            _widget.$container.find((!reverse) ? '.slider-max' : '.slider-min').text(attrValue);\n            _widget.$container.find('.qti-slider').noUiSlider({ range: { 'min': interaction.attr('lowerBound'), 'max': interaction.attr('upperBound') } }, true);\n        };\n        \n        // -- orientation Callback\n        callbacks.orientation = function(interaction, attrValue, attrName){\n            interaction.attr('orientation', attrValue);\n            \n            var orientation = (interaction.attr('orientation')) ? interaction.attr('orientation') : 'horizontal';\n            var reverse = interaction.attr('reverse');\n            \n            _widget.$container.find('.qti-slider').noUiSlider({ 'orientation': interaction.attr('orientation') }, true);\n        };\n        \n        // -- reverse Callback\n        callbacks.reverse = function(interaction, attrValue, attrName){\n            \n            interaction.attr('reverse', !!attrValue);\n            \n            var reverse = interaction.attr('reverse');\n            var lowerBound = parseInt(interaction.attr('lowerBound'));\n            var upperBound = parseInt(interaction.attr('upperBound'));\n            var $sliderElt = _widget.$container.find('.qti-slider');\n            var start = (reverse) ? upperBound : lowerBound;\n            $sliderElt.noUiSlider({ start: start }, true);\n            \n            _widget.$container.find('span.qti-slider-cur-value').text(lowerBound);\n            _widget.$container.find('.slider-min').text(!reverse ? lowerBound : upperBound);\n            _widget.$container.find('.slider-max').text(!reverse ? upperBound : lowerBound);\n        };\n        \n        // -- step Callback\n        callbacks.step = function(interaction, attrValue, attrName){\n            \n            var lowerBound = interaction.attr('lowerBound');\n            var upperBound = interaction.attr('upperBound');\n            var currentStep = parseInt(attrValue);\n            var sliderLength = upperBound-lowerBound; //the lenght of the slider\n            if(sliderLength>=currentStep){\n                interaction.attr('step', currentStep);\n                _widget.$container.find('.qti-slider').noUiSlider({ 'step': interaction.attr('step') }, true);\n                _widget.$form.find('input[name=\"step\"]').incrementer('options', {max: sliderLength});\n            }\n        };\n        \n        // -- stepLabel Callback\n        callbacks.stepLabel = function(interaction, attrValue, attrName){\n            \n            interaction.attr('stepLabel', !!attrValue);\n            \n            _widget.$container.find('span.slider-middle').remove();\n            \n            if (interaction.attr('stepLabel')) {\n                var upperBound = interaction.attr('upperBound');\n                var lowerBound = interaction.attr('lowerBound');\n                var step = interaction.attr('step');\n                var reverse = interaction.attr('reverse');\n                    \n                var steps = parseInt((upperBound - lowerBound) / step);\n                var middleStep = parseInt(steps / 2);\n                var leftOffset = (100 / steps) * middleStep;\n                var middleValue = (reverse) ? upperBound - middleStep * step : lowerBound + middleStep * step;\n                _widget.$container.find('.slider-min').after('<span class=\"slider-middle\" style=\"left:' + leftOffset + '%\">' + middleValue + '</span>');\n            }\n        };\n        \n        formElement.setChangeCallbacks($form, interaction, callbacks);\n    };\n    return SliderInteractionStateQuestion;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Answer',[\n'taoQtiItem/qtiCreator/widgets/states/factory',\n'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var SliderInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        \n        // By default, select the correct state when entering response edition.\n        this.widget.changeState('correct');\n        \n    }, function(){\n        \n    });\n    return SliderInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Correct',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'lodash',\n    'i18n'\n], function(stateFactory, Correct, commonRenderer, helper, _, __){\n\n    var SliderInteractionStateCorrect = stateFactory.create(Correct, function(){\n        \n        _createResponseWidget(this.widget);\n        \n    }, function(){\n        \n        _destroyResponseWidget(this.widget);\n        \n    });\n    \n    var _createResponseWidget = function(widget){\n\n        var interaction = widget.element;\n        var response = interaction.getResponseDeclaration();\n        var correctResponse = _.values(response.getCorrect());\n\n        commonRenderer.setResponse(interaction, _formatResponse(correctResponse));\n        \n        var $sliderElt = widget.$container.find('.qti-slider');\n        $sliderElt.removeAttr('disabled');\n\n        helper.appendInstruction(interaction, __('Please define the correct response using the slider.'));\n\n        widget.$container.on('responseChange.qti-widget', function(e, data){\n            response.setCorrect(_unformatResponse(data.response));\n        });\n    };\n    \n    var _destroyResponseWidget = function(widget){\n        \n        var $sliderElt = widget.$container.find('.qti-slider');\n        var lowerBound = widget.element.attributes.lowerBound;\n        \n        $sliderElt.attr('disabled', 'disabled');\n        $sliderElt.val(lowerBound);\n        widget.$container.find('span.qti-slider-cur-value').text('' + lowerBound);\n        \n        helper.removeInstructions(widget.element);\n        widget.$container.off('responseChange.qti-widget');\n    };\n    \n    var _formatResponse = function(response){\n        return {\"base\" : {\"integer\" : response}};\n    };\n\n    var _unformatResponse = function(formatedResponse){\n        return [formatedResponse.base.integer];\n    };\n    \n    return SliderInteractionStateCorrect;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/states',[\n'taoQtiItem/qtiCreator/widgets/states/factory',\n'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n'taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Question',\n'taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Answer',\n'taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/Correct'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/Widget',[\n'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n'taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/states/states'\n], function(Widget, states){\n    \n    var SliderInteractionWidget = Widget.clone();\n    \n    SliderInteractionWidget.initCreator = function(){\n        this.registerStates(states);\n        Widget.initCreator.call(this);\n        \n        // Disable slider until response edition.\n        this.$container.find('.qti-slider').attr('disabled', 'disabled');\n    };\n    \n    return SliderInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/renderers/interactions/SliderInteraction',[\n'lodash',\n'taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction',\n'taoQtiItem/qtiCreator/widgets/interactions/sliderInteraction/Widget'\n], function(_, SliderInteraction, SliderInteractionWidget){\n    \n    var CreatorSliderInteraction = _.clone(SliderInteraction);\n    \n    CreatorSliderInteraction.render = function(interaction, options){\n        \n        SliderInteraction.render(interaction);\n        \n        return SliderInteractionWidget.build(\n                interaction,\n                SliderInteraction.getContainer(interaction),\n                this.getOption('interactionOptionForm'),\n                this.getOption('responseOptionForm'),\n                options\n        );\n    };\n    \n    return CreatorSliderInteraction;\n});\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/textEntryInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<input class=\\\"qti-interaction qti-inlineInteraction qti-textEntryInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"textEntryInteraction\\\" type=\\\"text\\\">\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction',[\n    'lodash',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/textEntryInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'taoQtiItem/qtiCommonRenderer/helpers/PciResponse',\n    'i18n',\n    'polyfill/placeholders',\n    'tooltipster'\n], function(_, tpl, Helper, pciResponse, __){\n    'use strict';\n\n    /**\n     * Setting the pattern mask for the input, for browsers which doesn't support this feature\n     * @param {jQuery} $element\n     * @param {string} pattern\n     * @returns {undefined}\n     */\n    var _setPattern = function($element, pattern){\n        var patt = new RegExp('^' + pattern + '$'),\n            patternSupported = ('pattern' in document.createElement('input'));\n\n        $element.attr('pattern', pattern);\n        //test when some data is entering in the input field\n        $element.on('keyup', function(){\n            $element.removeClass('field-error');\n            if(!patt.test($element.val())){\n                /*\n                 * checking if pattern attribute is not supported of the browser \n                 * or if the browser is safari(bug with pattern attribute support)\n                 * \n                 */\n                if(!patternSupported || navigator.userAgent.match(/Safari/i)){\n                    $element.addClass('field-error');\n                }\n                $element.tooltipster('show');\n            } else {\n                $element.tooltipster('hide');\n            }\n        });\n    };\n\n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     * \n     * @param {object} interaction\n     */\n    var render = function(interaction){\n        var attributes = interaction.getAttributes(),\n            $el = interaction.getContainer();\n\n        //setting up the width of the input field\n        if(attributes.expectedLength){\n            $el.css('width', parseInt(attributes.expectedLength) + 'em');\n        }\n\n        //checking if there's a pattern mask for the input\n        if(attributes.patternMask){\n            //set up the tooltip plugin for the input\n            $el.tooltipster({\n                theme: 'tao-error-tooltip',\n                content: __('This is not a valid answer'),\n                delay: 350,\n                trigger: 'custom'\n            });\n\n            _setPattern($el, attributes.patternMask);\n        }\n\n        //checking if there's a placeholder for the input\n        if(attributes.placeholderText){\n            $el.attr('placeholder', attributes.placeholderText);\n        }\n    };\n\n    var resetResponse = function(interaction){\n        interaction.getContainer().val('');\n    };\n\n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     * \n     * Special value: the empty object value {} resets the interaction responses\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response){\n\n        var responseValue;\n\n        try{\n            responseValue = pciResponse.unserialize(response, interaction);\n        }catch(e){\n        }\n\n        if(responseValue && responseValue.length){\n            interaction.getContainer().val(responseValue[0]);\n        }\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10333\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction){\n        var ret = {'base' : {}},\n        value,\n            $el = interaction.getContainer(),\n            attributes = interaction.getAttributes(),\n            baseType = interaction.getResponseDeclaration().attr('baseType'),\n            numericBase = attributes.base || 10;\n\n        if(attributes.placeholderText && $el.val() === attributes.placeholderText){\n            value = '';\n        }else{\n            if(baseType === 'integer'){\n                value = parseInt($el.val(), numericBase);\n            }else if(baseType === 'float'){\n                value = parseFloat($el.val());\n            }else if(baseType === 'string'){\n                value = $el.val();\n            }\n        }\n\n        ret.base[baseType] = isNaN(value) && typeof value === 'number' ? '' : value;\n\n        return ret;\n    };\n\n    return {\n        qtiClass : 'textEntryInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/textEntry', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"panel\\\">\\r\\n    <label for=\\\"placeholderText\\\" class=\\\"spinner\\\">Placeholder Text</label>\\r\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\r\\n    <input name=\\\"placeholderText\\\" value=\\\"\";\n  if (helper = helpers.placeholderText) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.placeholderText); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" />\\r\\n    <span class=\\\"tooltip-content\\\">\\r\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"In visual environments, string interactions are typically represented by empty boxes into which the candidate writes or types.  Delivery engines should use the value of this attribute (if provided) instead of their default placeholder text when this is required.\", options) : helperMissing.call(depth0, \"__\", \"In visual environments, string interactions are typically represented by empty boxes into which the candidate writes or types.  Delivery engines should use the value of this attribute (if provided) instead of their default placeholder text when this is required.\", options)))\n    + \"\\r\\n    </span>\\r\\n</div>\\r\\n<div class=\\\"panel\\\">\\r\\n    <label for=\\\"patternMask\\\" class=\\\"spinner\\\">Pattern Mask</label>\\r\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\r\\n    <input name=\\\"patternMask\\\" value=\\\"\";\n  if (helper = helpers.patternMask) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.patternMask); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"text\\\" data-validate=\\\"$validRegex;\\\" placeholder=\\\"e.g. [A-Z][a-z]{3,}\\\"/>\\r\\n    <span class=\\\"tooltip-content\\\">\\r\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid.Care is needed to ensure that the format of the required input is clear to the candidate, especially when validity checking of responses is required for progression through a test. This could be done by providing an illustrative sample response in the prompt, for example.\", options) : helperMissing.call(depth0, \"__\", \"If given, the pattern mask specifies a regular expression that the candidate's response must match in order to be considered valid.Care is needed to ensure that the format of the required input is clear to the candidate, especially when validity checking of responses is required for progression through a test. This could be done by providing an illustrative sample response in the prompt, for example.\", options)))\n    + \"\\r\\n    </span>\\r\\n</div>\\r\\n<div class=\\\"panel\\\">\\r\\n    <label for=\\\"expectedLength\\\" class=\\\"spinner\\\">Expected Length</label>\\r\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\r\\n    <input name=\\\"expectedLength\\\" value=\\\"\";\n  if (helper = helpers.expectedLength) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.expectedLength); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"1\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\r\\n    <span class=\\\"tooltip-content\\\">\\r\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The expectedLength attribute provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters. This is not a validity constraint.\", options) : helperMissing.call(depth0, \"__\", \"The expectedLength attribute provides a hint to the candidate as to the expected overall length of the desired response measured in number of characters. This is not a validity constraint.\", options)))\n    + \"\\r\\n    </span>\\r\\n</div>\\r\\n<div class=\\\"panel\\\">\\r\\n    <label for=\\\"base\\\" class=\\\"spinner\\\">Base</label>\\r\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\r\\n    <input name=\\\"base\\\" value=\\\"\";\n  if (helper = helpers.base) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.base); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-increment=\\\"1\\\" data-min=\\\"1\\\" data-max=\\\"100\\\" type=\\\"text\\\" />\\r\\n    <span class=\\\"tooltip-content\\\">\\r\\n        \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"If the string interaction is bound to a numeric response variable then the base attribute must be used to set the number base in which to interpret the value entered by the candidate.\", options) : helperMissing.call(depth0, \"__\", \"If the string interaction is bound to a numeric response variable then the base attribute must be used to set the number base in which to interpret the value entered by the candidate.\", options)))\n    + \"\\r\\n    </span>\\r\\n</div>\\r\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/textEntry'\n], function(stateFactory, Question, formElement, formTpl){\n\n    var TextEntryInteractionStateQuestion = stateFactory.extend(Question);\n\n    TextEntryInteractionStateQuestion.prototype.initForm = function(){\n        \n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n        $form.html(formTpl({\n            base : parseInt(interaction.attr('base')),\n            patternMask : interaction.attr('patternMask'),\n            placeholderText : interaction.attr('placeholderText'),\n            expectedLength : parseInt(interaction.attr('expectedLength'))\n        }));\n\n        formElement.initWidget($form);\n\n        formElement.setChangeCallbacks($form, interaction, {\n            base : formElement.getAttributeChangeCallback(),\n            patternMask : formElement.getAttributeChangeCallback(),\n            placeholderText : formElement.getAttributeChangeCallback(),\n            expectedLength : formElement.getAttributeChangeCallback()\n        });\n    };\n\n    return TextEntryInteractionStateQuestion;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState'\n], function(stateFactory, Answer, answerStateHelper){\n\n    var TextEntryInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        answerStateHelper.forward(this.widget);\n    }, function(){\n        \n    });\n    \n    return TextEntryInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Correct',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Correct',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'lodash',\n    'i18n'\n], function($, stateFactory, Correct, helper, _, __){\n\n    var TextEntryInteractionStateCorrect = stateFactory.create(Correct, function(){\n\n        var $container = this.widget.$container,\n            response = this.widget.element.getResponseDeclaration(),\n            correct = _.values(response.getCorrect()).pop() || '';\n\n        $container.find('tr[data-edit=correct] input[name=correct]').focus().val(correct);\n        $container.on('keyup.correct', 'tr[data-edit=correct] input[name=correct]', function(){\n            var value = $(this).val();\n            response.setCorrect(value);\n        });\n        helper.appendInstruction(this.widget.element, __('Please type the correct response in the box below.'));\n\n    }, function(){\n\n        this.widget.$container.off('.correct');\n        helper.removeInstructions(this.widget.element);\n\n    });\n\n    return TextEntryInteractionStateCorrect;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntry', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"checked=\\\"checked\\\"\";\n  }\n\n  buffer += \"<tr class=\\\"\\\" data-edit=\\\"map\\\">\\r\\n    <td data-text><input type=\\\"text\\\" name=\\\"text\\\" value=\\\"\";\n  if (helper = helpers.text) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.text); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-old-text=\\\"\";\n  if (helper = helpers.text) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.text); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/></td>\\r\\n    <td class=\\\"mini-tlb\\\" colspan=\\\"2\\\">\\r\\n        <label>\\r\\n            <input name=\\\"correct\\\" type=\\\"radio\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.correct), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\\r\\n            <span class=\\\"icon-radio\\\"></span>\\r\\n        </label>\\r\\n        <input name=\\\"score\\\" class=\\\"score\\\" value=\\\"\";\n  if (helper = helpers.score) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.score); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-for=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-validate=\\\"$numeric\\\" data-validate-option=\\\"$allowEmpty; $event(type=keyup)\\\"/>\\r\\n        <span class=\\\"icon-bin\\\" data-role=\\\"delete-option\\\"></span>\\r\\n    </td>\\r\\n</tr>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Map',[\n    'jquery',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/states/Map',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntry',\n    'lodash'\n], function($, stateFactory, Map, formElement, optionTpl, _){\n\n    var _getRelatedTextKey = function($elt){\n        return $elt.closest('tr').find('input[name=text]').val();\n    };\n\n    var TextEntryInteractionStateMap = stateFactory.create(Map, function(){\n        \n        this.initMapEntries();\n        this.initFormCallbacks();\n        this.hideCorrectInput();\n        \n    }, function(){\n        \n        this.widget.$container.off('.map');\n        this.widget.$container.find('tr[data-edit=map]:not([data-add-option])').remove();\n    });\n    \n    TextEntryInteractionStateMap.prototype.hideCorrectInput = function(){\n        \n        var $correct = this.widget.$container.find('tr[data-edit=correct]');\n        \n        this.widget.on('metaChange', function(data){\n            if(data.key === 'defineCorrect'){\n                $correct.hide();\n            }\n        });\n        \n        //@todo : fix this!\n        $correct.hide();\n        _.delay(function(){\n            $correct.hide();\n        }, 200);\n        \n    };\n    \n    TextEntryInteractionStateMap.prototype.initFormCallbacks = function(){\n\n        var $container = this.widget.$container,\n            response = this.widget.element.getResponseDeclaration();\n\n        formElement.setChangeCallbacks($container, response, {\n            text : _.throttle(function(response, value){\n\n                var $text = $(this),\n                    oldText = $text.data('old-text'),\n                    $tr = $text.closest('tr'),\n                    correct = !!$tr.find('input[name=correct]:checked').length,\n                    score = parseInt($tr.find('.score').val());\n\n                //@todo trigger validate score to check if is a valid score\n                if(!isNaN(score)){\n                    response.removeMapEntry(oldText, true);\n                    response.setMapEntry(value, score);\n                    $text.data('old-text', value);\n\n                    if(correct){\n                        response.setCorrect(value);\n                    }\n                }\n\n            }, 600),\n            correct : function(response){\n                var text = _getRelatedTextKey($(this));\n                response.setCorrect(text);\n            },\n            score : function(response, value){\n\n                var text = _getRelatedTextKey($(this));\n                var score = parseFloat(value);\n\n                if(!isNaN(score)){\n                    response.setMapEntry(text, score);\n                }\n            }\n        });\n    };\n\n    TextEntryInteractionStateMap.prototype.initMapEntries = function(){\n\n        var _this = this,\n            response = this.widget.element.getResponseDeclaration(),\n            correctValue = _.values(response.getCorrect()).pop(),\n            $container = this.widget.$container,\n            $addOption = $container.find('tr[data-add-option]');\n        \n        var appendOption = function(text, score){\n            \n            var $newOption = $(optionTpl({\n                text : text || '',\n                score : score || 0,\n                correct : (text === correctValue)\n            }));\n            $newOption.show();\n\n            $addOption.before($newOption);\n            \n            preventNullMapEntries();\n        };\n        \n        var preventNullMapEntries = function(){\n            var $deleteButtons = $container.find('tbody [data-role=delete-option]');\n            if($deleteButtons.length === 1){\n                $deleteButtons.css('visibility', 'hidden');\n            }else{\n                $deleteButtons.css('visibility', 'visible');\n            }\n        };\n        \n        if(!_.size(response.mapEntries)){\n            response.mapEntries = {'' : 0};\n        }\n        \n        _.forIn(response.mapEntries, function(score, text){\n            appendOption(text, score);\n        });\n\n        $container.on('click.map', '[data-role=delete-option]', function(){\n\n            //init delete:\n            var $del = $(this);\n            var text = _getRelatedTextKey($del);\n            var correct = !!$del.closest('tr').find('input[name=correct]:checked').length;\n\n            response.removeMapEntry(text, true);\n            $del.closest('tr').remove();\n            preventNullMapEntries();\n            \n            if(correct){\n                response.resetCorrect();//remove correct\n            }\n\n        }).on('click.map', '.add-option', function(){\n\n            //init add option button\n            appendOption('', 0);\n\n            _this.initFormCallbacks();\n        });\n\n    };\n\n    return TextEntryInteractionStateMap;\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Correct',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/Map'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<div class=\\\"widget-box widget-inline widget-textEntryInteraction qti-interaction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-edit=\\\"active\\\">\\r\\n    <div class=\\\"qti-interaction qti-textEntryInteraction\\\">\\r\\n        <table>\\r\\n            <colgroup>\\r\\n                <col class=\\\"text\\\">\\r\\n                <col class=\\\"icon\\\">\\r\\n                <col class=\\\"icon\\\">\\r\\n            </colgroup>\\r\\n            <tbody>\\r\\n                <tr data-edit=\\\"question\\\">\\r\\n                    <td class=\\\"main-option\\\"></td>\\r\\n                    <td colspan=\\\"2\\\"></td>\\r\\n                </tr>\\r\\n                <tr data-edit=\\\"correct\\\">\\r\\n                    <td data-text>\\r\\n                        <div class=\\\"instruction-container\\\"></div>\\r\\n                        <input type=\\\"text\\\" name=\\\"correct\\\" value=\\\"\";\n  if (helper = helpers.text) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.text); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" /></td>\\r\\n                    <td class=\\\"mini-tlb\\\" colspan=\\\"2\\\">\\r\\n                    </td>\\r\\n                </tr>\\r\\n                <tr data-add-option data-edit=\\\"map\\\">\\r\\n                    <td>\\r\\n                        <div class=\\\"add-option\\\">\\r\\n                            <span class=\\\"icon-add\\\"></span>\\r\\n                            \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Add another option\", options) : helperMissing.call(depth0, \"__\", \"Add another option\", options)))\n    + \"\\r\\n                        </div>\\r\\n                    </td>\\r\\n                    <td colspan=\\\"2\\\"></td>\\r\\n                </tr>\\r\\n            </tbody>\\r\\n        </table>\\r\\n    </div>\\r\\n\\r\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/Widget',[\n    'lodash',\n    'taoQtiItem/qtiCreator/widgets/interactions/inlineInteraction/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/states/states',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction'\n], function(_, InteractionWidget, states, interactionTpl){\n\n    var TextEntryInteractionWidget = InteractionWidget.clone();\n\n    TextEntryInteractionWidget.initCreator = function(){\n\n        this.registerStates(states);\n\n        InteractionWidget.initCreator.call(this);\n\n        //remove toolbar title, because it is too large\n        this.$container.find('.tlb-title').remove();\n    };\n\n    TextEntryInteractionWidget.renderInteraction = function(){\n\n        var interaction = this.element,\n            tplData = {\n            tag : interaction.qtiClass,\n            serial : interaction.serial,\n            attributes : interaction.attributes\n        };\n\n        return interactionTpl(tplData);\n    };\n\n    TextEntryInteractionWidget.buildContainer = function(){\n        var previous, next;\n        //add a space to be able to place the cursor before and after it.\n        if(this.$original.length){\n            previous = this.$original[0].previousSibling;\n            next = this.$original[0].nextSibling;\n\n            if(!previous || (previous.nodeType === 3 && previous.nodeValue === '') || previous.nodeType !== 3){\n                this.$original.before('&nbsp;');\n            }\n            if(!next || (next.nodeType === 3 && next.nodeValue === '') || next.nodeType !== 3){\n                this.$original.after('&nbsp;');\n            }\n        }\n\n        //set the itemContainer where the actual widget should be append and be positioned absolutely\n        this.$itemContainer = this.$original.parents('.item-editor-item');\n\n        //prepare html: interaction & choices:\n        this.$itemContainer.append(this.renderInteraction());\n        \n        this.$container = this.$itemContainer.find('.widget-textEntryInteraction[data-serial=' + this.element.getSerial() + ']');\n    };\n\n    return TextEntryInteractionWidget;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction.placeholder', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"widget-box textEntryInteraction-placeholder\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-qti-class=\\\"textEntryInteraction\\\">\\r\\n    <label>&nbsp;</label>\\r\\n</span>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/TextEntryInteraction',[\n    'jquery',\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/textEntryInteraction/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/inlineInteraction/textEntryInteraction.placeholder'\n], function($, _, TextEntryInteraction, TextEntryInteractionWidget, tpl){\n\n    var CreatorTextEntryInteraction = _.clone(TextEntryInteraction);\n\n    CreatorTextEntryInteraction.template = tpl;\n\n    CreatorTextEntryInteraction.render = function(interaction, options){\n\n        //need to pass choice option form to the interaction widget because it will manage everything\n        options = options || {};\n\n        return TextEntryInteractionWidget.build(\n            interaction,\n            $('.textEntryInteraction-placeholder[data-serial=\"' + interaction.serial + '\"]'),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),\n            options\n        );\n    };\n\n    return CreatorTextEntryInteraction;\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/uploadInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-uploadInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n\t\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t<div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"file-upload fixed-grid-row\\\">\\n        <div class=\\\"progressbar\\\"></div>\\n        <span class=\\\"btn-info small col-4\\\"></span>\\n        <span class=\\\"file-name placeholder col-8 truncate\\\"></span>\\n        <input type=\\\"file\\\"/>\\n    </div>\\n</div> \";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction',[\n    'lodash',\n    'tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/uploadInteraction',\n    'taoQtiItem/qtiCommonRenderer/helpers/Helper',\n    'jquery',\n    'i18n',\n    'context',\n    'filereader',\n    'ui/progressbar'\n], function(_, tpl, Helper, $,  __, context) {\n\n\tvar _response = { \"base\" : null };\n\t\n\tvar _initialInstructions = __('Browse your computer and select the appropriate file.');\n\t\n\tvar _readyInstructions = __('The selected file is ready to be sent.');\n    \n    var _handleSelectedFiles = function(interaction, file) {\n    \tHelper.removeInstructions(interaction);\n    \tHelper.appendInstruction(interaction, _initialInstructions);\n    \t\n    \tvar $container = Helper.getContainer(interaction);\n        \n        // Show information about the processed file to the candidate.\n        var filename = file.name;\n        var filesize = file.size;\n        var filetype = file.type;\n        \n        $container.find('.file-name').empty()\n        \t\t\t\t\t\t\t .append(filename);\n        \n        // Let's read the file to get its base64 encoded content.\n        var reader = new FileReader();\n\n        // Update file processing progress.\n        \n        reader.onload = function (e) {\n        \tHelper.removeInstructions(interaction);\n        \tHelper.appendInstruction(interaction, _readyInstructions, function() {\n        \t\tthis.setLevel('success');\n        \t});\n        \tHelper.validateInstructions(interaction);\n        \t\n        \t$container.find('.progressbar').progressbar('value', 100);\n        \t\n            var base64Data = e.target.result;\n            var commaPosition = base64Data.indexOf(',');\n            \n            // Store the base64 encoded data for later use.\n            base64Raw = base64Data.substring(commaPosition + 1);\n            filetype = filetype;\n            _response = { \"base\" : { \"file\" : { \"data\" : base64Raw, \"mime\" : filetype, \"name\" : filename } } }; \n        }\n        \n        reader.onloadstart = function (e) {\n        \tHelper.removeInstructions(interaction);\n        \t$container.find('.progressbar').progressbar('value', 0);\n        };\n        \n        reader.onprogress = function (e) {\n        \tvar percentProgress = Math.ceil(Math.round(e.loaded) / Math.round(e.total) * 100);\n        \t$container.find('.progressbar').progressbar('value', percentProgress);\n        }\n        \n        reader.readAsDataURL(file);\n    };\n    \n    var _resetGui = function(interaction) {\n    \t$container = Helper.getContainer(interaction);\n    \t$container.find('.file-name').text(__('No file selected'));\n    \t$container.find('.btn-info').text(__('Browse...'));\n    };\n    \n    /**\n     * Init rendering, called after template injected into the DOM\n     * All options are listed in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     */\n    var render = function(interaction, options) {\n    \tvar $container = Helper.getContainer(interaction);\n    \t_resetGui(interaction);\n    \t\n    \tHelper.appendInstruction(interaction, _initialInstructions);\n    \t\n    \tvar changeListener = function (e) {\n    \t\tvar file = e.target.files[0];\n    \t\t\n    \t\t// Are you really sure something was selected\n    \t\t// by the user... huh? :)\n    \t\tif (typeof(file) !== 'undefined') {\n    \t\t\t_handleSelectedFiles(interaction, file);\n    \t\t}\n    \t};\n    \t\n    \t$input = $container.find('input');\n    \t\n        $container.find('.progressbar').progressbar();\n\n    \tif (window.File && window.FileReader && window.FileList) {\n    \t\t// Yep ! :D\n            $input.bind('change', changeListener);\n        }\n        else {\n        \t// Nope... :/\n            $input.fileReader({\n    \t        id: 'fileReaderSWFObject',\n    \t        filereader: context.taobase_www + 'js/lib/polyfill/filereader.swf',\n    \t        callback: function() {\n    \t            $input.bind('change', changeListener);\n    \t        }\n    \t    });\n        }\n    \t\n    \t// IE Specific hack. It prevents the button to slightly\n    \t// move on click. Special thanks to Dieter Rabber, OAT S.A.\n    \t$input.bind('mousedown', function(e) {\n            e.preventDefault();\n            $(this).blur();\n            return false;\n        }); \n    };\n    \n    var resetResponse = function(interaction) {\n    \t$container = Helper.getContainer(interaction);\n    \t_resetGui(interaction);\n    };\n    \n    /**\n     * Set the response to the rendered interaction.\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @param {object} response\n     */\n    var setResponse = function(interaction, response) {\n    \t$container = Helper.getContainer(interaction);\n    \t\n    \tif (response.base != null) {\n    \t    var filename = (typeof response.base.file.name != 'undefined') ? response.base.file.name : 'previously-uploaded-file';\n            $container.find('.file-name').empty()\n                                         .text(filename);\n    \t}\n\n    \t_response = response;\n    };\n\n    /**\n     * Return the response of the rendered interaction\n     * \n     * The response format follows the IMS PCI recommendation :\n     * http://www.imsglobal.org/assessment/pciv1p0cf/imsPCIv1p0cf.html#_Toc353965343  \n     * \n     * Available base types are defined in the QTI v2.1 information model:\n     * http://www.imsglobal.org/question/qtiv2p1/imsqti_infov2p1.html#element10321\n     * \n     * @param {object} interaction\n     * @returns {object}\n     */\n    var getResponse = function(interaction) {\n        return _response;\n    };\n    \n    return {\n        qtiClass : 'uploadInteraction',\n        template : tpl,\n        render : render,\n        getContainer : Helper.getContainer,\n        setResponse : setResponse,\n        getResponse : getResponse,\n        resetResponse : resetResponse,\n        \n        // Exposed private methods for qtiCreator\n        resetGui : _resetGui\n    };\n});\n\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/upload', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    \t\t<option value=\\\"\";\n  if (helper = helpers.mime) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.mime); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.selected), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n    \t\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \"selected=\\\"selected\\\"\";\n  }\n\n  buffer += \"<h3>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"MIME-type\", options) : helperMissing.call(depth0, \"__\", \"MIME-type\", options)))\n    + \"</h3>\\n<span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content\\\" data-tooltip-theme=\\\"info\\\"></span>\\n<div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The MIME-type attribute describes which kind of file may be uploaded.\", options) : helperMissing.call(depth0, \"__\", \"The MIME-type attribute describes which kind of file may be uploaded.\", options)))\n    + \"</div>\\n\\n<div class=\\\"reset-group\\\">\\n    <select name=\\\"type\\\" class=\\\"select2\\\" data-has-search=\\\"false\\\">\\n    \t\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.types), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </select>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/Question',[\n    'lodash',\n    'i18n',\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/helper/uploadMime',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/upload'\n], function(_, __, stateFactory, Question, formElement, uploadHelper, formTpl){\n\n    var UploadInteractionStateQuestion = stateFactory.extend(Question);\n\n    UploadInteractionStateQuestion.prototype.initForm = function() {\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n        \n        var types = uploadHelper.getMimeTypes();\n        types.unshift({ \"mime\" : \"any/kind\", \"label\" : __(\"-- Any kind of file --\") });\n        \n        // Prepare the work...\n        if (typeof interaction.attr('type') !== 'undefined') {\n            \n            if (interaction.attr('type') === '') {\n                // Kill the attribute if it is empty.\n                delete interaction.attributes['type'];\n            }\n            else {\n                // Pre-select a value in the types combo box if needed.\n                for (var i in types) {\n                    if (interaction.attr('type') == types[i].mime) {\n                        types[i].selected = true;\n                    }\n                }\n            }\n        }\n        \n        $form.html(formTpl({\n            \"types\" : types\n        }));\n\n        formElement.initWidget($form);\n        \n        callbacks = {};\n        \n        // -- type callback.\n        callbacks['type'] = function(interaction, attrValue){\n            \n            if (attrValue === 'any/kind') {\n                interaction.removeAttr('type');\n            }\n            else {\n                interaction.attr('type', attrValue);\n            }\n        };\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, interaction, callbacks);\n    };\n\n    return UploadInteractionStateQuestion;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/blockInteraction/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/Question'\n], function(factory, states){\n    //remove answer state, which does not make much sense here\n    return factory.createBundle(states, arguments, ['answer', 'correct', 'map']);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/states/states'\n], function(Widget, states){\n\n    var UploadInteractionWidget = Widget.clone();\n\n    UploadInteractionWidget.initCreator = function(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n\n    return UploadInteractionWidget;\n});\n","\ndefine('tpl!taoQtiItem/qtiCreator/tpl/interactions/uploadInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<div class=\\\"qti-interaction qti-blockInteraction qti-uploadInteraction\\\" data-serial=\\\"\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n\t\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t<div class=\\\"instruction-container\\\"></div>\\n    <div class=\\\"fixed-grid-row file-upload\\\">\\n        <span class=\\\"btn-info small col-4\\\"></span>\\n        <span class=\\\"file-name placeholder col-8 truncate\\\"></span>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiCreator/renderers/interactions/UploadInteraction',[\n    'lodash',\n    'taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction',\n    'taoQtiItem/qtiCreator/widgets/interactions/uploadInteraction/Widget',\n    'tpl!taoQtiItem/qtiCreator/tpl/interactions/uploadInteraction'\n], function(_, UploadInteraction, UploadInteractionWidget, tpl){\n    \n    var UploadInteraction = _.clone(UploadInteraction);\n\n    UploadInteraction.template = tpl;\n    UploadInteraction.render = function(interaction, options){\n        \n        UploadInteraction.resetGui(interaction);\n        \n        return UploadInteractionWidget.build(\n            interaction,\n            UploadInteraction.getContainer(interaction),\n            this.getOption('interactionOptionForm'),\n            this.getOption('responseOptionForm'),//note : no response required...\n            options\n        );\n    };\n\n    return UploadInteraction;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/customInteraction/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/Widget',\n    'taoQtiItem/qtiCreator/editor/customInteractionRegistry',\n    'lodash'\n], function(Widget, ciRegistry, _){\n\n    var CustomInteractionWidget = Widget.clone();\n\n    CustomInteractionWidget.initCreator = function(){\n\n        //note : abstract widget class must not register states\n\n        Widget.initCreator.call(this);\n    };\n\n    CustomInteractionWidget.createToolbar = function(options){\n\n        var creator = ciRegistry.get(this.element.typeIdentifier);\n        options = _.defaults(options || {}, {title : creator.manifest.label});\n\n        return Widget.createToolbar.call(this, options);\n    };\n\n    return CustomInteractionWidget;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'jquery',\n    'taoQtiItem/qtiCreator/editor/styleEditor/farbtastic/farbtastic'\n], function(stateFactory, Question, $){\n\n    var CustomInteractionStateQuestion = stateFactory.extend(Question);\n\n    CustomInteractionStateQuestion.prototype.initColorPickers = function(){\n\n        var $colorTriggers = this.widget.$form.find('.color-trigger:not([data-color-picker=initialized])');\n        \n        $colorTriggers.each(function(){\n\n            var $colorTrigger = $(this),\n                $input = $colorTrigger.siblings('input'),\n                color = $input.val();\n\n            //set color recorded in the hidden input to the color trigger\n            $colorTrigger.css('background-color', color);\n        });\n\n        $colorTriggers.on('click.color-picker', function(){\n\n            var $colorTrigger = $(this),\n                $context = $colorTrigger.closest('.item-editor-color-picker'),\n                $container = $context.find('.color-picker-container').show(),\n                $colorPicker = $container.find('.color-picker'),\n                $colorPickerInput = $container.find('.color-picker-input'),\n                $input = $colorTrigger.siblings('input[type=\"hidden\"]'),\n                color = $input.val();\n\n            // Init the color picker\n            $colorPicker.farbtastic('.color-picker-input', $context);\n\n            // Set the color to the currently set on the form init\n            $colorPickerInput.val(color).trigger('keyup');\n\n            // Populate the input with the color on quitting the modal\n            $container.find('.closer').off('click').on('click', function(){\n                $container.hide();\n                $colorPicker.off('.farbtastic');\n            });\n            \n            //listen to color change\n            $colorPicker.off('.farbtastic').on('colorchange.farbtastic', function(e, color){\n                $colorTrigger.css('background-color', color);\n                $input.val(color).trigger('change');\n            });\n            \n        });\n        \n        $colorTriggers.attr('data-color-picker', 'initialized');\n    };\n\n    CustomInteractionStateQuestion.prototype.destroyColorPickers = function(){\n        \n        var $colorTriggers = this.widget.$form.find('.color-trigger');\n        $colorTriggers.off('.color-picker');\n        $colorTriggers.removeAttr('data-color-picker');\n    };\n\n    return CustomInteractionStateQuestion;\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/Sleep',[\r\n    'taoQtiItem/qtiCreator/widgets/states/factory',\r\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Sleep',\r\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay'\r\n], function(stateFactory, SleepState, overlayTpl){\r\n\r\n    return stateFactory.extend(SleepState, function(){\r\n\r\n        //add transparent protective layer\r\n        this.widget.$container.append(overlayTpl());\r\n\r\n    }, function(){\r\n\r\n        //remove transparent protective layer\r\n        this.widget.$container.children('.overlay').remove();\r\n    });\r\n});\r\n\n","define('taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/states',\n    'taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/Question',\n    'taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/Sleep'\n], function(factory, states){\n    return factory.createBundle(states, arguments);\n});\n","define('taoQtiItem/qtiCreator/widgets/interactions/mediaInteraction/states/Answer',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Answer',\n    'taoQtiItem/qtiCreator/widgets/interactions/helpers/answerState',\n    'tpl!taoQtiItem/qtiCreator/tpl/forms/interactions/media',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n], function(stateFactory, Answer, answerStateHelper, formTpl, formElement){\n\n    //does not much sense for mediaInteraction (same remark for uploadInteraction)\n    //I would recommend disabling the answer button completely and remove this file if no longer required\n    \n    var MediaInteractionStateAnswer = stateFactory.extend(Answer, function(){\n        var _widget = this.widget,\n            interaction = _widget.element;\n        \n        //forward to one of the available sub state, according to the response processing template\n        //answerStateHelper.forward(_widget);\n        \n    }, function(){\n        var _widget = this.widget;\n        \n    });\n    \n    \n    \n    MediaInteractionStateAnswer.prototype.initResponseForm = function(){\n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element;\n\n    };\n    \n    \n    return MediaInteractionStateAnswer;\n});\n","define('taoQtiItem/qtiCreator/widgets/static/portableInfoControl/Widget',[\n    'taoQtiItem/qtiCreator/widgets/static/Widget'\n], function(Widget) {\n    \n    var InfoControlWidget = Widget.clone();\n    \n    InfoControlWidget.initCreator = function() {\n        \n        //note : abstract widget class must not register states\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return InfoControlWidget;\n});\n","define('taoQtiItem/qtiCreator/widgets/static/portableInfoControl/states/Sleep',[\r\n    'taoQtiItem/qtiCreator/widgets/states/factory',\r\n    'taoQtiItem/qtiCreator/widgets/states/Sleep',\r\n    'tpl!taoQtiItem/qtiCreator/tpl/notifications/widgetOverlay'\r\n], function(stateFactory, SleepState, overlayTpl){\r\n\r\n    return stateFactory.extend(SleepState, function(){\r\n\r\n        //add transparent protective layer\r\n//        this.widget.$container.append(overlayTpl());\r\n\r\n    }, function(){\r\n\r\n        //remove transparent protective layer\r\n//        this.widget.$container.children('.overlay').remove();\r\n    });\r\n});\r\n\n","define('taoQtiItem/qtiCreator/widgets/static/portableInfoControl/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/static/states/states',\n    'taoQtiItem/qtiCreator/widgets/static/portableInfoControl/states/Sleep'\n], function(factory, states){\n    return factory.createBundle(states, arguments, ['answer', 'correct', 'map']);\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/container', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, helper, functionType=\"function\";\n\n\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/Container',['tpl!taoQtiItem/qtiXmlRenderer/tpl/container'], function(tpl){\n    \n    var xhtmlEntities = function(html){\n        //@todo : check other names entities\n        return html.replace(/&nbsp;/g, '&#160;');\n    };\n    \n    var xhtmlEncode = function(encodedStr){\n\n        var returnValue = '';\n\n        if(encodedStr){\n            \n            //<br...> are replaced by <br... />\n            returnValue = encodedStr;\n            returnValue = returnValue.replace(/<br([^>]*)?>/ig, '<br />');\n            returnValue = returnValue.replace(/<hr([^>]*)?>/ig, '<hr />');\n\n            //<img...> are replaced by <img... />\n            returnValue = returnValue.replace(/(<img([^>]*)?\\s?[^\\/]>)+/ig,\n                function($0, $1){\n                    return $0.replace('>', ' />');\n                });\n        }\n\n        return returnValue;\n    };\n    \n    return {\n        qtiClass : '_container',\n        template : tpl,\n        getData:function(container, data){\n            \n            data.body = xhtmlEntities(data.body);\n            data.body = xhtmlEncode(data.body);\n            \n            return data;\n        }\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/element', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.body), {hash:{},inverse:self.program(4, program4, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/Img',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'img',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/item', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \";\n  stack1 = helpers['if'].call(depth0, (data == null || data === false ? data : data.key), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"xmlns:\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var stack1, helper, options;\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        \";\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  \n  return \"\\n            <div class=\\\"empty\\\"></div>\\n        \";\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            \";\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  return buffer;\n  }\n\nfunction program12(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<assessmentItem xmlns=\\\"http://www.imsglobal.org/xsd/imsqti_v2p1\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:schemaLocation=\\\"http://www.imsglobal.org/xsd/imsqti_v2p1  http://www.imsglobal.org/xsd/qti/qtiv2p1/imsqti_v2p1.xsd\\\"\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.namespaces), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  options={hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}\n  if (helper = helpers.responses) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.responses); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.responses) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}\n  if (helper = helpers.outcomes) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.outcomes); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.outcomes) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}\n  if (helper = helpers.stylesheets) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.stylesheets); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.stylesheets) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \\n    <itemBody>\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.empty), {hash:{},inverse:self.program(10, program10, data),fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </itemBody>\\n    \\n    \";\n  if (helper = helpers.responseProcessing) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseProcessing); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data}\n  if (helper = helpers.feedbacks) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.feedbacks); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.feedbacks) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</assessmentItem>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/Item',['lodash', 'tpl!taoQtiItem/qtiXmlRenderer/tpl/item'], function(_, tpl, rendererConfig){\n    return {\n        qtiClass : 'assessmentItem',\n        template : tpl,\n        getData : function(item, data){\n            \n            var ns = _.clone(item.namespaces) || [],\n                renderer = this;\n            \n            delete ns[''];\n            delete ns['xsi'];\n            delete ns['xml'];\n            \n            var defaultData = {\n                responses : [],\n                outcomes : [],\n                stylesheets : [],\n                feedbacks : [],\n                namespaces : ns,\n                empty : item.isEmpty(),\n                responseProcessing : item.responseProcessing ? item.responseProcessing.render(renderer) : ''\n            };\n            \n            _.each(item.responses, function(response){\n                defaultData.responses.push(response.render(renderer));\n            });\n            _.each(item.outcomes, function(outcome){\n                defaultData.outcomes.push(outcome.render(renderer));\n            });\n            _.each(item.stylesheets, function(stylesheet){\n                defaultData.stylesheets.push(stylesheet.render(renderer));\n            });\n            _.each(item.modalFeedbacks, function(feedback){\n                defaultData.feedbacks.push(feedback.render(renderer));\n            });\n            \n            return _.merge(data || {}, defaultData);\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/Math',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'math',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/Object',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'object',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/outcomeDeclaration', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"/>\\n\";\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.defaultValue)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</outcomeDeclaration>\";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<defaultValue>\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.defaultValue), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</defaultValue>\\n    \";\n  return buffer;\n  }\nfunction program7(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \"<value>\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"</value>\\n        \";\n  return buffer;\n  }\n\n  buffer += \"\\n<outcomeDeclaration\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.empty), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/OutcomeDeclaration',['lodash', 'tpl!taoQtiItem/qtiXmlRenderer/tpl/outcomeDeclaration'], function(_, tpl){\n    return {\n        qtiClass : 'outcomeDeclaration',\n        template : tpl,\n        getData:function(outcomeDeclaration, data){\n            var defaultValue = [];\n            if(outcomeDeclaration.defaultValue){\n                if(typeof(outcomeDeclaration.defaultValue) === 'object'){\n                    defaultValue = _.values(outcomeDeclaration.defaultValue);\n                }else{\n                    defaultValue = [outcomeDeclaration.defaultValue];\n                }\n            }\n            \n            var defaultData = {\n                empty: !_.size(defaultValue),\n                defaultValue: defaultValue\n            };\n            \n            return _.merge(data || {}, defaultData);\n        }\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/portableInfoControl', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n                <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth1 && depth1.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"lib id=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\"/>\\n                \";\n  return buffer;\n  }\n\n  buffer += \"<infoControl \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"portableInfoControl infoControlTypeIdentifier=\\\"\";\n  if (helper = helpers.typeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.typeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" hook=\\\"\";\n  if (helper = helpers.entryPoint) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.entryPoint); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n\\n        <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"resources location=\\\"http://imsglobal.org/pci/1.0.15/sharedLibraries.xml\\\">\\n            <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"libraries>\\n                \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.libraries), {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"libraries>\\n        </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"resources>\\n\\n        \";\n  stack1 = (helper = helpers.portableElementProperties || (depth0 && depth0.portableElementProperties),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.properties), ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic), options) : helperMissing.call(depth0, \"portableElementProperties\", (depth0 && depth0.properties), ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n        <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"markup>\\n            \";\n  if (helper = helpers.markup) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.markup); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"markup>\\n\\n    </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"portableInfoControl>\\n</infoControl>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/properties', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \" key=\\\"\";\n  if (helper = helpers.key) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.key); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.key), {hash:{},inverse:self.program(6, program6, data),fn:self.programWithDepth(4, program4, data, depth1),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\nfunction program4(depth0,data,depth2) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<\"\n    + escapeExpression(((stack1 = (depth2 && depth2.ns)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"entry key=\\\"\";\n  if (helper = helpers.key) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.key); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</\"\n    + escapeExpression(((stack1 = (depth2 && depth2.ns)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"entry>\\n        \";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            \";\n  if (helper = helpers.value) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.value); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\n  buffer += \"<\";\n  if (helper = helpers.ns) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.ns); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"properties\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.key), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.entries), {hash:{},inverse:self.noop,fn:self.programWithDepth(3, program3, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</\";\n  if (helper = helpers.ns) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.ns); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"properties>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/helper/portableElementTpl',[\n    'lodash',\n    'handlebars',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/properties'\n], function(_, Handlebars, propertiesTpl){\n    \n    function renderPortableElementProperties(properties, ns, name){\n\n        var entries = [];\n\n        _.forIn(properties, function(value, key){\n            if(_.isObject(value)){\n                entries.push({\n                    value : renderPortableElementProperties(value, ns, key)\n                });\n            }else{\n                entries.push({\n                    key : key,\n                    value : value\n                });\n            }\n        });\n        \n        return propertiesTpl({\n            entries : entries,\n            ns : ns,\n            key : name\n        });\n    }\n\n    //register the pci properties helper:\n    Handlebars.registerHelper('portableElementProperties', function(properties, ns){\n        return renderPortableElementProperties(properties, ns, '');\n    });\n    \n});\n\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/PortableInfoControl',[\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/portableInfoControl',\n    'taoQtiItem/qtiItem/helper/util',\n    'taoQtiItem/qtiXmlRenderer/helper/portableElementTpl'\n], function(tpl, util){\n\n    return {\n        qtiClass : 'infoControl',\n        template : tpl,\n        getData : function(infoControl, data){\n            var markupNs = infoControl.getMarkupNamespace();\n            data.markup = util.addMarkupNamespace(infoControl.markup, markupNs ? markupNs.name : '');\n            return data;\n        }\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responseDeclaration', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"/>\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.defaultValue)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.correctResponse)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.MAP_RESPONSE), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.MAP_RESPONSE_POINT), {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </responseDeclaration>\";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <defaultValue>\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.defaultValue), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </defaultValue>\\n    \";\n  return buffer;\n  }\nfunction program5(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \"\\n        <value>\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"</value>\\n        \";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <correctResponse>\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.correctResponse), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </correctResponse>\\n    \";\n  return buffer;\n  }\nfunction program8(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \"\\n        <value>\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"</value>\";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.mapEntries), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<mapping\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mappingAttributes), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mapEntries), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </mapping>\\n        \";\n  return buffer;\n  }\nfunction program12(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \" \"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n            <mapEntry mapKey=\\\"\"\n    + escapeExpression(((stack1 = (data == null || data === false ? data : data.key)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" mappedValue=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\" caseSensitive=\\\"false\\\"/>\";\n  return buffer;\n  }\n\nfunction program16(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.mapEntries), {hash:{},inverse:self.noop,fn:self.program(17, program17, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program17(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"<areaMapping\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mappingAttributes), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.mapEntries), {hash:{},inverse:self.noop,fn:self.program(18, program18, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </areaMapping>\\n        \";\n  return buffer;\n  }\nfunction program18(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <areaMapEntry shape=\\\"\";\n  if (helper = helpers.shape) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.shape); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" coords=\\\"\";\n  if (helper = helpers.coords) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.coords); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" mappedValue=\\\"\";\n  if (helper = helpers.mappedValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.mappedValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\";\n  return buffer;\n  }\n\n  buffer += \"<responseDeclaration \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.empty), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/ResponseDeclaration',['lodash', 'tpl!taoQtiItem/qtiXmlRenderer/tpl/responseDeclaration'], function(_, tpl){\n    return {\n        qtiClass : 'responseDeclaration',\n        template : tpl,\n        getData : function(responseDeclaration, data){\n            var defaultData = {\n                empty : !_.size(responseDeclaration.mapEntries) && !_.size(responseDeclaration.correctResponse) && !_.size(responseDeclaration.defaultValue),\n                correctResponse : _.values(responseDeclaration.correctResponse),\n                MATCH_CORRECT : (responseDeclaration.template === \"http://www.imsglobal.org/question/qti_v2p1/rptemplates/match_correct\"),\n                MAP_RESPONSE : (responseDeclaration.template === \"http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response\"),\n                MAP_RESPONSE_POINT : (responseDeclaration.template === \"http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response_point\"),\n                mappingAttributes : responseDeclaration.mappingAttributes,\n                mapEntries : responseDeclaration.mapEntries\n            };\n            return _.merge(defaultData, data || {});\n        }\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responseProcessing', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  if (helper = helpers.xml) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.xml); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<responseProcessing template=\\\"\";\n  if (helper = helpers.template) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.template); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<responseProcessing>\\n    \";\n  options={hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}\n  if (helper = helpers.responseRules) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.responseRules); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.responseRules) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  options={hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}\n  if (helper = helpers.feedbackRules) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.feedbackRules); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.feedbackRules) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</responseProcessing>\";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.custom), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.template), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.templateDriven), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/match_correct', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <match>\\n            <variable identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            <correct identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n        </match>\\n        <setOutcomeValue identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <sum>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n                <baseValue baseType=\\\"integer\\\">1</baseValue>\\n            </sum>\\n        </setOutcomeValue>\\n    </responseIf>\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <not>\\n            <isNull>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            </isNull>\\n        </not>\\n        <setOutcomeValue identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <sum>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n                <mapResponse identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            </sum>\\n        </setOutcomeValue>\\n    </responseIf>\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response_point', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <not>\\n            <isNull>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            </isNull>\\n        </not>\\n        <setOutcomeValue identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <sum>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.outcomeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcomeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n                <mapResponsePoint identifier=\\\"\";\n  if (helper = helpers.responseIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.responseIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            </sum>\\n        </setOutcomeValue>\\n    </responseIf>\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/ResponseProcessing',[\n    'lodash',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responseProcessing',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/match_correct',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/map_response_point'\n], function(_, tpl, correctTpl, mapTpl, mapPointTpl){\n    \n    var _renderInteractionRp = function(interaction){\n        var ret = '', response = interaction.getResponseDeclaration();\n        if(response.template){\n            ret = _renderRpTpl(response.template, {\n                responseIdentifier : response.id(),\n                outcomeIdentifier : 'SCORE'\n            });\n        }\n        return ret;\n    };\n\n    var _renderRpTpl = function(rpTpl, data){\n\n        var ret = '';\n\n        switch(rpTpl){\n            case 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/match_correct':\n            case 'MATCH_CORRECT':\n                ret = correctTpl(data);\n                break;\n            case 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response':\n            case 'MAP_RESPONSE':\n                ret = mapTpl(data);\n                break;\n            case 'http://www.imsglobal.org/question/qti_v2p1/rptemplates/map_response_point':\n            case 'MAP_RESPONSE_POINT':\n                ret = mapPointTpl(data);\n                break;\n            default:\n                throw new Error('unknown rp template : ' + rpTpl)\n        }\n\n        return ret;\n    };\n    \n    var _renderFeedbackRules = function(renderer, response){\n        var ret = [];\n        _.each(response.getFeedbackRules(), function(rule){\n            ret.push(rule.render(renderer));\n        });\n        return ret;\n    };\n    \n    return {\n        qtiClass : 'responseProcessing',\n        template : tpl,\n        getData : function(responseProcessing, data){\n            \n            var defaultData = {},\n                _renderer = this;\n            \n            switch(responseProcessing.processingType){\n                case 'custom':\n                    defaultData.custom = true;\n                    defaultData.xml = responseProcessing.xml;\n                    break;\n                case 'templateDriven':\n                    var interactions = responseProcessing.getRelatedItem().getInteractions();\n                    if(interactions.length === 1){\n                        var response = interactions[0].getResponseDeclaration();\n                        if(!_.size(response.getFeedbackRules())){\n                            defaultData.template = response.template;\n                            break;\n                        }\n                    }\n                    defaultData.templateDriven = true;\n                    defaultData.responseRules = [];\n                    _.each(interactions, function(interaction){\n                        defaultData.responseRules.push(_renderInteractionRp(interaction));\n                    });\n                    \n                    defaultData.feedbackRules = [];\n                    _.each(interactions, function(interaction){\n                        defaultData.feedbackRules = _.union(defaultData.feedbackRules, _renderFeedbackRules(_renderer, interaction.getResponseDeclaration()));\n                    });\n                    \n                    break;\n            }\n            \n            return _.merge(data || {}, defaultData);\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/RubricBlock',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element', 'lodash'], function(tpl, _){\n    return {\n        qtiClass : 'rubricBlock',\n        template : tpl,\n        getData : function(rubricBlock, data){\n            var newData = {\n                view : data.attributes.view ? _.values(data.attributes.view).join(' ') : ''\n            };\n            return _.merge(data || {}, newData);\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/Stylesheet',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'stylesheet',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/AssociableHotspot',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'associableHotspot',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/Gap',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'gap',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/choices/gapImg', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\n  buffer += \"<gapImg\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    \";\n  if (helper = helpers.renderedObject) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.renderedObject); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</gapImg>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/GapImg',['tpl!taoQtiItem/qtiXmlRenderer/tpl/choices/gapImg'], function(tpl){\n    return {\n        qtiClass : 'gapImg',\n        template : tpl,\n        getData:function(gapImg, data){\n            data.renderedObject = gapImg.object.render(this);\n            return data;\n        }\n    };\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/GapText',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'gapText',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/HotspotChoice',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'hotspotChoice',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/Hottext',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'hottext',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/InlineChoice',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'inlineChoice',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleAssociableChoice',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'simpleAssociableChoice',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/choices/SimpleChoice',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'simpleChoice',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/feedbacks/ModalFeedback',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'modalFeedback',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.object) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.object); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program7(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program9(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.object), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.body), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/AssociateInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'associateInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/ChoiceInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'choiceInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/EndAttemptInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'endAttemptInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/ExtendedTextInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'extendedTextInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/GapMatchInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'gapMatchInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicAssociateInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'graphicAssociateInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/graphicGapMatchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, functionType=\"function\", self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<graphicGapMatchInteraction\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  if (helper = helpers.object) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.object); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.gapImgs) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.gapImgs); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.gapImgs) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</graphicGapMatchInteraction>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicGapMatchInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/graphicGapMatchInteraction'], function(tpl){\n    return {\n        qtiClass : 'graphicGapMatchInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/GraphicOrderInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'graphicOrderInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/HotspotInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'hotspotInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/hottextInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.body), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/HottextInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/hottextInteraction'], function(tpl){\n    return {\n        qtiClass : 'hottextInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/InlineChoiceInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'inlineChoiceInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/matchInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <simpleMatchSet>\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.matchSet1) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.matchSet1); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.matchSet1) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </simpleMatchSet>\\n    <simpleMatchSet>\\n        \";\n  options={hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}\n  if (helper = helpers.matchSet2) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.matchSet2); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.matchSet2) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </simpleMatchSet>\\n</\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/MatchInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/matchInteraction'], function(tpl){\n    return {\n        qtiClass : 'matchInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/mediaInteraction', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \" \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var stack1;\n  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\nfunction program9(depth0,data) {\n  \n  var stack1, helper;\n  if (helper = helpers.body) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.body); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  }\n\n  buffer += \"<\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.attributes), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.prompt), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n    <object \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.object)),stack1 == null || stack1 === false ? stack1 : stack1.attributes), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" />\";\n  options={hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data}\n  if (helper = helpers.choices) { stack1 = helper.call(depth0, options); }\n  else { helper = (depth0 && depth0.choices); stack1 = typeof helper === functionType ? helper.call(depth0, options) : helper; }\n  if (!helpers.choices) { stack1 = blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data}); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.body), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\r\\n</\";\n  if (helper = helpers.tag) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.tag); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/MediaInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/mediaInteraction'], function(tpl){\n    return {\n        qtiClass : 'mediaInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/OrderInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'orderInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/main', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n                <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth1 && depth1.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"lib id=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\"/>\\n                \";\n  return buffer;\n  }\n\n  buffer += \"<customInteraction \";\n  stack1 = (helper = helpers.join || (depth0 && depth0.join),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options) : helperMissing.call(depth0, \"join\", (depth0 && depth0.attributes), \"=\", \" \", \"\\\"\", options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \">\\n    <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"portableCustomInteraction customInteractionTypeIdentifier=\\\"\";\n  if (helper = helpers.typeIdentifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.typeIdentifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" hook=\\\"\";\n  if (helper = helpers.entryPoint) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.entryPoint); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n\\n        <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"responseSchema href=\\\"http://imsglobal.org/schema/json/v1.0/response.json\\\"/>\\n\\n        <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"resources location=\\\"http://imsglobal.org/pci/1.0.15/sharedLibraries.xml\\\">\\n            <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"libraries>\\n                \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.libraries), {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"libraries>\\n        </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"resources>\\n\\n        \";\n  stack1 = (helper = helpers.portableElementProperties || (depth0 && depth0.portableElementProperties),options={hash:{},data:data},helper ? helper.call(depth0, (depth0 && depth0.properties), ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci), options) : helperMissing.call(depth0, \"portableElementProperties\", (depth0 && depth0.properties), ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci), options));\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n        <\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"markup>\\n            \";\n  if (helper = helpers.markup) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.markup); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"markup>\\n\\n    </\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.ns)),stack1 == null || stack1 === false ? stack1 : stack1.pci)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"portableCustomInteraction>\\n</customInteraction>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/PortableCustomInteraction',[\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/portableCustomInteraction/main',\n    'taoQtiItem/qtiItem/helper/util',\n    'taoQtiItem/qtiXmlRenderer/helper/portableElementTpl'\n], function(tpl, util){\n\n    return {\n        qtiClass : 'customInteraction',\n        template : tpl,\n        getData : function(interaction, data){\n            var markupNs = interaction.getMarkupNamespace();\n            data.markup = util.addMarkupNamespace(interaction.markup, markupNs ? markupNs.name : '');\n            return data;\n        }\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/Prompt',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'prompt',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/SelectPointInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'selectPointInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/SliderInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'sliderInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/TextEntryInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/element'], function(tpl){\n    return {\n        qtiClass : 'textEntryInteraction',\n        template : tpl\n    };\n});\n","define('taoQtiItem/qtiXmlRenderer/renderers/interactions/UploadInteraction',['tpl!taoQtiItem/qtiXmlRenderer/tpl/interactions/blockInteraction'], function(tpl){\n    return {\n        qtiClass : 'uploadInteraction',\n        template : tpl\n    };\n});\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, helper, functionType=\"function\";\n\n\n  if (helper = helpers.rule) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.rule); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_condition', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.mapResponsePoint), {hash:{},inverse:self.program(4, program4, data),fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <mapResponsePoint identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <mapResponse identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <variable identifier=\\\"\";\n  if (helper = helpers.outcome) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.outcome); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <responseElse>\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseElse>\";\n  return buffer;\n  }\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <\";\n  if (helper = helpers.condition) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.condition); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.response), {hash:{},inverse:self.program(6, program6, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            <baseValue baseType=\\\"float\\\">\";\n  if (helper = helpers.comparedValue) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.comparedValue); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</baseValue>\\n        </\";\n  if (helper = helpers.condition) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.condition); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \">\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.then)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseIf>\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else']), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_correct', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <responseElse>\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseElse>\";\n  return buffer;\n  }\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <match>\\n            <variable identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            <correct identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n        </match>\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.then)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseIf>\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else']), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_incorrect', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <responseElse>\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseElse>\";\n  return buffer;\n  }\n\n  buffer += \"<responseCondition>\\n    <responseIf>\\n        <not>\\n            <match>\\n                <variable identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n                <correct identifier=\\\"\";\n  if (helper = helpers.response) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.response); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\\n            </match>\\n        </not>\\n        <setOutcomeValue identifier=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.outcome)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\">\\n            <baseValue baseType=\\\"identifier\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1.then)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</baseValue>\\n        </setOutcomeValue>\\n    </responseIf>\";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.feedback)),stack1 == null || stack1 === false ? stack1 : stack1['else']), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</responseCondition>\";\n  return buffer;\n  });\n});\n\n","define('taoQtiItem/qtiXmlRenderer/renderers/responses/SimpleFeedbackRule',[\n    'lodash',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_condition',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_correct',\n    'tpl!taoQtiItem/qtiXmlRenderer/tpl/responses/rule_incorrect'\n], function(_, tpl, tplCondition, tplCorrect, tplIncorrect){\n    return {\n        qtiClass : '_simpleFeedbackRule',\n        template : tpl,\n        getData : function(rule, data){\n\n            var template = null, ruleXml = '';\n\n            var tplData = {\n                response : rule.comparedOutcome.id(),\n                feedback : {\n                    'outcome' : rule.feedbackOutcome.id(),\n                    'then' : rule.feedbackThen.id(),\n                    'else' : rule.feedbackElse ? rule.feedbackElse.id() : ''\n                }\n            };\n\n            switch(rule.condition){\n                case 'correct':\n                    template = tplCorrect;\n                    break;\n                case 'incorrect':\n                    template = tplIncorrect;\n                    break;\n                case 'lt':\n                case 'lte':\n                case 'equal':\n                case 'gte':\n                case 'gt':\n                    template = tplCondition;\n                    tplData.condition = rule.condition;\n                    tplData.comparedValue = rule.comparedValue;\n                    break;\n                default:\n                    throw new Error('unknown condition in simple feedback rule rendering : '+rule.condition);\n            }\n\n            if(template){\n                ruleXml = template(tplData);\n            }\n\n            return _.merge(data || {}, {rule : ruleXml});\n        }\n    };\n});\n\n"]}